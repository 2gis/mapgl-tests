(()=>{"use strict";var t={835:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".interpolate-editor path {\n    fill: none;\n}\n.interpolate-editor circle {\n    fill: white;\n    stroke: #aaa;\n    cursor: move;\n}\n.interpolate-editor .points-menu g {\n    opacity: 0.2;\n}\n.interpolate-editor .points-menu g.active {\n    cursor: pointer;\n    opacity: 1;\n}\n.interpolate-editor .points-menu line {\n    stroke: #777;\n    stroke-width: 3;\n}\n.interpolate-editor .points-menu rect {\n    fill: white;\n}\n",""]);const l=r},5618:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl-hover {\n    cursor: pointer;\n}\n\n.mapgl-dragging {\n    cursor: grabbing;\n}\n\n.mapgl-rotating {\n    cursor: move;\n}\n",""]);const l=r},3103:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_lxLX8k02JhUZQLnJt5Mm {\n    font-family: Helvetica, Arial, sans-serif !important;\n    font-size: 8px !important;\n    line-height: 8px !important;\n    text-align: right !important;\n    display: flex;\n    align-items: flex-start;\n    color: #6d7173 !important;\n}\n\n.mapgl_AsSWrna6OS9VEoYItIZV {\n    display: block;\n}\n\na.mapgl_N4E6A6Wp5fYeXBf2QGWt {\n    color: #6d7173 !important;\n    text-decoration: none !important;\n}\n\na.mapgl_N4E6A6Wp5fYeXBf2QGWt:hover {\n    color: #929292 !important;\n}\n",""]),r.locals={container:"mapgl_lxLX8k02JhUZQLnJt5Mm",text:"mapgl_AsSWrna6OS9VEoYItIZV",link:"mapgl_N4E6A6Wp5fYeXBf2QGWt"};const l=r},3274:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_SqprqBDt0m3ck8ImwnZ0 {\n    position: absolute;\n    pointer-events: none;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n}\n\n.mapgl_zXpm2Oitx3qOyLXwyVKj {\n    position: absolute;\n    display: flex;\n    z-index: 50;\n    pointer-events: none;\n    width: 100%;\n    height: 100%;\n}\n\n.mapgl_zXpm2Oitx3qOyLXwyVKj > div > * {\n    pointer-events: auto;\n}\n\n.mapgl_r_oD6okoyw2O0sKMERju {\n    flex-direction: column;\n    align-items: flex-start;\n}\n\n.mapgl_FmkgHxvqVart7hWj1dIm {\n    flex-direction: row;\n    justify-content: center;\n    align-items: flex-start;\n}\n\n.mapgl_OS0i93oEEcYSyKRHurat {\n    flex-direction: column;\n    align-items: flex-end;\n}\n\n.mapgl_BIfihGR7X9awnUFk62BQ {\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n}\n\n.mapgl_vpFke4npOo1b8whqwKPv {\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-end;\n}\n\n.mapgl_gLybMsoqNs2Phzvi6hS5 {\n    flex-direction: column-reverse;\n    align-items: flex-start;\n}\n\n.mapgl_GbiZTwfDOnlyI6flVbL_ {\n    flex-direction: row;\n    justify-content: center;\n    align-items: flex-end;\n}\n\n.mapgl_YoIqRTD9ccmcm_A81adk {\n    flex-direction: column-reverse;\n    align-items: flex-end;\n}\n\n.mapgl_r_oD6okoyw2O0sKMERju > div + div,\n.mapgl_OS0i93oEEcYSyKRHurat > div + div,\n.mapgl_BIfihGR7X9awnUFk62BQ > div + div,\n.mapgl_vpFke4npOo1b8whqwKPv > div + div {\n    margin-top: 10px;\n}\n\n.mapgl_gLybMsoqNs2Phzvi6hS5 > div + div,\n.mapgl_YoIqRTD9ccmcm_A81adk > div + div {\n    margin-bottom: 10px;\n}\n\n.mapgl_FmkgHxvqVart7hWj1dIm > div + div,\n.mapgl_GbiZTwfDOnlyI6flVbL_ > div + div {\n    margin-left: 10px;\n}\n",""]),r.locals={controlPane:"mapgl_SqprqBDt0m3ck8ImwnZ0",container:"mapgl_zXpm2Oitx3qOyLXwyVKj",topLeft:"mapgl_r_oD6okoyw2O0sKMERju",topCenter:"mapgl_FmkgHxvqVart7hWj1dIm",topRight:"mapgl_OS0i93oEEcYSyKRHurat",centerLeft:"mapgl_BIfihGR7X9awnUFk62BQ",centerRight:"mapgl_vpFke4npOo1b8whqwKPv",bottomLeft:"mapgl_gLybMsoqNs2Phzvi6hS5",bottomCenter:"mapgl_GbiZTwfDOnlyI6flVbL_",bottomRight:"mapgl_YoIqRTD9ccmcm_A81adk"};const l=r},4306:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_T5RQQ2NOfnY3_e00os8n {\n    display: block !important;\n}\n\n.mapgl_T5RQQ2NOfnY3_e00os8n .mapgl_BhGb3GmPN9rfS36yYYbH {\n    height: 20px !important;\n    display: block !important;\n}\n",""]),r.locals={container:"mapgl_T5RQQ2NOfnY3_e00os8n",logos:"mapgl_BhGb3GmPN9rfS36yYYbH"};const l=r},1704:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_ByGR_EaTxrFwgYplL9Rn {\n    position: relative;\n}\n\n.mapgl_rV7SBEVklXHee7q0ro4A {\n    display: flex;\n    max-height: 40vh;\n    background: #ffffff;\n    width: 32px;\n    overflow: hidden;\n    border-radius: 4px;\n    box-shadow: 0 1px 3px 0 rgba(38, 38, 38, 0.5);\n}\n\n.mapgl_eTkkBoRhhRCs7jEwQ2Wb {\n    width: 100%;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -moz-padding-end: 17px;\n    -webkit-padding-end: 17px;\n    -webkit-margin-end: -17px;\n}\n\n.mapgl_gnVYSnZbzDyDuJqZz3mJ {\n    display: flex;\n    flex-direction: column-reverse;\n}\n\n.mapgl_zsd_0yR5qXs0D4rXioaV {\n    all: revert;\n    padding: 0;\n    border: none;\n    background: #ffffff;\n    height: 32px;\n    width: 32px;\n    color: #262626;\n    cursor: pointer;\n    border-bottom: 1px solid #e6e6e6;\n    box-sizing: border-box;\n    flex-shrink: 0;\n}\n.mapgl_zsd_0yR5qXs0D4rXioaV:focus {\n    outline: 0;\n}\n.mapgl_zsd_0yR5qXs0D4rXioaV:first-child {\n    border-bottom: none;\n}\n.mapgl_zsd_0yR5qXs0D4rXioaV:hover {\n    color: rgba(38, 38, 38, 0.7);\n}\n.mapgl_zsd_0yR5qXs0D4rXioaV:active {\n    color: #028eff;\n}\n.mapgl_zsd_0yR5qXs0D4rXioaV:disabled {\n    background: #f2f2f2;\n    color: #929292;\n    cursor: default;\n}\n\n.mapgl_IpWyhNkbWQBqP479eDE2 {\n    font-size: 18px;\n    line-height: 32px;\n    font-weight: 400;\n    overflow-wrap: break-word;\n\n    position: relative;\n    text-align: center;\n    height: 100%;\n}\n\n.mapgl_yUGrJifDT7VmwlUOKi8_:after {\n    content: '';\n    position: absolute;\n    top: 4px;\n    bottom: 4px;\n    width: 4px;\n    height: 4px;\n    border-radius: 50%;\n    background: #028eff;\n}\n",""]),r.locals={root:"mapgl_ByGR_EaTxrFwgYplL9Rn",container:"mapgl_rV7SBEVklXHee7q0ro4A",scroller:"mapgl_eTkkBoRhhRCs7jEwQ2Wb",content:"mapgl_gnVYSnZbzDyDuJqZz3mJ",control:"mapgl_zsd_0yR5qXs0D4rXioaV",label:"mapgl_IpWyhNkbWQBqP479eDE2",_hasResult:"mapgl_yUGrJifDT7VmwlUOKi8_"};const l=r},6032:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_y5CSWkmzFZelEK3XsNPI {\n    background: rgba(255, 255, 255, 0.68);\n    border-width: 0 1px 1px 1px;\n    border-color: #7a7a7a;\n    border-style: solid;\n    border-radius: 0;\n    min-width: 64px;\n    height: 16px;\n    overflow: hidden;\n    pointer-events: none !important;\n}\n\n.mapgl_jEDrEoj7PBYIc0hBFCRq {\n    min-width: 50px;\n    height: 12px;\n    margin-top: 2px;\n    margin-left: 6px;\n    font-family: Helvetica, Arial, sans-serif !important;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 9px;\n    line-height: 12px;\n\n    color: #262626;\n}\n",""]),r.locals={root:"mapgl_y5CSWkmzFZelEK3XsNPI",label:"mapgl_jEDrEoj7PBYIc0hBFCRq"};const l=r},4928:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_XiKtyzV1PZ9N9z7NbBH0 {\n    background: #fff;\n    box-shadow: 0 1px 3px 0 rgba(38, 38, 38, 0.5);\n    border-radius: 4px;\n    width: 32px;\n    overflow: hidden;\n}\n\n.mapgl_TCECw1gCo4pPgxN8WlHv {\n    all: revert;\n    padding: 0;\n    outline: 0;\n    border: none;\n    cursor: pointer;\n    box-sizing: border-box;\n    font-size: 18px;\n    font-weight: 400;\n    width: 32px;\n    height: 32px;\n    color: #262626;\n    background: #fff;\n}\n\n.mapgl_aifLu_eH4oBoq5TCFEl1:hover {\n    opacity: 0.7;\n}\n\n.mapgl_AZeLf0JO9BdLfzixjszM {\n    background: #299400;\n    color: #fff;\n}\n.mapgl_g9fon0BTtGdnOX4Ce0gE {\n    background: #ffb81c;\n    color: #fff;\n}\n.mapgl_GDc542cVDcz8I8tKJtvz {\n    background: #fe5000;\n    color: #fff;\n}\n\n.mapgl_AZeLf0JO9BdLfzixjszM:hover,\n.mapgl_g9fon0BTtGdnOX4Ce0gE:hover,\n.mapgl_GDc542cVDcz8I8tKJtvz:hover {\n    color: rgba(38, 38, 38, 0.7);\n}\n",""]),r.locals={root:"mapgl_XiKtyzV1PZ9N9z7NbBH0",button:"mapgl_TCECw1gCo4pPgxN8WlHv",none:"mapgl_aifLu_eH4oBoq5TCFEl1",easy:"mapgl_AZeLf0JO9BdLfzixjszM",medium:"mapgl_g9fon0BTtGdnOX4Ce0gE",hard:"mapgl_GDc542cVDcz8I8tKJtvz"};const l=r},8585:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_RyvsmCnoVe7ui2MClLMS {\n    width: 32px;\n    box-shadow: 0 1px 3px 0 rgba(38, 38, 38, 0.5);\n    border-radius: 4px;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    background: #fff;\n}\n\n.mapgl_Tdw0Vs7iQuaknNHHD21k {\n    all: revert;\n\n    padding: 0;\n    outline: 0;\n    border: none;\n    cursor: pointer;\n\n    background: #fff;\n    width: 32px;\n    height: 32px;\n    color: #262626;\n    box-sizing: border-box;\n}\n\n.mapgl_Tdw0Vs7iQuaknNHHD21k:hover {\n    opacity: 0.7;\n}\n\n.mapgl_Tdw0Vs7iQuaknNHHD21k:active {\n    color: #028eff;\n}\n\n.mapgl_Tdw0Vs7iQuaknNHHD21k:disabled {\n    background: #f2f2f2;\n    color: #929292;\n    cursor: default;\n}\n\n.mapgl_JwF7YmgOItTjpjwxORCk {\n    border-bottom: 1px solid #e6e6e6;\n}\n\n.mapgl_Tvr6BDuVyr8143cFJ4nJ {\n    border-bottom: none;\n}\n",""]),r.locals={root:"mapgl_RyvsmCnoVe7ui2MClLMS",button:"mapgl_Tdw0Vs7iQuaknNHHD21k",zoomIn:"mapgl_JwF7YmgOItTjpjwxORCk",zoomOut:"mapgl_Tvr6BDuVyr8143cFJ4nJ"};const l=r},438:(t,e,o)=>{o.d(e,{Z:()=>l});var i=o(8276),n=o.n(i),a=o(5368),r=o.n(a)()(n());r.push([t.id,".mapgl_Zqe1f2Ik8_MdehkwZiwo {\n    pointer-events: none;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 10px;\n    background-color: rgba(0, 0, 0, 0.2);\n    cursor: default;\n}\n\n.mapgl_RBLYLi7mJFgKIKMPLvv_ {\n    text-align: center;\n    font-size: 24px;\n    font-family: Helvetica, Arial, sans-serif;\n    font-weight: bold;\n    color: white;\n}\n",""]),r.locals={wrap:"mapgl_Zqe1f2Ik8_MdehkwZiwo",container:"mapgl_RBLYLi7mJFgKIKMPLvv_"};const l=r},3379:t=>{var e=[];function o(t){for(var o=-1,i=0;i<e.length;i++)if(e[i].identifier===t){o=i;break}return o}function i(t,i){for(var a={},r=[],l=0;l<t.length;l++){var s=t[l],c=i.base?s[0]+i.base:s[0],d=a[c]||0,m="".concat(c," ").concat(d);a[c]=d+1;var h=o(m),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var u=n(p,i);i.byIndex=l,e.splice(l,0,{identifier:m,updater:u,references:1})}r.push(m)}return r}function n(t,e){var o=e.domAPI(e);o.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;o.update(t=e)}else o.remove()}}t.exports=function(t,n){var a=i(t=t||[],n=n||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var l=o(a[r]);e[l].references--}for(var s=i(t,n),c=0;c<a.length;c++){var d=o(a[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=s}}},569:t=>{var e={};t.exports=function(t,o){var i=function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(o)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,o)=>{t.exports=function(t){var e=o.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(o){!function(t,e,o){var i="";o.supports&&(i+="@supports (".concat(o.supports,") {")),o.media&&(i+="@media ".concat(o.media," {"));var n=void 0!==o.layer;n&&(i+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),i+=o.css,n&&(i+="}"),o.media&&(i+="}"),o.supports&&(i+="}");var a=o.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,o)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8581:(t,e,o)=>{var i=o(7731);function n(t,e){var o=t.__state.conversionName.toString(),i=Math.round(t.r),n=Math.round(t.g),a=Math.round(t.b),r=t.a,l=Math.round(t.h),s=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===o||"SIX_CHAR_HEX"===o){for(var d=t.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}return"CSS_RGB"===o?"rgb("+i+","+n+","+a+")":"CSS_RGBA"===o?"rgba("+i+","+n+","+a+","+r+")":"HEX"===o?"0x"+t.hex.toString(16):"RGB_ARRAY"===o?"["+i+","+n+","+a+"]":"RGBA_ARRAY"===o?"["+i+","+n+","+a+","+r+"]":"RGB_OBJ"===o?"{r:"+i+",g:"+n+",b:"+a+"}":"RGBA_OBJ"===o?"{r:"+i+",g:"+n+",b:"+a+",a:"+r+"}":"HSV_OBJ"===o?"{h:"+l+",s:"+s+",v:"+c+"}":"HSVA_OBJ"===o?"{h:"+l+",s:"+s+",v:"+c+",a:"+r+"}":"unknown format"}var a=Array.prototype.forEach,r=Array.prototype.slice,l={BREAK:{},extend:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(o){this.isUndefined(e[o])||(t[o]=e[o])}.bind(this))}),this),t},defaults:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(o){this.isUndefined(t[o])&&(t[o]=e[o])}.bind(this))}),this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),o=t.length-1;o>=0;o--)e=[t[o].apply(this,e)];return e[0]}},each:function(t,e,o){if(t)if(a&&t.forEach&&t.forEach===a)t.forEach(e,o);else if(t.length===t.length+0){var i,n=void 0;for(n=0,i=t.length;n<i;n++)if(n in t&&e.call(o,t[n],n)===this.BREAK)return}else for(var r in t)if(e.call(o,t[r],r)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,o){var i=void 0;return function(){var n=this,a=arguments;function r(){i=null,o||t.apply(n,a)}var l=o||!i;clearTimeout(i),i=setTimeout(r,e),l&&t.apply(n,a)}},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:l.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:n},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:n},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:n},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:n}}},{litmus:l.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:l.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:l.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(l.isNumber(t.r)&&l.isNumber(t.g)&&l.isNumber(t.b)&&l.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(l.isNumber(t.r)&&l.isNumber(t.g)&&l.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(l.isNumber(t.h)&&l.isNumber(t.s)&&l.isNumber(t.v)&&l.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(l.isNumber(t.h)&&l.isNumber(t.s)&&l.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],c=void 0,d=void 0,m=function(){d=!1;var t=arguments.length>1?l.toArray(arguments):arguments[0];return l.each(s,(function(e){if(e.litmus(t))return l.each(e.conversions,(function(e,o){if(c=e.read(t),!1===d&&!1!==c)return d=c,c.conversionName=o,c.conversion=e,l.BREAK})),l.BREAK})),d},h=void 0,p={hsv_to_rgb:function(t,e,o){var i=Math.floor(t/60)%6,n=t/60-Math.floor(t/60),a=o*(1-e),r=o*(1-n*e),l=o*(1-(1-n)*e),s=[[o,l,a],[r,o,a],[a,o,l],[a,r,o],[l,a,o],[o,a,r]][i];return{r:255*s[0],g:255*s[1],b:255*s[2]}},rgb_to_hsv:function(t,e,o){var i=Math.min(t,e,o),n=Math.max(t,e,o),a=n-i,r=void 0;return 0===n?{h:NaN,s:0,v:0}:(r=t===n?(e-o)/a:e===n?2+(o-t)/a:4+(t-e)/a,(r/=6)<0&&(r+=1),{h:360*r,s:a/n,v:n/255})},rgb_to_hex:function(t,e,o){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,o)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,o){return o<<(h=8*e)|t&~(255<<h)}},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),f=function t(e,o,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,o);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,o,i)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(i):void 0},y=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},b=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},x=function(){function t(){if(g(this,t),this.__state=m.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return _(t,[{key:"toString",value:function(){return n(this)}},{key:"toHexString",value:function(){return n(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function v(t,e,o){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||x.recalculateRGB(this,e,o),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(x.recalculateRGB(this,e,o),this.__state.space="RGB"),this.__state[e]=t}})}function w(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||x.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(x.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}x.recalculateRGB=function(t,e,o){if("HEX"===t.__state.space)t.__state[e]=p.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");l.extend(t.__state,p.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},x.recalculateHSV=function(t){var e=p.rgb_to_hsv(t.r,t.g,t.b);l.extend(t.__state,{s:e.s,v:e.v}),l.isNaN(e.h)?l.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},x.COMPONENTS=["r","g","b","h","s","v","hex","a"],v(x.prototype,"r",2),v(x.prototype,"g",1),v(x.prototype,"b",0),w(x.prototype,"h"),w(x.prototype,"s"),w(x.prototype,"v"),Object.defineProperty(x.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(x.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=p.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var z=function(){function t(e,o){g(this,t),this.initialValue=e[o],this.domElement=document.createElement("div"),this.object=e,this.property=o,this.__onChange=void 0,this.__onFinishChange=void 0}return _(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),F={};l.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){l.each(t,(function(t){F[t]=e}))}));var S=/(\d+(\.\d+)?)px/;function C(t){if("0"===t||l.isUndefined(t))return 0;var e=t.match(S);return l.isNull(e)?0:parseFloat(e[1])}var M={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,o){var i=o,n=e;l.isUndefined(n)&&(n=!0),l.isUndefined(i)&&(i=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,o,i){var n=o||{},a=F[e];if(!a)throw new Error("Event type "+e+" not supported.");var r=document.createEvent(a);switch(a){case"MouseEvents":var s=n.x||n.clientX||0,c=n.y||n.clientY||0;r.initMouseEvent(e,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,s,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var d=r.initKeyboardEvent||r.initKeyEvent;l.defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(e,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:r.initEvent(e,n.bubbles||!1,n.cancelable||!0)}l.defaults(r,i),t.dispatchEvent(r)},bind:function(t,e,o,i){var n=i||!1;return t.addEventListener?t.addEventListener(e,o,n):t.attachEvent&&t.attachEvent("on"+e,o),M},unbind:function(t,e,o,i){var n=i||!1;return t.removeEventListener?t.removeEventListener(e,o,n):t.detachEvent&&t.detachEvent("on"+e,o),M},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var o=t.className.split(/ +/);-1===o.indexOf(e)&&(o.push(e),t.className=o.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return M},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var o=t.className.split(/ +/),i=o.indexOf(e);-1!==i&&(o.splice(i,1),t.className=o.join(" "))}else t.className=void 0;return M},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return C(e["border-left-width"])+C(e["border-right-width"])+C(e["padding-left"])+C(e["padding-right"])+C(e.width)},getHeight:function(t){var e=getComputedStyle(t);return C(e["border-top-width"])+C(e["border-bottom-width"])+C(e["padding-top"])+C(e["padding-bottom"])+C(e.height)},getOffset:function(t){var e=t,o={left:0,top:0};if(e.offsetParent)do{o.left+=e.offsetLeft,o.top+=e.offsetTop,e=e.offsetParent}while(e);return o},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},P=function(t){function e(t,o){g(this,e);var i=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o)),n=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),M.bind(i.__checkbox,"change",(function(){n.setValue(!n.__prev)}),!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return y(e,t),_(e,[{key:"setValue",value:function(t){var o=f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),o}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(z),I=function(t){function e(t,o,i){g(this,e);var n=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o)),a=i,r=n;if(n.__select=document.createElement("select"),l.isArray(a)){var s={};l.each(a,(function(t){s[t]=t})),a=s}return l.each(a,(function(t,e){var o=document.createElement("option");o.innerHTML=e,o.setAttribute("value",t),r.__select.appendChild(o)})),n.updateDisplay(),M.bind(n.__select,"change",(function(){var t=this.options[this.selectedIndex].value;r.setValue(t)})),n.domElement.appendChild(n.__select),n}return y(e,t),_(e,[{key:"setValue",value:function(t){var o=f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),o}},{key:"updateDisplay",value:function(){return M.isActive(this.__select)?this:(this.__select.value=this.getValue(),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(z),L=function(t){function e(t,o){g(this,e);var i=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o)),n=i;function a(){n.setValue(n.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),M.bind(i.__input,"keyup",a),M.bind(i.__input,"change",a),M.bind(i.__input,"blur",(function(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())})),M.bind(i.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return y(e,t),_(e,[{key:"updateDisplay",value:function(){return M.isActive(this.__input)||(this.__input.value=this.getValue()),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(z);function k(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var A=function(t){function e(t,o,i){g(this,e);var n=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o)),a=i||{};return n.__min=a.min,n.__max=a.max,n.__step=a.step,l.isUndefined(n.__step)?0===n.initialValue?n.__impliedStep=1:n.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(n.initialValue))/Math.LN10))/10:n.__impliedStep=n.__step,n.__precision=k(n.__impliedStep),n}return y(e,t),_(e,[{key:"setValue",value:function(t){var o=t;return void 0!==this.__min&&o<this.__min?o=this.__min:void 0!==this.__max&&o>this.__max&&(o=this.__max),void 0!==this.__step&&o%this.__step!=0&&(o=Math.round(o/this.__step)*this.__step),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,o)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=k(t),this}}]),e}(z);var j=function(t){function e(t,o,i){g(this,e);var n=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o,i));n.__truncationSuspended=!1;var a=n,r=void 0;function s(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(t){var e=r-t.clientY;a.setValue(a.getValue()+e*a.__impliedStep),r=t.clientY}function d(){M.unbind(window,"mousemove",c),M.unbind(window,"mouseup",d),s()}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),M.bind(n.__input,"change",(function(){var t=parseFloat(a.__input.value);l.isNaN(t)||a.setValue(t)})),M.bind(n.__input,"blur",(function(){s()})),M.bind(n.__input,"mousedown",(function(t){M.bind(window,"mousemove",c),M.bind(window,"mouseup",d),r=t.clientY})),M.bind(n.__input,"keydown",(function(t){13===t.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,s())})),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return y(e,t),_(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var o=Math.pow(10,e);return Math.round(t*o)/o}(this.getValue(),this.__precision),f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(A);function T(t,e,o,i,n){return i+(t-e)/(o-e)*(n-i)}var E=function(t){function e(t,o,i,n,a){g(this,e);var r=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o,{min:i,max:n,step:a})),l=r;function s(t){t.preventDefault();var e=l.__background.getBoundingClientRect();return l.setValue(T(t.clientX,e.left,e.right,l.__min,l.__max)),!1}function c(){M.unbind(window,"mousemove",s),M.unbind(window,"mouseup",c),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function d(t){var e=t.touches[0].clientX,o=l.__background.getBoundingClientRect();l.setValue(T(e,o.left,o.right,l.__min,l.__max))}function m(){M.unbind(window,"touchmove",d),M.unbind(window,"touchend",m),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}return r.__background=document.createElement("div"),r.__foreground=document.createElement("div"),M.bind(r.__background,"mousedown",(function(t){document.activeElement.blur(),M.bind(window,"mousemove",s),M.bind(window,"mouseup",c),s(t)})),M.bind(r.__background,"touchstart",(function(t){if(1!==t.touches.length)return;M.bind(window,"touchmove",d),M.bind(window,"touchend",m),d(t)})),M.addClass(r.__background,"slider"),M.addClass(r.__foreground,"slider-fg"),r.updateDisplay(),r.__background.appendChild(r.__foreground),r.domElement.appendChild(r.__background),r}return y(e,t),_(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(A),O=function(t){function e(t,o,i){g(this,e);var n=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o)),a=n;return n.__button=document.createElement("div"),n.__button.innerHTML=void 0===i?"Fire":i,M.bind(n.__button,"click",(function(t){return t.preventDefault(),a.fire(),!1})),M.addClass(n.__button,"button"),n.domElement.appendChild(n.__button),n}return y(e,t),_(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(z),H=function(t){function e(t,o){g(this,e);var i=b(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));i.__color=new x(i.getValue()),i.__temp=new x(0);var n=i;i.domElement=document.createElement("div"),M.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",M.bind(i.__input,"keydown",(function(t){13===t.keyCode&&p.call(this)})),M.bind(i.__input,"blur",p),M.bind(i.__selector,"mousedown",(function(){M.addClass(this,"drag").bind(window,"mouseup",(function(){M.removeClass(n.__selector,"drag")}))})),M.bind(i.__selector,"touchstart",(function(){M.addClass(this,"drag").bind(window,"touchend",(function(){M.removeClass(n.__selector,"drag")}))}));var a,r=document.createElement("div");function s(t){_(t),M.bind(window,"mousemove",_),M.bind(window,"touchmove",_),M.bind(window,"mouseup",d),M.bind(window,"touchend",d)}function c(t){f(t),M.bind(window,"mousemove",f),M.bind(window,"touchmove",f),M.bind(window,"mouseup",h),M.bind(window,"touchend",h)}function d(){M.unbind(window,"mousemove",_),M.unbind(window,"touchmove",_),M.unbind(window,"mouseup",d),M.unbind(window,"touchend",d),u()}function h(){M.unbind(window,"mousemove",f),M.unbind(window,"touchmove",f),M.unbind(window,"mouseup",h),M.unbind(window,"touchend",h),u()}function p(){var t=m(this.value);!1!==t?(n.__color.__state=t,n.setValue(n.__color.toOriginal())):this.value=n.__color.toString()}function u(){n.__onFinishChange&&n.__onFinishChange.call(n,n.__color.toOriginal())}function _(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=n.__saturation_field.getBoundingClientRect(),o=t.touches&&t.touches[0]||t,i=o.clientX,a=o.clientY,r=(i-e.left)/(e.right-e.left),l=1-(a-e.top)/(e.bottom-e.top);return l>1?l=1:l<0&&(l=0),r>1?r=1:r<0&&(r=0),n.__color.v=l,n.__color.s=r,n.setValue(n.__color.toOriginal()),!1}function f(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=n.__hue_field.getBoundingClientRect(),o=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return o>1?o=1:o<0&&(o=0),n.__color.h=360*o,n.setValue(n.__color.toOriginal()),!1}return l.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),l.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),l.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),l.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),l.extend(r.style,{width:"100%",height:"100%",background:"none"}),R(r,"top","rgba(0,0,0,0)","#000"),l.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(a=i.__hue_field).style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",l.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),M.bind(i.__saturation_field,"mousedown",s),M.bind(i.__saturation_field,"touchstart",s),M.bind(i.__field_knob,"mousedown",s),M.bind(i.__field_knob,"touchstart",s),M.bind(i.__hue_field,"mousedown",c),M.bind(i.__hue_field,"touchstart",c),i.__saturation_field.appendChild(r),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return y(e,t),_(e,[{key:"updateDisplay",value:function(){var t=m(this.getValue());if(!1!==t){var e=!1;l.each(x.COMPONENTS,(function(o){if(!l.isUndefined(t[o])&&!l.isUndefined(this.__color.__state[o])&&t[o]!==this.__color.__state[o])return e=!0,{}}),this),e&&l.extend(this.__color.__state,t)}l.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,i=255-o;l.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,R(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),l.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),e}(z),W=["-moz-","-o-","-webkit-","-ms-",""];function R(t,e,o,i){t.style.background="",l.each(W,(function(n){t.style.cssText+="background: "+n+"linear-gradient("+e+", "+o+" 0%, "+i+" 100%); "}))}var B=function(t,e){var o=e||document,i=document.createElement("style");i.type="text/css",i.innerHTML=t;var n=o.getElementsByTagName("head")[0];try{n.appendChild(i)}catch(t){}},N='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',D=function(t,e){var o=t[e];return l.isArray(arguments[2])||l.isObject(arguments[2])?new I(t,e,arguments[2]):l.isNumber(o)?l.isNumber(arguments[2])&&l.isNumber(arguments[3])?l.isNumber(arguments[4])?new E(t,e,arguments[2],arguments[3],arguments[4]):new E(t,e,arguments[2],arguments[3]):l.isNumber(arguments[4])?new j(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new j(t,e,{min:arguments[2],max:arguments[3]}):l.isString(o)?new L(t,e):l.isFunction(o)?new O(t,e,""):l.isBoolean(o)?new P(t,e):null};var U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},Z=function(){function t(){g(this,t),this.backgroundElement=document.createElement("div"),l.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),M.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),l.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;M.bind(this.backgroundElement,"click",(function(){e.hide()}))}return _(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),l.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",M.unbind(t.domElement,"webkitTransitionEnd",e),M.unbind(t.domElement,"transitionend",e),M.unbind(t.domElement,"oTransitionEnd",e)};M.bind(this.domElement,"webkitTransitionEnd",e),M.bind(this.domElement,"transitionend",e),M.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-M.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-M.getHeight(this.domElement)/2+"px"}}]),t}(),G=function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");B(G);var V="Default",q=function(){try{return!!window.localStorage}catch(t){return!1}}(),X=void 0,$=!0,Y=void 0,J=!1,K=[],Q=function t(e){var o=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),M.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=l.defaults(i,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),i=l.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),l.isUndefined(i.load)?i.load={preset:V}:i.preset&&(i.load.preset=i.preset),l.isUndefined(i.parent)&&i.hideable&&K.push(this),i.resizable=l.isUndefined(i.parent)&&i.resizable,i.autoPlace&&l.isUndefined(i.scrollable)&&(i.scrollable=!0);var n=q&&"true"===localStorage.getItem(at(this,"isLocal")),a=void 0,r=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return o.parent?o.getRoot().preset:i.load.preset},set:function(t){o.parent?o.getRoot().preset=t:i.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),o.revert()}},width:{get:function(){return i.width},set:function(t){i.width=t,dt(o,t)}},name:{get:function(){return i.name},set:function(t){i.name=t,r&&(r.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(e){i.closed=e,i.closed?M.addClass(o.__ul,t.CLASS_CLOSED):M.removeClass(o.__ul,t.CLASS_CLOSED),this.onResize(),o.__closeButton&&(o.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return n},set:function(t){q&&(n=t,t?M.bind(window,"unload",a):M.unbind(window,"unload",a),localStorage.setItem(at(o,"isLocal"),t))}}}),l.isUndefined(i.parent)){if(this.closed=i.closed||!1,M.addClass(this.domElement,t.CLASS_MAIN),M.makeSelectable(this.domElement,!1),q&&n){o.useLocalStorage=!0;var s=localStorage.getItem(at(this,"gui"));s&&(i.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,M.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),i.closeOnTop?(M.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(M.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),M.bind(this.__closeButton,"click",(function(){o.closed=!o.closed}))}else{void 0===i.closed&&(i.closed=!0);var c=document.createTextNode(i.name);M.addClass(c,"controller-name"),r=tt(o,c);M.addClass(this.__ul,t.CLASS_CLOSED),M.addClass(r,"title"),M.bind(r,"click",(function(t){return t.preventDefault(),o.closed=!o.closed,!1})),i.closed||(this.closed=!1)}i.autoPlace&&(l.isUndefined(i.parent)&&($&&(Y=document.createElement("div"),M.addClass(Y,"dg"),M.addClass(Y,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),$=!1),Y.appendChild(this.domElement),M.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||dt(o,i.width)),this.__resizeHandler=function(){o.onResizeDebounced()},M.bind(window,"resize",this.__resizeHandler),M.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),M.bind(this.__ul,"transitionend",this.__resizeHandler),M.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&ct(this),a=function(){q&&"true"===localStorage.getItem(at(o,"isLocal"))&&localStorage.setItem(at(o,"gui"),JSON.stringify(o.getSaveObject()))},this.saveToLocalStorageIfPossible=a,i.parent||function(){var t=o.getRoot();t.width+=1,l.defer((function(){t.width-=1}))}()};function tt(t,e,o){var i=document.createElement("li");return e&&i.appendChild(e),o?t.__ul.insertBefore(i,o):t.__ul.appendChild(i),t.onResize(),i}function et(t){M.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&M.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function ot(t,e){var o=t.__preset_select[t.__preset_select.selectedIndex];o.innerHTML=e?o.value+"*":o.value}function it(t,e){var o=t.getRoot(),i=o.__rememberedObjects.indexOf(e.object);if(-1!==i){var n=o.__rememberedObjectIndecesToControllers[i];if(void 0===n&&(n={},o.__rememberedObjectIndecesToControllers[i]=n),n[e.property]=e,o.load&&o.load.remembered){var a=o.load.remembered,r=void 0;if(a[t.preset])r=a[t.preset];else{if(!a.Default)return;r=a.Default}if(r[i]&&void 0!==r[i][e.property]){var l=r[i][e.property];e.initialValue=l,e.setValue(l)}}}}function nt(t,e,o,i){if(void 0===e[o])throw new Error('Object "'+e+'" has no property "'+o+'"');var n=void 0;if(i.color)n=new H(e,o);else{var a=[e,o].concat(i.factoryArgs);n=D.apply(t,a)}i.before instanceof z&&(i.before=i.before.__li),it(t,n),M.addClass(n.domElement,"c");var r=document.createElement("span");M.addClass(r,"property-name"),r.innerHTML=n.property;var s=document.createElement("div");s.appendChild(r),s.appendChild(n.domElement);var c=tt(t,s,i.before);return M.addClass(c,Q.CLASS_CONTROLLER_ROW),n instanceof H?M.addClass(c,"color"):M.addClass(c,u(n.getValue())),function(t,e,o){if(o.__li=e,o.__gui=t,l.extend(o,{options:function(e){if(arguments.length>1){var i=o.__li.nextElementSibling;return o.remove(),nt(t,o.object,o.property,{before:i,factoryArgs:[l.toArray(arguments)]})}if(l.isArray(e)||l.isObject(e)){var n=o.__li.nextElementSibling;return o.remove(),nt(t,o.object,o.property,{before:n,factoryArgs:[e]})}},name:function(t){return o.__li.firstElementChild.firstElementChild.innerHTML=t,o},listen:function(){return o.__gui.listen(o),o},remove:function(){return o.__gui.remove(o),o}}),o instanceof E){var i=new j(o.object,o.property,{min:o.__min,max:o.__max,step:o.__step});l.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=o[t],n=i[t];o[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return n.apply(i,t),e.apply(o,t)}})),M.addClass(e,"has-slider"),o.domElement.insertBefore(i.domElement,o.domElement.firstElementChild)}else if(o instanceof j){var n=function(e){if(l.isNumber(o.__min)&&l.isNumber(o.__max)){var i=o.__li.firstElementChild.firstElementChild.innerHTML,n=o.__gui.__listening.indexOf(o)>-1;o.remove();var a=nt(t,o.object,o.property,{before:o.__li.nextElementSibling,factoryArgs:[o.__min,o.__max,o.__step]});return a.name(i),n&&a.listen(),a}return e};o.min=l.compose(n,o.min),o.max=l.compose(n,o.max)}else o instanceof P?(M.bind(e,"click",(function(){M.fakeEvent(o.__checkbox,"click")})),M.bind(o.__checkbox,"click",(function(t){t.stopPropagation()}))):o instanceof O?(M.bind(e,"click",(function(){M.fakeEvent(o.__button,"click")})),M.bind(e,"mouseover",(function(){M.addClass(o.__button,"hover")})),M.bind(e,"mouseout",(function(){M.removeClass(o.__button,"hover")}))):o instanceof H&&(M.addClass(e,"color"),o.updateDisplay=l.compose((function(t){return e.style.borderLeftColor=o.__color.toString(),t}),o.updateDisplay),o.updateDisplay());o.setValue=l.compose((function(e){return t.getRoot().__preset_select&&o.isModified()&&ot(t.getRoot(),!0),e}),o.setValue)}(t,c,n),t.__controllers.push(n),n}function at(t,e){return document.location.href+"."+e}function rt(t,e,o){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),o&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function lt(t,e){e.style.display=t.useLocalStorage?"block":"none"}function st(t){var e=t.__save_row=document.createElement("li");M.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),M.addClass(e,"save-row");var o=document.createElement("span");o.innerHTML="&nbsp;",M.addClass(o,"button gears");var i=document.createElement("span");i.innerHTML="Save",M.addClass(i,"button"),M.addClass(i,"save");var n=document.createElement("span");n.innerHTML="New",M.addClass(n,"button"),M.addClass(n,"save-as");var a=document.createElement("span");a.innerHTML="Revert",M.addClass(a,"button"),M.addClass(a,"revert");var r=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?l.each(t.load.remembered,(function(e,o){rt(t,o,o===t.preset)})):rt(t,V,!1),M.bind(r,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(r),e.appendChild(o),e.appendChild(i),e.appendChild(n),e.appendChild(a),q){var s=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(at(0,"isLocal"))&&c.setAttribute("checked","checked"),lt(t,s),M.bind(c,"change",(function(){t.useLocalStorage=!t.useLocalStorage,lt(t,s)}))}var d=document.getElementById("dg-new-constructor");M.bind(d,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||X.hide()})),M.bind(o,"click",(function(){d.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),X.show(),d.focus(),d.select()})),M.bind(i,"click",(function(){t.save()})),M.bind(n,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),M.bind(a,"click",(function(){t.revert()}))}function ct(t){var e=void 0;function o(o){return o.preventDefault(),t.width+=e-o.clientX,t.onResize(),e=o.clientX,!1}function i(){M.removeClass(t.__closeButton,Q.CLASS_DRAG),M.unbind(window,"mousemove",o),M.unbind(window,"mouseup",i)}function n(n){return n.preventDefault(),e=n.clientX,M.addClass(t.__closeButton,Q.CLASS_DRAG),M.bind(window,"mousemove",o),M.bind(window,"mouseup",i),!1}t.__resize_handle=document.createElement("div"),l.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),M.bind(t.__resize_handle,"mousedown",n),M.bind(t.__closeButton,"mousedown",n),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function dt(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function mt(t,e){var o={};return l.each(t.__rememberedObjects,(function(i,n){var a={},r=t.__rememberedObjectIndecesToControllers[n];l.each(r,(function(t,o){a[o]=e?t.initialValue:t.getValue()})),o[n]=a})),o}function ht(t){0!==t.length&&U.call(window,(function(){ht(t)})),l.each(t,(function(t){t.updateDisplay()}))}Q.toggleHide=function(){J=!J,l.each(K,(function(t){t.domElement.style.display=J?"none":""}))},Q.CLASS_AUTO_PLACE="a",Q.CLASS_AUTO_PLACE_CONTAINER="ac",Q.CLASS_MAIN="main",Q.CLASS_CONTROLLER_ROW="cr",Q.CLASS_TOO_TALL="taller-than-window",Q.CLASS_CLOSED="closed",Q.CLASS_CLOSE_BUTTON="close-button",Q.CLASS_CLOSE_TOP="close-top",Q.CLASS_CLOSE_BOTTOM="close-bottom",Q.CLASS_DRAG="drag",Q.DEFAULT_WIDTH=245,Q.TEXT_CLOSED="Close Controls",Q.TEXT_OPEN="Open Controls",Q._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||Q.toggleHide()},M.bind(window,"keydown",Q._keydownHandler,!1),l.extend(Q.prototype,{add:function(t,e){return nt(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return nt(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;l.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Y.removeChild(this.domElement);var t=this;l.each(this.__folders,(function(e){t.removeFolder(e)})),M.unbind(window,"keydown",Q._keydownHandler,!1),et(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var o=new Q(e);this.__folders[t]=o;var i=tt(this,o.domElement);return M.addClass(i,"folder"),o},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],et(t);var e=this;l.each(t.__folders,(function(e){t.removeFolder(e)})),l.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=M.getOffset(t.__ul).top,o=0;l.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(o+=M.getHeight(e))})),window.innerHeight-e-20<o?(M.addClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(M.removeClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&l.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:l.debounce((function(){this.onResize()}),50),remember:function(){if(l.isUndefined(X)&&((X=new Z).domElement.innerHTML=N),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;l.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&st(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&dt(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=mt(this)),t.folders={},l.each(this.__folders,(function(e,o){t.folders[o]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=mt(this),ot(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=mt(this,!0)),this.load.remembered[t]=mt(this),this.preset=t,rt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){l.each(this.__controllers,(function(e){this.getRoot().load.remembered?it(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),l.each(this.__folders,(function(t){t.revert(t)})),t||ot(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&ht(this.__listening)},updateDisplay:function(){l.each(this.__controllers,(function(t){t.updateDisplay()})),l.each(this.__folders,(function(t){t.updateDisplay()}))}});var pt=Q;var ut=o(6490);const gt="https://disk.2gis.com/styles/assets/models/";function _t(){const t={};return location.search.slice(1).split("&").map((t=>t.split("="))).forEach((e=>{t[e[0]]=e[1]})),t}function ft(t,e){const o=[];void 0!==e.key&&o.push({key:"key",value:e.key});const i=t.getCenter(),n=t.getZoom(),a=Math.round(t.getRotation()),r=Math.round(t.getPitch()),l=function(t){return Math.ceil((t*Math.LN2+Math.log(256/360/.5))/Math.LN10)}(n),s=t.getStyleZoom();return void 0!==_t().styleZoom?o.push({key:"styleZoom",value:s.toFixed(11)}):o.push({key:"zoom",value:n.toFixed(3)}),o.push({key:"lng",value:i[0].toFixed(l)},{key:"lat",value:i[1].toFixed(l)}),0!==a&&o.push({key:"rotation",value:a.toString()}),0!==r&&o.push({key:"pitch",value:r.toString()}),e.disableIconCache&&o.push({key:"disableIconCache"}),e.disableHoverStyles||o.push({key:"enableHover"}),e.disablePitchByUserInteraction&&o.push({key:"disablePitch"}),e.keepCenterWhileUserZoomRotate&&o.push({key:"keepCenterWhileUserZoomRotate"}),e.disableRotationByUserInteraction&&o.push({key:"disableRotation"}),e.preserveDrawingBuffer&&o.push({key:"preserveDrawingBuffer"}),void 0!==e.style&&o.push({key:"styleId",value:e.style}),void 0!==e.styleServer&&o.push({key:"styleServer",value:encodeURIComponent(e.styleServer)}),void 0!==e.tileServer&&o.push({key:"tileServer",value:encodeURIComponent(e.tileServer)}),void 0!==e.tileProtocol&&o.push({key:"tileProtocol",value:e.tileProtocol}),void 0!==e.tileSet&&o.push({key:"tileSet",value:e.tileSet}),void 0!==e.commercialPoiRandomSeed&&o.push({key:"comPoiSeed",value:e.commercialPoiRandomSeed.toString()}),e.dem&&o.push({key:"dem"}),e.rampPreset&&o.push({key:"rampPreset",value:e.rampPreset}),e.shading&&o.push({key:"shading",value:String(e.shading)}),e.reliefScale&&o.push({key:"reliefScale",value:String(e.reliefScale)}),e.satellite&&o.push({key:"satellite"}),void 0!==e.lang&&o.push({key:"lang",value:e.lang}),void 0!==e.tileServerDefaultLang&&o.push({key:"defaultLang",value:e.tileServerDefaultLang}),void 0!==e.defaultBackgroundColor&&o.push({key:"defaultBackgroundColor",value:e.defaultBackgroundColor.replace("#","")}),void 0!==e.trafficProtocol&&o.push({key:"trafficProtocol",value:e.trafficProtocol}),void 0!==e.trafficServer&&o.push({key:"trafficServer",value:e.trafficServer}),void 0!==e.floorsUrl&&o.push({key:"floorsUrl",value:encodeURIComponent(e.floorsUrl)}),e.mobileSdkMode&&o.push({key:"mobileSdkMode"}),void 0!==e.commercialTileSet&&o.push({key:"commercialTileSet",value:e.commercialTileSet}),Number.isNaN(t._impl.state.maxPitch)||t._impl.state.maxPitch===(0,ut.Id)(45)||o.push({key:"maxPitch",value:(0,ut.ZY)(t._impl.state.maxPitch).toString()}),e.useThreeJs&&o.push({key:"useThreeJs"}),e.showDefaultTileBounds&&o.push({key:"showDefaultTileBounds"}),void 0!==e.webglVersion&&o.push({key:"webglVersion",value:String(e.webglVersion)}),o.reduce(((t,e,o)=>t+(0===o?"?":"&")+e.key+(void 0!==e.value?"="+e.value:"")),"")}function yt(t){const e=_t();if(void 0!==e.lng&&void 0!==e.lat&&(t.center=[parseFloat(e.lng),parseFloat(e.lat)]),void 0!==e.zoom&&(t.zoom=parseFloat(e.zoom)),void 0!==e.styleZoom&&(t.styleZoom=parseFloat(e.styleZoom)),void 0!==e.rotation&&(t.rotation=parseFloat(e.rotation)),void 0!==e.touchRotationThreshold&&(t.touchRotationThreshold=parseFloat(e.touchRotationThreshold)),void 0!==e.key&&(t.key=e.key),void 0!==e.pitch&&(t.pitch=parseFloat(e.pitch)),void 0!==e.styleId&&(t.style=e.styleId),void 0!==e.styleServer&&(t.styleServer=decodeURIComponent(e.styleServer)),void 0!==e.tileServer&&(t.tileServer=decodeURIComponent(e.tileServer)),void 0!==e.tileProtocol&&(t.tileProtocol=e.tileProtocol),void 0!==e.tileSet&&(t.tileSet=e.tileSet),"comPoiSeed"in e&&!Number.isNaN(parseFloat(e.comPoiSeed))&&(t.commercialPoiRandomSeed=Number(e.comPoiSeed)),"reliefScale"in e&&(t.reliefScale=Number(e.reliefScale)),t.dem="dem"in e,t.satellite="satellite"in e,t.rampPreset=e.rampPreset,t.shading=Number(e.shading),void 0!==e.commercialTileSet&&(t.commercialTileSet=e.commercialTileSet),void 0!==e.defaultBackgroundColor&&(t.defaultBackgroundColor="#"+e.defaultBackgroundColor),void 0!==e.trafficProtocol&&(t.trafficProtocol=e.trafficProtocol),void 0!==e.trafficServer&&(t.trafficServer=e.trafficServer),void 0!==e.lang&&(t.lang=e.lang),void 0!==e.defaultLang&&(t.tileServerDefaultLang=e.defaultLang),void 0!==e.floorsUrl&&(t.floorsUrl=decodeURIComponent(e.floorsUrl)),"disableRotation"in e&&(t.disableRotationByUserInteraction=!0),"disablePitch"in e&&(t.disablePitchByUserInteraction=!0),"keepCenterWhileUserZoomRotate"in e&&(t.keepCenterWhileUserZoomRotate=!0),"styleServer"in e&&(t.styleServer=decodeURIComponent(e.styleServer)),"preserveDrawingBuffer"in e&&(t.preserveDrawingBuffer=!0),"maxPitch"in e&&(t.maxPitch=Number(e.maxPitch)),"webglVersion"in e){const o=Number(e.webglVersion);1!==o&&2!==o||(t.webglVersion=o)}if(t.mobileSdkMode="mobileSdkMode"in e,t.dem="dem"in e,t.satellite="satellite"in e,t.rampPreset=e.rampPreset,t.shading=Number(e.shading),"enableTrackResize"in e&&(t.enableTrackResize=e.enableTrackResize),void 0!==e.m){const o=decodeURIComponent(e.m).split("/"),i=o[0].split(",");t.center=[parseFloat(i[0]),parseFloat(i[1])],t.zoom=parseFloat(o[1]);for(let e=2;e<=4;e+=2){const i=o[e];if(void 0!==i){const n=parseFloat(o[e+1]);"p"===i?t.pitch=n:"r"===i&&(t.rotation=n)}}}return t}function bt(t,e){history.replaceState({},document.title,ft(t,e))}var xt=o(9090);const vt={version:1,name:"2gis_sample_style",background:{color:"#f6f2de"},layers:[{type:"polygon",id:"background",filter:["match",["get","sublayer"],["Region"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],9,"hsl(50, 61%, 90%)",12,"hsl(51, 37%, 90%)",14,"hsl(49, 48%, 91%)",16,"hsl(51, 51%, 92%)"]}},{type:"polygon",id:"substrate",filter:["match",["get","sublayer"],["Substrate"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],14,"hsl(81, 55%, 69%)",17,"hsl(80, 71%, 92%)"]}},{type:"polygon",id:"kvar_adm",filter:["match",["get","sublayer"],["Administrative_quarter"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],9,"hsl(50, 61%, 90%)",12,"hsl(51, 37%, 90%)",14,"hsl(49, 48%, 91%)",16,"hsl(51, 51%, 92%)"]}},{type:"polygon",id:"kvar_living",filter:["match",["get","sublayer"],["Dwelling_quarter_z13","Dwelling_quarter","Dwelling_quarter_z11","Dwelling_quarter_z09"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],1,"#f2edd4",12,"hsl(48, 39%, 87%)",15,"hsl(51, 30%, 87%)",17,"hsl(48, 39%, 87%)"]}},{type:"polygon",id:"kvar_green",filter:["match",["get","sublayer"],["Forest_quarter","Forest_quarter_z09","Forest_quarter_z11","Forest_quarter_z13"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],10,"hsl(80, 56%, 74%)",12,"hsl(81, 57%, 72%)",15,"hsl(81, 55%, 69%)",17,"hsl(83, 56%, 68%)"]}},{type:"polygon",id:"kvar_graveyard",filter:["match",["get","sublayer"],["Graveyard_quarter","Graveyard_quarter_z13","Graveyard_quarter_z11","Graveyard_quarter_z09"],!0,!1],style:{color:"hsl(75, 37%, 81%)"}},{type:"polygon",id:"kvar_private",filter:["match",["get","sublayer"],["Private_quarter","Private_quarter_z13","Private_quarter_z11","Private_quarter_z09","s_kvar_beach"],!0,!1],minzoom:7,style:{color:"hsl(50, 57%, 90%)"}},{type:"polygon",id:"kvar_prom",filter:["match",["get","sublayer"],["Technical_quarter_z13","Technical_quarter_z11","Technical_quarter_z09","Garage_quarter_z09","Garage_quarter_z11","Garage_quarter_z13","Garage_quarter","Technical_quarter"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],1,"#efefde",9,"hsl(60, 30%, 91%)",12,"hsl(55, 21%, 89%)",15,"hsl(60, 14%, 90%)"]}},{type:"polygon",id:"kvar_dacha",filter:["match",["get","sublayer"],["Dacha_quarter"],!0,!1],style:{color:"hsl(79, 66%, 73%)"}},{type:"polygon",id:"kvar_pedestrian",filter:["match",["get","sublayer"],["Pedestrian_quarter"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],14,"hsl(81, 55%, 69%)",17,"hsl(80, 71%, 92%)"]}},{type:"polygon",id:"kvar_sport",filter:["match",["get","sublayer"],["Sport_quarter"],!0,!1],style:{color:"#dedac8"}},{type:"polygon",id:"kvar_supplementary",filter:["match",["get","sublayer"],["Supplementary_quarter"],!0,!1],minzoom:14,style:{color:"hsl(0, 0%, 100%)"}},{type:"polygon",id:"kvar_runway",filter:["match",["get","sublayer"],["Runway_quarter"],!0,!1],minzoom:13,style:{color:"#ffffff"}},{type:"polygon",id:"kvar_flowerbed",filter:["match",["get","sublayer"],["Flowerbed_quarter"],!0,!1],minzoom:7,style:{color:["interpolate",["linear"],["zoom"],12,"hsl(83, 57%, 72%)",15,"hsl(81, 55%, 69%)",17,"hsl(83, 56%, 68%)"]}},{type:"polygon",id:"kvar_platform",filter:["match",["get","sublayer"],["Platform_quarter"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],12,"hsl(55, 21%, 89%)",15,"hsl(60, 14%, 90%)"]}},{type:"polygon",id:"river",filter:["match",["get","sublayer"],["Water_area","Water_area_z11","Water_area_z13","Water_area_z09"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],10,"hsl(196, 66%, 82%)",12,"hsl(201, 75%, 83%)",15,"hsl(200, 90%, 77%)"]}},{type:"polygon",id:"pool",filter:["match",["get","sublayer"],["Pool"],!0,!1],style:{color:["interpolate",["linear"],["zoom"],12,"hsl(201, 75%, 83%)",15,"hsl(200, 90%, 77%)",16,"hsl(200, 84%, 68%)"]}},{type:"polygon",id:"parking area",filter:["match",["get","sublayer"],["Parking_area"],!0,!1],minzoom:17.5,style:{color:"#c8d0d6"}},{type:"buildingModel",id:"simple model",filter:["match",["get","sublayer"],["Building_model"],!0,!1],minzoom:16,style:{color:"#fffff5",strokeColor:"#ccc9c3"}},{type:"lineExtrusion",id:"low fences",filter:["match",["get","sublayer"],["Low_fence"],!0,!1],minzoom:16.5,style:{sideColor:"#c7c2b5",strokeColor:"#c7c2b5",strokeWidth:2,height:250}},{type:"lineExtrusion",id:"normal fences",filter:["match",["get","sublayer"],["Fence","Temporary_fence"],!0,!1],minzoom:16.5,style:{sideColor:"#c7c2b5",strokeColor:"#c7c2b5",strokeWidth:2,height:400}},{type:"line",id:"internal roads copy",filter:["match",["get","sublayer"],["Internal_road","Oneway_internal_road"],!0,!1],minzoom:15,style:{color:["interpolate",["linear"],["zoom"],15,"hsla(0, 0%, 80%, 0)",18,"#cccccc"],width:["interpolate",["exponential",1.99],["zoom"],16,1.4,19,7]}},{type:"line",id:"other roads background",filter:["match",["get","sublayer"],["Other_road","Uncovered_road","Other_road_pay","Uncovered_road_pay","Oneway_other_road","Oneway_uncovered_road","Other_road_z13","Other_road_bridge","Uncovered_road_bridge","Other_road_pay_bridge","Uncovered_road_pay_bridge"],!0,!1],minzoom:13,style:{color:["interpolate",["linear"],["zoom"],12,"hsla(0, 0%, 78%, 0)",13,"#c6c6c6",16.5,"#cccccc"],width:["interpolate",["exponential",1.99],["zoom"],13,1.9,14,2,15,3.8,19,16]}}]};function wt(t){const e=.01,o=.02,i=.005;return{type:"FeatureCollection",features:[{type:"Feature",properties:{demoCase:"point",label_1:"label one",label_2:"label two"},geometry:{type:"Point",coordinates:t}},{type:"Feature",properties:{demoCase:"pointWithSizeData",label:"Большой размер из данных",size:20},geometry:{type:"Point",coordinates:[t[0]+.03,t[1]+.03]}},{type:"Feature",properties:{demoCase:"pointWithSizeData",label:"Маленький размер из данных",size:10},geometry:{type:"Point",coordinates:[t[0]-.03,t[1]+.03]}},{type:"Feature",properties:{demoCase:"line",name:"name"},geometry:{type:"LineString",coordinates:[[t[0]+e,t[1]+e],[t[0]+e,t[1]-e],[t[0]-e,t[1]-e],[t[0]-e,t[1]+e]]}},{type:"Feature",properties:{demoCase:"oneWayLine",name:"name"},geometry:{type:"LineString",coordinates:[[t[0]+o,t[1]+o],[t[0]+o,t[1]-o],[t[0]-o,t[1]-o],[t[0]-o,t[1]+o]]}},{type:"Feature",properties:{demoCase:"polygon"},geometry:{type:"Polygon",coordinates:[[[t[0]+i,t[1]+i],[t[0]+i,t[1]-i],[t[0]-i,t[1]-i],[t[0]-i,t[1]+i],[t[0]+i,t[1]+i]]]}}]}}var zt=o(7411);let Ft,St;const Ct=[],[Mt,Pt]=(0,zt.yq)([82.92139350410734,55.03009314407664]);for(let t=0;t<360;t+=10){const e=[0,8e3];(0,xt.hk)(e,(0,ut.Id)(t));const o=[];o.push([...(0,zt.PA)([Mt,Pt]),80]),o.push([...(0,zt.PA)([e[0]+Mt,e[1]+Pt]),0]),(0,xt.hk)(e,(0,ut.Id)(10)),o.push([...(0,zt.PA)([e[0]+Mt,e[1]+Pt]),0]),Ct.push([o])}let It;const Lt=function(t,e=vt){return Object.assign(Object.assign({},e),{layers:[...e.layers,...t]})}([{type:"polygon",id:"geojson-polygon",filter:["match",["get","demoCase"],["polygon"],!0,!1],style:{strokeWidth:2,strokeColor:"#444444",color:"#00ff00a0"}},{type:"line",id:"geojson-line",filter:["match",["get","demoCase"],["line"],!0,!1],style:{color:"#9e02e0",width:5}},{type:"oneWayLine",id:"geojson-one-way-line",filter:["match",["get","demoCase"],["oneWayLine"],!0,!1],style:{color:"#ff0000"}},{type:"labelLine",id:"geojson-label-line",filter:["match",["get","demoCase"],["line"],!0,!1],style:{textField:["get","name"],textFont:"Open_Sans",textDuplicationSpacing:50,textHaloWidth:2,textColor:"#ff0000",textHaloColor:"#ffffff"}},{type:"point",id:"geojson-point",filter:["all",["match",["get","demoCase"],["point"],!0,!1]],style:{iconImage:"peak",iconWidth:16,textFont:["Open_Sans","Open_Sans"],textField:[["get","label_1"],["get","label_2"]],textFontSize:[16,16]}},{type:"point",id:"geojson-point",filter:["all",["match",["get","demoCase"],["pointWithSizeData"],!0,!1]],style:{iconImage:"peak",iconWidth:16,textFont:"Open_Sans",textField:["get","label"],textFontSize:["get","size"],allowOverlap:!0}}]);var kt=o(9218);let At;const jt=(t,e)=>{let o,n;const a={add(){return(0,i.mG)(this,void 0,void 0,(function*(){if(l(),t.setStyle("e05ac437-fcc2-4845-ad74-b1de9ce07555"),t.setCenter([37.61959264695156,55.75832557338807]),o=new mapgl._J.Heatmap(t,{palette:{0:"rgba(0, 0, 0, 0)",.2:"rgba(172, 32, 135, 1)",.4:"rgba(255, 154, 0, 1)",.6:"rgba(255, 252, 0, 1)",.8:"rgba(255, 255, 0, 1)",1:"rgba(255, 255, 255, 1)"},zIndex:100,pointRadius:["interpolate",["linear"],["zoom"],9,5,16.5,7.5],minZoom:0,maxZoom:20,opacity:["interpolate",["linear"],["zoom"],15,1,16.5,0],intensity:["interpolate",["linear"],["zoom"],9,.2,16.5,1]}),!n){const t=yield fetch("assets/moscow.json").then((t=>t.json()));n=t.features.map((t=>({coordinates:t.geometry.coordinates})))}o.setPoints(n)}))},remove:l},r=e.addFolder("Heatmap");function l(){o&&(t.useOldStyles(),o.destroy(),o=void 0)}r.add(a,"add"),r.add(a,"remove")};let Tt=[];function Et(){Tt.forEach((t=>t.destroy())),Tt=[]}function Ot(t){Et(),t.setZoom(11),t.setCenter([82.920412,55.030111]),Tt=[Ht({description:"Некликабельный",coordinates:[82.921,55.082],interactive:!1}),Ht({description:"Выше всех, координаты не округляются",coordinates:[82.955,55.022],zIndex:2,disableRounding:!0}),Ht({coordinates:[82.887,54.913]})].map((e=>{const o=new mapgl._J.HtmlMarker(t,e);if(e.interactive){const t=o.getHtmlElement();t.addEventListener("click",(t=>console.log("Click HtmlMarker ",{originalEvent:t,marker:o,markerOptions:e})));const i=t.querySelector("button");i&&i.addEventListener("click",(t=>{t.stopPropagation(),console.log("Click Button",{originalEvent:t,marker:o,markerOptions:e})}))}return o}));const e=document.createElement("div");e.style.padding="20px",e.style.background="white",e.style.boxShadow="1px 1px 2px rgba(0, 0, 0, .3)",e.style.borderRadius="2px",e.style.height="100%",e.innerHTML='<div style="word-wrap: break-word; font-size: 12px;">\n        Этот DOM создан клиентом<br>\n        карта не реагирует на взаимодействия<br>\n        с ним (preventMapInteractions=true)<br>\n        ширина задается контентом\n    </div>';const o=Ht({coordinates:[82.937,54.943],html:e,preventMapInteractions:!0}),i=new mapgl._J.HtmlMarker(t,o);Tt.push(i),e.onclick=t=>console.log("Click HtmlMarker",{originalEvent:t,marker:i,markerOptions:o})}function Ht(t){var{description:e,coordinates:o}=t,n=(0,i._T)(t,["description","coordinates"]);return Object.assign({html:`\n            <div style="\n                box-sizing: border-box;\n                box-shadow: 1px 1px 2px rgba(0, 0, 0, .3);\n                background: white;\n                border-radius: 2px;\n                padding: 12px;\n                margin-bottom: 4px;\n                font-family: SuisseIntl, Helvetica, Arial, sans-serif;\n                font-size: 12px;\n                line-height: 1.2;\n                width: 180px;\n                height: 80px;\n                color: #5d5d5d;\n                user-select: none;\n                display: flex;\n                align-items: center;\n            ">\n                <div>\n                    <div style="font-size: 14px; font-weight: bold;">${o.join(", ")}</div>\n                    <div style="margin-bottom: 8px;">${e||"Description"}</div>\n                    <button style="display: block;"><span>Button</span></button>\n                </div>\n            </div>\n            <div style="margin-left: 80px; width: 10px; height: 10px; border-radius: 50%; background: white; border: 5px solid red;"></div>\n        `,coordinates:o,offset:[-90,-94],zIndex:1,animate:!1,duration:200,interactive:!0},n)}let Wt=[];function Rt(t){Bt();const e={id:"141265769407200",coordinates:[82.89306498588856,54.9841537625896],zoom:19};t.setCenter(e.coordinates),t.setZoom(e.zoom),Wt.push(new mapgl._J.HtmlMarker(t,{html:'\n                <div class="marker">\n                    <div class="substrate"><div class="substrateInner"></div></div>\n                    <div class="inner">\n                        <svg width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Слой_1" x="0px" y="0px" viewBox="0 0 400 400" style="enable-background:new 0 0 400 400;" xml:space="preserve">\n                            <path fill="#BC0F0F" d="M64.8,145.4H24.3c-5.1,0-9.3,4.2-9.3,9.3s4.2,9.3,9.3,9.3h3.1v74.8h-3.1c-5.1,0-9.3,4.2-9.3,9.3   c0,5.1,4.2,9.3,9.3,9.3h40.5c31,0,56.1-25,56.1-56.1S95.9,145.4,64.8,145.4z M91.2,227.9c-7,7-16.4,11-26.4,11H46.1v-74.8h18.7   c20.7,0,37.4,16.7,37.4,37.4C102.2,211.5,98.2,220.9,91.2,227.9z"/>\n                            <path fill="#BC0F0F" d="M376.3,241.6c3.6,3.6,3.6,9.6,0,13.2c-1.7,1.7-4.1,2.7-6.6,2.7h-34.3c-5.1,0-9.3-4.2-9.3-9.3   c0-5.1,4.2-9.3,9.3-9.3l0,0h12.5v-56.1l-23.7,46.7h-15l-23.7-46.7v56.1H298c5.1,0,9.3,4.2,9.3,9.3c0,5.1-4.2,9.3-9.3,9.3h-34.3   c-5.1,0-9.3-4.2-9.3-9.3c0-5.1,4.2-9.3,9.3-9.3l0,0h3.1v-74.8h-3.1c-5.1,0-9.3-4.2-9.3-9.3c0-5.1,4.2-9.3,9.3-9.3l0,0h23.8   l14.7,28.9l14.5,28.5l14.5-28.5l14.7-28.9h23.8c5.1,0,9.3,4.2,9.3,9.3s-4.2,9.3-9.3,9.3h-3.1v74.8h3.1   C372.1,238.9,374.5,239.9,376.3,241.6z"/>\n                            <path fill="#BC0F0F" d="M162.6,172.5c-0.1,6.9-1.7,13.6-4.5,19.8c-2.1,5-4.4,9.8-6.2,14.8c-2.4,5.7-3.6,11.7-3.6,17.8   c0,3.1,0.7,6.1,2.1,9c2.7,5,6.6,6.9,12.2,7.4c7.8,0.6,14.3-3.7,16.9-11.3c1.2-3.1,1.5-6.5,0.9-9.7c-0.1-0.7-0.4-1.5-0.7-2.1   c-1.1-2.1-3.6-3.1-5.9-2.2c-1,0.5-1.7,1.4-2,2.5c-0.4,1.4-0.4,2.9-0.1,4.4c0.2,1.6,0.4,3.4,0.2,5c-0.4,2.6-2,5-4.4,6.1   c-4.5,2.5-10.1,0.9-12.6-3.6c-0.5-1-0.9-2-1-3.1c-0.7-5.2-0.1-10.5,1.9-15.3c1.7-4.9,5.1-9,9.6-11.7c7.6-4.2,17.1-3.5,23.8,2   c5.1,4,8.5,9.8,9.5,16.3c2.1,14.1-2.6,25.5-13.5,34.6c-3.6,2.9-7.8,4.9-12.5,5.7c-12.8,2.7-24.2-0.2-33.6-9.5   c-5.4-5.2-8.6-12.3-9.1-19.8c-0.7-10.2,0.9-20.3,4.7-29.8c1.9-4.9,4.1-9.6,6.1-14.3c1.5-3.2,2.5-6.7,3-10.3   c0.5-5.6-0.7-11.2-3.5-16.2c-2-3.5-1.6-7.8,1-11c3.4-3.9,9.2-4.2,13.1-0.7c0.7,0.6,1.4,1.5,1.9,2.4c3.4,5.7,5.4,12.2,5.9,18.8   C162.3,169.5,162.4,171,162.6,172.5z"/>\n                            <path fill="#BC0F0F" d="M203.2,154.5c2.4-4.2,5.4-8.1,8.8-11.5c3.5-3.5,9.1-3.4,12.5,0.1c1.1,1.1,2,2.6,2.4,4.1c0.9,3,0,6.2-2.4,8.3   c-2.9,2.9-5.2,6.1-7,9.6c-0.9,1.6-1.4,3.2-1.7,5c-0.5,3.2,1.9,6.4,5.1,6.7c0.1,0,0.2,0,0.2,0c3.5,0.2,6.5-2.2,6.7-5.6   c0.1-0.7,0-1.6-0.2-2.4c-1.6-4.4,1.6-8.6,4.9-10c4.4-1.9,9.3,0,11.5,4.2c1.7,3.7,2.1,8.1,1,12.1c-2.4,10-10.6,17.3-20.8,18.7   c-8.7,1.1-15.8-2-21.2-8.8C194.3,173.1,200.4,159.4,203.2,154.5z"/>\n                            <path fill="#BC0F0F" d="M212.5,232.3c0.2-7.1,2-14.2,5.1-20.6c1.2-2.6,2.6-5.2,4.2-7.7c2.7-4.2,8.3-5.6,12.7-2.9s5.6,8.3,2.9,12.7   c0,0.1-0.1,0.1-0.1,0.2c-2.7,4.4-4.7,9.1-5.7,14.1c-0.4,2-0.5,4-0.4,6.1c0.2,2.7,1.6,5.4,3.9,7.1c3.9,3.4,4.2,9.2,0.9,13   c-3.2,3.7-8.8,4.2-12.7,1.1c-5.7-4.7-9.5-11.5-10.2-18.8C212.8,235.1,212.6,233.8,212.5,232.3z"/>\n                        </svg>\n                    </div>\n                </div>\n                <style>\n                    .marker {\n                        position: relative;\n                        width: 26px;\n                        height: 26px;\n                        border-radius: 2px;\n                    }\n                    .substrate {\n                        position: absolute;\n                        border-radius: 2px;\n                        width: 100%;\n                        height: 100%;\n                        z-index: 0;\n                        opacity: .8;\n                        box-shadow: 0 2px 4px rgba(0,0,0,.2);\n                    }\n                    .substrateInner {\n                        position: absolute;\n                        border-radius: 2px;\n                        width: 100%;\n                        height: 100%;\n                        background: rgb(255, 255, 255);\n                    }\n                    .substrateInner:after {\n                        position: absolute;\n                        bottom: -3px;\n                        left: 50%;\n                        transform: translateX(-50%) rotate(45deg);\n                        content: "";\n                        display: block;\n                        border: 4px solid transparent;\n                        border-right-color: rgb(255, 255, 255);\n                        border-bottom-color: rgb(255, 255, 255);\n                        box-shadow: 2px 2px 1px rgba(0,0,0,.1);\n                        width: 0;\n                        height: 0;\n                    }\n                    .inner {\n                        position: relative;\n                        display: flex;\n                        align-items:center;\n                        justify-content: center;\n                        z-index: 1;\n                        width: 100%;\n                        height: 100%;\n                        padding: 2px;\n                        box-sizing: border-box;\n                        border-radius: 2px;\n                    }\n                </style>\n            ',coordinates:e.coordinates,zIndex:0,labeling:{type:"pinnedToPoi",poiId:e.id,width:26,height:26},offset:[-13,-43],animate:!0,duration:200,interactive:!0}))}function Bt(){Wt.forEach((t=>t.destroy())),Wt=[]}let Nt,Dt;let Ut=[],Zt=[];function Gt(){Ut.forEach((t=>t.remove())),Ut=[],Zt.forEach((t=>t.remove())),Zt=[]}const Vt=(t,e)=>{const o=e.addFolder("Examples"),i={addLabels(){Gt();const e=t.getCenter();Ut.push(new mapgl._J.PointLabel(t,{coordinates:e,text:"Негенерализуемый лейбл №1",color:["interpolate",["linear"],["zoom"],8,"#ff0000",14,"#00ff00",16,"#0000ff"],fontSize:24,font:"Open_Sans",haloRadius:1,zIndex:1,anchor:[.5,.5],offset:[0,0]})),Ut.push(new mapgl._J.PointLabel(t,{coordinates:[e[0]-.1,e[1]+.05],text:"Негенерализуемый двухстрочный лейбл с подложкой",color:"#0000ff",fontSize:36,font:"Open_Sans",haloRadius:3,haloColor:["interpolate",["linear"],["zoom"],8,"#ff0000",14,"#00ff00",16,"#0000ff"],zIndex:1,image:{url:"assets/images/stretchable-image-debug.png",size:[500,250],stretchX:[[50,150],[250,450]],stretchY:[[50,150]],padding:[50,50,100,50]}})),Ut.push(new mapgl._J.PointLabel(t,{coordinates:[e[0]+.1,e[1]-.05],text:"Tooltip top symmetric",color:"#0000ff",fontSize:36,font:"Open_Sans",haloRadius:1,zIndex:2,image:{url:"assets/images/tooltip-top-symmetric-debug.svg",size:[100,50],stretchX:[[10,40],[60,90]],stretchY:[[20,40]],padding:[20,10,10,10]}})),Ut.push(new mapgl._J.PointLabel(t,{coordinates:[e[0]-.2,e[1]-.15],text:"Retina image",fontSize:24,font:"Open_Sans",zIndex:2,image:{url:"assets/images/stretchable-image-debug@2x.png",size:[500,250],stretchX:[[50,150],[250,450]],stretchY:[[50,150]],padding:[50,50,100,50]}}))},hide(){Ut.forEach((t=>t.hide()))},show(){Ut.forEach((t=>t.show()))},move(){Ut.forEach(((t,e)=>t.setCoordinates(t.getCoordinates().map((t=>t+.01*(e%2==0?1:-1))))))},remove:Gt};o.add(i,"addLabels"),o.add(i,"hide"),o.add(i,"show"),o.add(i,"move"),o.add(i,"remove")},qt=(t,e)=>{const o=e.addFolder("Position"),i={textLine1:"First text line",textLine2:"Second text line",textLine3:"Third text line",anchorX:.5,anchorY:0,offsetX:0,offsetY:25},n={addLabel:()=>a(t),remove:Gt};function a(t){Gt();const e=t.getCenter();Zt.push(new mapgl._J.CircleMarker(t,{coordinates:e,zIndex:2,borderWidth:2,width:4,borderColor:"#ff0000",color:"#000000"})),Ut.push(new mapgl._J.PointLabel(t,{coordinates:e,text:[i.textLine1,i.textLine2,i.textLine3].filter((t=>!!t)).join("\n"),color:"#0000ff",fontSize:36,font:"Open_Sans",haloRadius:1,anchor:[i.anchorX,i.anchorY],offset:[i.offsetX,i.offsetY],image:{url:"assets/images/tooltip-top-symmetric-debug.svg",size:[100,50],stretchX:[[10,40],[60,90]],stretchY:[[20,40]],padding:[20,10,10,10]}}))}o.add(n,"addLabel"),o.add(n,"remove"),o.add(i,"textLine1",i.textLine1).onChange((()=>a(t))),o.add(i,"textLine2",i.textLine2).onChange((()=>a(t))),o.add(i,"textLine3",i.textLine3).onChange((()=>a(t))),o.add(i,"anchorX",0,1).onChange((()=>a(t))),o.add(i,"anchorY",0,1).onChange((()=>a(t))),o.add(i,"offsetX",-500,500).onChange((()=>a(t))),o.add(i,"offsetY",-500,500).onChange((()=>a(t)))},Xt={type:"FeatureCollection",features:[{id:"fid1",type:"Feature",properties:{demoCase:"polygon",height:5e4,name:"это мультиполигон"},geometry:{type:"MultiPolygon",coordinates:[[[[82.87056163819427,54.99147407819542],[82.87445659831033,54.970951765738526],[82.91364225765977,54.97386481188051],[82.91293408309322,54.99391167553448],[82.87056163819427,54.99147407819542]],[[82.8810662275982,54.98727564679343],[82.88401695495884,54.976709908780535],[82.9051441628611,54.97874199743784],[82.9005410281785,54.9889686155237],[82.8810662275982,54.98727564679343]]],[[[82.83651236047322,54.991092873966544],[82.83408939376993,54.96472529513654],[82.85333059994316,54.96764710792581],[82.85340186366973,54.9874584239116],[82.83651236047322,54.991092873966544]]]]}},{id:"fid2",type:"Feature",properties:{demoCase:"polygon"},geometry:{type:"Polygon",coordinates:[[[82.94231414794922,55.01837852360165],[82.95055389404297,55.01109509211588],[82.97595977783203,55.01227627898974],[82.9848861694336,55.022905395299844],[82.97183990478516,55.03549921776523],[82.94506072998047,55.0404176047949],[82.94231414794922,55.01837852360165]]]}},{id:"fid3",type:"Feature",properties:{demoCase:"line",labelLine:!0,title:"это мультиполилиния",name:"fid3"},geometry:{type:"MultiLineString",coordinates:[[[82.84223556518555,55.04287657188142],[82.825927734375,55.02782532823641],[82.82918930053711,55.016508579590386],[82.84687042236328,55.01257157027201],[82.85768508911133,55.013752713656565],[82.87622451782227,55.02113407160079],[82.88103103637695,55.03520409534168]],[[82.85236358642578,55.040122518600725],[82.84017562866211,55.02753014929055],[82.85133361816406,55.02054361297408],[82.85579681396483,55.02575902996018],[82.86884307861328,55.03963070344663]]]}},{id:"fid4",type:"Feature",properties:{demoCase:"dashedLine",labelLine:!0,name:"fid4"},geometry:{type:"LineString",coordinates:[[82.92205810546875,55.04140120974331],[82.94197082519531,55.05044924210548],[82.97973632812499,55.051235930928875],[82.9965591430664,55.039433975694365],[82.99999237060547,55.02113407160079],[82.99930572509766,55.008535734532586],[82.98694610595703,55.002628901338866],[82.9629135131836,54.99770587584443],[82.92686462402344,54.995145663837185]]}},{id:"fid5",type:"Feature",properties:{demoCase:"point5",secondLabel1:"это первая подпись",secondLabel_2:"это вторая подпись"},geometry:{type:"Point",coordinates:[82.90660858154297,55.060674991347625]}},{id:"fid6",type:"Feature",properties:{demoCase:"point"},geometry:{type:"Point",coordinates:[82.89390563964844,55.03845032244144]}},{id:"fid7",type:"Feature",properties:{demoCase:"point",customLabel:"мультиточка 7",name:"это мультиточка",size:10},geometry:{type:"MultiPoint",coordinates:[[82.84223556518555,55.04287657188142],[82.825927734375,55.02782532823641],[82.82918930053711,55.016508579590386]]}},{id:"fid8",type:"Feature",properties:{demoCase:"point8",customLabel:"точка 8",size:30},geometry:{type:"Point",coordinates:[82.91991233825682,55.00927402752062]}}]};let $t;const Yt=[[82.79956238806248,55.08045349512293],[82.79750245708543,54.970247042536045],[83.06392090700986,54.96118089857186],[83.07147401484018,55.080846546695035]],Jt=[];function Kt({map:t,styleId:e,layer:o,beforeId:i,data:n,attrs:a}){return Qt(t),e&&t.setStyle(e),Array.isArray(o)||(o=[o]),o.forEach((e=>{Jt.push(e.id),t.addLayer(e,i)})),new mapgl._J.GeoJsonSource(t,{data:n||Xt,attributes:a})}function Qt(t){try{for(;Jt.length>0;){const e=Jt.pop();"string"==typeof e&&t.removeLayer(e)}}catch(t){}$t&&($t.destroy(),$t=void 0)}let te;function ee(t,e={}){te&&oe(t),t.setStyleZoom(9.5),t.setCenter([39.63181,43.82219]),te=new mapgl._J.GeoJsonTileSource(t,Object.assign({url:`${window.location.protocol}//${window.location.host}/assets/tiles/geojson/{z}/{x}/{y}.json`,maxZoom:10,attributes:{type:"hillshade-tiled"}},e)),t.addLayer({id:"point-tiled",type:"point",filter:["match",["sourceAttr","type"],["hillshade-tiled"],!0,!1],maxzoom:12,style:{allowOverlap:!0,textFont:"Noto_Sans",textField:"Текст",textFontSize:16,textColor:"#000000"}}),t.addLayer({id:"line-tiled",type:"line",filter:["match",["sourceAttr","type"],["hillshade-tiled"],!0,!1],maxzoom:13,style:{color:"rgba(0, 0, 0, 1)",width:10}}),t.addLayer({id:"polygon-tiled",type:"polygon",filter:["match",["sourceAttr","type"],["hillshade-tiled"],!0,!1],maxzoom:13,style:{color:"rgba(0, 0, 0, 0.5)",strokeColor:"rgba(0, 0, 0, 5)",strokeWidth:3}})}function oe(t){te&&(te.destroy(),te=void 0,t.removeLayer("point-tiled"),t.removeLayer("line-tiled"),t.removeLayer("polygon-tiled"))}let ie;const ne="raster-id",ae="rasterTiles",re=["https://tile.openstreetmap.org/${zoom}/${x}/${y}.png","//tileserver-api.web-staging.2gis.ru/tiles?x=${x}&y=${y}&z=${zoom}&ts=realty_resident_sale","//tileserver-api.web-staging.2gis.ru/tiles?x=${x}&y=${y}&z=${zoom}&ts=realty_resident_rent"],le={enable:!1,minStyleZoom:6,maxStyleZoom:15,minSourceZoom:6,maxSourceZoom:13,opacity:.8,tilesUrlSelect:re[0],tilesUrlTpl:""};function se(t){if(ie){ie.destroy(),ie=void 0;try{t.removeLayer(ne)}catch(t){console.log(t)}}le.enable&&(t.addLayer({type:"raster",id:ne,minzoom:le.minStyleZoom,maxzoom:le.maxStyleZoom,filter:["match",["sourceAttr","type"],[ae],!0,!1],style:{opacity:le.opacity}}),ie=new mapgl._J.RasterTileSource(t,{url:(t,e,o)=>function(t,e){const o=Object.keys(e),i=Object.values(e);return new Function(...o,`return \`${t}\`;`)(...i)}(le.tilesUrlTpl||le.tilesUrlSelect||re[0],{x:t,y:e,zoom:o}),minZoom:le.minSourceZoom,maxZoom:le.maxSourceZoom,attributes:{type:ae}}))}function ce(t,e){((t,e)=>{const o={addPointWithElevation:()=>Kt({map:t,layer:{type:"point",id:"demoCase-point-with-elevation",filter:["match",["sourceAttr","demoCase"],["point-with-elevation"],!0,!1],style:{iconPriority:1e3,allowElevation:!0,elevation:["get","elevation"],iconLabelingGroup:"__overlapped",iconImage:"peak",iconWidth:32,textFont:"Open_Sans",textField:["get","customLabel"],textColor:"#ff0000",textFontSize:["interpolate",["linear"],["zoom"],6,9.5,14,24],textPlacement:"bottomCenter",textOffset:-5.15,textHaloColor:"hsla(0, 0%, 100%, 0.5)",textHaloWidth:1}},data:{type:"FeatureCollection",features:[{type:"Feature",properties:{demoCase:"point-with-elevation",elevation:15},geometry:{type:"Point",coordinates:[82.89908737535221,54.978151907217104]}},{type:"Feature",properties:{demoCase:"point-with-elevation",elevation:15},geometry:{type:"Point",coordinates:[33.080775,68.963391]}}]},attrs:{demoCase:"point-with-elevation"}}),addPolygon:()=>Kt({map:t,layer:{type:"polygon",id:"demoCase-polygon",filter:["match",["sourceAttr","demoCase"],["polygon"],!0,!1],style:{strokeColor:"#ff0000",strokeWidth:2,color:["interpolate",["linear"],["zoom"],9,"#0000ff40",12,"#0000ff30",14,"#0000ff20",16,"#0000ff10"]}},attrs:{demoCase:"polygon"}}),addPolygonInLayers:()=>Kt({map:t,layer:{type:"polygon",id:"demoCase-polygonInsert",filter:["match",["sourceAttr","demoCase"],["polygonInsert"],!0,!1],style:{color:"RGBA(255,0,0,0.2)",strokeColor:"#ff0000",strokeWidth:2}},beforeId:"parking area",attrs:{demoCase:"polygonInsert"}}),addLine:()=>Kt({map:t,layer:{type:"line",id:"demoCase-line",filter:["match",["sourceAttr","demoCase"],["line"],!0,!1],style:{color:"#9e02e0",width:5}},attrs:{demoCase:"line"}}),addDashedLine:()=>Kt({map:t,layer:{type:"dashedLine",id:"demoCase-dashedLine",filter:["match",["sourceAttr","demoCase"],["dashedLine"],!0,!1],style:{color:"#ff0000",width:3,dashLength:10,gapLength:10}},attrs:{demoCase:"dashedLine"}}),addLineExtrusion:()=>Kt({map:t,layer:{type:"lineExtrusion",id:"demoCase-lineExtrustion",filter:["match",["sourceAttr","demoCase"],["lineExtrusion"],!0,!1],style:{sideColor:"#9e02e0",height:["sourceAttr","height"]}},attrs:{demoCase:"lineExtrusion"}}),addOneWayLine:()=>Kt({map:t,layer:{type:"oneWayLine",id:"demoCase-oneWayLine",filter:["match",["sourceAttr","demoCase"],["oneWayLine"],!0,!1],style:{color:"#ff0000",lineLength:20,lineWidth:4,duplicationSpacing:70,tipHeight:2,tipWidth:1.4,endingOffsets:20}},attrs:{demoCase:"oneWayLine"}}),addPointWithText:()=>Kt({map:t,layer:{type:"point",id:"demoCase-point",filter:["match",["sourceAttr","demoCase"],["point"],!0,!1],style:{iconLabelingGroup:"__overlapped",iconImage:"peak",iconWidth:16,textFont:"Open_Sans",textField:["get","customLabel"],textColor:"#ff0000",textFontSize:["interpolate",["linear"],["zoom"],6,9.5,14,24],textPlacement:"bottomCenter",textOffset:-5.15,textHaloColor:"hsla(0, 0%, 100%, 0.5)",textHaloWidth:1}},attrs:{demoCase:"point"}}),addPointWithoutIcon:()=>Kt({map:t,layer:{type:"point",id:"demoCase-pointNoIcon",filter:["match",["sourceAttr","demoCase"],["pointNoIcon"],!0,!1],style:{textLabelingGroup:"__overlapped",textFont:"Open_Sans",textField:["get","customLabel"],textColor:"#ff0000",textFontSize:["interpolate",["linear"],["zoom"],6,9.5,14,24],textPlacement:"bottomCenter",textOffset:-5.15,textHaloColor:"hsla(0, 0%, 100%, 0.5)",textHaloWidth:1}},attrs:{demoCase:"pointNoIcon"}}),addPointWithSizeFromData:()=>Kt({map:t,layer:{type:"point",id:"demoCase-pointWithSizeFromData",filter:["match",["sourceAttr","demoCase"],["pointWithSizeFromData"],!0,!1],style:{iconImage:"peak",textFont:"Open_Sans",textField:["get","customLabel"],textFontSize:["get","size"],allowOverlap:!0}},attrs:{demoCase:"pointWithSizeFromData"}}),addLabelLine:()=>Kt({map:t,layer:{type:"labelLine",id:"demoCase-labelLine",filter:["match",["sourceAttr","demoCase"],["labelLine"],!0,!1],style:{textField:["get","name"],textFont:"Open_Sans",textDuplicationSpacing:50,textHaloWidth:2,textColor:"#ff0000",textHaloColor:"#ffffff"}},attrs:{demoCase:"labelLine"}}),addComplexCase:()=>Kt({map:t,attrs:{demoCase:"complex"},layer:{type:"polygon",id:"demoCase-complex",filter:["match",["sourceAttr","demoCase"],["complex"],!0,!1],style:{strokeColor:"#ff0000",strokeWidth:2,color:["interpolate",["linear"],["zoom"],9,"#0000ff40",12,"#0000ff30",14,"#0000ff20",16,"#0000ff10"]}}}),addDataDrivenStyling:()=>Kt({map:t,layer:[{type:"line",id:"demo-lines",filter:["match",["get","dataDriven"],["lines"],!0,!1],style:{color:["get","colorProp"],width:["match",["get","name"],["line1"],30,15]}},{type:"labelLine",id:"demo-lines-labels",filter:["match",["get","dataDriven"],["lines"],!0,!1],style:{textField:["get","name"],textHaloColor:"#ffffff70",textHaloWidth:1}}],data:{type:"FeatureCollection",features:[{type:"Feature",properties:{dataDriven:"lines",name:"line1",colorProp:[0,255,0,255]},geometry:{type:"LineString",coordinates:[[82.62130737304686,55.0217245215306],[83.06625366210936,54.904250955616085]]}},{type:"Feature",properties:{dataDriven:"lines",name:"line2",colorProp:[255,0,0,255]},geometry:{type:"LineString",coordinates:[[82.69546508789062,55.12315257361454],[83.10745239257812,55.00755132274014]]}}]}}),addAdminBoundaries:()=>(0,i.mG)(void 0,void 0,void 0,(function*(){console.log("Loading big GeoJSON data from server...");const e=yield fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson").then((t=>t.json()));console.log("Loaded."),Kt({map:t,layer:{type:"polygon",id:"demoCase-admin-boundaries",filter:["match",["get","featurecla"],["Admin-0 country"],!0,!1],style:{strokeColor:"#ff0000",strokeWidth:2,color:["interpolate",["linear"],["zoom"],9,"#0000ff40",12,"#0000ff30",14,"#0000ff20",16,"#0000ff10"]}},data:e})})),"вытянутый полигон"(){Qt(t),t.setCenter([82.92157359932291,55.02763381919914]),t.setZoom(17),Kt({map:t,data:{type:"Feature",properties:{db_height:3e4},geometry:{type:"Polygon",coordinates:[[[82.92043087350788,55.02764917050232],[82.92107365742427,55.027976663841855],[82.92157359932291,55.02763381919914],[82.92043087350788,55.02764917050232]]]}},attrs:{type:"my"},layer:{id:"my",type:"polygonExtrusion",filter:["==",["sourceAttr","type"],"my"],style:{topColor:"#0000ffaa",sideColor:"#ff0000aa",strokeColor:"#00ff00"}}})},setData(){const e={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[83.07147401484018,55.080846546695035]]}}]},o=Kt({map:t,data:e,attrs:{bar:"asd"},layer:{type:"line",id:"geojson-line-setData",filter:["match",["sourceAttr","bar"],["asd"],!0,!1],style:{color:"#9e02e0",width:5}}});let i=0;const n=setInterval((()=>{i!==Yt.length?(e.features[0].geometry.coordinates.push(Yt[i++]),null==o||o.setData(e)):clearInterval(n)}),1e3)},remove:()=>Qt(t)},n=e.addFolder("GeoJson Source");Object.keys(o).forEach((t=>n.add(o,t)));const a={addHeatmap:()=>(0,i.mG)(void 0,void 0,void 0,(function*(){const e=yield fetch("assets/moscow.json").then((t=>t.json()));Kt({map:t,layer:{id:"demo",filter:["match",["sourceAttr","bar"],["asd"],!0,!1],type:"heatmap",style:{weight:["get","weight"],radius:["interpolate",["linear"],["zoom"],9,5,16.5,7.5],opacity:["interpolate",["linear"],["zoom"],15,1,16.5,0],intensity:["interpolate",["linear"],["zoom"],9,.2,16.5,1],color:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 0, 0)",.2,"rgba(172, 32, 135, 1)",.4,"rgba(255, 154, 0, 1)",.6,"rgba(255, 252, 0, 1)",.8,"rgba(255, 255, 0, 1)",1,"rgba(255, 255, 255, 1)"]}},data:e,attrs:{bar:"asd"}}),t.setCenter([37.61959264695156,55.75832557338807])})),removeHeatmap:()=>{Qt(t)}},r=e.addFolder("Heatmap GeoJson Source");Object.keys(a).forEach((t=>r.add(a,t)))})(t,e),((t,e)=>{const o={addBaseDemo:()=>ee(t),addNonInteractiveDemo:()=>ee(t,{preventInteractions:!0}),remove:()=>oe(t)},n=e.addFolder("GeoJsonTile Source");Object.keys(o).forEach((t=>n.add(o,t))),t.on("click",(t=>(0,i.mG)(void 0,void 0,void 0,(function*(){t.targetData&&"getFeatureProperties"in t.targetData&&console.log("geoJsonTileSource Feature props:",yield t.targetData.getFeatureProperties())}))))})(t,e),((t,e)=>{const o=e.addFolder("Raster Source");o.add(le,"enable").onChange((()=>se(t))),o.add(le,"tilesUrlSelect",re).onChange((()=>se(t))),o.add(le,"tilesUrlTpl").onChange((()=>se(t))),o.add(le,"opacity",0,1,.1).onChange((()=>se(t))),o.add(le,"minStyleZoom").onChange((()=>se(t))),o.add(le,"maxStyleZoom").onChange((()=>se(t))),o.add(le,"minSourceZoom").onChange((()=>se(t))),o.add(le,"maxSourceZoom").onChange((()=>se(t)))})(t,e)}var de=o(2435),me=o(7188),he=o(9073),pe=o(3675),ue=o(6874);class ge extends pe.c{constructor(t){super(),this.uniqId=(0,ue.f)(),this.modules=t.modules,this.mapState=t.state,this.tileObjects=[],this.identifyIds=[]}update(){}destroy(){const t=this.modules;this.tileObjects.forEach((e=>{e.clean(this.mapState),t.tileManager.removeObject(e)})),this.tileObjects=[],t.layers.removeLayer(this),this.mapState.needRerender=!0}getIdentifyData(){return this.identifyIds.map((t=>({dynamicObjectId:this.uniqId,metatileHash:-1,ids:t})))}}var _e=o(378),fe=o(4265);function ye(t,e,o){const i=t.getBoundingClientRect();return[e-i.left-t.clientLeft,o-i.top-t.clientTop]}function be(t,e){const o=[];for(let i=0;i<t.length;i++)o[i]=ye(e,t[i].clientX,t[i].clientY);return o}function xe(t){return t.touches.length>1}var ve=o(3672),we=o(9450),ze=o(7609);function Fe(t,e){if(void 0===e)return;if(e.sourceId){const o=t.getSourceById(e.sourceId);if(!(null==o?void 0:o.isIdentifiedAsDefault()))return}const o={id:(0,ve.Ak)(e.id),symbol:e.symbol};return"point"===e.symbol&&(o.isText=1===e.instanceId),e.sublayer&&(o.isCityCommercial=(0,ze.wu)(e.sublayer),o.isCommercial=(0,ze.Ty)(e.sublayer),o.isPersonal=(0,ze.h3)(e.sublayer),"point"!==e.symbol||o.isCommercial||(o.sysCode=e.objectClass)),e.center&&(o.center=(0,zt.PA)(e.center)),o}function Se(t,e){if(void 0===e)return;if(e.sourceId){const o=t.getSourceById(e.sourceId);if(o)switch(o.type){case"geojson":return"internal"===o.subtype?{type:"geojson",id:(0,ve.Ak)(e.id),feature:o.getFeatureById(e.id),source:o}:{type:"geojsonTile",getFeatureProperties:()=>void 0===e.tileKey?Promise.resolve():o.getObjectAttributes(e.id,e.tileKey),source:o};case"zenith":return{type:"zenith",id:(0,ve.Ak)(e.id),source:o}}}const o={type:"default",id:(0,ve.Ak)(e.id)};return e.floorId&&(o.floorId=(0,ve.Ak)(e.floorId)),o}const Ce=["mousedown","touchstart","mouseup","touchend","click","dblclick","contextmenu","mousemove","mouseout","mouseover"];function Me(t,e,o,i,n){const a=(0,zt.PA)(n.camera.unproject(i));if(e&&void 0!==e.dynamicObjectId){const r=t,l=n.layers.getDynamicObjectLayers().find((t=>t.uniqId===e.dynamicObjectId));if(!l)return;const s={lngLat:a,originalEvent:o,point:i,targetData:l};return void l.emit(r,s)}const r=Object.assign({lngLat:a,originalEvent:o,point:i},function(t,e,o,i,n){var a,r;const l=null!==(r=null===(a=n.threeJsSceneManager)||void 0===a?void 0:a.getEventTarget(o))&&void 0!==r?r:null;if(l&&Ce.includes(t)){const t=(0,we.TE)(n.camera.unproject(i),n.camera.position);if(l.distance<=t)return{target:{id:l.id,symbol:l.symbol},targetData:{id:l.id,type:"default"}}}return{target:Fe(n.sourceStorage,e),targetData:Se(n.sourceStorage,e)}}(t,e,o,i,n)),l=t;n.map.emit(l,r)}class Pe extends ge{constructor(t,e){super(t),this.start=t=>{const{modules:e,container:o}=this;if(0!==t.button)return;const i=ye(o,t.clientX,t.clientY);this.contains(i)&&(e.handler.block(),e.mouseMoveHandler.block(),this.dragStartCursorPoint=i,this.dragStartAnchorPoint=e.camera.project(this.getPosition()),document.addEventListener("mouseup",this.stop),document.addEventListener("mousemove",this.move),this.emitEvent("dragstart",t))},this.move=t=>{const{dragStartAnchorPoint:e,dragStartCursorPoint:o,container:i}=this;if(void 0===e||void 0===o)return;const n=ye(i,t.clientX,t.clientY),a=_e.d9(e);_e.IH(a,a,n),_e.lu(a,a,o),this.setPosition(this.modules.camera.unproject(a)),this.emitEvent("drag",t)},this.stop=t=>{if(0!==t.button)return;this.dragStartCursorPoint=void 0,this.dragStartAnchorPoint=void 0,document.removeEventListener("mouseup",this.stop),document.removeEventListener("mousemove",this.move);const{modules:e}=this;e.handler.unblock(),e.mouseMoveHandler.unblock(),this.emitEvent("dragend",t),this.isInteractive()&&e.identifier.resetCache()},this.container=t.modules.layout.mapContainer,e&&this.container.addEventListener("mousedown",this.start,!0)}destroy(){super.destroy(),this.container.removeEventListener("mousedown",this.start,!0),document.removeEventListener("mouseup",this.stop),document.removeEventListener("mousemove",this.move)}emitEvent(t,e){const o=this.getPosition(),i=(0,he.PA)(o),n=this.modules.camera.project(o),a=this.modules.identifier.searchSync(n),r=void 0!==a&&void 0===a.dynamicObjectId?Fe(this.modules.sourceStorage,a):void 0;this.emit(t,{originalEvent:e,target:r,targetData:this,lngLat:i,point:n})}}var Ie=o(2730),Le=o(6392),ke=o(3249),Ae=o(5308),je=o(871),Te=o(2543);class Ee extends Pe{constructor(t,e){var o,i;super(t,null!==(o=e.draggable)&&void 0!==o&&o),this.options=e,this.interactive=null===(i=this.options.interactive)||void 0===i||i,this.center=(0,he.yq)(this.options.coordinates);const{dynamicStyle:n,collector:a,renderer:r,tileManager:l,identifier:s,layers:c}=this.modules;if(this.layer=(0,Ae.qw)({type:"circle",id:`dynamic-circleMarker-${this.uniqId}`,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,style:{color:this.options.color,strokeColor:this.options.borderColor,strokeColor2:this.options.border2Color,width:this.options.width,strokeWidth:this.options.borderWidth,strokeWidth2:this.options.border2Width}}),!this.layer)return;n.addLayer(this.layer,this.options.zIndex);const d=(0,Le.IR)(this.center),m=(0,ke.FJ)({id:this.interactive?(0,ve.Ru)(0,0):NaN}),h=(0,Te.Yi)(this.mapState.styleState,me.i4,me.Dz,m,me.wz);(0,Ie.XI)({collector:a,generator:je.p.generate,args:[n.getStyle().id,this.layer,h,[[0],[0]]]});const p=a.getAccumulatedData(),u=new fe.W("dynamicObject",p.data,r,d);l.addObject(u),this.tileObjects.push(u),this.interactive&&this.identifyIds.push(p.identifyIds),c.addLayer(this),a.reset(),this.mapState.needRerender=!0,this.interactive&&s.resetCache()}remove(){this.layer&&this.modules.dynamicStyle.removeLayer(this.layer.innerId),this.interactive&&this.modules.identifier.resetCache(),super.destroy()}setPosition(t){const{mapState:e}=this,o=this.tileObjects[0];void 0!==o&&(this.center=t,o.setTileCoords((0,Le.IR)(t)),e.needRerender=!0)}getPosition(){return this.center}isInteractive(){return this.interactive}contains(t){if(!this.layer)return!1;const{layer:e}=this,o=this.modules.camera.project(this.center),i=(0,Te.vn)(e.style.width,(0,Te.jJ)(this.mapState.styleZoom,this.mapState.styleState,[]))/2+(0,Te.vn)(e.style.strokeWidth,(0,Te.jJ)(this.mapState.styleZoom,this.mapState.styleState,[]));return _e.TK(o,t)<=i}}var Oe=o(1684);function He(t,e,o){const{top:i,right:n,bottom:a,left:r}=t.viewport,{clientWidth:l,clientHeight:s}=e;t.size=[Math.max(1,l-r-n),Math.max(1,s-i-a)],o.updateIdentifySize()}function We(t,e){const{top:o,right:i,bottom:n,left:a}=t.padding;t.padding={top:o,right:i,bottom:n,left:a},t.needRerender=!0,e.updateIdentifySize()}var Re=o(8194);const Be="inertia",Ne=Oe.sT.bind(null,Be),De=(t,e)=>{Oe.Vx(Be,{step:(t,o,i)=>{const{startPoint:n,startSpeed:a,startTime:r,direction:l}=i,s=we.d9(l);we.bA(s,s,o),we.IH(s,s,n),Re.r3(t.maxBounds,s)||Ue(e,t),t.center=s,"zoom"===t.zoomTypePreserving?t.styleZoom=(0,he.X$)(t.zoom,s):t.zoom=(0,he.Z3)(t.styleZoom,s);const c=((t,e,o)=>t*Math.pow(1-(o-e)/kt.II.duration,kt.II.nonLinearity))(a,r,t.time);(0,he.ik)(c,t.zoom)<kt.II.minSpeed&&Ue(e,t)}},t)},Ue=(t,e)=>{Oe.sT(Be,e),t.classList.remove("mapgl-inertia")},Ze="center",Ge=(t,e,o={})=>{Oe.sT(Ze,t),Ne(t);const i=we.Ue();if(Re.Rk(i,t.maxBounds,e),!1===o.animate||0===o.duration)t.center=i,"zoom"===t.zoomTypePreserving?t.styleZoom=(0,he.X$)(t.zoom,e):t.zoom=(0,he.Z3)(t.styleZoom,e);else{const e=void 0!==o.easing?o.easing:"linear",n=void 0!==o.duration?o.duration:250;Oe.BL(Ze,{easing:e},t,t.center,i,n)}},Ve=Oe.sT.bind(null,Ze),qe=Oe.Vx.bind(null,Ze,{step:(t,e)=>{t.center=e,"zoom"===t.zoomTypePreserving?t.styleZoom=(0,he.X$)(t.zoom,e):t.zoom=(0,he.Z3)(t.styleZoom,e)}}),Xe="rotation";function $e(t,e){return(t-=e)>=Math.PI?t=(t+Math.PI)%(2*Math.PI)-Math.PI:t<-Math.PI&&(t=Math.PI-(Math.PI-t)%(2*Math.PI)),t+=e}function Ye(t,e,o={}){if(Oe.sT(Xe,t),!1===o.animate||0===o.duration)t.rotation=$e(e,0);else{const i=void 0===o.normalize||o.normalize;Oe.BL(Xe,{easing:o.easing||"linear"},t,t.rotation,i?$e(e,t.rotation):e,o.duration||250)}}const Je=Oe.sT.bind(null,Xe),Ke=Oe.Vx.bind(null,Xe,{step:(t,e)=>t.rotation=$e(e,0)}),Qe="pitch";function to(t,e,o={}){Oe.sT(Qe,t);const i=(0,ut.uZ)(e,t.minPitch,t.maxPitch);!1===o.animate||0===o.duration?t.pitch=i:Oe.BL(Qe,{easing:o.easing||"linear"},t,t.pitch,i,o.duration||300)}const eo=Oe.sT.bind(null,Qe),oo=Oe.Vx.bind(null,Qe,{step:(t,e)=>t.pitch=e}),io="zoom",no=(t,e,o={})=>{Oe.sT(io,t);const i=(0,ut.uZ)(e,t.minZoom,t.maxZoom);if(i!==t.zoom)if(!1===o.animate||0===o.duration)o.zoomPoint&&(we.IH(t.center,t.center,(0,ut.Kv)(t,o.zoomPoint,{zoom:i})),Re.Rk(t.center,t.maxBounds,t.center)),t.zoom=i,t.styleZoom=(0,he.X$)(i,t.center);else{const e=o.useHeightForAnimation?(0,he.r9)(t.zoom,t.size):t.zoom,n=o.useHeightForAnimation?(0,he.r9)(i,t.size):i,a=void 0!==o.easing?o.easing:"easeOutCubic",r=void 0!==o.duration?o.duration:250;Oe.BL(io,{easing:a},t,e,n,r,{zoomPoint:o.zoomPoint,useHeightForAnimation:!!o.useHeightForAnimation,blockBuildingAnimation:!!o.blockBuildingAnimation})}},ao=Oe.sT.bind(null,io),ro=Oe.Vx.bind(null,io,{step:(t,e,o={})=>{const i=o&&o.useHeightForAnimation?(0,he.nn)(e,t.size):e;o&&o.zoomPoint&&(we.IH(t.center,t.center,(0,ut.Kv)(t,o.zoomPoint,{zoom:i})),Re.Rk(t.center,t.maxBounds,t.center)),t.zoom=i,t.styleZoom=(0,he.X$)(i,t.center)}}),lo=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent,so=window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||lo||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,co=_o("webkit"),mo=_o("chrome")||_o("crios"),ho="ActiveXObject"in window,po=!mo&&_o("safari"),uo=(_o("gecko")&&!co&&window.opera,navigator.platform.toUpperCase().indexOf("MAC")>=0),go=_o("firefox");function _o(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function fo(t,e){const o=Object.assign({hitType:"event",eventCategory:"Metrics"},t);window.ga&&window.ga(`${kt.co.gaName}.send`,o)}function yo(t,e){let o,i=!1;function n(){i=!1,o&&(a(...o),o=!1)}function a(...a){i?o=a:(t(...a),setTimeout(n,e),i=!0)}return a}function bo(t){ao(t),Ve(t),Je(t),eo(t),Ne(t)}class xo{constructor(t,e){this.onWheelScroll=t=>{t.preventDefault(),void 0===t.deltaMode&&void 0===t.deltaY||(this.state.userHasInteracted=!0,this.screenPoint=ye(this.container,t.clientX,t.clientY),t.ctrlKey?this.deltaAccumulator-=10*t.deltaY:1===t.deltaMode?this.deltaAccumulator-=20*t.deltaY:this.deltaAccumulator-=t.deltaY,this.eventCount+=1)},this.startZooming=()=>{const t=this.state;let e;e=uo?this.getDelta()*kt.sP.macTouchDelta:(0,ut.Xx)(this.getDelta())*kt.sP.mouseDelta;const o=t.zoom+e,i=(0,ut.uZ)(o,t.minZoom,t.maxZoom);i!==t.zoom&&(bo(t),no(t,i,{duration:kt.sP.animDuration,animate:!uo,zoomPoint:t.keepCenterWhileUserZoomRotate?void 0:this.screenPoint,blockBuildingAnimation:!0}))},this.stop=()=>{this.state.userHasInteracted=!0,ao(this.state)},this.state=t,this.container=e,uo||(this.startZooming=yo(this.startZooming,kt.sP.throttleDelay)),this.deltaAccumulator=0,this.eventCount=0,this.screenPoint=[0,0],this.container.addEventListener("wheel",this.onWheelScroll),this.container.addEventListener("mousedown",this.stop)}destroy(){this.container.removeEventListener("wheel",this.onWheelScroll),this.container.removeEventListener("mousedown",this.stop)}update(){0!==this.eventCount&&(this.startZooming(),this.state.needRerender=!0)}getDelta(){const t=this.deltaAccumulator/this.eventCount;return this.deltaAccumulator=0,this.eventCount=0,t}}class vo{constructor(t){this.defs=t.map((t=>new wo(t)))}check(t){const e=this.defs;let o=!1;for(let i=0;i<e.length;i++)o?e[i].update(t):o=!e[i].equal(t);return o}}class wo{constructor(t){this.path=Array.isArray(t.path)?t.path:[t.path],this.type=t.type,"number"===this.type?(this.last=NaN,this.compare=this.primitive,this.updateFn=this.primitiveUpdate):"boolean"===this.type?(this.last=void 0,this.compare=this.primitive,this.updateFn=this.primitiveUpdate):"vec2"===this.type?(this.last=[NaN,NaN],this.compare=this.vec2,this.updateFn=this.vec2Update):"string"===this.type?(this.last="",this.compare=this.primitive,this.updateFn=this.primitiveUpdate):"padding"===this.type&&(this.last={left:0,right:0,bottom:0,top:0},this.compare=this.padding,this.updateFn=this.paddingUpdate)}equal(t){const e=this.take(t),o=this.compare(this.last,e);return this.updateFn(e),o}update(t){this.updateFn(this.take(t))}take(t){const e=this.path;let o=0;do{t=t[e[o++]]}while(o<e.length);return t}primitive(t,e){return t===e}padding(t,e){return t.top===e.top&&t.bottom===e.bottom&&t.left===e.left&&t.right===e.right}paddingUpdate(t){this.last.top=t.top,this.last.bottom=t.bottom,this.last.right=t.right,this.last.left=t.left}vec2(t,e){return t[0]===e[0]&&t[1]===e[1]}primitiveUpdate(t){this.last=t}vec2Update(t){this.last[0]=t[0],this.last[1]=t[1]}}class zo{constructor(t,e){this.onMouseUp=t=>{1===t.which&&this.start()},this.onTouchEnd=t=>{0===t.touches.length&&this.start()},this.start=()=>{const t=this.state;t.userHasInteracted=!0;const e=this.getCurrentSpeed(t.time),o=we.kE(e);if((0,he.ik)(o,t.zoom)<=kt.II.minSpeed)return;const i=(0,he.h0)(kt.II.maxSpeed,t.zoom),n=Math.min(o,i),a=this.calcDistanceByStartSpeed(n),r=we.d9(t.center),l=we.Ue();we.Fv(l,e),((t,e,o,i,n)=>{Oe.BL(Be,{easing:"inertia"},t,0,n,kt.II.duration,{startPoint:e,startSpeed:o,direction:i,startTime:t.time})})(t,r,n,l,a),this.container.classList.add("mapgl-inertia")},this.stop=()=>{Ne(this.state),this.container.classList.remove("mapgl-inertia"),this.times=[],this.positions=[]},this.state=t,this.container=e,this.container.addEventListener("mouseup",this.onMouseUp),this.container.addEventListener("mousedown",this.stop),so&&(this.container.addEventListener("touchend",this.onTouchEnd),this.container.addEventListener("touchstart",this.stop)),this.zoomDiffer=new vo([{path:"zoom",type:"number"}]),this.styleZoomDiffer=new vo([{path:"styleZoom",type:"number"}]),this.centerDiffer=new vo([{path:"center",type:"vec2"}]),this.times=[],this.positions=[]}destroy(){this.container.removeEventListener("mouseup",this.onMouseUp),this.container.removeEventListener("mousedown",this.stop),this.container.removeEventListener("touchend",this.onTouchEnd),this.container.removeEventListener("touchstart",this.stop)}update(){const t=this.state;this.centerDiffer.check(t)&&this.rememberTimeAndPosition(t);("zoom"===t.zoomTypePreserving?this.zoomDiffer.check(t):this.styleZoomDiffer.check(t))&&this.stop()}removeOldRecords(t){for(;t-this.times[0]>100&&this.times.length;)this.times.shift(),this.positions.shift()}rememberTimeAndPosition(t){const e=t.time;this.removeOldRecords(e),this.times.push(e),this.positions.push(we.d9(t.center))}getCurrentSpeed(t){if(this.removeOldRecords(t),this.times.length<2)return we.Ue();const e=we.d9(this.positions[this.positions.length-1]);return we.lu(e,e,this.positions[0]),we.bA(e,e,1/(this.times[this.times.length-1]-this.times[0])),e}calcDistanceByStartSpeed(t){return t*kt.II.duration/(kt.II.nonLinearity+1)}}class Fo{constructor(t){this.emitMouseEvent=t=>{const e=ye(this.container,t.clientX,t.clientY);this.emitEvent(t,e)},this.emitTouchEvent=t=>{const e=ye(this.container,t.changedTouches[0].clientX,t.changedTouches[0].clientY);this.emitEvent(t,e)},this.container=t.layout.mapContainer,this.modules=t,this.container.addEventListener("mouseup",this.emitMouseEvent),this.container.addEventListener("touchend",this.emitTouchEvent)}destroy(){this.container.removeEventListener("mouseup",this.emitMouseEvent),this.container.removeEventListener("touchend",this.emitTouchEvent)}update(){}emitEvent(t,e){if(!this.modules.layout.isActionWithCanvas(t))return;const o=t.type;this.modules.identifier.search(o,e).then((i=>{Me(o,i,t,e,this.modules)}))}}class So{constructor(t,e,o){this.rotationDetected=!1,this.onGestureStart=t=>{t.preventDefault(),this.startRotation=this.state.rotation,this.rotationDetected=!1,this.gestureRotation=0,this.isGestureStart=!0,this.startZoom=this.state.zoom,this.screenPoint=ye(this.container,t.clientX,t.clientY),this.state.userHasInteracted=!0,this.state.disableRotationByUserInteraction||this.container.classList.add("mapgl-rotating"),this.map.emit("interactionstart",{target:"zoom/rotation"})},this.onGestureEnd=t=>{t.preventDefault(),this.isGestureStart&&(this.isGestureStart=!1,this.state.userHasInteracted=!0,this.container.classList.remove("mapgl-rotating"),this.map.emit("interactionend",{target:"zoom/rotation"}))},this.onGestureChange=t=>{t.preventDefault(),this.state.userHasInteracted=!0;const e=t.rotation/40;!this.rotationDetected&&Math.abs(e)>this.state.touchRotationThreshold&&(this.rotationDetected=!0,this.startRotation=this.state.rotation-e),this.rotationDetected&&(this.gestureRotation=e),t.scale>1?this.gestureZoom=t.scale-1:this.gestureZoom=-1/t.scale+1},this.state=t,this.container=e,this.map=o,this.isGestureStart=!1,this.gestureRotation=0,this.gestureZoom=0,this.screenPoint=[0,0],this.startRotation=0,this.startZoom=0,this.container.addEventListener("gesturestart",this.onGestureStart),this.container.addEventListener("gestureend",this.onGestureEnd),this.container.addEventListener("gesturechange",this.onGestureChange)}destroy(){this.container.removeEventListener("gesturestart",this.onGestureStart),this.container.removeEventListener("gestureend",this.onGestureEnd),this.container.removeEventListener("gesturechange",this.onGestureChange)}update(){if(0===this.gestureRotation&&0===this.gestureZoom)return;const t=this.state,e=this.startZoom+this.gestureZoom,o=this.startRotation+this.gestureRotation,i=we.Ue(),n=t.keepCenterWhileUserZoomRotate?we.Ue():(0,ut.Kv)(t,this.screenPoint,{zoom:e,rotation:o});we.IH(i,t.center,n),bo(t),Ge(t,i,{animate:!1}),no(t,e,{animate:!1}),t.disableRotationByUserInteraction||Ye(t,o,{animate:!1}),this.gestureRotation=0,this.gestureZoom=0}}class Co extends pe.c{constructor(t){super(),this.durations=[],this.earlyTimes=[],this.countToCheck=75,this.mayCountMetrics=!1,this.startRenderTime=0,this.catchNextUpdate=!1,this.mapState=t,setTimeout((()=>{this.mayCountMetrics=!0}),1e4)}update(){const{time:t,needRerender:e}=this.mapState;this.mayCountMetrics?(this.catchNextUpdate&&(this.durations.push(t-this.startRenderTime),this.catchNextUpdate=!1),e&&(this.startRenderTime=t,this.catchNextUpdate=!0),this.durations.length>this.countToCheck&&this.check()):this.earlyTimes.push(t)}getEarlyFps(){if(this.mayCountMetrics)return;const t=[];for(let e=1;e<this.earlyTimes.length;e++)t.push(this.earlyTimes[e]-this.earlyTimes[e-1]);return Mo(t)}check(){const t=Mo(this.durations);this.emit("fps",t),t<kt.Vc.fpsCaveat&&(this.mapState.performanceCaveatEmitted=!0,this.emit("performancecaveat")),this.durations=[],this.countToCheck=Math.min(1e3,2*this.countToCheck)}}function Mo(t){t.sort(((t,e)=>t-e));const e=t[Math.floor(3*t.length/4)];return Math.round(1e3/e)}var Po=o(9476);class Io{constructor(){this.differ=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"rotation",type:"number"},{path:"pitch",type:"number"}]),this.debouncedSet=(0,Po.D)((t=>{Oe.BL("stillness",{},t,t.stillness,1,400)}),100,!1),this.stillnessTickerUpdate=Oe.Vx.bind(null,"stillness",{step:(t,e)=>{t.stillness=e}})}update(t){this.differ.check(t)&&(t.stillness=0,Oe.sT("stillness",t),this.debouncedSet(t)),this.stillnessTickerUpdate(t)}}class Lo{constructor(t){this.onTouchStart=()=>{this.isTouchStartEmitted=!0},this.onMouseOut=t=>{if(!this.prevGeo)return;const e=ye(this.container,t.clientX,t.clientY);Me("mouseout",this.prevGeo,t,e,this.modules),this.prevGeo=void 0,this.skipIdentifyEvents=!0,this.modules.defaultSource.resetHoverId(),this.container.classList.remove("mapgl-hover")},this.onMouseMove=t=>{if(this.isTouchStartEmitted)return void(this.isTouchStartEmitted=!1);if(this.skipIdentifyEvents=!1,this.isBlocked)return;const e=ye(this.container,t.clientX,t.clientY);Promise.resolve().then((()=>this.modules.layout.isActionWithCanvas(t)?this.modules.identifier.search("mouseMove",e):void 0)).then((o=>{if(this.skipIdentifyEvents)return;const i=o&&this.prevGeo&&(!(0,ve.v7)(o.id,this.prevGeo.id)||o.instanceId!==this.prevGeo.instanceId||o.dynamicObjectId!==this.prevGeo.dynamicObjectId||o.symbol!==this.prevGeo.symbol);!this.prevGeo||o&&!i||(Me("mouseout",this.prevGeo,t,e,this.modules),this.prevGeo=void 0,this.container.classList.remove("mapgl-hover"),this.modules.defaultSource.resetHoverId()),!o||this.prevGeo&&!i||(this.prevGeo=o,this.container.classList.add("mapgl-hover"),Me("mouseover",o,t,e,this.modules),this.modules.defaultSource.setHoverId(o.id)),Me("mousemove",o,t,e,this.modules)}))},this.modules=t,this.isTouchStartEmitted=!1,this.skipIdentifyEvents=!1,this.isBlocked=!1,this.prevGeo=void 0,this.container=this.modules.layout.mapContainer,this.container.addEventListener("touchstart",this.onTouchStart),this.container.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("mouseout",this.onMouseOut)}destroy(){this.container.removeEventListener("touchstart",this.onTouchStart),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("mouseout",this.onMouseOut)}update(){}block(){this.isBlocked=!0}unblock(){this.isBlocked=!1}}const ko=(t,e,o,i)=>{Oe.sT("buildingHeight"+i,t),!1===o.animate||0===o.duration?(e.set(i,o.to),t.needLabeling=!0):Oe.BL("buildingHeight"+i,{easing:o.easing},t,o.from,o.to,o.duration)};class Ao{constructor(t,e){this.state=t,this.modules=e,this.differ=new vo([{path:"styleZoom",type:"number"}]),this.buildingHeights=new Map,this.minZoomBuildingHeight=1/0}getBuildingHeight(t){return void 0!==t?(this.buildingHeights.has(t)||this.addBuildingHeightZoom(t),this.buildingHeights.get(t)||0):this.getDefaultBuildingHeight()}update(){this.buildingHeights.forEach(((t,e)=>{this.updateByZoom(e,t),this.isAnimating()&&((t,e,o)=>{Oe.Vx.call(null,"buildingHeight"+o,{step:(t,i)=>e.set(o,i),complete:t=>t.needLabeling=!0},t)})(this.state,this.buildingHeights,e)}))}isAnimating(){return Array.from(this.buildingHeights.keys()).some((t=>void 0!==Oe.U2("buildingHeight"+t,this.state)))}clearBuildingHeights(){this.buildingHeights.clear(),this.minZoomBuildingHeight=1/0}getDefaultBuildingHeight(){const t=this.minZoomBuildingHeight!==1/0?this.minZoomBuildingHeight:16;return this.state.styleZoom<t?0:1}updateByZoom(t,e){const o=this.state,i=Oe.U2("zoom",o),n=Oe.U2("buildingHeight"+t,o),a=void 0!==n?n.to:e,r=void 0!==i?i.attributes.blockBuildingAnimation:this.differ.check(o);o.styleZoom>=t&&this.modules.tileManager.viewportTilesReady()&&1!==a&&!r?ko(o,this.buildingHeights,{animate:!0,easing:kt.Wf.easing,from:e,to:1,duration:kt.Wf.duration*(1-e)},t):o.styleZoom<t&&0!==a&&ko(o,this.buildingHeights,{animate:!1,to:0},t)}addBuildingHeightZoom(t){const e=t<this.state.styleZoom?0:1;this.buildingHeights.set(t,e),this.minZoomBuildingHeight>t&&(this.minZoomBuildingHeight=t)}}function jo(t){return`gltf-fade-${t.toString()}`}class To{constructor(t,e){this.state=t,this.modules=e,this.zoomDiffer=new vo([{path:"styleZoom",type:"number"}]),this.minStyleZoom=1/0,this.animationState={},this.linkedIdsToModelId={},this.hiddenObjects=new Set,this.linkedIds={}}registerModel(t,e){if(this.animationState[t])return;const o={tickerName:jo(t),readiness:0};this.linkedIds[t]=e,this.animationState[t]=o;const i=t.toString();for(const t of e)this.linkedIdsToModelId[t]=i;Oe.BL(o.tickerName,{easing:kt.Wf.easing},this.state,0,1,kt.Wf.duration)}removeModel(t){const e=this.animationState[t];e&&Oe.sT(e.tickerName,this.state);const o=this.linkedIds[t];if(o)for(const t of o)delete this.linkedIdsToModelId[t];delete this.linkedIds[t]}getModelOpacity(t,e){void 0!==e&&this.updateMinZoom(e);const o=this.animationState[t];return o?o.readiness:1}getModelOpacityForLinkedObject(t){const e=this.linkedIdsToModelId[t];return e?this.getModelOpacity(e):1}isAnimating(t){if(!t){for(const t in this.animationState)if(void 0!==Oe.U2(this.animationState[t].tickerName,this.state))return!0;return!1}const e=this.linkedIdsToModelId[t],o=this.animationState[e];return!!o&&void 0!==Oe.U2(o.tickerName,this.state)}hasModelFor(t){const e=this.linkedIdsToModelId[t];return void 0!==this.animationState[e]}update(){const t=Oe.U2("zoom",this.state);if(!(void 0!==t?t.attributes.blockBuildingAnimation:this.zoomDiffer.check(this.state))&&this.modules.tileManager.viewportTilesReady()&&this.state.styleZoom>=this.minStyleZoom){for(const t in this.animationState){const e=this.animationState[t];if(Oe.Vx(e.tickerName,{step:(t,o)=>{e.readiness=o}},this.state),1===e.readiness&&this.linkedIds[t])for(const e of this.linkedIds[t])this.hiddenObjects.add(e)}this.hiddenObjects.forEach((t=>{this.state.hiddenObjectIds.add(t)}))}else this.state.styleZoom<this.minStyleZoom&&this.hiddenObjects.forEach((t=>{this.state.hiddenObjectIds.delete(t)}))}updateMinZoom(t){t<this.minStyleZoom&&(this.minStyleZoom=t)}}var Eo=o(9726),Oo=o(127);class Ho extends class{constructor(){this.type=0,this._objects=[]}render(){return this._objects=[],this}addObject(t){return this._objects.push(t),this}hasObjects(){return this._objects.length>0}}{constructor(){super(...arguments),this.type=17}render(){return this._objects.forEach((t=>t.render())),this._objects=[],this}}class Wo{constructor(t=null,e={}){this._src=null,this._glContext=null,this._texture=null,this._src=t,this.options=Object.assign({},Wo.defaultOptions,e)}enable(t,e){const o=void 0!==e?e:this.options.unit;return void 0!==o&&t.activeTexture(t.TEXTURE0+o),this._texture||this.prepare(t),t.bindTexture(t.TEXTURE_2D,this._texture),this}remove(){return this._texture&&this._glContext&&(this._glContext.deleteTexture(this._texture),this._glContext=null,this._texture=null),this}getTexture(){return this._texture}subImage(t,e,o,i){var n;t.bindTexture(t.TEXTURE_2D,this._texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.options.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.options.premultiplyAlpha);const a=this._toGlParam(t,this.options.format),r=this._toGlParam(t,null!==(n=this.options.type)&&void 0!==n?n:Wo.UnsignedByte);return null===a||null===r||t.texSubImage2D(t.TEXTURE_2D,0,o,i,a,r,e),this}prepare(t){var e,o,i;this._glContext=t,this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.options.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.options.premultiplyAlpha);const n=this._toGlParam(t,this.options.format),a=this._toGlParam(t,null!==(e=this.options.type)&&void 0!==e?e:Wo.UnsignedByte),r=this._toGlParam(t,this.options.wrapS),l=this._toGlParam(t,this.options.wrapT),s=this._toGlParam(t,null!==(o=this.options.magFilter)&&void 0!==o?o:Wo.LinearFilter),c=this._toGlParam(t,null!==(i=this.options.minFilter)&&void 0!==i?i:Wo.LinearMipMapLinearFilter);return null!==n&&null!==a&&(ArrayBuffer.isView(this._src)||null===this._src?this.options.size&&t.texImage2D(t.TEXTURE_2D,0,n,this.options.size[0],this.options.size[1],0,n,a,this._src):this._src&&t.texImage2D(t.TEXTURE_2D,0,n,n,a,this._src)),null!==r&&null!==l&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,l)),null!==s&&null!==c&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,c)),this.options.generateMipmaps&&this.options.minFilter!==Wo.NearestFilter&&this.options.minFilter!==Wo.LinearFilter&&t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),this}_toGlParam(t,e){return e===Wo.ClampToEdgeWrapping?t.CLAMP_TO_EDGE:e===Wo.Repeat?t.REPEAT:e===Wo.MirroredRepeat?t.MIRRORED_REPEAT:e===Wo.NearestFilter?t.NEAREST:e===Wo.NearestMipMapNearestFilter?t.NEAREST_MIPMAP_NEAREST:e===Wo.NearestMipMapLinearFilter?t.NEAREST_MIPMAP_LINEAR:e===Wo.LinearFilter?t.LINEAR:e===Wo.LinearMipMapNearestFilter?t.LINEAR_MIPMAP_NEAREST:e===Wo.LinearMipMapLinearFilter?t.LINEAR_MIPMAP_LINEAR:e===Wo.RgbaFormat?t.RGBA:e===Wo.AlphaFormat?t.ALPHA:e===Wo.RgbFormat?t.RGB:e===Wo.UnsignedByte?t.UNSIGNED_BYTE:e===Wo.Float?t.FLOAT:null}}Wo.ClampToEdgeWrapping=8,Wo.Repeat=9,Wo.MirroredRepeat=10,Wo.NearestFilter=1,Wo.NearestMipMapNearestFilter=2,Wo.NearestMipMapLinearFilter=3,Wo.LinearFilter=4,Wo.LinearMipMapNearestFilter=5,Wo.LinearMipMapLinearFilter=6,Wo.RgbaFormat=11,Wo.AlphaFormat=12,Wo.RgbFormat=13,Wo.UnsignedByte=14,Wo.Float=15,Wo.defaultOptions={magFilter:Wo.LinearFilter,minFilter:Wo.LinearMipMapLinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping,format:Wo.RgbaFormat,generateMipmaps:!0,flipY:!0,premultiplyAlpha:!0,type:Wo.UnsignedByte};class Ro{constructor(t={}){this._texture=null,this._glContext=null,this._frameBuffer=null,this._renderBuffer=null,this.options=Object.assign({},Ro.defaultOptions,t),this._texture=new Wo(null,this.options)}bind(t){return this._frameBuffer||this._prepare(t),t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),this}unbind(t){return t.bindFramebuffer(t.FRAMEBUFFER,null),this}remove(){return this._unprepare(),this}setSize(t){return this.options.size=t,this._unprepare(),this}getTexture(){return this._texture}_prepare(t){this._glContext=t,this._texture||(this._texture=new Wo(null,this.options)),this._texture.prepare(t),this._frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),this._renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this._renderBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.options.size[0],this.options.size[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture.getTexture(),0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this._renderBuffer),this._checkComplete(t),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}_unprepare(){this._texture&&(this._texture.remove(),this._texture=null),this._glContext&&this._frameBuffer&&(this._glContext.deleteFramebuffer(this._frameBuffer),this._glContext.deleteRenderbuffer(this._renderBuffer),this._frameBuffer=null,this._renderBuffer=null)}_checkComplete(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);e!==t.FRAMEBUFFER_COMPLETE&&(e===t.FRAMEBUFFER_UNSUPPORTED?console.log("Framebuffer is unsupported"):e===t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT?console.log("Framebuffer incomplete attachment"):e===t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS?console.log("Framebuffer incomplete dimensions"):e===t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT?console.log("Framebuffer incomplete missing attachment"):console.log(`Unexpected framebuffer status: ${e}`))}}Ro.defaultOptions=Object.assign({},Wo.defaultOptions,{size:[0,0],generateMipmaps:!1});var Bo=o(878),No=o(6273);const{wallMinBrightness:Do,wallMaxBrightness:Uo}=kt.o,{lightIntensity:Zo}=kt.Fj,Go=[Zo,Zo,Zo],Vo=[.05,.05,.05],qo=[.2,.2,.2],Xo=(t,e,o)=>{const{size:i}=o,n=window.devicePixelRatio;e.bind(t,{u_vec2_vpt_size:[i[0]*n,i[1]*n]})},$o=(t,e,o,i)=>{const{size:n}=o,a=window.devicePixelRatio;if(o.demMode){const o=i.renderer.getFramebuffer(i.demManager.getFlatFramebufferId());if(!o)return;e.bind(t,{u_vec2_vpt_size:[Math.trunc(o.renderTarget.options.size[0]),Math.trunc(o.renderTarget.options.size[1])]})}else e.bind(t,{u_vec2_vpt_size:[n[0]*a,n[1]*a]})},Yo=(t,e,o)=>{const i=(0,he.EO)(o.zoom);e.bind(t,{u_vec3_projection_scale_style_scale_dpi:[i,i,No.$U*window.devicePixelRatio]})},Jo=(t,e,o)=>{const i=(0,he.EO)(o.styleZoom);e.bind(t,{u_vec3_projection_scale_style_scale_dpi:[i,i,No.$U*window.devicePixelRatio]})},Ko=(t,e,o,i)=>{e.bind(t,{u_float_height_factor:i.buildingHeightAnimator.getDefaultBuildingHeight()})},Qo=(t,e,o)=>{e.bind(t,{u_float_height_limitation:(0,he.r9)(o.zoom,o.size)*Math.cos(o.pitch)*.75*No.gt,u_float_tile_height:No._9})},ti=(t,e)=>{e.bind(t,{u_float_height_limitation:No._9,u_float_tile_height:No._9})},ei=(t,e,o,i)=>{const n=i.styleManager.getStyle(o.handyStyleId);if(!n)return!1;e.bind(t,{u_vec3_light_direction:n.light.direction,u_vec3_ambient_color:n.light.ambientColor.value})},oi=(t,e)=>{e.bind(t,{u_vec3_light_color:Vo})},ii=(t,e)=>{e.bind(t,{u_vec3_light_color:qo})},ni=(t,e)=>{e.bind(t,{u_vec3_light_color:Go})},ai=(t,e)=>{e.bind(t,{u_float_border_width_offset:1/window.devicePixelRatio})},ri=(t,e)=>{e.bind(t,{u_float_z_offset:0})},li=(t,e)=>{e.bind(t,{u_float_z_offset:-1e-5})},si=(t,e)=>{e.bind(t,{u_sr2d_texture:0})},ci=(t,e)=>{e.bind(t,{u_vec2_scale_limits:[0,No.ax]})},di=(t,e,o,{assetManager:i})=>{i.textures.forEach((e=>e.enable(t)))};function mi(...t){return(e,o,i,n)=>{t.forEach((t=>t(e,o,i,n)))}}var hi=o(174),pi=o(4713);class ui{constructor(t,e={}){this._buffer=t,this.options=Object.assign({},pi.l.defaultOptions,e)}bind(t,e,o,i){this._buffer.bind(t,e,o||this.options,i)}}var gi=o(8946),_i=o(6263),fi=o(749),yi=o(4922),bi=o(1678),xi=o(8965),vi=o(7407);const wi=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:8,offset:0,normalized:!0});return new gi.j(e,{a_vec2_vertex:o})},zi=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:8,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:8,offset:4,normalized:!0});return new gi.j(e,{a_vec2_vertex:o,a_vec4_identifier:i})},Fi=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:12,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.Byte,stride:12,offset:4,normalized:!1});return new gi.j(e,{a_vec2_vertex:o,a_vec4_normals:i})},Si=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:16,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.Byte,stride:16,offset:4,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.Float,stride:16,offset:8,normalized:!1});return new gi.j(e,{a_vec2_vertex:o,a_vec4_normals:i,a_vec2_shift:n})},Ci=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:12,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.Byte,stride:12,offset:4,normalized:!1}),n=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:12,offset:8,normalized:!0});return new gi.j(e,{a_vec2_vertex:o,a_vec4_normals:i,a_vec4_identifier:n})},Mi=(t,e)=>{const o=28,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:o,offset:4,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:o,offset:8,normalized:!1}),r=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:12,normalized:!1}),l=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:16,normalized:!1}),s=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:20,normalized:!1}),c=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:o,offset:24,normalized:!0});return new gi.j(e,{a_vec2_vertex:i,a_vec2_texture_widen:a,a_vec2_widen:n,a_float_vertex_distance:r,a_float_component_distance:l,a_float_object_length:s,a_vec4_identifier:c})},Pi=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:20,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:20,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:20,offset:12,normalized:!1});return new gi.j(e,{a_vec4_position:o,a_vec2_offset:i,a_vec2_texcoord:n})},Ii=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:20,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:20,offset:8,normalized:!1}),n=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:20,offset:16,normalized:!0});return new gi.j(e,{a_vec4_position:o,a_vec2_offset:i,a_vec4_identifier:n})},Li=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:28,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:28,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.Float,stride:28,offset:12,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Float,stride:28,offset:20,normalized:!1});return new gi.j(e,{a_vec4_position:o,a_vec2_offset:n,a_vec2_texcoord:i,a_vec2_style_zoom_limits:a})},ki=(t,e)=>{const o=xi.j.sinks.fill.stride,i=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:3,dataType:pi.l.Byte,stride:o,offset:8,normalized:!1});return new gi.j(e,{a_vec3_vertex:i,a_vec3_normal:n})},Ai=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:20,offset:0,normalized:!0}),i=new ui(t,{itemSize:3,dataType:pi.l.Byte,stride:20,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:20,offset:16,normalized:!1});return new gi.j(e,{a_vec3_vertex:o,a_vec3_normal:i,a_vec2_dem_position:n})},ji=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:20,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:20,offset:12,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:20,offset:16,normalized:!1});return new gi.j(e,{a_vec3_vertex:o,a_vec4_identifier:i,a_vec2_dem_position:n})},Ti=(t,e)=>{const o=20,i=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:1,dataType:pi.l.Short,stride:o,offset:6,normalized:!0}),a=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:o,offset:8,normalized:!1}),r=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:o,offset:10,normalized:!1}),l=new ui(t,{itemSize:3,dataType:pi.l.Byte,stride:o,offset:12,normalized:!1}),s=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:o,offset:16,normalized:!1});return new gi.j(e,{a_vec4_vertex:i,a_vec2_normal:a,a_vec2_normal_delta:r,a_vec3_direction:l,a_float_distance:n,a_vec2_dem_position:s})},Ei=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:24,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:24,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:24,offset:12,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:24,offset:16,normalized:!1});return new gi.j(e,{a_vec3_position:o,a_vec2_offset:i,a_vec2_texcoord:n,a_vec2_range:a})},Oi=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:24,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:24,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:24,offset:12,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:24,offset:16,normalized:!1}),r=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:24,offset:20,normalized:!0});return new gi.j(e,{a_vec3_position:o,a_vec2_offset:i,a_vec2_texcoord:n,a_vec2_range:a,a_vec4_identifier:r})},Hi=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:12,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:12,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:12,offset:10,normalized:!1});return new gi.j(e,{a_vec2_position:o,a_vec2_direction:i,a_vec2_widen_direction:n})},Wi=(t,e)=>{const o=bi.X.sinks.fill.stride,i=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:8,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:o,offset:16,normalized:!1});return new gi.j(e,{a_vec3_vertex:i,a_vec2_texcoord:n,a_vec2_dem_position:a})},Ri=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:8,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.Byte,stride:8,offset:4,normalized:!1});return new gi.j(e,{a_vec3_vertex:o,a_vec4_direction_distance:i})},Bi=(t,e)=>{const o=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:16,offset:0,normalized:!0}),i=new ui(t,{itemSize:4,dataType:pi.l.Byte,stride:16,offset:8,normalized:!1}),n=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:16,offset:12,normalized:!1});return new gi.j(e,{a_vec3_vertex:o,a_vec4_direction_distance:i,a_vec2_dem_position:n})},Ni=(t,e)=>{const o=36,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:4,normalized:!0}),a=new ui(t,{itemSize:4,dataType:pi.l.Byte,stride:o,offset:8,normalized:!1}),r=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:o,offset:12,normalized:!1}),l=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:o,offset:16,normalized:!1}),s=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:20,normalized:!1}),c=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:24,normalized:!1}),d=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:28,normalized:!1}),m=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:o,offset:32,normalized:!0});return new gi.j(e,{a_vec2_vertex:i,a_vec2_segment_end:n,a_vec4_texture_widen_arrow_widen:a,a_vec2_widen:r,a_vec2_direction:l,a_float_distance_from_start:s,a_float_object_length:c,a_float_type:d,a_vec4_identifier:m})},Di=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:12,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:12,offset:4,normalized:!1});return new gi.j(e,{a_vec4_vertex:o,a_vec2_widen:i})},Ui=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:12,offset:0,normalized:!0}),i=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:12,offset:4,normalized:!1}),n=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:12,offset:8,normalized:!0});return new gi.j(e,{a_vec4_vertex:o,a_vec2_widen:i,a_vec4_identifier:n})},Zi=(t,e)=>{const o=_i.h.sinks.fill.stride,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:4,normalized:!1});return new gi.j(e,{a_vec2_vertex:i,a_vec2_texcoord:n})},Gi=(t,e)=>{const o=fi.B.sinks.framebuffer.stride,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:1,dataType:pi.l.Float,stride:o,offset:4,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:o,offset:8,normalized:!1});return new gi.j(e,{a_vec2_position:i,a_vec2_widen:a,a_float_weight:n})},Vi=(t,e)=>{const o=new ui(t,{itemSize:2,dataType:pi.l.Float,stride:0,offset:0,normalized:!1});return new gi.j(e,{a_vec2_position:o})},qi=(t,e)=>new gi.j(e,{a_vec2_position:t}),Xi=(t,e)=>{const o=yi._.sinks.elevation.stride,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:4,normalized:!1});return new gi.j(e,{a_vec2_vertex:i,a_vec2_texcoord:n})},$i=(t,e)=>{const o=yi._.sinks.flatBottom.stride,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.Short,stride:o,offset:4,normalized:!1}),a=new ui(t,{itemSize:2,dataType:pi.l.Byte,stride:o,offset:8,normalized:!0});return new gi.j(e,{a_vec2_vertex:i,a_vec2_centroid:n,a_vec2_extender:a})},Yi=(t,e)=>{const o=yi._.sinks.hillshade.stride,i=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0}),n=new ui(t,{itemSize:2,dataType:pi.l.UnsignedShort,stride:o,offset:4,normalized:!1});return new gi.j(e,{a_vec2_vertex:i,a_vec2_texcoord:n})},Ji=(t,e)=>new gi.j(e,{}),Ki=(t,e)=>{const o=vi.m.sinks.instances.stride,i=new ui(t,{itemSize:3,dataType:pi.l.UnsignedShort,stride:o,offset:0,normalized:!0,instanceDivisor:1}),n=new ui(t,{itemSize:3,dataType:pi.l.Float,stride:o,offset:8,instanceDivisor:1}),a=new ui(t,{itemSize:3,dataType:pi.l.Float,stride:o,offset:20,instanceDivisor:1}),r=new ui(t,{itemSize:4,dataType:pi.l.Float,stride:o,offset:32,instanceDivisor:1}),l=new ui(t,{itemSize:4,dataType:pi.l.UnsignedByte,stride:o,offset:48,normalized:!0,instanceDivisor:1});return new gi.j(e,{a_vec3_instance_position:i,a_vec3_instance_offset:n,a_vec3_instance_scale:a,a_vec4_instance_rotation:r,a_vec4_instance_localid:l})};var Qi=o(132);const tn=32,en=1/0;class on extends fe.Y{constructor(t,e,o,i){var n,a;super("raster",t),this.children=[],this.identifyChildren=[];const r=this;this.setTileCoords(t),null===(a=null===(n=e.renderer.symbolSettingsList.dem)||void 0===n?void 0:n[i])||void 0===a||a.forEach((t=>{const n={type:Bo.H.Tile,symbol:"dem",sink:i,tile:this,attributes:{layerId:Qi.h,styleId:e.map.state.handyStyleId,tileData:[]},stride:4,rangeStart:0,rangeEnd:24576,attributesHash:"",layerSettings:t,vao:o[i]};!0===t.identify?r.identifyChildren.push(n):r.children.push(n)}))}setTileCoords(t){const e=t[2],o=t[3],i=(0,Le.aq)(e),n=i/tn;this.coords=t,this.size=i,this.zoomLevel=e,this.detailLevel=o;const a=(0,Le.Oy)(t);a[0]-=n,a[1]-=n,this.bounds.min=[a[0],a[1]],this.bounds.max=[a[0]+i,a[1]+i],Oo.wA(this.modelMatrix,a,we.al(i+n,i+n,No._9))}tryToExpandInstancedObjects(t,e){}}class nn{constructor(t,e){var o;this.meshTiles=new Map,this.groundTiles=new Map,this.destroyed=!1,this.modules=t.modules,this.maxZoom=null!==(o=null==e?void 0:e.maxZoom)&&void 0!==o?o:en;const i=[];for(let t=0;t<tn;t++)for(let e=0;e<tn;e++)i.push(e,t,e+1,t,e,t+1),i.push(e,t+1,e+1,t,e+1,t+1);const n=No._H/tn;for(let t=0;t<i.length;t++)i[t]*=n;this.buffer=new pi.l(new Uint16Array(i),{itemSize:2,dataType:pi.l.UnsignedShort,stride:0,offset:0,normalized:!0}),this.buffer.drawType=pi.l.StaticDraw,this.vaos={mesh:qi(this.buffer,this.modules.renderer.getShaderProgram("demMesh")),ground:qi(this.buffer,this.modules.renderer.getShaderProgram("demGround"))},this.update()}destroy(){this.destroyed||(this.meshTiles=new Map,this.groundTiles=new Map,Object.values(this.vaos).forEach((t=>{t.unbind(),t.remove()})),this.buffer.remove(),this.destroyed=!0)}setMaxZoom(t=Infinity){t!==this.maxZoom&&(this.maxZoom=t,this.update())}update(){if(this.destroyed)return;const t=this.modules.map.state,e=Math.trunc(t.styleZoom),o=Math.min(e,Math.min(this.maxZoom,e)),i=(0,Le.b5)(this.modules.map.state,o,0,o).reduce(((t,e)=>(t.set((0,Le.gx)(e),e),t)),new Map);this.meshTiles.forEach(((t,e)=>{i.has(e)||(this.meshTiles.delete(e),this.groundTiles.delete(e))})),i.forEach(((t,e)=>{this.meshTiles.has(e)||(this.meshTiles.set(e,new on(t,this.modules,this.vaos,"mesh")),this.groundTiles.set(e,new on(t,this.modules,this.vaos,"ground")))}))}updateStyleId(){this.meshTiles.forEach((t=>this.updateTileStyleId(t))),this.groundTiles.forEach((t=>this.updateTileStyleId(t)))}updateTileStyleId(t){t.children.forEach((t=>{t.attributes.styleId=this.modules.map.state.handyStyleId})),t.identifyChildren.forEach((t=>{t.attributes.styleId=this.modules.map.state.handyStyleId}))}}var an=o(7123),rn=o(2398),ln=o(2618),sn=o(267);const cn=new ln.TD("main").getPacked(),dn=64;class mn{constructor(t,e,o){this.id=t,this.modules=e,this.options=o,this.type="dem",this.tree=an(),this.minElevation=0,this.revision=0,this.tileLoader=new rn.U("arrayBuffer"),this.attributes={},this.tiles=new Map,this.textureIndices=new Map,this.url=t=>{const[e,o,i]=(0,Le._W)(t);return this.options.url(e,o,i)}}abortTileFetch(t){this.tileLoader.abortRequest((0,Le.gx)(t))}deleteTile(t){const e=(0,Le.gx)(t);if(this.tiles.get(e)){const o=(0,Le.Sl)(t);this.tree.remove({minX:o.min[0],minY:o.min[1],maxX:o.max[0],maxY:o.max[1]},((t,o)=>e===o.key)),this.updateRevision()}this.tiles.delete(e),this.updateMinElevation()}fetchTile(t){const e=(0,Le.gx)(t),o=[{regionId:0,metatileHash:-1}];if(this.tiles.has(e))return Promise.resolve(o);const i=this.url(t);return this.tileLoader.fetch(t,(()=>i)).then((i=>(i.rejected||(this.tiles.set(e,i.data&&i.data.byteLength?this.tileDataToFloat32Array(i.data,t):void 0),this.updateRevision()),o)),(()=>Promise.resolve(void 0)))}generateTile(t,e,o,n,a,r){return(0,i.mG)(this,void 0,void 0,(function*(){const t=[],o=[],i=(0,Le.gx)(e),n=this.tiles.get(i);if(!n)return Promise.resolve({results:t,transferable:o});let a=this.textureIndices.get(i);if(void 0===a){const t=(0,Le.aq)(e[2]),o=(0,Le.Sl)(e);this.tree.insert(Object.assign({key:i,minX:o.min[0],minY:o.min[1],maxX:o.max[0],maxY:o.max[1],cellSize:t/dn},n)),this.updateMinElevation();const r=this.modules.renderer.getRenderingContext(),l=new Wo(n.data,{size:[dn,dn],format:Wo.AlphaFormat,type:Wo.Float,flipY:!0,magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter}).prepare(r);a=this.modules.imageManager.addPreparedTexture(l),this.textureIndices.set(i,a)}const r=this.modules.map.state.handyStyleId,l=.0078125,s=[[0,0,0+l,0+l],[1,0,1-l,0+l],[0,1,0+l,1-l],[0,1,0+l,1-l],[1,0,1-l,0+l],[1,1,1-l,1-l]],c=yi._.generateElevation(this.modules.collector,s,r,Qi.h,a);return t.push({regionId:0,metatileHash:-1,styleId:r,collectorOutput:{data:[c],labels:[],geoIds:new Uint32Array,floorHidingMap:[],rastersToLoad:new Float64Array,modelsToLoad:new Int32Array,transferable:[],identifyIds:cn}}),Promise.resolve({results:t,transferable:o})}))}tileDataToFloat32Array(t,e){const[o,i,n,a]=e,r=new Uint8Array(t),l=new Float32Array(Math.pow(dn,2));let s=1/0,c=-1/0;for(let t=0;t<dn;t++){const e=(0,zt.PA)((0,Le.Oy)([o,i+.015625*t,n,a])),d=(0,he.Xg)(e[1]);for(let e=0;e<dn;e++){const o=e+t*dn,i=(r[o]+256*r[Math.pow(dn,2)+o]-1e4)*d;s=Math.min(i,s),c=Math.max(i,c),l[o]=i}}return{data:l,minZ:s,maxZ:c,bounds:{min:(0,Le.Oy)(e),max:(0,Le.Oy)([o+1,i+1,n,a])}}}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t}getId(){return this.id}destroy(){const{imageManager:t}=this.modules;this.tileLoader.destroy(),this.tiles.clear(),this.tree.clear(),this.textureIndices.forEach((e=>t.deleteTexture(e))),this.textureIndices.clear()}getElevation(t){const e=this.getElevationTile(t);if(e)return function(t,e){if(t.data){const o=(0,ut.uZ)((e[0]-t.minX)/t.cellSize,0,63),i=(0,ut.uZ)((e[1]-t.minY)/t.cellSize,0,63),n=Math.trunc(o),a=Math.trunc(i),r=Math.min(n+1,63),l=Math.min(a+1,63),s=_e.t7([],[t.data[hn(a)*dn+n],t.data[hn(l)*dn+n]],[t.data[hn(a)*dn+r],t.data[hn(l)*dn+r]],o%1);return(0,ut.t7)(s[0],s[1],i%1)}}(e,t)}getElevationTile(t){return this.tree.search({minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}).reduce(((t,e)=>!t||t.cellSize>e.cellSize?e:t),void 0)}getMinElevation(){return this.minElevation}updateMinElevation(){const t=this.modules.map.state;if(!t.demMode)return;const e=this.modules.camera.position[2],o=(0,sn.BS)(t.tilesBounds);if(void 0!==t.elevation){const i=t.elevation*he.C/e+1,n=Math.max(t.pitch/t.maxPitch*30,4);(0,Re.bA)(o,Math.min(i,n))}const i=this.tree.search({minX:o.min[0],minY:o.min[1],maxX:o.max[0],maxY:o.max[1]});t.styleZoom-Zn>1?this.minElevation=i.reduce(((t,e)=>{if(e.data){const i=(0,Re.jV)(o,e.bounds);_e.lu(i.min,i.min,e.bounds.min),_e.lu(i.max,i.max,e.bounds.min),_e.bA(i.min,i.min,1/e.cellSize),_e.bA(i.max,i.max,1/e.cellSize);for(let o=Math.trunc(i.min[0]);o<i.max[0];o++)for(let n=Math.trunc(i.min[1]);n<i.max[1];n++){const i=o+n*dn,a=e.data[i];t=void 0===t?a:Math.min(t,a)}}return t}),void 0):this.minElevation=i.reduce(((t,e)=>void 0===t?e.minZ:Math.min(t,e.minZ)),void 0)}getRevision(){return this.revision}updateRevision(){this.revision++}}function hn(t){return 63-t}var pn=o(314),un=o(3698),gn=o(1245),_n=o(4874),fn=o(2539);const yn=new Float64Array(16);class bn{constructor(t,e,o){this.detailLevel=0,this.mvpMatrix=new Float64Array(16),this.texMatrix=new Float64Array(16),Oo.JG(this.mvpMatrix,t),Oo.Jp(this.texMatrix,he.LX,t),this.detailLevel=o,this.viewport=[[0,0,0,1],[1,0,0,1],[1,1,0,1],[0,1,0,1]],Oo.U_(yn,this.texMatrix),this.viewport.forEach((t=>{we.fF(t,t,yn),t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],t[2]>=0&&(t[2]=-1),we.Fv(t,t);const o=-e[2]/t[2];t[0]=e[0]+t[0]*o,t[1]=e[1]+t[1]*o,t[2]=e[2]+t[2]*o}))}}class xn{constructor(t){this.destroyed=!1,this.modules=t.modules,this.textures=[]}update(){if(this.destroyed)return;const{center:t,padding:e,rotation:o,size:i,viewport:n,demTilesBounds:a,zoom:r}=this.modules.map.state,l=(0,fn.hS)(a[0],a[1]),s=(0,fn.Oy)(a[2],l);this.textures=[];const c=(0,ut.Id)(45),d=Math.min(this.modules.map.state.pitch,c),m=new _n.V({pitch:d,center:t,padding:e,rotation:o,size:i,viewport:n,zoom:r}),h=(0,ut.uZ)(Math.pow(this.modules.map.state.pitch/c,3),0,1),[p,u]=this.modules.camera.position,g=gn.fF([],[p,u,0,1],m.viewProjectionMatrix),_=Math.min(g[1]/g[3]+1,-.5);let f=Math.max(_,-1);if(Oo.wA(yn,[0,-f,0],[1/Gn[0],1/Gn[1],1]),Oo.Jp(yn,yn,m.viewProjectionMatrix),this.textures.push(new bn(yn,m.position,0)),(0,fn.Oy)(this.textures[0].viewport[2],l)>=s)return!0;if(_<f){const t=Math.max(Math.abs(_-f)/2,1);Oo.wA(yn,[0,2/t+1,0],[1/Gn[0],Gn[1]/t,1]),Oo.Jp(yn,yn,m.viewProjectionMatrix),this.textures.push(new bn(yn,m.position,1))}f+=1;const y=Math.pow(i[1]/749,2);[1.4,3.2,12,31].some(((t,e)=>{t=(t-1)*h*y+1,Oo.wA(yn,[0,-(f*t+1),0],[1/Gn[0],t/Gn[1],1]),Oo.Jp(yn,yn,m.viewProjectionMatrix),f+=2/t;const o=this.textures.push(new bn(yn,m.position,e));if((0,fn.Oy)(this.textures[o-1].viewport[2],l)>=s)return!0}))}destroy(){this.textures=[]}}var vn=o(6201);const wn=null===window||void 0===window?void 0:window.WebGLRenderingContext,zn={depthMask:!0,depthTest:!0,depthFunc:wn?wn.LESS:0,cullFace:!0,cullFaceMode:wn?wn.BACK:0,blend:!1,blendFunc:{sfactor:wn?wn.ONE:0,dfactor:wn?wn.ZERO:0},colorMask:[!0,!0,!0,!0],polygonOffsetFill:!1,polygonOffset:{factor:1,units:2}},Fn=t=>Object.assign({},zn,t),Sn=(t,e,o)=>{var i,n,a,r,l,s,c,d,m,h,p,u,g,_,f,y,b,x,v,w,z,F,S,C,M,P,I,L,k;t.depthMask(null!==(n=null===(i=null==o?void 0:o.webglState)||void 0===i?void 0:i.depthMask)&&void 0!==n?n:e.depthMask),(null!==(r=null===(a=null==o?void 0:o.webglState)||void 0===a?void 0:a.depthTest)&&void 0!==r?r:e.depthTest)?(t.enable(t.DEPTH_TEST),t.depthFunc(null!==(s=null===(l=null==o?void 0:o.webglState)||void 0===l?void 0:l.depthFunc)&&void 0!==s?s:e.depthFunc)):t.disable(t.DEPTH_TEST),(null!==(d=null===(c=null==o?void 0:o.webglState)||void 0===c?void 0:c.cullFace)&&void 0!==d?d:e.cullFace)?(t.enable(t.CULL_FACE),t.cullFace(null!==(h=null===(m=null==o?void 0:o.webglState)||void 0===m?void 0:m.cullFaceMode)&&void 0!==h?h:e.cullFaceMode)):t.disable(t.CULL_FACE),(null!==(u=null===(p=null==o?void 0:o.webglState)||void 0===p?void 0:p.blend)&&void 0!==u?u:e.blend)?(t.enable(t.BLEND),t.blendFunc(null!==(f=null===(_=null===(g=null==o?void 0:o.webglState)||void 0===g?void 0:g.blendFunc)||void 0===_?void 0:_.sfactor)&&void 0!==f?f:e.blendFunc.sfactor,null!==(x=null===(b=null===(y=null==o?void 0:o.webglState)||void 0===y?void 0:y.blendFunc)||void 0===b?void 0:b.dfactor)&&void 0!==x?x:e.blendFunc.dfactor)):t.disable(t.BLEND);const A=null!==(w=null===(v=null==o?void 0:o.webglState)||void 0===v?void 0:v.colorMask)&&void 0!==w?w:e.colorMask;t.colorMask(A[0],A[1],A[2],A[3]),(null!==(F=null===(z=null==o?void 0:o.webglState)||void 0===z?void 0:z.polygonOffsetFill)&&void 0!==F?F:e.polygonOffsetFill)?(t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(null!==(M=null===(C=null===(S=null==o?void 0:o.webglState)||void 0===S?void 0:S.polygonOffset)||void 0===C?void 0:C.factor)&&void 0!==M?M:e.polygonOffset.factor,null!==(L=null===(I=null===(P=null==o?void 0:o.webglState)||void 0===P?void 0:P.polygonOffset)||void 0===I?void 0:I.units)&&void 0!==L?L:e.polygonOffset.units)):t.disable(t.POLYGON_OFFSET_FILL),null===(k=e.customStateBinder)||void 0===k||k.call(e,t)},Cn=Fn({}),Mn=Fn({depthMask:!1,blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE_MINUS_SRC_ALPHA}}),Pn=Fn({blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE_MINUS_SRC_ALPHA},cullFace:!1}),In=Fn({depthMask:!1,depthTest:!1,blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE_MINUS_SRC_ALPHA}}),Ln=Fn({depthMask:!1,depthTest:!1,colorMask:[!0,!1,!1,!0]}),kn=Fn({depthMask:!1,depthTest:!1}),An=Fn({depthMask:!1}),jn=Fn({colorMask:[!1,!1,!1,!1]}),Tn=Fn({depthFunc:wn.EQUAL,blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE_MINUS_SRC_ALPHA}}),En=Fn({depthMask:!1,depthTest:!1,blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE_MINUS_SRC_ALPHA}}),On=Fn({polygonOffsetFill:!0,polygonOffset:{factor:1,units:2},blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE_MINUS_SRC_ALPHA}}),Hn=(Fn({cullFace:!1}),Fn({depthMask:!1,depthTest:!1,blend:!0,blendFunc:{sfactor:wn.ONE,dfactor:wn.ONE}})),Wn=Fn({depthTest:!1,cullFace:!1});function Rn(t){const e=document.createElement("canvas"),o={antialias:!1,stencil:!0,failIfMajorPerformanceCaveat:t};return"WebGLRenderingContext"in window&&(e.getContext("webgl",o)||e.getContext("experimental-webgl",o))}let Bn;function Nn(){const t=new Float32Array([-1,-1,1,-1,-1,1]),e=Rn(!1);if(!e)return Bn="Failed to obtain WebGL context",!1;for(const t of["OES_element_index_uint","OES_standard_derivatives","OES_vertex_array_object","OES_texture_float","OES_texture_float_linear"])if(!e.getExtension(t))return Bn=`Absent ${t} extension`,!1;const o=new Ro({size:[2,2]});o.bind(e);const i=new Wo(new Float32Array([1,0,1,0]),{size:[2,2],format:Wo.AlphaFormat,type:Wo.Float,magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter}).prepare(e),n=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER);if(!n||!a||e.isContextLost())return Bn="Cannot create shaders",!1;e.shaderSource(n,"attribute vec2 pos;\n    void main () {\n        gl_Position = vec4(pos, 0, 1);\n    }"),e.compileShader(n),e.shaderSource(a,"precision mediump float;\n    uniform sampler2D tex;\n    void main () {\n        gl_FragColor = vec4(texture2D(tex, vec2(0.4, 0.4)).a, 0, 0, 0);\n    }"),e.compileShader(a);const r=e.createProgram();if(!r)return Bn="Cannot compile shader program",!1;e.attachShader(r,n),e.attachShader(r,a),e.linkProgram(r),e.useProgram(r);const l=e.createBuffer();if(!l)return Bn="Cannot create buffer",!1;e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);const s=e.getAttribLocation(r,"pos");e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s),i.enable(e,0);const c=e.getUniformLocation(r,"tex");e.uniform1i(c,0),e.viewport(0,0,2,2),e.drawArrays(e.TRIANGLES,0,3);const d=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,d),o.unbind(e),255!==d[0]}var Dn=o(9600);const Un=64,Zn=12,Gn=[1.7,1];const Vn=we.Ue(),qn=new Float64Array(16);class Xn{constructor(t){this.demTextureMatrix=new Float64Array(16),this.demCorrectedFbVpToDemTex=new Float32Array(16),this.demTexToCorrectedTex=new Float32Array(16),this.correctedTexToDemTex=new Float32Array(16),this.isDemCorrectionEnabled=!1,this.demCorrectedScale=1,this.demFbVpMatrix=new Float64Array(16),this.demCorrectedFbVpMatrix=new Float64Array(16),this.demFramebufferId=pn.z,this.correctedDemFramebufferId=pn.z,this.flatFramebufferId=pn.z,this.identifyFlatFramebufferId=pn.z,this.hillshadeRampTextureId=NaN,this.hillshadeFramebufferId=pn.z,this.groundFramebufferId=pn.z,this.isGroundBufferValid=!1,this.lastStyleId=NaN,this.tilesRevision=0,this.modules=t,this.enabled=!1,this.sources=[],this.sourcesRevision=[],this.tileLayers=[],this.groundBuffer=new Float32Array,this.differ=new vo([]),this.copyDemProgram=this.modules.renderer.getShaderProgram("demElevationCopy")}enable(){void 0===this.isTerrainSupported&&(this.isTerrainSupported=Nn()),!this.enabled&&this.isTerrainSupported&&(this.differ=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"demMode",type:"boolean"},{path:"elevation",type:"number"},{path:"minElevation",type:"number"}]),this.demFramebufferId=this.createDemFramebuffer(),this.correctedDemFramebufferId=this.createCorrectedDemFramebuffer(),this.hillshadeFramebufferId=this.createHillshadeFramebuffer(),this.flatFramebufferId=this.createFlatFramebuffer(),this.identifyFlatFramebufferId=this.createFlatIdentifyFramebuffer(),this.groundFramebufferId=this.createGroundFramebuffer(),this.fullscreenBuffer=new pi.l(new Uint16Array([[0,0,0,0],[1,0,1,0],[0,1,0,1],[0,1,0,1],[1,0,1,0],[1,1,1,1]].reduce(((t,e)=>{const[o,i,n,a]=e;return t.push(o*No._H,i*No._H,(0,un.Bb)(n),(0,un.Bb)(a)),t}),[]))),this.hillshadeVao=Yi(this.fullscreenBuffer,this.modules.renderer.getShaderProgram("demHillshade")),this.copyDemVao=Yi(this.fullscreenBuffer,this.copyDemProgram),this.addDefaultSources(),this.modules.styleManager.setFramebufferId(this.modules.map.state.handyStyleId,Qi.h,{elevation:this.demFramebufferId,hillshade:this.hillshadeFramebufferId,flatBottom:this.correctedDemFramebufferId,ground:this.groundFramebufferId}),this.updateRampTextureId(),this.enabled=!0)}onStyleChange(){this.updateRampTextureId()}disable(){var t,e,o,i,n;this.enabled&&(null===(t=this.meshSource)||void 0===t||t.destroy(),this.meshSource=void 0,null===(e=this.flatMapSource)||void 0===e||e.destroy(),this.flatMapSource=void 0,this.tileLayers.forEach((t=>{this.modules.tileManager.removeTileLayer(t)})),this.tileLayers=[],this.sources.forEach((t=>{t.destroy()})),this.sources=[],this.sourcesRevision=[],this.hillshadeTile&&(this.modules.tileManager.removeObject(this.hillshadeTile),this.hillshadeTile=void 0),null===(o=this.hillshadeVao)||void 0===o||o.unbind(),null===(i=this.hillshadeVao)||void 0===i||i.remove(),null===(n=this.fullscreenBuffer)||void 0===n||n.remove(),this.modules.styleManager.removeLayer("demo_raster_layer"),this.modules.styleManager.setFramebufferId(this.modules.map.state.handyStyleId,Qi.h,{elevation:pn.z,hillshade:pn.z,flatBottom:pn.z,ground:pn.z}),this.modules.renderer.removeFramebuffer(this.hillshadeFramebufferId),this.modules.renderer.removeFramebuffer(this.demFramebufferId),this.modules.renderer.removeFramebuffer(this.correctedDemFramebufferId),this.modules.renderer.removeFramebuffer(this.flatFramebufferId),this.modules.renderer.removeFramebuffer(this.groundFramebufferId),this.enabled=!1)}update(){var t,e,o;if(!this.enabled)return;const i=this.modules.map.state;this.lastStyleId!==i.handyStyleId&&(this.updateRampTextureId(),null===(t=this.meshSource)||void 0===t||t.updateStyleId(),this.modules.styleManager.setFramebufferId(this.modules.map.state.handyStyleId,Qi.h,{elevation:this.demFramebufferId,hillshade:this.hillshadeFramebufferId,flatBottom:this.correctedDemFramebufferId,ground:this.groundFramebufferId}),this.lastStyleId=i.handyStyleId);const n=this.updateTilesRevision(),a=this.differ.check(this.modules.map.state);(n||a)&&(this.isGroundBufferValid=!1),a&&(this.updateMinElevation(),null===(e=this.flatMapSource)||void 0===e||e.update(),null===(o=this.meshSource)||void 0===o||o.update(),this.updateDemFramebufferMatrix(),this.modules.map.state.needRerender=!0)}isEnabled(){return this.enabled}getDemFramebufferId(){return this.demFramebufferId}getCorrectedDemFramebufferId(){return this.correctedDemFramebufferId}getFlatFramebufferId(){return this.flatFramebufferId}getIdentifyFlatFramebufferId(){return this.identifyFlatFramebufferId}getHillshadeFramebufferId(){return this.hillshadeFramebufferId}getHillshadeRampTextureId(){return this.hillshadeRampTextureId}getElevation(t){if(this.enabled)for(let e=this.sources.length-1;e>=0;e--){const o=this.sources[e].getElevation(t);if(void 0!==o)return o}}getLabelsDemKey(t){if(!this.enabled||0===t.length)return;let e,o;for(const o of t)if(e=o.labels.find((t=>t.type===vn.R2.Point)),e)break;if(e){(0,Le.L7)(Vn,e.vertices,0,(0,Le.Bs)(e.tileCoords));for(let t=this.sources.length-1;t>=0;t--){const e=this.sources[t].getElevationTile(Vn);if(void 0!==e){o=e;break}}return o?o.key:void 0}}enrichWithElevation(t){var e;if(this.enabled)for(const o of t){let t=null;for(const i of o.labels)i.type===vn.R2.Point&&(t||(t=(0,Le.Bs)(i.tileCoords)),(0,Le.L7)(Vn,i.vertices,0,t),i.demElevation=null!==(e=this.getElevation(Vn))&&void 0!==e?e:NaN)}}getMinElevation(){return this.sources.reduce(((t,e)=>{const o=e.getMinElevation();return void 0===o?t:void 0===t?o:Math.min(t,o)}),void 0)}updateMinElevation(){this.sources.forEach((t=>t.updateMinElevation()))}getMeshTiles(){return this.meshSource?Array.from(this.meshSource.meshTiles.values()):[]}getGroundTiles(){return this.meshSource?Array.from(this.meshSource.groundTiles.values()):[]}getFlatMapTextures(){return this.flatMapSource?this.flatMapSource.textures.slice():[]}clearTextureBindings(){const t=this.modules.renderer.getRenderingContext();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0+4),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0+7),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0+5),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0+6),t.bindTexture(t.TEXTURE_2D,null)}setMeshMaxZoom(t){var e;this.meshMaxZoom=t,null===(e=this.meshSource)||void 0===e||e.setMaxZoom(t)}getVerticalScale(){const t=this.modules.map.state,e=this.modules.styleManager.getStyle(t.handyStyleId);if(!e)return 0;const o=e.dem.style,i=(0,Te.jJ)(t.styleZoom,t.styleState,[]);return(0,Te.vn)(o.verticalScale,i)}getTilesRevision(){return this.tilesRevision}getGroundPoint(t){if(!this.enabled)return;if(this.updateGround(),!this.isGroundBufferValid)return;const e=this.modules.renderer.getFramebuffer(this.groundFramebufferId);if(!e)return;const o=e.renderTarget.options.size;if(t[0]<0||t[0]>o[0]-1||t[1]<0||t[1]>o[1]-1)return;const i=t[0],n=4*((o[1]-t[1]-1)*o[0]+i);if(0===this.groundBuffer[n+3])return;const[a,r]=(0,he.PA)([this.groundBuffer[n],this.groundBuffer[n+1]]);return[a,r,this.groundBuffer[n+2]]}updateRampTextureId(){const t=this.modules.styleManager.getStyle(this.modules.map.state.handyStyleId);if(null==t?void 0:t.dem){const e=$n(this.modules.map.state,t.dem.style.shadingPalette,256);Number.isNaN(this.hillshadeRampTextureId)?this.hillshadeRampTextureId=this.modules.imageManager.addPreparedTexture(e):this.modules.imageManager.updatePreparedTexture(this.hillshadeRampTextureId,e)}}updateGround(){if(this.enabled&&!this.isGroundBufferValid){const t=this.modules.renderer.getFramebuffer(this.groundFramebufferId);if(!t)return;const e=this.modules.renderer.getRenderingContext(),o=t.renderTarget.options.size;this.validateGroundBufferSize(o),t.renderTarget.bind(e),e.readPixels(0,0,o[0],o[1],e.RGBA,e.FLOAT,this.groundBuffer),t.renderTarget.unbind(e),this.isGroundBufferValid=!0}}addDefaultSources(){var t;if(!this.enabled){const e=this.modules.map.state,o=(t,o,i)=>((t,e,o,i)=>{const n=(0,de.IG)(t.tileServer,{subdomain:t.subdomains[Math.abs(e+o)%t.subdomains.length]});return`${t.tileProtocol}://${n}/v2/ald?ts=relief&x=${e}&y=${o}&z=${i}`})(e,t,o,i);this.addElevationSource({url:o,minZoom:5,maxZoom:8,attributes:{}}),this.addElevationSource({url:o,minZoom:9,maxZoom:Zn,attributes:{}}),this.flatMapSource=new xn(this.modules.map),this.meshSource=new nn(this.modules.map,{maxZoom:this.meshMaxZoom});const i=this.hillshadeVao,n=null===(t=this.modules.renderer.symbolSettingsList.dem.hillshade)||void 0===t?void 0:t[0];if(i&&n){this.hillshadeTile=new fe.W("raster",[],this.modules.renderer);const t={type:Bo.H.Tile,symbol:"dem",sink:"hillshade",tile:this.hillshadeTile,attributes:{layerId:Qi.h,styleId:this.modules.map.state.handyStyleId,tileData:[]},stride:yi._.sinks.hillshade.stride,rangeStart:0,rangeEnd:6*yi._.sinks.hillshade.stride,attributesHash:"",layerSettings:n,vao:i};this.hillshadeTile.children.push(t),this.modules.tileManager.addObject(this.hillshadeTile)}}}updateTilesRevision(){let t=!1;return this.sources.forEach(((e,o)=>{const i=e.getRevision();i!==this.sourcesRevision[o]&&(this.sourcesRevision[o]=i,t=!0)})),t&&this.tilesRevision++,t}addElevationSource(t){const e=new mn((0,Dn.Q)(),this.modules,t);this.sources.push(e),this.sourcesRevision.push(e.getRevision());const{minZoom:o,maxZoom:i}=t,n=new hi.I(o,i,o,i,this.modules,this.modules.map.state,e);this.modules.tileManager.addTileLayer(n),this.tileLayers.push(n)}getDemTextureSize(){const t=this.modules.map.state.size[1]*kt.nS.viewportLimitRatio;return Math.min(Math.ceil(Math.hypot(t,t)/No.y4),Un)}createGroundFramebuffer(){const t=this.modules.renderer.getRenderingContext(),e=this.modules.map.state.size,o=[0,0,0,0],i=new Ro({size:e,magFilter:Wo.NearestFilter,minFilter:Wo.NearestFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping,flipY:!0,type:Wo.Float});return i.bind(t),this.modules.renderer.clearWithColor(o),i.unbind(t),this.modules.renderer.addFramebuffer({clearColor:o,useDem:!0,clearDepth:!0,onResize:()=>{const t=this.modules.renderer.getRenderingContext(),e=this.modules.map.state.size;i.setSize(e),i.bind(t),this.modules.renderer.clearWithColor(o),i.unbind(t)},renderTarget:i,renderIndex:5,onRenderStart:()=>{this.clearTextureBindings()},onRenderEnd:()=>{}})}createDemFramebuffer(){const t=this.modules.renderer.getRenderingContext();let e=this.getDemTextureSize()*Un;const o=new Ro({size:[e,e],magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping,flipY:!0,type:Wo.Float});return o.bind(t),this.modules.renderer.clearWithColor([0,0,0,1]),o.unbind(t),this.modules.renderer.addFramebuffer({clearColor:[0,0,0,1],onResize:()=>{const i=this.getDemTextureSize()*Un;i!==e&&(e=i,o.setSize([e,e]),o.bind(t),this.modules.renderer.clearWithColor([0,0,0,1]),o.unbind(t))},renderTarget:o,getViewProjectionMatrix:()=>this.demFbVpMatrix,renderIndex:0,onRenderStart:()=>{this.clearTextureBindings()},onRenderEnd:()=>{this.isDemCorrectionEnabled=!1}})}createCorrectedDemFramebuffer(){const t=this.modules.renderer,e=t.getRenderingContext(),o=t.webGlExtensions;let i=this.getDemTextureSize()*Un;const n=new Ro({size:[i,i],magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping,flipY:!0,type:Wo.Float});return n.bind(e),this.modules.renderer.clearWithColor([0,0,0,1]),n.unbind(e),this.modules.renderer.addFramebuffer({onResize:()=>{const t=this.getDemTextureSize()*Un;t!==i&&(i=t,n.setSize([i,i]),n.bind(e),this.modules.renderer.clearWithColor([0,0,0,1]),n.unbind(e))},renderTarget:n,getViewProjectionMatrix:()=>this.demCorrectedFbVpMatrix,renderIndex:1,onRenderStart:()=>{var t;const i=null===(t=this.modules.renderer.getFramebuffer(this.demFramebufferId))||void 0===t?void 0:t.renderTarget.getTexture();if(!i||!this.copyDemVao)return;this.clearTextureBindings(),n.bind(e),e.viewport(0,0,n.options.size[0],n.options.size[1]),Sn(e,Ln);i.enable(e,0),this.copyDemProgram.enable(e),this.copyDemProgram.bind(e,{u_mat4_mvp:he.TD,u_sr2d_texture:0,u_mat4_dem_corrected:this.correctedTexToDemTex}),this.copyDemVao.bind({gl:e,extensions:o}),e.drawArrays(e.TRIANGLES,0,6),n.unbind(e),this.isDemCorrectionEnabled=!0}})}createHillshadeFramebuffer(){const t=this.modules.renderer.getRenderingContext();let e=this.getDemTextureSize()*Un;const o=new Ro({size:[e,e],magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping,format:Wo.RgbFormat,flipY:!0});return this.modules.renderer.addFramebuffer({clearColor:[0,0,0,0],onResize:()=>{const i=this.getDemTextureSize()*Un;i!==e&&(e=i,o.setSize([e,e]),o.bind(t),o.unbind(t))},renderTarget:o,getViewProjectionMatrix:()=>this.demFbVpMatrix,renderIndex:2,onRenderStart:()=>{this.clearTextureBindings()},onRenderEnd:()=>{t.colorMask(!0,!0,!0,!0)}})}createFlatFramebuffer(){const t=this.modules.renderer.getRenderingContext(),e=window.devicePixelRatio,o=this.modules.map.state.size,i=new Ro({size:[Math.trunc(o[0]*Gn[0]*e),Math.trunc(o[1]*Gn[1]*e)],magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping});return this.modules.renderer.addFramebuffer({clearColor:[0,0,0,0],onResize:()=>{const e=window.devicePixelRatio,o=this.modules.map.state.size;i.setSize([Math.trunc(o[0]*Gn[0]*e),Math.trunc(o[1]*Gn[1]*e)]),i.bind(t),i.unbind(t)},renderTarget:i,renderIndex:3,onRenderStart:()=>{t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null)}})}createFlatIdentifyFramebuffer(){const t=this.modules.renderer.getRenderingContext(),e=this.modules.map.state.size,o=new Ro({size:[Math.trunc(e[0]*Gn[0]*kt.yV.pixelDensity),Math.trunc(e[1]*Gn[1]*kt.yV.pixelDensity)],magFilter:Wo.NearestFilter,minFilter:Wo.NearestFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping});return this.modules.renderer.addFramebuffer({clearColor:[1,1,1,1],onResize:()=>{const e=this.modules.map.state.size;o.setSize([Math.trunc(e[0]*Gn[0]*kt.yV.pixelDensity),Math.trunc(e[1]*Gn[1]*kt.yV.pixelDensity)]),o.bind(t),o.unbind(t)},renderTarget:o,renderIndex:4,onRenderStart:()=>{t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null)}})}updateDemFramebufferMatrix(){const t=this.modules.map.state,e=Math.trunc(t.styleZoom),o=Math.min(e,Zn),i=(0,Le.aq)(o),n=i*this.getDemTextureSize(),a=i/Un,r=[Math.trunc(t.center[0]/a)*a+a/2,Math.trunc(t.center[1]/a)*a+a/2],l=[r[0]-n/2,r[1]-n/2,0];Oo.wA(qn,l,[n,n,No._9]),Oo.U_(this.demTextureMatrix,qn),Oo.Jp(this.demFbVpMatrix,he.TD,this.demTextureMatrix),this.demCorrectedScale=Math.pow(2,e-o);const s=(0,Le.aq)(e)*this.getDemTextureSize(),c=[r[0]-s/2,r[1]-s/2,0];Oo.wA(qn,c,[s,s,No._9]),Oo.U_(qn,qn),Oo.Jp(this.demCorrectedFbVpMatrix,he.TD,qn),Oo.xJ(qn,[1/this.demCorrectedScale,1/this.demCorrectedScale,1]),Oo.Jp(this.demCorrectedFbVpToDemTex,he.LX,qn),Oo.xJ(qn,[1/this.demCorrectedScale,1/this.demCorrectedScale,1]),Oo.Jp(qn,qn,he.TD),Oo.Jp(this.correctedTexToDemTex,he.LX,qn),Oo.xJ(qn,[this.demCorrectedScale,this.demCorrectedScale,1]),Oo.Jp(qn,qn,he.TD),Oo.Jp(this.demTexToCorrectedTex,he.LX,qn)}validateGroundBufferSize(t){const e=t[0]*t[1]*4;this.groundBuffer.length!==e&&(this.groundBuffer=new Float32Array(e))}}function $n(t,e,o){const i=(0,Te.jJ)(t.styleZoom,t.styleState,[]),n=[],a=o-1;for(let t=0;t<o;t++){const o=t/a,r=256*(0,Te.UP)(e,o,i);n.push(r)}return new Wo(new Uint8Array(n),{size:[o,1],format:Wo.AlphaFormat,magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping})}function Yn(...t){return(e,o,i,n,a)=>{t.forEach((t=>t(e,o,i,n,a)))}}const Jn=(t,e,o,i,n,a)=>{var r,l,s;if(!0===a||!i.map.state.demMode)return Qn(t,e);const c=null===(r=i.renderer.getFramebuffer(i.demManager.getDemFramebufferId()))||void 0===r?void 0:r.renderTarget.getTexture(),d=null===(l=i.renderer.getFramebuffer(i.demManager.getCorrectedDemFramebufferId()))||void 0===l?void 0:l.renderTarget.getTexture(),m=i.imageManager.getTexture(i.demManager.getHillshadeRampTextureId()),h=null==c?void 0:c.options.size,p=i.styleManager.getStyle(o.handyStyleId);if(!(c&&d&&m&&p&&h))return Qn(t,e);const u={type:"binder",styleZoom:o.styleZoom,styleState:o.styleState,tileData:[]},g=(0,he.v3)((0,ut.Id)((0,Te.vn)(p.dem.style.lightingDirection,u))-o.rotation),_=(0,Te.vn)(p.dem.style.shadingIntensity,u),f=he.A5/(Math.pow(2,Math.min(Math.trunc(o.styleZoom),Zn))*Un);c.enable(t,4),m.enable(t,6),d.enable(t,7);const y=i.demManager.demCorrectedScale;e.bind(t,{u_float_dem_scale:o.elevationScale,u_float_dem_resolution:h[0],u_float_dem_cell_size:f,u_float_dem_light_direction:g,u_float_dem_shade_intension:_,u_tex_dem:4,u_tex_corrected_dem:7,u_tex_hillshade_ramp:6,u_float_corrected_interval:i.demManager.isDemCorrectionEnabled&&1!==y?.5/y:0,u_mat4_dem_corrected:i.demManager.demTexToCorrectedTex,u_float_map_center_elevation:null!==(s=o.elevation)&&void 0!==s?s:0}),n.setFlags({demUniformsBound:!0})},Kn=(t,e)=>(e.bind(t,{u_float_dem_shade_intension:0}),!0),Qn=(t,e)=>(e.bind(t,{u_float_dem_scale:0}),!0),ta=Yn(ei,Qo,Jn),ea=Yn(ei,Jn),oa=Yn(Qo,Xo,Jn),ia=Yn(ei,Xo,Qo,Jn),na=Yn(si,Ko),aa=Yn(Xo,Yo,ci,ai),ra=Yn(Xo,Yo,((t,e)=>{e.bind(t,{u_vec4_border_color:[0,0,0,0]})}),((t,e)=>{e.bind(t,{u_vec4_space_color:[0,0,0,0]})})),la=Yn(Xo,Jo,((t,e,o)=>{e.bind(t,{u_float_rounding_factor:o.stillness})}),Ko,Jn),sa=Yn(Xo,Jo,Ko,Jn),ca=Yn(si,Ko,Xo,Jn),da=Xo,ma=Yn(Xo,Yo,ci,ai),ha=Jn;var pa=o(9970),ua=o(5071),ga=o(7464);const _a=new Float32Array(16),fa=new Float32Array(16);function ya(t,e){return 0===e?1:1===e?t.labelingOpacity:1-t.labelingOpacity}const ba=()=>!0,xa=(t,e,o,i,n,a,r)=>{const l=(0,Te.zn)(a.style.color,pr(o,n));return gn.JG(r.value,l.value),!0},va=(t,e,o,i,n,a,r)=>{const l=(0,Te.zn)(a.style.topColor,pr(o,n));return gn.JG(r.value,l.value),!0},wa=(t,e,o,i,n,a,r)=>{const l=(0,Te.zn)(a.style.sideColor,pr(o,n));return gn.JG(r.value,l.value),!0},za=(t,e,o,i,n,a,r)=>{const l=(0,Te.qv)(a.style.sideColor,pr(o,n));if(l){gn.JG(r.value,l.values[0].value);for(let t=0;t<l.values.length;t++){const e=l.values[t],o=(0,Te.m2)(e);gn.bA(o,o,n.tile.readiness),fa[t]=l.steps[t],fa[4+4*t]=o[0],fa[5+4*t]=o[1],fa[6+4*t]=o[2],fa[7+4*t]=o[3]}fa[2]=l.values.length,e.bind(t,{u_mat4_gradient:fa})}else e.bind(t,{u_mat4_gradient:_a});return!0},Fa=(t,e,o,i,n,a,r)=>{const l=(0,Te.zn)(a.style.strokeColor,pr(o,n));return gn.JG(r.value,l.value),!0},Sa=(t,e,o,i,n,a,r)=>{const l=(0,Te.zn)(a.style.strokeColor2,pr(o,n));return gn.JG(r.value,l.value),!0},Ca=(t,e,o,i,n,a,r)=>(void 0===n.attributes.id||(r.value[3]*=i.modelLayer.getOpacity(n.attributes.id,a.minzoom)),!0),Ma=(t,e,o,{modelLayer:i,gltfAnimator:n},a,r,l)=>{if(void 0===a.attributes.hiddenObjectId)return!0;if(i.hasModel(a.attributes.hiddenObjectId)){const t=i.getVisibleModelData(a.attributes.hiddenObjectId);if(!t)return!0;const e=1-t.opacity;if(e<.5)return!1;l.value[3]*=e}else if(n.hasModelFor(a.attributes.hiddenObjectId)){if(!n.isAnimating(a.attributes.hiddenObjectId))return!1;const t=1-2*n.getModelOpacityForLinkedObject(a.attributes.hiddenObjectId);if(t<.5)return!1;l.value[3]*=t}return!0},Pa=(t,e)=>(e.bind(t,{u_float_opacity:1}),!0),Ia=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.textureOpacity,r);return e.bind(t,{u_float_texture_opacity:n.tile.readiness*l}),!0},La=(t,e,o,i,n,a,r)=>{const l=pr(o,n),s=(0,Te.zn)(a.style.strokeColor,l).value,c=(0,Te.vn)(a.style.strokeWidth,l);return gn.fS(r.value,s)&&1===r.value[3]&&c<=1&&(r.value[3]*=o.stillness),!0},ka=(t,e,o,i,n,a,r)=>{const l=pr(o,n),s=(0,Te.zn)(a.style.topColor,l).value,c=(0,Te.vn)(a.style.strokeWidth,l);return gn.fS(r.value,s)&&1===r.value[3]&&c<=1&&(r.value[3]*=o.stillness),!0},Aa=(t,e,o,i,n,a,r)=>(r.value[3]*=o.stillness,!0),ja=(t,e,o,i,n,a,r)=>{const l=(0,Te.m2)(r);return gn.bA(l,l,n.tile.readiness),0!==r.value[3]&&(e.bind(t,{u_vec4_color:l}),!0)},Ta=(t,e,o,i,n,a,r)=>{const l=(0,Te.m2)(r);return e.bind(t,{u_vec4_color:l}),!0},Ea=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.width,pr(o,n));return 0!==r&&(e.bind(t,{u_float_width:r*window.devicePixelRatio}),!0)},Oa=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.strokeWidth,pr(o,n));return 0!==r&&(e.bind(t,{u_float_width:r*window.devicePixelRatio}),!0)},Ha=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.strokeWidth,r);if(0===l)return!1;const s=(0,Te.vn)(a.style.width,r)+2*l;return e.bind(t,{u_float_width:s*window.devicePixelRatio}),!0},Wa=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.strokeWidth2,r);if(0===l)return!1;const s=(0,Te.vn)(a.style.width,r)+2*(0,Te.vn)(a.style.strokeWidth,r)+2*l;return e.bind(t,{u_float_width:s*window.devicePixelRatio}),!0},Ra=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.width,r)+2*(0,Te.vn)(a.style.strokeWidth,r)+2*(0,Te.vn)(a.style.strokeWidth2,r);return 0!==l&&(e.bind(t,{u_float_width:l*window.devicePixelRatio}),!0)},Ba=(t,e,o,i,n,a)=>{const r=pr(o,n);return(0,Te.vn)(a.style.iconWidth,r)>0},Na=(t,e,o,i,n,a)=>(e.bind(t,{u_float_shift:(0,Te.vn)(a.style.shift,pr(o,n))*window.devicePixelRatio}),!0),Da=(t,e,o,i,n,a)=>0!==ya(o,n.attributes.animDirection),Ua=(t,e,o,i,n,a)=>{const r=pr(o,n);return(0,Te.vn)(a.style.iconOpacity,r)*ya(o,n.attributes.animDirection)!=0},Za=(t,e,o,i,n,a)=>{const r=ya(o,n.attributes.animDirection);return 0!==r&&(e.bind(t,{u_float_opacity:r}),!0)},Ga=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.iconOpacity,r)*ya(o,n.attributes.animDirection);return 0!==l&&(e.bind(t,{u_float_opacity:l}),!0)},Va=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.iconRotation,pr(o,n));return e.bind(t,{u_vec2_rotation:[Math.cos(r),Math.sin(r)]}),!0},qa=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.opacity,pr(o,n));return e.bind(t,{u_float_opacity:n.tile.readiness*r}),!0},Xa=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.opacity,pr(o,n));return e.bind(t,{u_float_opacity:r}),!0},$a=(t,e,o,{threeJsSceneManager:i},n)=>void 0===n.attributes.hiddenObjectId||!o.hiddenObjectIds.has(n.attributes.hiddenObjectId)&&!(null==i?void 0:i.hasDisplayedBuilding(n.attributes.hiddenObjectId)),Ya=(t,e,o,{floorManager:i},n)=>void 0===n.attributes.hiddenObjectId||!i.hasDisplayedFloorBuilding(n.attributes.hiddenObjectId),Ja=(t,e,o,{modelLayer:i},n)=>{if(void 0===n.attributes.hiddenObjectId)return!0;if(!i.hasModel(n.attributes.hiddenObjectId))return!0;const a=i.getVisibleModelData(n.attributes.hiddenObjectId);return!a||1!==a.opacity},Ka=(t,e,o,i,n)=>(e.bind(t,{u_sr2d_texture:n.attributes.atlasIndex}),!0),Qa=(t,e,o,i,n)=>{const{range:a,fontIndex:r,styleId:l}=n.attributes,s=i.styleManager.getStyle(l);if(!s)return!1;const c=s.fonts[r],d=i.assetManager.getFontTextureByName(c,a);return void 0!==d&&(d.enable(t),!0)},tr=(t,e,o,{imageManager:i},n)=>{const a=i.getTexture(n.attributes.textureIndex);return void 0!==a&&(a.enable(t,0),e.bind(t,{u_sr2d_texture:0}),!0)},er=(t,e,o,{imageManager:i},n)=>{const a=i.getTexture(n.attributes.rampTextureIndex);return void 0!==a&&(a.enable(t,1),e.bind(t,{u_sr2d_ramp_texture:1}),!0)},or=(t,e,o,i,n,a)=>{const{tile:r}=n,l=(0,Te.zn)(a.style.gapColor,pr(o,n));if(!l)return!0;const s=(0,Te.m2)((0,Te.zn)(l,pr(o,n)));return gn.bA(s,s,r.readiness),e.bind(t,{u_vec4_space_color:s}),!0},ir=(t,e,o,i,n,a)=>{const{styleZoom:r}=o,l=pr(o,n),{tile:s}=n,c=(0,Te.m2)((0,Te.zn)(a.style.color,l));gn.bA(c,c,s.readiness),l.styleZoom=Math.floor(r);const d=Math.pow(2,(0,ut.vO)(r)),m=(0,Te.vn)(a.style.dashLength,l)*d,h=(0,Te.vn)(a.style.gapLength,l)*d;return e.bind(t,{u_vec4_dash_color:c,u_vec2_scaler_params:[0,No.ax],u_float_dash_length:(0,he.Qn)(m,s.size),u_float_dash2_length:(0,he.Qn)(m,s.size),u_float_space_length:(0,he.Qn)(h,s.size)}),!0},nr=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.tipWidth,r),s=(0,Te.vn)(a.style.tipHeight,r),c=l,d=_e.al(-c,-0);_e.Fv(d,d);const m=_e.al(l,s);return _e.Fv(m,m),e.bind(t,{u_vec2_wing_normal:d,u_vec2_tip_normal:m,u_float_tip_height_multiplier:s,u_float_wing_height_multiplier:0,u_float_wing_width_multiplier:c,u_float_size_factor:(0,he.Qn)(No.gt,n.tile.size)/2}),!0},ar=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.lineLength,r),s=(0,Te.vn)(a.style.lineWidth,r);return e.bind(t,{u_float_length:l,u_float_width:s,u_float_border_width:0}),!0},rr=(t,e,o,i,n,a)=>{const r=pr(o,n),{tile:l,attributes:s}=n,c=s.isLongArrow,d=n.tile.dynamicObject;let m=0,h=1;d&&(c?h=d.growPosition:m=d.bouncePosition);let p=0;return"appearance"===a.style.animation.type&&(p=(0,Te.vn)(a.style.animation.tipMovementAmplitude,r)),e.bind(t,{u_float_width_zpt:(0,Te.vn)(a.style.lineWidth,r),u_float_border_width_zpt:(0,Te.vn)(a.style.strokeWidth,r),u_float_tip_movement_amplitude:(0,he.Qn)(p,l.size),u_float_vertex_shift:m,u_float_relative_end_position:h}),!0},lr=(t,e,o,{modelLayer:i},n)=>{const{texture:a,id:r}=n.attributes;if(void 0===r)return!1;const l=i.getTexture(r,a);return void 0!==l&&(l.enable(t,0),e.bind(t,{u_sr2d_texture:0}),!0)},sr=(t,e,o,{assetManager:i},n)=>{if(void 0===n.instanceAttributes)return!1;const a=i.getModel(n.attributes.modelId);if(!a)return!1;const r=n.instanceAttributes.colorTexture;if(void 0===r)return!1;const l=a.textures[r];return!!l&&(l.enable(t,0),e.bind(t,{u_sr2d_texture_0:0}),!0)},cr=(t,e,o,{gltfAnimator:i},n,a,r)=>{const l=i.getModelOpacity(n.attributes.modelId,a.minzoom);return 0!==l&&(r.value[3]*=l,!0)},dr=(t,e,o,i,n,a)=>{if(void 0===n.attributes.id)return!0;const r=i.modelLayer.getOpacity(n.attributes.id,a.minzoom),l=1===i.modelLayer.getBuildingHeight(n.attributes.id)?1:r;return e.bind(t,{u_float_height_factor:l}),!0},mr=(t,e,o,i,n,a)=>{const r=pr(o,n),l=(0,Te.vn)(a.style.height,r);return e.bind(t,{u_float_height_factor:(0,Le.VW)(l)}),!0},hr=(t,e,o,i,n,a)=>{let r=i.buildingHeightAnimator.getBuildingHeight(a.minzoom);return i.map.state.demMode&&(r=.001+.999*r),n.attributes.hiddenObjectId&&i.modelLayer.setBuildingHeight(n.attributes.hiddenObjectId,r),e.bind(t,{u_float_height_factor:r}),!0};function pr(t,e){return(0,Te.jJ)(t.styleZoom,t.styleState,e.attributes.tileData)}const ur=(t,e,o,i,n,a)=>{const{tile:{purpose:r,detailLevel:l}}=n,{styleZoom:s}=o;switch(r){case"terrain":case"traffic":case"geojson":const t=l<function(t){switch(t){case"terrain":return kt.Sv.maxDetailLevel;case"traffic":return kt.nM.maxDetailLevel;case"geojson":return ua.rR}}(r)?(0,ut.uZ)(s,l,l+.99999):s;return a.minzoom<=t&&t<a.maxzoom;case"dynamicObject":return a.minzoom<=s&&s<=a.maxzoom;default:return a.minzoom<=s&&s<a.maxzoom}};const gr=(t,e,o,i,n)=>{const{styleZoom:a}=o,{tile:r}=n;return!("terrain"===r.purpose&&a<=kt.Sv.maxUniverseZoom)},_r=(t,e,o,i,n,a)=>{const{styleZoom:r}=o;return r>=a.minzoom&&r<a.maxzoom},fr=(t,e,o,i,n,a)=>{const{tile:r}=n,l=(0,Te.vn)(a.style.width,pr(o,n));return 0!==l&&(e.bind(t,{u_float_width:(0,he.Qn)(l,r.size)/2*No.gt,u_float_width_offset:(0,he.Qn)(No.gt/window.devicePixelRatio,r.size)/2}),!0)},yr=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.radius,pr(o,n));return!(r<=0)&&(e.bind(t,{u_float_radius:r*window.devicePixelRatio}),!0)},br=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.intensity,pr(o,n));return e.bind(t,{u_float_intensity:r}),!0},xr=(t,e,o,i,n,a)=>{const r=pr(o,n);let l=(0,Te.vn)(a.style.textFontSize,r);if("point"===n.symbol){const t=n.attributes.labelIndex;t===pa.bR.Second&&a.style.textFontSize2?l=(0,Te.vn)(a.style.textFontSize2,r):t===pa.bR.Icon&&a.style.iconTextFontSize&&(l=(0,Te.vn)(a.style.iconTextFontSize,r))}return e.bind(t,{u_float_scale:l*window.devicePixelRatio/kt.Rq.baseSize}),!0},vr=(t,e,o,i,n,a)=>{var r,l;const s=a.style;if("point"===n.symbol){switch(n.attributes.labelIndex){case pa.bR.Second:return(null!==(r=s.textHaloWidth2)&&void 0!==r?r:0)>0&&!!s.textHaloColor2;case pa.bR.Icon:return(null!==(l=s.iconTextHaloWidth)&&void 0!==l?l:0)>0&&!!s.iconTextHaloColor;case pa.bR.First:}}return s.textHaloWidth>0&&!!s.textHaloColor},wr=(t,e,o,i,n,a)=>Fr(t,e,o,n,a.style.textFontSize,a.style.textColor,a.style.textHaloWidth,a.style.textHaloColor,n.layerSettings.uniformSet),zr=(t,e,o,i,n,a)=>{const{layerSettings:r}=n,{uniformSet:l}=r,s=n.attributes.labelIndex,c=a.style;let{textFontSize:d,textHaloWidth:m,textColor:h,textHaloColor:p}=c;switch(s){case pa.bR.Icon:d=c.iconTextFontSize,m=c.iconTextHaloWidth,h=c.iconTextColor,p=c.iconTextHaloColor;break;case pa.bR.Second:d=c.textFontSize2,m=c.textHaloWidth2,h=c.textColor2,p=c.textHaloColor2}return Fr(t,e,o,n,d,h,m,p,l)},Fr=(t,e,o,i,n,a,r,l,s)=>{const c=pr(o,i),d=(0,Te.vn)(n,c)/kt.Rq.baseSize,m=d*window.devicePixelRatio,h=kt.Rq.gamma/m;let p;if("fontHalo"===s){if(!l)return!1;p=(0,Te.m2)((0,Te.zn)(l,c))}else p=(0,Te.m2)((0,Te.zn)(a,c));const u="fontHalo"===s?(6-(0,Te.vn)(r,c)/d)/8:.75;return e.bind(t,{u_float_buffer:u,u_float_gamma:h,u_vec4_color:p}),!0},Sr=(t,e,o,i,n)=>{const{attributes:a}=n,{offsetX:r,offsetY:l}=a,s=window.devicePixelRatio;return e.bind(t,{u_vec2_offset:[r*s,l*s]}),!0},Cr=(t,e,o)=>(e.bind(t,{u_float_style_zoom:o.styleZoom}),!0),Mr=(t,e,o,i,n)=>{const{tile:a}=n,{zoom:r}=o,l=No.y4*Math.pow(2,r-a.zoomLevel)*window.devicePixelRatio;return e.bind(t,{u_float_tile_to_pixel_ratio:No.gt/l}),!0},Pr=(t,e,o,{demManager:i,renderer:n,map:a})=>{if(!a.state.demMode)return!1;const r=i.getFlatFramebufferId(),l=n.getFramebuffer(r);if(!l)return!1;const s=l.renderTarget.getTexture();return s&&s.enable(t,0),e.bind(t,{u_flat_tex:0}),!0},Ir=(t,e,o,{demManager:i,renderer:n,map:a})=>{if(!a.state.demMode)return!1;const r=i.getIdentifyFlatFramebufferId(),l=n.getFramebuffer(r);if(!l)return!1;const s=l.renderTarget.getTexture();return s&&s.enable(t,0),e.bind(t,{u_flat_tex:0}),!0},Lr=(t,e,o,{demManager:i,renderer:n,map:a})=>{if(!a.state.demMode)return!1;const r=i.getHillshadeFramebufferId(),l=n.getFramebuffer(r);if(!l)return!1;const s=l.renderTarget.getTexture();return s&&s.enable(t,5),e.bind(t,{u_hillshade_tex:5}),!0},kr=(t,e,o,i)=>{var n;const a=i.demManager.getDemFramebufferId(),r=null===(n=i.renderer.getFramebuffer(a))||void 0===n?void 0:n.renderTarget.getTexture();return!!r&&(r.enable(t,0),e.bind(t,{u_tex_dem:0,u_mat4_dem_corrected:i.demManager.demCorrectedFbVpToDemTex}),!0)},Ar=(t,e,o,i,n,a)=>{const r=(0,Te.vn)(a.style.elevation,pr(o,n));return e.bind(t,{u_bool_skip_height_factor:Boolean(r)}),!0};function jr(...t){const e=(0,ga.lK)([0,0,0,0]);return(o,i,n,a,r,l)=>{for(let s=0;s<t.length;s++){if(!t[s](o,i,n,a,r,l,e,null))return!1}return!0}}var Tr=o(7486);const Er=new Float32Array(16);const Or=(t,e,o,i,n)=>{Oo.JG(Er,n.tile.modelMatrix),e.bind(t,{u_mat4_model:Er})};const Hr=(t,e,o,{styleManager:i},n,a,r)=>{var l;const s=function(t,e){return(0,Te.jJ)(t.styleZoom,t.styleState,e.attributes.tileData)}(o,n),c=(0,Te.Q9)(r.style.textureImage,s),d=i.getStyle(n.attributes.styleId);if(!d)return void e.bind(t,{u_int_is_textured:0});const m=null===(l=d.rasterSets.byKey[(0,ga.FD)(c)])||void 0===l?void 0:l.rasters;if(!m)return void e.bind(t,{u_int_is_textured:0});const h=r.style.textureSize,p=Array.isArray(h)?h[0]:h,u=(0,Tr.Bl)(m,p*window.devicePixelRatio,!0);if(void 0===u)return void e.bind(t,{u_int_is_textured:0});const{tile:g}=n,{zoom:_}=o,f=m[u],y=No.y4*Math.pow(2,Math.round(_)-g.zoomLevel)*window.devicePixelRatio,b=g.coords[0]*y%f.w/f.w,x=g.coords[1]*y%f.h/f.h,v=y/f.w,w=y/f.h;e.bind(t,{u_int_is_textured:1,u_float_texture_params:[b,x,v,w],u_sr2d_texture:f.atlasIndex,u_float_sprite_texture_coords:[(f.x+.5)/kt.a5[0],(f.y+f.h-1)/kt.a5[1],(f.x+f.w-1)/kt.a5[0],(f.y+.5)/kt.a5[1]]})};class Wr{constructor(t){this.gl=t,this.ext=t.getExtension("EXT_disjoint_timer_query"),this.queries=[]}addTimer(){if(!this.ext)return;const t=this.ext.createQueryEXT();this.queries.push(t),this.ext.beginQueryEXT(this.ext.TIME_ELAPSED_EXT,t)}stopTimer(){this.ext&&this.queries.length&&this.ext.endQueryEXT(this.ext.TIME_ELAPSED_EXT)}tryToGetFirstTimerValue(){if(!this.ext)return;const t=this.queries[0];if(!t)return;const e=this.ext,o=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT),i=this.gl.getParameter(e.GPU_DISJOINT_EXT);if(!o||i)return;const n=e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT);return e.deleteQueryEXT(t),this.queries.shift(),Number(n)}}class Rr{constructor(t){this._enable=!1,this.name=t.name,this.index=t.index,this.location=void 0!==t.location?t.location:-1}bindLocation(t,e){return-1!==this.location&&!0!==this.index&&t.bindAttribLocation(e,this.location,this.name),this}getLocation(t,e){return-1===this.location&&!0!==this.index&&(this.location=t.getAttribLocation(e,this.name)),this}bind(t,e){return this._enable||!0===this.index||(t.enableVertexAttribArray(this.location),this._enable=!0),e.bind(t,this.location),this}disable(t){return this._enable&&!0!==this.index&&(t.disableVertexAttribArray(this.location),this._enable=!1),this}}class Br{constructor(t){this.location=null,this.name=t.name,this.type=t.type}getLocation(t,e){return this.location=t.getUniformLocation(e,this.name),this}bind(t,e){const o=this.type;return"mat2"===o?t.uniformMatrix2fv(this.location,!1,e):"mat3"===o?t.uniformMatrix3fv(this.location,!1,e):"mat4"===o?t.uniformMatrix4fv(this.location,!1,e):"2f"===o?t.uniform2f(this.location,e[0],e[1]):"3f"===o?t.uniform3f(this.location,e[0],e[1],e[2]):"4f"===o?t.uniform4f(this.location,e[0],e[1],e[2],e[3]):"2i"===o?t.uniform2i(this.location,e[0],e[1]):"3i"===o?t.uniform3i(this.location,e[0],e[1],e[2]):"4i"===o?t.uniform4i(this.location,e[0],e[1],e[2],e[3]):t["uniform"+o](this.location,e),this}}class Nr{constructor(t){this.uniforms={},this.attributes={},this._webglProgram=null,this._linked=!1,this._located=!1,this._error=!1,t=t||{},this._vertexShader=t.vertex,this._fragmentShader=t.fragment,t.uniforms=t.uniforms||[],t.uniforms.forEach((t=>{this.uniforms[t.name]=new Br(t)})),t.attributes=t.attributes||[],t.attributes.forEach((t=>{this.attributes[t.name]=new Rr(t)}))}enable(t){return this._error?this:(this.link(t),this.locate(t),this._error||t.useProgram(this._webglProgram),this)}bind(t,e,o){if(this._error)return this;if(e)for(const o in e)this.uniforms[o].bind(t,e[o]);if(o)for(const e in o)this.attributes[e].bind(t,o[e]);return this}disable(t){if(this._error)return this;for(const e in this.attributes)this.attributes[e].disable(t);return this}link(t){if(this._linked||this._error)return this;try{if(this._webglProgram=t.createProgram(),!this._webglProgram)throw new Error("Failed to create shader program");const e=this._vertexShader.get(t),o=this._fragmentShader.get(t);e&&t.attachShader(this._webglProgram,e),o&&t.attachShader(this._webglProgram,o);for(const e in this.attributes)this.attributes[e].bindLocation(t,this._webglProgram);if(t.linkProgram(this._webglProgram),!t.getProgramParameter(this._webglProgram,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(this._webglProgram)||"Couldn't get shader program Info Log");this._linked=!0}catch(t){throw this._error=!0,t}return this}locate(t){if(this._located||this._error||!this._webglProgram)return this;for(const e in this.attributes)this.attributes[e].getLocation(t,this._webglProgram);for(const e in this.uniforms)this.uniforms[e].getLocation(t,this._webglProgram);return this._located=!0,this}}const Dr="\nvec4 apply_opacity(const vec4 color, const float opacity)\n{\nreturn color * opacity;\n}\n",Ur={prelude:"#ifdef WEBGL2\n#define varying in\n#define attribute in\n#define texture2D texture\n#define gl_FragColor fragColor\nout vec4 gl_FragColor;\n#endif\n",affine_step:"\nfloat affine_step(const float edge0, const float edge1, const float x)\n{\n    return clamp((x - edge0) / (edge1 - edge0), 0., 1.);\n}\n",apply_opacity:Dr,color:"varying vec4 v_vec4_color;\nvoid main()\n{\n    gl_FragColor = v_vec4_color;\n}\n",gradient:"varying mat4 v_mat4_gradient;\nvarying vec4 v_vec4_color;\nvarying float v_float_height_gradient;\nvoid main()\n{\nvec4 color = v_vec4_color;\nif (v_mat4_gradient[0][2] != 0.) {\ncolor = mix(v_mat4_gradient[1], v_mat4_gradient[2], smoothstep(v_mat4_gradient[0][0], v_mat4_gradient[0][1], v_float_height_gradient));\n}\ngl_FragColor = color;\n}",line:"uniform mat4 u_mat4_gradient;\nvarying vec4 v_vec4_color;\nvarying float v_float_distance;\nvarying float v_float_height_gradient;\nvoid main()\n{ \n    vec4 color = v_vec4_color;\n    if (u_mat4_gradient[0][2] != 0.) {\n        color = mix(u_mat4_gradient[1], u_mat4_gradient[2], smoothstep(u_mat4_gradient[0][0], u_mat4_gradient[0][1], v_float_height_gradient));\n    }\n    gl_FragColor = color * (1. - abs(v_float_distance * gl_FragCoord.w));\n}\n",lowp_float:"precision lowp float;\n",mediump_float:"precision mediump float;\n",highp_float:"precision highp float;\n",pointsprite:"uniform sampler2D u_sr2d_texture;\nuniform float u_float_opacity;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    vec4 color = texture2D(u_sr2d_texture, v_vec2_texcoord);\n    gl_FragColor = apply_opacity(color, u_float_opacity);\n}\n",striped_line:"varying vec4 v_vec4_dash_color;\nvarying vec4 v_vec4_space_color;\nvarying vec4 v_vec4_border_color;\nvarying vec2 v_vec2_circle;\nvarying float v_float_width;\nvarying float v_float_part_color_swap_threshold;\nvarying float v_float_distance_in_parts;\nvec4 distance_func_smooth(in vec4 main_color, in vec4 border_color, in vec2 circle)\n{\n    float circle_length = length(circle);\n    float distance = circle_length - v_float_width;\n    mat2 derivatives = mat2(dFdx(v_vec2_circle), dFdy(v_vec2_circle));\n    \n    \n    \n    vec2 circle_dx = derivatives[0];\n    vec2 circle_dy = derivatives[1];\n    \n    float distance_dx = dot(v_vec2_circle, circle_dx);\n    float distance_dy = dot(v_vec2_circle, circle_dy);\n    \n    float derivative_denominator = circle_length;\n    float width = max(abs(distance_dx), abs(distance_dy));\n    vec4 from_main_to_border = mix(\n        main_color,\n        border_color,\n        affine_step(-width, 0., distance * derivative_denominator));\n    vec4 from_color_to_fade = mix(\n        from_main_to_border,\n        vec4(0.),\n        affine_step(0., +width, distance * derivative_denominator));\n    return from_color_to_fade;\n}\nfloat calculate_segment_color_factor(in float distance_in_parts, in float threshold)\n{\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    float color_factor = abs(fract(distance_in_parts + 0.5 - 0.5 * threshold) - 0.5);\n    \n    float parts_affine_step_width = fwidth(distance_in_parts);\n    \n    float smoothed_color_factor = affine_step(\n        0.5 * threshold - 0.5 * parts_affine_step_width,\n        0.5 * threshold + 0.5 * parts_affine_step_width,\n        color_factor);\n    return smoothed_color_factor;\n}\nvoid main()\n{\n    vec4 current_segment_color = mix(\n        v_vec4_dash_color,\n        v_vec4_space_color,\n        calculate_segment_color_factor(\n            v_float_distance_in_parts,\n            v_float_part_color_swap_threshold));\n    \n    vec4 final_border_color = (1.0 - v_vec4_border_color.a) * current_segment_color + v_vec4_border_color;\n    gl_FragColor = distance_func_smooth(current_segment_color, final_border_color, v_vec2_circle);\n}\n",label:"uniform sampler2D u_sr2d_texture;\nuniform float u_float_buffer;\nuniform float u_float_gamma;\nuniform vec4 u_vec4_color;\nuniform float u_float_opacity;\nvarying vec2 v_vec2_texcoord;\nvoid main() {\n    float dist = texture2D(u_sr2d_texture, v_vec2_texcoord).a;\n    float alpha = smoothstep(\n        u_float_buffer - u_float_gamma,\n        u_float_buffer + u_float_gamma,\n        dist\n    );\n    gl_FragColor = apply_opacity(u_vec4_color * alpha, u_float_opacity);\n}\n",one_way_line:"uniform vec2 u_vec2_wing_normal;\nuniform vec2 u_vec2_tip_normal;\nuniform float u_float_width;\nuniform float u_float_length;\nuniform vec2 u_vec2_vpt_size;\nuniform float u_float_tip_height_multiplier;\nuniform float u_float_wing_height_multiplier;\nvarying vec4 v_vec4_color;\nvarying vec4 v_vec4_border_color;\nvarying vec2 v_vec2_texcoord;\nvarying float v_float_border_width;\nvarying float v_float_zpt_to_texcoord_factor;\nvarying float v_float_outer_width;\nvarying float v_float_opacity;\nfloat one_way_line_distance(const ArrowDistances ad)\n{\n    return max(max(max(ad.top_tip_cut, ad.bottom_tip_cut), max(ad.top_left_wing, ad.top_right_wing)), min(ad.line, min(ad.bottom_left_wing, ad.bottom_right_wing)));\n}\nvoid main()\n{\n    mat2 derivatives = mat2(dFdx(v_vec2_texcoord), dFdy(v_vec2_texcoord));\n    ArrowDistanceParameters arrow_parameters = calculate_arrow_distance_parameters(\n        u_vec2_wing_normal,\n        u_vec2_tip_normal,\n        u_float_width * v_float_zpt_to_texcoord_factor,\n        u_float_length * v_float_zpt_to_texcoord_factor,\n        u_float_tip_height_multiplier,\n        u_float_wing_height_multiplier);\n    \n    float border_clipping = (abs(v_vec2_texcoord.y) - v_float_outer_width) / max(abs(derivatives[0].y), abs(derivatives[1].y));\n    float fill_factor = affine_step(-1., 0., one_way_line_distance(calculate_arrow_distances(arrow_parameters, v_vec2_texcoord, 0., derivatives)));\n    float border_factor = max(border_clipping, affine_step(0., 1., one_way_line_distance(calculate_arrow_distances(arrow_parameters, v_vec2_texcoord, v_float_border_width, derivatives))));\n    gl_FragColor = apply_opacity(mix(mix(v_vec4_color, v_vec4_border_color, fill_factor), vec4(0.), border_factor), v_float_opacity);\n}\n",color_identify:"varying vec4 v_vec4_identifier;\nvoid main()\n{\n    gl_FragColor = v_vec4_identifier;\n}\n",pointsprite_identify:"uniform sampler2D u_sr2d_texture;\nvarying vec2 v_vec2_texcoord;\nvarying vec4 v_vec4_identifier;\nvoid main()\n{\n    vec4 color = texture2D(u_sr2d_texture, v_vec2_texcoord);\n    if (color.a < 0.3) {\n        discard;\n    } else {\n        gl_FragColor = v_vec4_identifier;\n    }\n}\n",zbm_model:"uniform sampler2D u_sr2d_texture;\nuniform vec4 u_vec4_color;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    gl_FragColor = texture2D(u_sr2d_texture, v_vec2_texcoord) * u_vec4_color;\n}\n",gltf_model:"uniform sampler2D u_sr2d_texture_0;\nuniform vec4 u_vec4_color;\nvarying vec2 v_vec2_texcoord0;\nvoid main()\n{\n    gl_FragColor = texture2D(u_sr2d_texture_0, v_vec2_texcoord0) * u_vec4_color;\n}\n",simple_line:"uniform vec4 u_vec4_color;\nvarying float v_float_distance;\nvarying float v_float_distance_offset;\nvoid main()\n{\n    vec4 color = u_vec4_color;\n    gl_FragColor = color * clamp(\n        1. + v_float_distance_offset - abs(v_float_distance * gl_FragCoord.w),\n        0.,\n        1.);\n}\n",enable_standard_derivatives:"#ifdef WEBGL1\n#extension GL_OES_standard_derivatives: enable\n#endif\n",arrow_functions:"struct ArrowDistanceParameters\n{\n    vec2 wing_normal;\n    vec2 tip_normal;\n    vec2 mirrored_wing_normal;\n    vec2 mirrored_tip_normal;\n    float width;\n    float full_length;\n    float arrow_height;\n};\nArrowDistanceParameters calculate_arrow_distance_parameters(\n    const vec2 wing_normal,\n    const vec2 tip_normal,\n    const float width_zpt,\n    const float length_zpt,\n    const float tip_height_multiplier,\n    const float wing_height_multiplier)\n{\n    vec2 mirrored_wing_normal = vec2(wing_normal.x, -wing_normal.y);\n    vec2 mirrored_tip_normal = vec2(tip_normal.x, -tip_normal.y);\n    float width = 0.5 * width_zpt;\n    float length = 0.5 * length_zpt;\n    float arrow_height = width_zpt * (tip_height_multiplier - wing_height_multiplier);\n    return ArrowDistanceParameters(\n        wing_normal,\n        tip_normal,\n        mirrored_wing_normal,\n        mirrored_tip_normal,\n        width,\n        length,\n        arrow_height);\n}\nstruct ArrowDistances\n{\n    float top_tip_cut;\n    float bottom_tip_cut;\n    float line;\n    float bottom_left_wing;\n    float bottom_right_wing;\n    float top_left_wing;\n    float top_right_wing;\n};\nArrowDistances calculate_arrow_distances(\n    const ArrowDistanceParameters arrow_parameters,\n    const vec2 texcoord,\n    const float offset,\n    const mat2 derivatives)\n{\n    float derivatives_x_multiplier = 1. / max(abs(derivatives[0].x), abs(derivatives[1].x));\n    float dt = ( texcoord.x - arrow_parameters.full_length - offset) * derivatives_x_multiplier;\n    float d0 = (-texcoord.x - arrow_parameters.full_length - offset) * derivatives_x_multiplier;\n    float d1 = (abs(texcoord.y) - arrow_parameters.width - offset) / max(abs(derivatives[0].y), abs(derivatives[1].y));\n    float d2 = (dot(texcoord - vec2(arrow_parameters.full_length - arrow_parameters.arrow_height, 0.), arrow_parameters.wing_normal) - offset) / max(abs(dot(derivatives[0], arrow_parameters.wing_normal)), abs(dot(derivatives[1], arrow_parameters.wing_normal)));\n    float d3 = (dot(texcoord - vec2(arrow_parameters.full_length - arrow_parameters.arrow_height, 0.), arrow_parameters.mirrored_wing_normal) - offset) / max(abs(dot(derivatives[0], arrow_parameters.mirrored_wing_normal)), abs(dot(derivatives[1], arrow_parameters.mirrored_wing_normal)));\n    float d4 = (dot(texcoord - vec2(arrow_parameters.full_length, 0.), arrow_parameters.tip_normal) - offset) / max(abs(dot(derivatives[0], arrow_parameters.tip_normal)), abs(dot(derivatives[1], arrow_parameters.tip_normal)));\n    float d5 = (dot(texcoord - vec2(arrow_parameters.full_length, 0.), arrow_parameters.mirrored_tip_normal) - offset) / max(abs(dot(derivatives[0], arrow_parameters.mirrored_tip_normal)), abs(dot(derivatives[1], arrow_parameters.mirrored_tip_normal)));\n    return ArrowDistances(dt, d0, d1, d2, d3, d4, d5);\n}\n",circle_functions:"\nconst float g_distance_precision_limit = 1e-4;\nstruct CircleDistance\n{\n    float distance;\n    float width;\n};\nCircleDistance circle_color_distance(\n    const mat2 derivatives,\n    const vec2 circle,\n    const float circle_width)\n{\n    float circle_length = length(circle);\n    float distance = circle_length - circle_width;\n    \n    \n    \n    vec2 circle_dx = derivatives[0];\n    vec2 circle_dy = derivatives[1];\n    \n    float distance_dx = dot(circle, circle_dx);\n    float distance_dy = dot(circle, circle_dy);\n    \n    float derivative_denominator = circle_length;\n    float width = max(abs(distance_dx), abs(distance_dy));\n    return CircleDistance(\n        distance * derivative_denominator,\n        width);\n}\nvec4 distance_to_color(\n    const float fill_distance,\n    const float border_distance,\n    const vec4 fill_color,\n    const vec4 border_color)\n{\n    float fill_factor = affine_step(-1., 0., fill_distance);\n    float border_factor = affine_step(0., 1., border_distance);\n    return\n        mix(mix(fill_color, border_color, fill_factor), vec4(.0), border_factor);\n}\nvec4 distance_to_color(\n    const CircleDistance circle_distance,\n    const vec4 fill_color)\n{\n    \n    \n    float fill_factor = circle_distance.distance < g_distance_precision_limit\n        ? 0.\n        : affine_step(0., circle_distance.width, circle_distance.distance);\n    return mix(fill_color, vec4(0.), fill_factor);\n}\n",arrow_line:"uniform vec2 u_vec2_wing_normal;\nuniform vec2 u_vec2_tip_normal;\nuniform float u_float_tip_height_multiplier;\nuniform float u_float_wing_height_multiplier;\nvarying vec2 v_vec2_line_type_arrow_tail;\nvarying vec4 v_vec4_arrow_width_length_border_outer;\nvarying vec4 v_vec4_texcoord_arrow_line;\nvarying vec4 v_vec4_distance_vertex_hiding;\nvarying vec4 v_vec4_color;\nvarying vec4 v_vec4_border_color;\nconst float g_type_arrow = 1.;\nconst float g_type_start_border = 2.;\nbool lookalike(const float a, const float b)\n{\n    return abs(a - b) < 1e-4;\n}\nfloat filter_border(const float start, const float value)\n{\n    return step(start, value) * 2. - 1.;\n}\nfloat arrow_distance(\n    const ArrowDistanceParameters arrow_parameters,\n    const vec2 texcoord,\n    const float offset,\n    const mat2 derivatives,\n    const float line_distance,\n    const float line_distance_no_offset)\n{\n    ArrowDistances ad = calculate_arrow_distances(arrow_parameters, texcoord, offset, derivatives);\n    float derivatives_x_multiplier = 1. / max(abs(derivatives[0].x), abs(derivatives[1].x));\n    \n    \n    float intersection_point = arrow_parameters.full_length - arrow_parameters.arrow_height - arrow_parameters.width * u_vec2_wing_normal.y / u_vec2_wing_normal.x;\n    float tail_arrow_intersection = filter_border(-1., (texcoord.x - intersection_point) * derivatives_x_multiplier);\n    \n    float tail_hide_part = v_vec2_line_type_arrow_tail.y;\n    float tail_hide_mask = (-texcoord.x - tail_hide_part) * derivatives_x_multiplier;\n    float clipped_tail = max(tail_hide_mask, max(line_distance, max(ad.top_left_wing, ad.top_right_wing)));\n    float line_without_offset = filter_border(0., line_distance_no_offset);\n    float wings_with_tail = max(min(min(ad.bottom_left_wing, ad.bottom_right_wing), line_without_offset), max(ad.top_left_wing, ad.top_right_wing));\n    return (v_vec4_distance_vertex_hiding.x < v_vec4_distance_vertex_hiding.y)\n        ? max(ad.top_tip_cut, max(-max(tail_arrow_intersection, line_without_offset), wings_with_tail))\n        : max(ad.top_tip_cut, min(clipped_tail, max(-max(tail_arrow_intersection, line_without_offset), wings_with_tail)));\n}\nvec4 distance_to_arrow_line_color(\n    const float fill_distance,\n    const float border_distance)\n{\n    return distance_to_color(fill_distance, border_distance, v_vec4_color, v_vec4_border_color);\n}\nvec4 arrow_color(\n    const vec2 texcoord,\n    const ArrowDistanceParameters arrow_parameters,\n    const float line_fill_distance,\n    const float line_border_distance)\n{\n    mat2 derivatives = mat2(dFdx(texcoord), dFdy(texcoord));\n    \n    float border_clipping = (abs(texcoord.y) - v_vec4_arrow_width_length_border_outer.w) / max(abs(derivatives[0].y), abs(derivatives[1].y));\n    float arrow_border_distance = arrow_distance(\n        arrow_parameters,\n        texcoord,\n        v_vec4_arrow_width_length_border_outer.z,\n        derivatives,\n        line_border_distance,\n        line_fill_distance);\n    float border_factor = max(border_clipping, affine_step(0., 1., arrow_border_distance));\n    return distance_to_arrow_line_color(\n        arrow_distance(arrow_parameters, texcoord, 0., derivatives, line_fill_distance, line_fill_distance),\n        border_factor);\n}\nfloat line_start_distance(\n    const vec2 texcoord,\n    const float offset,\n    const mat2 derivatives,\n    const float line_distance)\n{\n    float tail_hide_part = v_vec2_line_type_arrow_tail.y;\n    float d0 = (-texcoord.x - offset) / max(abs(derivatives[0].x), abs(derivatives[1].x));\n    float dh = (texcoord.x - tail_hide_part) / max(abs(derivatives[0].x), abs(derivatives[1].x));\n    return max(d0, max(line_distance, dh));\n}\nvec4 line_color(const float line_fill_distance, const float line_border_distance)\n{\n    float type = v_vec2_line_type_arrow_tail.x;\n    float fill_distance = line_fill_distance;\n    float border_distance = line_border_distance;\n    if (lookalike(type, g_type_start_border))\n    {\n        vec2 texcoord = v_vec4_texcoord_arrow_line.xy;\n        mat2 derivatives = mat2(dFdx(texcoord), dFdy(texcoord));\n        fill_distance = line_start_distance(texcoord, 0., derivatives, line_fill_distance);\n        border_distance = line_start_distance(texcoord, v_vec4_arrow_width_length_border_outer.z, derivatives, line_border_distance);\n    }\n    return distance_to_arrow_line_color(fill_distance, border_distance);\n}\nvec4 arrow_line_color()\n{\n    if (lookalike(min(v_vec4_distance_vertex_hiding.y, 1.), 1.)\n        || lookalike(v_vec4_distance_vertex_hiding.w, 1.)\n        || !lookalike(v_vec2_line_type_arrow_tail.x, g_type_arrow) && (v_vec4_distance_vertex_hiding.x < v_vec4_distance_vertex_hiding.y || v_vec4_distance_vertex_hiding.x > v_vec4_distance_vertex_hiding.z))\n    {\n        discard;\n    }\n    ArrowDistanceParameters arrow_parameters = calculate_arrow_distance_parameters(\n        u_vec2_wing_normal,\n        u_vec2_tip_normal,\n        v_vec4_arrow_width_length_border_outer.x,\n        v_vec4_arrow_width_length_border_outer.y,\n        u_float_tip_height_multiplier,\n        u_float_wing_height_multiplier);\n    float line_width = arrow_parameters.width;\n    float line_border = v_vec4_arrow_width_length_border_outer.z;\n    \n    vec2 line_texcoord = v_vec4_texcoord_arrow_line.zw;\n    mat2 line_derivatives = mat2(dFdx(line_texcoord), dFdy(line_texcoord));\n    CircleDistance circle_fill_distance = circle_color_distance(line_derivatives, line_texcoord, line_width);\n    CircleDistance circle_border_distance = circle_color_distance(line_derivatives, line_texcoord, line_width + line_border);\n    float line_fill_distance = affine_step(-1., 0., circle_fill_distance.distance / circle_fill_distance.width) - 1.;\n    float line_border_distance = affine_step(0., circle_border_distance.width, circle_border_distance.distance);\n    return lookalike(v_vec2_line_type_arrow_tail.x, g_type_arrow)\n        ? arrow_color(v_vec4_texcoord_arrow_line.xy, arrow_parameters, line_fill_distance, line_border_distance)\n        : line_color(line_fill_distance, line_border_distance);\n}\nvoid main()\n{\n    gl_FragColor = arrow_line_color();\n}\n",arrow_line_identify:"\nvarying vec2 v_vec2_line_type_arrow_tail;\nvarying vec4 v_vec4_distance_vertex_hiding;\nvarying vec4 v_vec4_identifier;\nconst float g_type_arrow = 1.;\nbool lookalike(const float a, const float b)\n{\n    return abs(a - b) < 1e-5;\n}\nvoid main()\n{\n    if (lookalike(min(v_vec4_distance_vertex_hiding.y, 1.), 1.)\n        || lookalike(v_vec4_distance_vertex_hiding.w, 1.)\n        || !lookalike(v_vec2_line_type_arrow_tail.x, g_type_arrow) && (v_vec4_distance_vertex_hiding.x < v_vec4_distance_vertex_hiding.y || v_vec4_distance_vertex_hiding.x > v_vec4_distance_vertex_hiding.z))\n    {\n        discard;\n    }\n    gl_FragColor = v_vec4_identifier;\n}\n",circle_marker:"uniform vec4 u_vec4_color;\nvarying vec2 v_vec2_circle;\nvarying float v_float_width;\nvoid main() {\n    float center_distance = dot(v_vec2_circle, v_vec2_circle);\n    gl_FragColor = u_vec4_color * affine_step(1.0, 1.0 - 4.0 / v_float_width, center_distance);\n}\n",road:"uniform vec4 u_vec4_color;\nvarying vec2 v_vec2_normal;\nvarying float v_float_half_width;\nvoid main()\n{\n    \n    float opacity = 1.0 - affine_step(\n        v_float_half_width - length(fwidth(v_vec2_normal)),\n        v_float_half_width,\n        length(v_vec2_normal)\n    );\n    gl_FragColor = u_vec4_color * opacity;\n}\n",road_identify:"varying vec4 v_vec4_identifier;\nvarying vec2 v_vec2_normal;\nvarying float v_float_half_width;\nvoid main()\n{\n    if (dot(v_vec2_normal, v_vec2_normal) > v_float_half_width * v_float_half_width) {\n        discard;\n    }\n    gl_FragColor = v_vec4_identifier;\n}\n",rect:"uniform vec4 u_vec4_color;\nvoid main()\n{\n    gl_FragColor = u_vec4_color;\n}\n",rect_with_texture:"uniform sampler2D u_sr2d_texture;\nuniform float u_float_opacity;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    vec4 color = texture2D(u_sr2d_texture, v_vec2_texcoord);\n    gl_FragColor = apply_opacity(color, u_float_opacity);\n}\n",heatmap:"uniform highp float u_float_intensity;\nvarying float v_float_weight;\nvarying vec2 v_vec2_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n    float d = -0.5 * 3.0 * 3.0 * dot(v_vec2_extrude, v_vec2_extrude);\n    float val = v_float_weight * u_float_intensity * GAUSS_COEF * exp(d);\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n}\n",heatmap_texture:"uniform sampler2D u_sr2d_texture;\nuniform sampler2D u_sr2d_ramp_texture;\nuniform float u_float_opacity;\nvarying vec2 v_vec2_position;\nvoid main() {\n    float t = texture2D(u_sr2d_texture, v_vec2_position).r;\n    vec4 color = texture2D(u_sr2d_ramp_texture, vec2(t, 0.5));\n    gl_FragColor = color * u_float_opacity;\n}\n",dem_mesh:"\nuniform sampler2D u_flat_tex;\nuniform sampler2D u_hillshade_tex;\nuniform sampler2D u_tex_hillshade_ramp;\nuniform float u_float_dem_shade_intension;\nvarying vec3 v_vec3_texcoord;\nvarying vec2 hs_tex_pos;\nconst float M_PI = 3.1415926535897932384626433832795;\nconst float zenith = 45. * M_PI / 180.;\nconst float HILLSHADE_OFFSET = cos(zenith) - 0.5;\nvoid main()\n{\n    \n    if (v_vec3_texcoord.z == 0.) {\n        discard;\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    if (v_vec3_texcoord.x < 0. || v_vec3_texcoord.x > 1. || v_vec3_texcoord.y < 0. || v_vec3_texcoord.y > 1.) {\n        discard;\n    } else {\n        vec4 flatMapColor = texture2D(u_flat_tex, v_vec3_texcoord.xy);\n        \n        if (u_float_dem_shade_intension > 0.) {\n            float shade_raw = texture2D(u_hillshade_tex, hs_tex_pos).x;\n            float shade_value = texture2D(u_tex_hillshade_ramp, vec2(shade_raw, 0.5)).a;\n            float base = 1. - u_float_dem_shade_intension;\n            gl_FragColor.a = flatMapColor.a;\n            gl_FragColor.rgb = (flatMapColor.rgb * base) + (flatMapColor.rgb * 2. * u_float_dem_shade_intension * (shade_value - HILLSHADE_OFFSET));\n        } else {\n            gl_FragColor = flatMapColor;\n        }\n    }\n}\n",dem_ground:"varying vec4 v_vec4_coords;\nvoid main()\n{\n    gl_FragColor = v_vec4_coords;\n}\n",dem_elevation:"uniform sampler2D u_sr2d_texture;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n  vec4 color = texture2D(u_sr2d_texture, v_vec2_texcoord);\n  gl_FragColor = vec4(color.a, 0, 0, 1);\n}\n",dem_elevation_copy:"uniform sampler2D u_sr2d_texture;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n  gl_FragColor = texture2D(u_sr2d_texture, v_vec2_texcoord);\n}\n",dem_hillshade:"\nuniform sampler2D u_tex_dem;\nconst float DEM_INVALID_VALUE = -9999.;\nuniform float u_float_dem_resolution;\nuniform float u_float_dem_cell_size;\nuniform float u_float_dem_light_direction;\nuniform float u_float_dem_scale;\nconst float M_PI = 3.1415926535897932384626433832795;\nconst float zenith = 45. * M_PI / 180.;\nvarying vec2 v_vec2_texcoord;\nmat3 get_kernel(vec2 pos, float step, float defval) {\n    mat3 kernel;\n    for (int x = 0; x < 3; x++) {\n        vec3 col;\n        for (int y = 0; y < 3; y++) {\n            col[y] = texture2D(u_tex_dem, vec2(pos.x + float(x - 1) * step, pos.y + float(y - 1) * step)).r;\n            if (col[y] == DEM_INVALID_VALUE) {\n                col[y] = defval;\n            }\n        }\n        kernel[x] = col;\n    }\n    return kernel;\n}\nfloat calc_aspect(mat3 kernel) {\n    float dzdx = ((kernel[2].z + 2.0 * kernel[2].y + kernel[2].x) - (kernel[0].z + 2.0 * kernel[0].y + kernel[0].x)) / 8.;\n    float dzdy = ((kernel[0].x + 2.0 * kernel[1].x + kernel[2].x) - (kernel[0].z + 2.0 * kernel[1].z + kernel[2].z)) / 8.;\n    \n    if (dzdx == 0. && dzdy == 0.) {\n        return 0.;\n    }\n    return atan(-dzdx, dzdy);\n}\nfloat calc_slope(mat3 kernel, float cell_size) {\n    float dzdx = ((kernel[2].z + 2. * kernel[2].y + kernel[2].x) - (kernel[0].z + 2. * kernel[0].y + kernel[0].x)) / (8. * cell_size);\n    float dzdy = ((kernel[0].x + 2. * kernel[1].x + kernel[2].x) - (kernel[0].z + 2. * kernel[1].z + kernel[2].z)) / (8. * cell_size);\n    float rise_run = sqrt(dzdx * dzdx + dzdy * dzdy);\n    return atan(rise_run);\n}\nfloat dem_hillshade(const vec2 tex_pos)\n{\n    \n    float tex_step = 1. / u_float_dem_resolution;\n    \n    if (u_float_dem_scale == 0.) {\n        return 0.;\n    }\n    \n    vec4 e = texture2D(u_tex_dem, tex_pos);\n    if (e.a == 0. || e.r == DEM_INVALID_VALUE) {\n        \n        return 0.;\n    }\n    mat3 kernel = get_kernel(tex_pos.xy, tex_step, e.r);\n    float aspect = calc_aspect(kernel);\n    float slope = calc_slope(kernel, u_float_dem_cell_size);\n    float azimuth = u_float_dem_light_direction;\n    \n    \n    \n    return (cos(zenith) * cos(slope)) +\n             (sin(zenith) * sin(slope) * cos(azimuth - aspect));\n}\nvoid main() {\n    gl_FragColor = vec4(dem_hillshade(v_vec2_texcoord), 0, 0, 1);\n}\n",dem_flat_bottom:"varying vec4 v_vec4_color;\nvoid main()\n{\n    gl_FragColor = v_vec4_color;\n}\n",mesh:"uniform sampler2D u_sampler2d_texture;\nuniform float u_float_opacity;\nvarying vec4 v_vec4_color;\nvarying vec3 v_vec3_light_factor;\nvarying vec2 v_vec2_tex_coord;\nvoid main()\n{\n    \n    \n    if (v_vec2_tex_coord.x != -1.) {\n        vec4 color = texture2D(u_sampler2d_texture, v_vec2_tex_coord);\n        gl_FragColor = apply_opacity(vec4(color.rgb * v_vec3_light_factor, color.a), u_float_opacity);\n    } else {\n        gl_FragColor = v_vec4_color;\n    }\n}\n",textured_color:"uniform sampler2D u_sr2d_texture;\nuniform float u_float_texture_opacity;\nuniform vec4 u_float_texture_params;\nuniform vec4 u_float_sprite_texture_coords;\nuniform int u_int_is_textured;\nvarying vec4 v_vec4_color;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    if (u_int_is_textured == 0) {\n        gl_FragColor = v_vec4_color;\n        return;\n    }\n    vec2 texcoord = fract(v_vec2_texcoord * u_float_texture_params.zw + u_float_texture_params.xy);\n    vec2 spritecoord = mix(u_float_sprite_texture_coords.xy, u_float_sprite_texture_coords.zw, texcoord);\n    vec4 color = texture2D(u_sr2d_texture, spritecoord);\n    vec4 texcolor = apply_opacity(color, u_float_texture_opacity);\n    gl_FragColor = texcolor + v_vec4_color * (1. - texcolor.a);\n}\n"},Zr={prelude:"#ifdef WEBGL2\n#define varying out\n#define attribute in\n#define texture2D texture\n#endif\n",apply_height_factor:"vec4 apply_z_limitation(vec4 vertex, float tile_height, float height_limitation)\n{\n    \n    vertex.z = min(vertex.z, height_limitation / tile_height);\n    return vertex;\n}\nvec4 apply_height_factor(const vec3 vertex, const float height_factor)\n{\n    vec3 result_vertex = vertex;\n    result_vertex.z *= height_factor;\n    return vec4(result_vertex, 1.0);\n}\n",apply_opacity:Dr,color:"uniform vec4 u_vec4_color;\nuniform float u_float_opacity;\nattribute vec2 a_vec2_vertex;\nvarying vec4 v_vec4_color;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    v_vec4_color = apply_opacity(u_vec4_color, u_float_opacity);\n    gl_Position = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0);\n    \n    \n    \n    \n    \n    \n    v_vec2_texcoord = fract(abs((a_vec2_vertex - 0.25) * 2.));\n}\n",diffuse:"uniform vec3 u_vec3_light_direction;\nuniform vec3 u_vec3_light_color;\nuniform vec3 u_vec3_ambient_color;\nuniform vec4 u_vec4_color;\nuniform mat4 u_mat4_gradient;\nuniform float u_float_height_limitation;\nuniform float u_float_tile_height;\nuniform float u_float_height_factor;\nuniform float u_float_opacity;\nattribute vec3 a_vec3_vertex;\nattribute vec3 a_vec3_normal;\nattribute vec2 a_vec2_dem_position;\nvarying float v_float_height_gradient;\nvarying vec4 v_vec4_color;\nvarying mat4 v_mat4_gradient;\nconst float g_wall_offset_isometric = .001;\nconst float g_wall_offset_perspective = 8.;\nvoid main()\n{\n    float height = dem_height(unpack_dem_position(a_vec2_dem_position));\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        v_vec4_color = vec4(0, 0, 0, 0);\n        return;\n    }\n    \n    \n    vec3 v_vec3_ambient_light = (u_vec3_ambient_color + u_vec3_light_color * abs(dot(u_vec3_light_direction, normalize_s08(a_vec3_normal))));\n    \n    v_vec4_color = apply_opacity(\n        vec4(\n            u_vec4_color.rgb * v_vec3_ambient_light,\n            u_vec4_color.a),\n        u_float_opacity);\n    \n    if (u_mat4_gradient[0][2] !=0.)\n    {\n        \n        if (a_vec3_vertex.z > 0.0)\n        {\n            v_float_height_gradient = 1.;\n        } else {\n            v_float_height_gradient = 0.;\n        }\n        v_mat4_gradient = mat4(u_mat4_gradient);\n        v_mat4_gradient[1] = apply_opacity(\n            vec4(\n                u_mat4_gradient[1].rgb * v_vec3_ambient_light,\n                u_mat4_gradient[1].a),\n            u_float_opacity);    \n        v_mat4_gradient[2] = apply_opacity(\n            vec4(\n                u_mat4_gradient[2].rgb * v_vec3_ambient_light,\n                u_mat4_gradient[2].a),\n            u_float_opacity);\n    }\n    vec4 vertex_hf = apply_height_factor(a_vec3_vertex, u_float_height_factor);\n    vertex_hf.z += height;\n    vertex_hf = apply_z_limitation(vertex_hf, u_float_tile_height, u_float_height_limitation);\n    \n    vertex_hf.z = max(vertex_hf.z, height);\n    gl_Position = u_mat4_mvp * vertex_hf;\n    \n    \n    \n    if (normalize_s08(a_vec3_normal).z < .5)\n    {\n        \n        if ((u_mat4_mvp[0][3] == 0.) && (u_mat4_mvp[1][3] == 0.) && (u_mat4_mvp[2][3] == 0.))\n        {\n            gl_Position.z += g_wall_offset_isometric;\n        }\n        else\n        {\n            \n            \n            \n            if (height == 0.) {\n                gl_Position.z += g_wall_offset_perspective;\n            } else {\n                gl_Position.z += g_wall_offset_isometric;\n            }\n        }\n    }\n}\n",line:"uniform vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_light_direction;\nuniform vec3 u_vec3_light_color;\nuniform vec3 u_vec3_ambient_color;\nuniform vec4 u_vec4_color;\nuniform float u_float_height_limitation;\nuniform float u_float_tile_height;\nuniform float u_float_height_factor;\nuniform float u_float_opacity;\nuniform mat4 u_mat4_gradient;\nattribute vec4 a_vec4_vertex;\nattribute vec2 a_vec2_normal;\nattribute vec2 a_vec2_normal_delta;\nattribute vec3 a_vec3_direction;\nattribute float a_float_distance;\nattribute vec2 a_vec2_dem_position;\nvarying vec4 v_vec4_color;\nvarying float v_float_distance;\nvarying float v_float_height_gradient;\nconst float g_shift_pixels = 1.;\nconst float g_min_denominator = 1e-4;\nconst float g_w_factor = 1e-6;\nvec2 multiply_complex(vec2 lhs, vec2 rhs)\n{\n    return vec2(lhs.x * rhs.x - lhs.y * rhs.y, lhs.x * rhs.y + lhs.y * rhs.x);\n}\nvoid main()\n{\n    float height = dem_height(unpack_dem_position(a_vec2_dem_position));\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    vec2 half_viewport = u_vec2_vpt_size / vec2(2.);\n    \n    if (a_vec4_vertex.z > 0.0)\n    {\n        v_float_height_gradient = 1.;\n    } else {\n        v_float_height_gradient = 0.;\n    }\n    \n    vec4 clip_space_direction = u_mat4_mvp * vec4(normalize_s08(vec3(a_vec3_direction.xy, a_vec3_direction.z + height)), 0.);\n    vec4 vertex_hf = apply_height_factor(a_vec4_vertex.xyz, u_float_height_factor);\n    vertex_hf.z += height;\n    vertex_hf = apply_z_limitation(vertex_hf, u_float_tile_height, u_float_height_limitation);\n    \n    vertex_hf.z = max(vertex_hf.z, height);\n    vec4 clip_space_vertex = u_mat4_mvp * vertex_hf;\n    vec2 screen_space_direction = (clip_space_direction.xy * clip_space_vertex.w - clip_space_vertex.xy * clip_space_direction.w) * half_viewport;\n    vec2 screen_space_perp = vec2(-screen_space_direction.y, screen_space_direction.x);\n    float denominator = max(g_min_denominator, length(screen_space_perp));\n    vec2 bevel_normal = normalize_s08(a_vec2_normal);\n    vec2 normal_delta = normalize_s08(a_vec2_normal_delta);\n    vec4 clip_space_bevel_normal = u_mat4_mvp * vec4(bevel_normal, 0., 0.);\n    vec2 screen_space_bevel_normal = (clip_space_bevel_normal.xy * clip_space_vertex.w - clip_space_vertex.xy * clip_space_bevel_normal.w) * half_viewport;\n    float bevel_denominator = max(g_min_denominator, length(screen_space_bevel_normal));\n    \n    float normal_factor = -dot(screen_space_bevel_normal, screen_space_perp) / denominator / bevel_denominator;\n    vec2 wall_normal = multiply_complex(bevel_normal, vec2(normal_delta.x, sign(normal_factor) * normal_delta.y));\n    float bevel_diffuse = abs(dot(u_vec3_light_direction.xy, bevel_normal));\n    float wall_diffuse = abs(dot(u_vec3_light_direction.xy, wall_normal));\n    float diffuse = mix(bevel_diffuse, wall_diffuse, abs(normal_factor));\n    gl_Position = g_w_factor * (clip_space_vertex + vec4(screen_space_perp / half_viewport, 0., 0.) * g_shift_pixels * a_float_distance / denominator * clip_space_vertex.w);\n    v_vec4_color = vec4(u_vec4_color.rgb * (u_vec3_ambient_color + u_vec3_light_color * diffuse), u_vec4_color.a);\n    v_float_distance = a_float_distance * gl_Position.w;\n}\n",packed_attributes:"\nvec2 normalize_s08(vec2 value)\n{\n    return value * (1. / 127.);\n}\nvec3 normalize_s08(vec3 value)\n{\n    return value * (1. / 127.);\n}\nfloat normalize_s16(float value)\n{\n    return value * (1. / 32767.);\n}\nvec2 normalize_s16(vec2 value)\n{\n    return value * (1. / 32767.);\n}\nvec3 normalize_s16(vec3 value)\n{\n    return value * (1. / 32767.);\n}\nvec2 unpack_widen(vec2 widen_packed)\n{\n    \n    return normalize_s08(widen_packed) * sqrt(2.);\n}\nvec2 unpack_texcoord(vec2 texcoord)\n{\n    return texcoord * (1. / 32768.);\n}\nvec2 unpack_model_texcoord(vec2 texcoord)\n{\n    const float min_value = -3.0;\n    const float max_value = 5.0;\n    return texcoord * (max_value - min_value) / 65536.0 + min_value;\n}\n",pixel_offset:"\nconst float g_min_denominator = 1e-7;\nconst float g_max_factor = 10000.;\nfloat calculate_multiplication_factor(\n    vec2 half_viewport,\n    \n    vec4 clip_space_widen,\n    vec4 clip_space_widen_perp,\n    \n    vec4 clip_space_vertex,\n    float shift_pixels)\n{\n    float limited_factor = 0.;\n    {\n        \n        vec2 screen_space_widen = (clip_space_widen.xy * clip_space_vertex.w - clip_space_vertex.xy * clip_space_widen.w) * half_viewport;\n        vec2 screen_space_widen_perp = (clip_space_widen_perp.xy * clip_space_vertex.w - clip_space_vertex.xy * clip_space_widen_perp.w) * half_viewport;\n        \n        vec2 perp = vec2(screen_space_widen_perp.y, -screen_space_widen_perp.x);\n        \n        float perp_length = length(perp);\n        vec4 v = clip_space_vertex;\n        vec4 n = clip_space_widen;\n        float denominator = dot(perp, screen_space_widen) / shift_pixels - n.w * v.w * perp_length;\n        if (abs(denominator) > g_min_denominator)\n        {\n            float factor = v.w * v.w * perp_length / denominator;\n            limited_factor = sign(factor) * min(g_max_factor, abs(factor));\n        }\n    }\n    return limited_factor;\n}\n",pointsprite:"uniform vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_projection_scale_style_scale_dpi;\nuniform float u_float_height_factor;\nuniform float u_float_rounding_factor;\nuniform vec2 u_vec2_rotation; \nuniform bool u_bool_skip_height_factor;\nattribute vec3 a_vec3_position;\nattribute vec2 a_vec2_offset;\nattribute vec2 a_vec2_texcoord;\nattribute vec2 a_vec2_range;\nattribute vec2 a_vec2_rescale;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    float height = dem_height(a_vec3_position.xy);\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    mat2 rotation_matrix = mat2(\n        u_vec2_rotation.x, -u_vec2_rotation.y,\n        u_vec2_rotation.y, u_vec2_rotation.x\n    );\n    vec2 inv_half_size = 2.0 / u_vec2_vpt_size;\n    vec4 anchor;\n    \n    \n    \n    if (u_bool_skip_height_factor == true) {\n        anchor = vec4(a_vec3_position, 1.0);\n    } else {\n        anchor = apply_height_factor(a_vec3_position, u_float_height_factor);\n    }\n    anchor.z += height;\n    anchor = u_mat4_mvp * anchor;\n    vec2 offset = rescale(rotation_matrix * a_vec2_offset, a_vec2_rescale, a_vec2_range, u_vec3_projection_scale_style_scale_dpi.y);\n    vec2 pos_2d = anchor.xy + overlay_transform(offset, inv_half_size) * anchor.w;\n    vec2 corner = make_position(pos_2d, anchor.w, inv_half_size, u_float_rounding_factor);\n    gl_Position = vec4(corner, anchor.z, clipw(anchor.w, a_vec2_range, u_vec3_projection_scale_style_scale_dpi.y));\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n}\n",precision_constants:"\nconst float g_circle_scale_precision_factor = 1e8;\n",striped_line:"uniform vec4 u_vec4_dash_color;\nuniform vec4 u_vec4_space_color;\nuniform vec4 u_vec4_border_color;\nuniform mediump vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_projection_scale_style_scale_dpi;\nuniform float u_float_width;\nuniform float u_float_width_offset;\nuniform vec2 u_vec2_scaler_params;\nuniform float u_float_dash_length;\nuniform float u_float_space_length;\nuniform float u_float_dash2_length;\nuniform float u_float_opacity;\nattribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_texture_widen;\nattribute vec2 a_vec2_widen;\nattribute float a_float_vertex_distance;\nattribute float a_float_component_distance;\nattribute float a_float_object_length;\nvarying vec4 v_vec4_dash_color;\nvarying vec4 v_vec4_space_color;\nvarying vec4 v_vec4_border_color;\nvarying vec2 v_vec2_circle;\nvarying float v_float_width;\nvarying float v_float_part_color_swap_threshold;\nvarying float v_float_distance_in_parts;\nconst float g_shift_pixels = 2.;\nconst float g_w_factor = 1e-7;\nPolylineDistance decode_line_distance()\n{\n    return PolylineDistance(\n        a_float_vertex_distance,\n        a_float_component_distance,\n        a_float_object_length);\n}\nStripedLineInParams decode_line_params(const Scale scale)\n{\n    float width = calculate_final_width(scale, u_float_width, u_float_width_offset);\n    float dash_length  = scale.calculation * u_float_dash_length;\n    float space_length = scale.calculation * u_float_space_length;\n    float dash2_length = scale.calculation * u_float_dash2_length;\n    return StripedLineInParams(\n        dash_length,\n        space_length,\n        dash2_length,\n        width);\n}\nvoid main()\n{\n    Scale scale = calculate_scale(u_vec3_projection_scale_style_scale_dpi, u_vec2_scaler_params);\n    StripedLineInParams params = decode_line_params(scale);\n    vec2 widen = unpack_widen(a_vec2_widen);\n    vec2 widen_perp = vec2(-widen.y, widen.x);\n    \n    vec4 clip_space_widen = u_mat4_mvp * vec4(widen, 0., 0.);\n    vec4 clip_space_widen_perp = u_mat4_mvp * vec4(widen_perp, 0., 0.);\n    \n    vec4 clip_space_vertex = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0) + clip_space_widen * params.line_width;\n    vec2 half_viewport = 0.5 * u_vec2_vpt_size;\n    \n    float limited_factor = calculate_multiplication_factor(\n        half_viewport,\n        clip_space_widen,\n        clip_space_widen_perp,\n        clip_space_vertex,\n        g_shift_pixels);\n    PolylineDistance distance_decoded = decode_line_distance();\n    StripedLineOutParams output_params;\n    calculate_line_params(distance_decoded, params, output_params);\n    \n    \n    vec2 texture_widen_with_shift_sign = unpack_widen(a_vec2_texture_widen);\n    float shift_sign = sign(dot(widen, texture_widen_with_shift_sign));\n    vec2 texture_widen = shift_sign * texture_widen_with_shift_sign;\n    vec2 texture_widen_perp = vec2(-texture_widen.y, texture_widen.x);\n    float distance_shift = shift_sign * abs(dot(widen, texture_widen_perp)) * params.line_width;\n    float circle_factor = g_circle_scale_precision_factor / scale.calculation;\n    v_vec2_circle = texture_widen * (params.line_width + limited_factor) * circle_factor;\n    v_float_width = params.line_width * circle_factor;\n    v_float_part_color_swap_threshold = output_params.part_color_swap_threshold;\n    v_float_distance_in_parts = output_params.distance_in_parts;\n    v_vec4_dash_color = apply_opacity(u_vec4_dash_color, u_float_opacity);\n    v_vec4_space_color = apply_opacity(u_vec4_space_color, u_float_opacity);\n    v_vec4_border_color = apply_opacity(u_vec4_border_color, u_float_opacity);\n    gl_Position = (clip_space_vertex + clip_space_widen * limited_factor) * g_w_factor;\n}\n",striped_line_identify:"uniform vec4 u_vec4_dash_color;\nuniform vec4 u_vec4_space_color;\nuniform vec4 u_vec4_border_color;\nuniform mediump vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_projection_scale_style_scale_dpi;\nuniform float u_float_width;\nuniform float u_float_width_offset;\nuniform vec2 u_vec2_scaler_params;\nuniform float u_float_dash_length;\nuniform float u_float_space_length;\nuniform float u_float_dash2_length;\nuniform float u_float_opacity;\nattribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_texture_widen;\nattribute vec2 a_vec2_widen;\nattribute float a_float_vertex_distance;\nattribute float a_float_component_distance;\nattribute float a_float_object_length;\nattribute vec4 a_vec4_identifier;\nvarying vec4 v_vec4_identifier;\nvarying vec4 v_vec4_dash_color;\nvarying vec4 v_vec4_space_color;\nvarying vec4 v_vec4_border_color;\nvarying vec2 v_vec2_circle;\nvarying float v_float_width;\nvarying float v_float_part_color_swap_threshold;\nvarying float v_float_distance_in_parts;\nconst float g_shift_pixels = 2.;\nconst float g_w_factor = 1e-7;\nPolylineDistance decode_line_distance()\n{\n    return PolylineDistance(\n        a_float_vertex_distance,\n        a_float_component_distance,\n        a_float_object_length);\n}\nStripedLineInParams decode_line_params(const Scale scale)\n{\n    float width = calculate_final_width(scale, u_float_width, u_float_width_offset);\n    float dash_length  = scale.calculation * u_float_dash_length;\n    float space_length = scale.calculation * u_float_space_length;\n    float dash2_length = scale.calculation * u_float_dash2_length;\n    return StripedLineInParams(\n        dash_length,\n        space_length,\n        dash2_length,\n        width);\n}\nvoid main()\n{\n    Scale scale = calculate_scale(u_vec3_projection_scale_style_scale_dpi, u_vec2_scaler_params);\n    StripedLineInParams params = decode_line_params(scale);\n    vec2 widen = unpack_widen(a_vec2_widen);\n    vec2 widen_perp = vec2(-widen.y, widen.x);\n    \n    vec4 clip_space_widen = u_mat4_mvp * vec4(widen, 0., 0.);\n    vec4 clip_space_widen_perp = u_mat4_mvp * vec4(widen_perp, 0., 0.);\n    \n    vec4 clip_space_vertex = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0) + clip_space_widen * params.line_width;\n    vec2 half_viewport = 0.5 * u_vec2_vpt_size;\n    \n    float limited_factor = calculate_multiplication_factor(\n        half_viewport,\n        clip_space_widen,\n        clip_space_widen_perp,\n        clip_space_vertex,\n        g_shift_pixels);\n    PolylineDistance distance_decoded = decode_line_distance();\n    StripedLineOutParams output_params;\n    calculate_line_params(distance_decoded, params, output_params);\n    \n    \n    vec2 texture_widen_with_shift_sign = unpack_widen(a_vec2_texture_widen);\n    float shift_sign = sign(dot(widen, texture_widen_with_shift_sign));\n    vec2 texture_widen = shift_sign * texture_widen_with_shift_sign;\n    vec2 texture_widen_perp = vec2(-texture_widen.y, texture_widen.x);\n    float distance_shift = shift_sign * abs(dot(widen, texture_widen_perp)) * params.line_width;\n    float circle_factor = g_circle_scale_precision_factor / scale.calculation;\n    v_vec2_circle = texture_widen * (params.line_width + limited_factor) * circle_factor;\n    v_float_width = params.line_width * circle_factor;\n    v_float_part_color_swap_threshold = output_params.part_color_swap_threshold;\n    v_float_distance_in_parts = output_params.distance_in_parts;\n    v_vec4_dash_color = apply_opacity(u_vec4_dash_color, u_float_opacity);\n    v_vec4_space_color = apply_opacity(u_vec4_space_color, u_float_opacity);\n    v_vec4_border_color = apply_opacity(u_vec4_border_color, u_float_opacity);\n    v_vec4_identifier = a_vec4_identifier;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        gl_Position = (clip_space_vertex + clip_space_widen * limited_factor) * g_w_factor;\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n}\n",striped_line_functions:"struct PolylineDistance\n{\n    \n    float vertex_distance_from_start;\n    \n    float segment_distance_from_start;\n    \n    float total_length;\n};\nstruct StripedLineInParams\n{\n    float dash_length;\n    float space_length;\n    float dash2_length;\n    float line_width;\n};\nstruct StripedLineOutParams\n{\n    \n    float part_color_swap_threshold;\n    float distance_in_parts;\n};\nvoid calculate_line_params(in PolylineDistance polyline_distance, in StripedLineInParams striped_line_params, out StripedLineOutParams line_params)\n{\n    \n    float requested_part_length =\n        striped_line_params.dash_length\n        + striped_line_params.space_length;\n    \n    float space2_length = requested_part_length - striped_line_params.dash2_length;\n    \n    float min_part_length =\n        requested_part_length\n        - 0.5 * min(striped_line_params.space_length, space2_length);\n    \n    float part_count = max(\n        floor(polyline_distance.total_length / requested_part_length + 0.5),\n        1.0);\n    \n    float part_length = polyline_distance.total_length / part_count;\n    \n    float dash_length = (part_length / requested_part_length) * striped_line_params.dash2_length;\n    float part_color_swap_threshold;\n    if (polyline_distance.total_length < min_part_length)\n    {\n        \n        dash_length = part_length;\n        part_color_swap_threshold = 1.0;\n    }\n    else\n    {\n        \n        part_color_swap_threshold = dash_length / part_length;\n    }\n    \n    \n    float segment_start = fract((polyline_distance.segment_distance_from_start + 0.5 * dash_length) / part_length);\n    float vertex_normalized_distance = segment_start + polyline_distance.vertex_distance_from_start / part_length;\n    line_params = StripedLineOutParams(\n        part_color_swap_threshold,\n        vertex_normalized_distance);\n}\n",label_fixed_anchor:"attribute vec4 a_vec4_position;\nattribute vec2 a_vec2_offset;\nattribute vec2 a_vec2_texcoord;\nuniform vec2 u_vec2_offset;\nuniform vec2 u_vec2_vpt_size;\nuniform float u_float_scale;\nuniform float u_float_height_factor;\nvarying vec2 v_vec2_texcoord;\nvoid main() {\n    float height = dem_height(a_vec4_position.xy);\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    vec4 ndcPosition = apply_height_factor(a_vec4_position.xyz, u_float_height_factor);\n    ndcPosition.z += height;\n    ndcPosition = u_mat4_mvp * ndcPosition;\n    ndcPosition.xyz = ndcPosition.xyz / ndcPosition.w;\n    ndcPosition.w = 1.0;\n    ndcPosition.xy += (a_vec2_offset * u_float_scale + u_vec2_offset) / u_vec2_vpt_size * 2.0;\n    gl_Position = ndcPosition;\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n}\n",label_fixed_anchor_identify:"attribute vec4 a_vec4_position;\nattribute vec2 a_vec2_offset;\nattribute vec4 a_vec4_identifier;\nuniform vec2 u_vec2_offset;\nuniform vec2 u_vec2_vpt_size;\nuniform float u_float_scale;\nvarying vec4 v_vec4_identifier;\nvoid main() {\n    float height = dem_height(a_vec4_position.xy);\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    v_vec4_identifier = a_vec4_identifier;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        vec4 ndcPosition = u_mat4_mvp * vec4(a_vec4_position.xy, a_vec4_position.z + height, a_vec4_position.w);\n        ndcPosition.xyz = ndcPosition.xyz / ndcPosition.w;\n        ndcPosition.w = 1.0;\n        ndcPosition.xy += (a_vec2_offset * u_float_scale + u_vec2_offset) / u_vec2_vpt_size * 2.0;\n        gl_Position = ndcPosition;\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n}\n",label_directional:"attribute vec4 a_vec4_position;\nattribute vec2 a_vec2_offset;\nattribute vec2 a_vec2_texcoord;\nattribute vec2 a_vec2_style_zoom_limits;\nuniform float u_float_style_zoom;\nuniform float u_float_scale;\nuniform float u_float_tile_to_pixel_ratio;\nvarying vec2 v_vec2_texcoord;\nfloat clipw(const float w, const vec2 range, const float zoom) {\n    return w * (step(range.x, zoom) - step(range.y, zoom));\n}\nvoid main() {\n    vec4 newPosition = a_vec4_position;\n    newPosition.xy += a_vec2_offset * u_float_scale * u_float_tile_to_pixel_ratio;\n    newPosition = u_mat4_mvp * newPosition;\n    gl_Position = vec4(newPosition.xyz, clipw(newPosition.w, a_vec2_style_zoom_limits, u_float_style_zoom));\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n}\n",one_way_line:"uniform vec4 u_vec4_color;\nuniform vec4 u_vec4_border_color;\nuniform mediump vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_projection_scale_style_scale_dpi;\nuniform vec2 u_vec2_scale_limits;\nuniform float u_float_border_width;\nuniform float u_float_border_width_offset;\nuniform float u_float_size_factor;\nuniform mediump float u_float_width;\nuniform mediump float u_float_length;\nuniform float u_float_wing_width_multiplier;\nuniform float u_float_opacity;\nattribute vec2 a_vec2_position;\nattribute vec2 a_vec2_direction;\nattribute vec2 a_vec2_widen_direction;\nvarying vec4 v_vec4_color;\nvarying vec4 v_vec4_border_color;\nvarying vec2 v_vec2_texcoord;\nvarying float v_float_border_width;\nvarying float v_float_zpt_to_texcoord_factor;\nvarying float v_float_outer_width;\nvarying float v_float_opacity;\nconst float g_shift_pixels = 2.;\nconst float g_w_factor = 1e-7;\nvoid main()\n{\n    float style_scale_clamped = clamp(u_vec3_projection_scale_style_scale_dpi.y, u_vec2_scale_limits.x, u_vec2_scale_limits.y);\n    float scale_ratio = u_vec3_projection_scale_style_scale_dpi.x / u_vec3_projection_scale_style_scale_dpi.y;\n    float calculation_scale = style_scale_clamped * scale_ratio;\n    ArrowParameters arrow_parameters = calculate_arrow_parameters(\n        calculation_scale,\n        u_float_width,\n        u_float_border_width,\n        u_float_length,\n        u_float_wing_width_multiplier,\n        u_float_size_factor);\n    v_float_zpt_to_texcoord_factor = arrow_parameters.zpt_to_texcoord_factor;\n    v_float_outer_width = arrow_parameters.outer_width;\n    vec2 direction = normalize_s08(a_vec2_direction);\n    vec2 untransformed_widen = a_vec2_widen_direction * arrow_parameters.widen_size;\n    vec2 widen = multiply_complex(untransformed_widen * arrow_parameters.final_size, direction);\n    \n    float shift_pixels = g_shift_pixels * sqrt(2.) / min(abs(untransformed_widen.x), abs(untransformed_widen.y));\n    VertexShiftParameters shift_parameters = calculate_vertex_shift_parameters(\n        u_mat4_mvp,\n        u_vec2_vpt_size,\n        a_vec2_position,\n        widen,\n        shift_pixels);\n    \n    \n    gl_Position = shift_parameters.clip_space_vertex / arrow_parameters.final_size * g_w_factor;\n    v_vec2_texcoord = untransformed_widen * (1. + shift_parameters.limited_factor);\n    \n    float border_width = u_float_border_width * v_float_zpt_to_texcoord_factor;\n    float border_width_offset = u_float_border_width_offset * v_float_zpt_to_texcoord_factor;\n    v_float_border_width = max(0., border_width - u_vec3_projection_scale_style_scale_dpi.y / style_scale_clamped * border_width_offset);\n    v_vec4_color = apply_opacity(u_vec4_color, u_float_opacity);\n    v_vec4_border_color = apply_opacity(u_vec4_border_color, u_float_opacity);\n    v_float_opacity = u_float_opacity;\n}\n",round_position:"\nvec4 round_position(const vec4 position, const vec2 half_viewport)\n{\n    if (\n        position.w < 0.\n        || position.x < -position.w\n        || position.x > position.w\n        || position.y < -position.w\n        || position.y > position.w\n        || position.z < -position.w\n        || position.z > position.w)\n    {\n        return position;\n    }\n    else\n    {\n        \n        return vec4(\n            sign(position.xy) * floor(abs(position.xy) * half_viewport / position.w + .5)\n                * position.w / half_viewport,\n            position.zw);\n    }\n}\n",color_identify:"uniform vec2 u_vec2_vpt_size;\nattribute vec2 a_vec2_vertex;\nattribute vec4 a_vec4_identifier;\nvarying vec4 v_vec4_identifier;\nvoid main()\n{\n    v_vec4_identifier = a_vec4_identifier;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        gl_Position = round_position(u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.), .5 * u_vec2_vpt_size);\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n}\n",zbm_model_identify:"uniform vec2 u_vec2_vpt_size;\nattribute vec3 a_vec3_vertex;\nattribute vec4 a_vec4_identifier;\nattribute vec2 a_vec2_dem_position;\nvarying vec4 v_vec4_identifier;\nvoid main()\n{\n    float height = dem_height(unpack_dem_position(a_vec2_dem_position));\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    v_vec4_identifier = a_vec4_identifier;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        gl_Position = round_position(u_mat4_mvp * vec4(a_vec3_vertex.xy, a_vec3_vertex.z + height, 1.), .5 * u_vec2_vpt_size);\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n}\n",pointsprite_identify:"uniform vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_projection_scale_style_scale_dpi;\nuniform float u_float_height_factor;\nuniform vec2 u_vec2_rotation; \nuniform bool u_bool_skip_height_factor;\nattribute vec3 a_vec3_position;\nattribute vec2 a_vec2_offset;\nattribute vec2 a_vec2_texcoord;\nattribute vec2 a_vec2_range;\nattribute vec2 a_vec2_rescale;\nattribute vec4 a_vec4_identifier;\nvarying vec2 v_vec2_texcoord;\nvarying vec4 v_vec4_identifier;\nvoid main()\n{\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        float height = dem_height(a_vec3_position.xy);\n        \n        if (height == DEM_INVALID_VALUE) {\n            gl_Position = vec4(0, 0, 0, 0);\n            return;\n        }\n        mat2 rotation_matrix = mat2(\n            u_vec2_rotation.x, -u_vec2_rotation.y,\n            u_vec2_rotation.y, u_vec2_rotation.x\n        );\n        vec2 inv_half_size = 2.0 / u_vec2_vpt_size;\n        vec4 anchor;\n        \n        \n        \n        if (u_bool_skip_height_factor == true) {\n            anchor = vec4(a_vec3_position, 1.0);\n        } else {\n            anchor = apply_height_factor(a_vec3_position, u_float_height_factor);\n        }\n        anchor.z += height;\n        anchor = u_mat4_mvp * anchor;\n        vec2 offset = rescale(rotation_matrix * a_vec2_offset, a_vec2_rescale, a_vec2_range, u_vec3_projection_scale_style_scale_dpi.y);\n        vec2 pos_2d = anchor.xy + overlay_transform(offset, inv_half_size) * anchor.w;\n        vec2 corner = make_position(pos_2d, anchor.w, inv_half_size, 1.0);\n        gl_Position = vec4(corner, anchor.z, clipw(anchor.w, a_vec2_range, u_vec3_projection_scale_style_scale_dpi.y));\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n    v_vec4_identifier = a_vec4_identifier;\n}\n",zbm_model:"uniform float u_float_height_factor;\nattribute vec3 a_vec3_vertex;\nattribute vec2 a_vec2_texcoord;\nattribute vec2 a_vec2_dem_position;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    float height = dem_height(unpack_dem_position(a_vec2_dem_position));\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    v_vec2_texcoord = unpack_model_texcoord(a_vec2_texcoord);\n    vec4 vh = apply_height_factor(a_vec3_vertex, u_float_height_factor);\n    vh.z += height;\n    gl_Position = u_mat4_mvp * vh;\n}\n",gltf_model:"uniform mat4 u_mat4_instance;\nattribute vec3 position;\nattribute vec2 texcoord_0;\nattribute vec2 normal;\nattribute vec2 tangent;\nattribute vec3 a_vec3_instance_position;\nattribute vec3 a_vec3_instance_offset;\nattribute vec3 a_vec3_instance_scale;\nattribute vec4 a_vec4_instance_rotation;\nattribute vec4 a_vec4_instance_localid;\nvarying vec2 v_vec2_texcoord0;\nvarying vec4 v_vec4_identifier;\nvec3 rotate(vec4 q, vec3 v) {\n    return v + cross(2.0 * q.xyz, cross(q.xyz, v) + q.w * v);\n}\nvoid main()\n{\n    float height = dem_height(a_vec3_instance_position.xy);\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    v_vec2_texcoord0 = texcoord_0;\n    v_vec4_identifier = a_vec4_instance_localid;\n    vec4 vh = vec4(a_vec3_instance_position, 1.);\n    vh.z += height;\n    vec4 vertex = vec4(rotate(a_vec4_instance_rotation, position) * a_vec3_instance_scale + a_vec3_instance_offset, 1.);\n    vertex = u_mat4_instance * vertex;\n    vh.xyz += vertex.xyz;\n    gl_Position = u_mat4_mvp * vh;\n}\n",simple_line:"uniform vec2 u_vec2_vpt_size;\nuniform float u_float_width;\nuniform float u_float_height_factor;\nuniform float u_float_height_limitation;\nuniform float u_float_tile_height;\nuniform float u_float_z_offset;\nattribute vec3 a_vec3_vertex;\nattribute vec4 a_vec4_direction_distance;\nattribute vec2 a_vec2_dem_position;\nvarying float v_float_distance;\nvarying float v_float_distance_offset;\nconst float g_smooth_width = 1.;\nconst float g_min_denominator = 1e-4;\nconst float g_w_factor = 1e-6;\nvoid main()\n{\n    float height = dem_height(unpack_dem_position(a_vec2_dem_position));\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    float shift_pixels = 0.5 * max(u_float_width - 1., 0.);\n    float shift_pixels_added = shift_pixels + g_smooth_width;\n    vec3 direction = a_vec4_direction_distance.xyz;\n    float distance = a_vec4_direction_distance.w;\n    vec2 half_viewport = u_vec2_vpt_size / vec2(2.);\n    \n    \n    vec4 clip_space_direction = normalize(u_mat4_mvp * vec4(normalize_s08(direction), 0.));\n    vec4 clip_space_vertex = apply_height_factor(a_vec3_vertex, u_float_height_factor);\n    clip_space_vertex.z += height;\n    clip_space_vertex = apply_z_limitation(\n        clip_space_vertex,\n        u_float_tile_height, u_float_height_limitation\n    );\n    \n    clip_space_vertex.z = max(clip_space_vertex.z, height);\n    clip_space_vertex = u_mat4_mvp * clip_space_vertex;\n    vec2 screen_space_direction =\n        (clip_space_direction.xy * clip_space_vertex.w - clip_space_vertex.xy * clip_space_direction.w) * half_viewport;\n    vec2 screen_space_perp = vec2(-screen_space_direction.y, screen_space_direction.x);\n    float denominator = max(g_min_denominator, length(screen_space_perp));\n    gl_Position = g_w_factor * (clip_space_vertex + vec4(screen_space_perp / half_viewport, 0., 0.)\n        * distance * shift_pixels_added / denominator * clip_space_vertex.w);\n    gl_Position.z += u_float_z_offset;\n    v_float_distance = shift_pixels_added * distance * gl_Position.w;\n    v_float_distance_offset = shift_pixels;\n}\n",arrow_line_entrance:"uniform vec4 u_vec4_color;\nuniform vec4 u_vec4_border_color;\nuniform mediump vec2 u_vec2_vpt_size;\nuniform vec3 u_vec3_projection_scale_style_scale_dpi;\nuniform vec2 u_vec2_scale_limits;\nuniform float u_float_width_zpt;\nuniform float u_float_wing_width_multiplier;\nuniform float u_float_border_width_zpt;\nuniform float u_float_size_factor;\nuniform float u_float_border_width_offset;\nuniform float u_float_tip_height_multiplier;\nuniform float u_float_relative_end_position;\nuniform float u_float_tip_movement_amplitude;\nuniform float u_float_vertex_shift; \nuniform float u_float_opacity;\nattribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_segment_end;\nattribute vec4 a_vec4_texture_widen_arrow_widen;\nattribute vec2 a_vec2_widen;\nattribute vec2 a_vec2_direction; \nattribute float a_float_distance_from_start;\nattribute float a_float_object_length;\nattribute float a_float_type;\nattribute vec4 a_vec4_identifier; \nvarying vec2 v_vec2_line_type_arrow_tail;\nvarying vec4 v_vec4_arrow_width_length_border_outer;\nvarying vec4 v_vec4_texcoord_arrow_line;\nvarying vec4 v_vec4_distance_vertex_hiding;\nvarying vec4 v_vec4_identifier;\nvarying vec4 v_vec4_color;\nvarying vec4 v_vec4_border_color;\nconst float g_w_factor = 1e-7;\nconst float g_type_line = 0.;\nconst float g_type_arrow = 1.;\nconst float g_type_start_border = 2.;\nconst float g_type_line_ending = 3.;\nconst float g_type_line_cut = 4.;\nconst float g_shift_pixels = 2.;\nconst float g_line_overlapping_part = .2;\nstruct ArrowLineViewParameters\n{\n    float vertex_type;\n    float width_zpt;\n    float border_width_zpt;\n    float border_width_offset;\n    float arrow_segment_length_zpt;\n    float wing_width_multiplier;\n    float size_factor;\n    vec2 vertex_position;\n    vec2 vertex_widen;\n    vec2 line_texture_widen;\n    vec2 arrow_texture_widen;\n    vec2 segment_direction;\n    float segment_length;\n    float distance_to_end;\n};\nstruct DistanceShiftParameters\n{\n    float shift;\n    bool invisible;\n};\nvec2 perp(const vec2 vector)\n{\n    return vec2(-vector.y, vector.x);\n}\nvec2 vertex_shift(const Scale scale)\n{\n    return u_float_vertex_shift * u_float_tip_movement_amplitude * normalize_s08(a_vec2_direction) * scale.calculation;\n}\nvec2 arrow_shift(const ArrowLineViewParameters view)\n{\n    \n    \n    \n    return view.segment_direction * view.distance_to_end;\n}\nfloat erase_length_end()\n{\n    return clamp(u_float_relative_end_position, 0., 1.) * a_float_object_length;\n}\nvoid set_texcoord_varyings(const vec2 arrow_texcoord, const vec2 line_texcoord)\n{\n    v_vec4_texcoord_arrow_line = vec4(arrow_texcoord, line_texcoord);\n}\nvoid set_arrow_varyings(\n    const float arrow_width,\n    const float arrow_length,\n    const float arrow_border,\n    const float arrow_outer_width,\n    const float arrow_tail_hide_part)\n{\n    v_vec4_arrow_width_length_border_outer = vec4(\n        arrow_width,\n        arrow_length,\n        arrow_border,\n        arrow_outer_width);\n    v_vec2_line_type_arrow_tail = vec2(\n        a_float_type,\n        arrow_tail_hide_part);\n}\nDistanceShiftParameters calculate_entrance_arrow_distances(\n    const ArrowLineViewParameters view,\n    const float signed_distance_shift,\n    const float arrow_final_size,\n    const float entrance_arrow_distance_shift)\n{\n    DistanceShiftParameters line_distance_parameters = DistanceShiftParameters(\n        signed_distance_shift + entrance_arrow_distance_shift,\n        false);\n    if (a_float_type == g_type_arrow)\n    {\n        \n        \n        bool outside_of_current_segment = view.distance_to_end > view.segment_length + entrance_arrow_distance_shift;\n        \n        bool inside_end_hide = a_float_distance_from_start + entrance_arrow_distance_shift > erase_length_end();\n        return DistanceShiftParameters(\n            \n            line_distance_parameters.shift + view.distance_to_end,\n            outside_of_current_segment || inside_end_hide\n        );\n    }\n    else\n    {\n        return line_distance_parameters;\n    }\n}\nvoid set_distance_varyings(\n    const ArrowLineViewParameters view,\n    const float arrow_final_size,\n    const float signed_shift_distance)\n{\n    float entrance_arrow_distance_shift = arrow_final_size * (2. - g_line_overlapping_part);\n    DistanceShiftParameters distance_shift_parameters = calculate_entrance_arrow_distances(\n        view,\n        signed_shift_distance,\n        arrow_final_size,\n        entrance_arrow_distance_shift);\n    v_vec4_distance_vertex_hiding =\n        vec4(\n            a_float_distance_from_start + distance_shift_parameters.shift,\n            0.,\n            erase_length_end(),\n            distance_shift_parameters.invisible\n                ? a_float_object_length\n                : 0.\n        ) / a_float_object_length;\n}\nArrowLineViewParameters decode_arrow_line_view_parameters()\n{\n    float width_zpt = u_float_width_zpt;\n    float border_width_zpt = u_float_border_width_zpt;\n    float arrow_segment_length_zpt = width_zpt * u_float_tip_height_multiplier + border_width_zpt;\n    float vertex_type = a_float_type;\n    \n    vec2 segment_direction = (vertex_type == g_type_line_ending || vertex_type == g_type_line_cut)\n        ? normalize(a_vec2_vertex - a_vec2_segment_end)\n        : normalize(a_vec2_segment_end - a_vec2_vertex);\n    float segment_length = length(a_vec2_segment_end - a_vec2_vertex);\n    float distance_to_end = erase_length_end() - a_float_distance_from_start;\n    return ArrowLineViewParameters(\n        vertex_type,\n        width_zpt,\n        border_width_zpt,\n        u_float_border_width_offset,\n        arrow_segment_length_zpt,\n        u_float_wing_width_multiplier,\n        u_float_size_factor,\n        a_vec2_vertex,\n        unpack_widen(a_vec2_widen),\n        unpack_widen(a_vec4_texture_widen_arrow_widen.xy),\n        unpack_widen(a_vec4_texture_widen_arrow_widen.zw),\n        segment_direction,\n        segment_length,\n        distance_to_end);\n}\nvec4 process_arrow_line_vertex(const Scale scale, const mat4 mvp, const vec2 vpt_size)\n{\n    ArrowLineViewParameters view = decode_arrow_line_view_parameters();\n    \n    ArrowParameters arrow_parameters = calculate_arrow_parameters(\n        scale.calculation,\n        view.width_zpt,\n        view.border_width_zpt,\n        view.arrow_segment_length_zpt,\n        view.wing_width_multiplier,\n        view.size_factor);\n    vec2 vertex_widen = view.vertex_widen;\n    vec2 texture_widen_with_sign = view.line_texture_widen;\n    \n    \n    float shift_sign = sign(dot(vertex_widen, texture_widen_with_sign));\n    vec2 line_texture_widen = shift_sign * texture_widen_with_sign;\n    \n    float line_final_size = (view.width_zpt + 2. * view.border_width_zpt) * view.size_factor * scale.calculation;\n    float final_size = (view.vertex_type == g_type_arrow)\n        ? arrow_parameters.final_size\n        : line_final_size;\n    \n    \n    \n    \n    vec2 line_texture_widen_perp = perp(line_texture_widen);\n    float shift_distance = abs(dot(vertex_widen, line_texture_widen_perp)) * final_size;\n    vec2 shift_direction = line_texture_widen_perp * sign(dot(vertex_widen, line_texture_widen_perp));\n    vec2 line_vertex_shift = vertex_widen * final_size - shift_direction * max(0., shift_distance - .5 * view.segment_length);\n    \n    vec2 arrow_vertex_widen = vertex_widen * arrow_parameters.final_size;\n    vec2 scene_vertex_shift = (view.vertex_type == g_type_arrow)\n        ? arrow_vertex_widen\n        : line_vertex_shift;\n    vec2 arrow_position_shift = (view.vertex_type == g_type_arrow)\n        ? arrow_shift(view)\n        : vec2(0.);\n    \n    float shift_pixels = g_shift_pixels * sqrt(2.);\n    VertexShiftParameters line_shift_parameters = calculate_vertex_shift_parameters(\n        mvp,\n        vpt_size,\n        view.vertex_position + (vertex_shift(scale) + arrow_position_shift),\n        scene_vertex_shift,\n        shift_pixels);\n    float arrow_line_texcoord_scale = line_final_size / arrow_parameters.final_size;\n    float line_texcoord_scale = (view.vertex_type != g_type_arrow)\n        ? arrow_line_texcoord_scale\n        : 1.;\n    vec2 line_texcoord = line_texture_widen * (1. + line_shift_parameters.limited_factor) * line_texcoord_scale;\n    \n    float arrow_texcoord_scale = (view.vertex_type == g_type_start_border)\n        ? arrow_line_texcoord_scale\n        : 1.;\n    vec2 arrow_texcoord = view.arrow_texture_widen * (1. + line_shift_parameters.limited_factor) * arrow_texcoord_scale;\n    set_texcoord_varyings(arrow_texcoord, line_texcoord);\n    float arrow_width = view.width_zpt * arrow_parameters.zpt_to_texcoord_factor;\n    float arrow_length = view.arrow_segment_length_zpt * arrow_parameters.zpt_to_texcoord_factor;\n    \n    float texcoord_border_width = view.border_width_zpt * arrow_parameters.zpt_to_texcoord_factor;\n    float border_width_texcoord_offset = view.border_width_offset * arrow_parameters.zpt_to_texcoord_factor;\n    float arrow_border = max(0., texcoord_border_width - scale.style / scale.style_clamped * border_width_texcoord_offset);\n    \n    float tail_shift_direction = (view.vertex_type == g_type_line_ending || view.vertex_type == g_type_start_border) ? 1. : -1.;\n    float tail_hide_shift = dot(arrow_vertex_widen, tail_shift_direction * view.segment_direction);\n    float arrow_tail_hide_part = (view.distance_to_end - tail_hide_shift) * arrow_parameters.zpt_to_texcoord_factor / view.size_factor;\n    set_arrow_varyings(\n        arrow_width,\n        arrow_length,\n        arrow_border,\n        arrow_parameters.outer_width,\n        arrow_tail_hide_part);\n    set_distance_varyings(\n        view,\n        arrow_parameters.final_size,\n        shift_sign * shift_distance);\n    \n    \n    return line_shift_parameters.clip_space_vertex / final_size;\n}\nvoid main()\n{\n    v_vec4_identifier = a_vec4_identifier; \n    Scale scale = calculate_scale(u_vec3_projection_scale_style_scale_dpi, u_vec2_scale_limits);\n    vec4 processed_vertex = process_arrow_line_vertex(scale, u_mat4_mvp, u_vec2_vpt_size);\n    gl_Position = processed_vertex * g_w_factor;\n    v_vec4_color = apply_opacity(u_vec4_color, u_float_opacity);\n    v_vec4_border_color = apply_opacity(u_vec4_border_color, u_float_opacity);\n}\n",diffuse_identify:"uniform vec2 u_vec2_vpt_size;\nuniform float u_float_height_limitation;\nuniform float u_float_tile_height;\nuniform float u_float_height_factor;\nattribute vec3 a_vec3_vertex;\nattribute vec4 a_vec4_identifier;\nattribute vec2 a_vec2_dem_position;\nvarying vec4 v_vec4_identifier;\nvoid main()\n{\n    float height = dem_height(unpack_dem_position(a_vec2_dem_position));\n    \n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = vec4(0, 0, 0, 0);\n        return;\n    }\n    v_vec4_identifier = a_vec4_identifier;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        vec4 vertex_hf = apply_height_factor(a_vec3_vertex, u_float_height_factor);\n        vertex_hf.z += height;\n        vertex_hf = apply_z_limitation(vertex_hf, u_float_tile_height, u_float_height_limitation);\n        \n        vertex_hf.z = max(vertex_hf.z, height);\n        gl_Position = round_position(\n            u_mat4_mvp * vertex_hf,\n            .5 * u_vec2_vpt_size);\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n}\n",calculate_scale:"struct Scale\n{\n    float projection;\n    float style;\n    float style_clamped;\n    float calculation;\n};\nScale calculate_scale(const vec3 projection_scale_style_scale_dpi, const vec2 scale_limits)\n{\n    float style_scale_clamped = clamp(projection_scale_style_scale_dpi.y, scale_limits.x, scale_limits.y);\n    float scale_ratio = projection_scale_style_scale_dpi.x / projection_scale_style_scale_dpi.y;\n    float calculation_scale = style_scale_clamped * scale_ratio;\n    return Scale(\n        projection_scale_style_scale_dpi.x,\n        projection_scale_style_scale_dpi.y,\n        style_scale_clamped,\n        calculation_scale);\n}\nconst float g_min_scale_factor = 1e-2;\nconst float g_max_scale_factor = 1e2;\nconst float g_base_scale_numerator = 1e2;\nfloat normalize_scale_to_tile(const float scale, const float tile_size)\n{\n    return clamp(\n        (scale - g_min_scale_factor) / (tile_size - g_min_scale_factor),\n        g_min_scale_factor,\n        g_max_scale_factor);\n}\n",line_width:"float calculate_final_width(\n    const Scale scale,\n    const float width,\n    const float width_offset)\n{\n    \n    float final_width = max(0., scale.calculation * width - scale.projection * width_offset);\n    return final_width;\n}\n",arrow_functions:"\nvec2 multiply_complex(const vec2 lhs, const vec2 rhs)\n{\n    return vec2(lhs.x * rhs.x - lhs.y * rhs.y, lhs.x * rhs.y + lhs.y * rhs.x);\n}\nstruct ArrowParameters\n{\n    float zpt_to_texcoord_factor;\n    float final_size;\n    float outer_width;\n    vec2 widen_size;\n};\nArrowParameters calculate_arrow_parameters(\n    const float calculation_scale,\n    const float width_zpt,\n    const float border_width_zpt,\n    const float segment_length_zpt,\n    const float wing_width_multiplier,\n    const float size_factor)\n{\n    float quad_width = 2.0 * border_width_zpt + 2.0 * wing_width_multiplier * width_zpt;\n    float quad_height = 2.0 * border_width_zpt + segment_length_zpt;\n    float max_quad_dimension = max(quad_width, quad_height);\n    float zpt_to_texcoord_factor = 2.0 / max_quad_dimension;\n    float final_size = calculation_scale * size_factor * max_quad_dimension;\n    vec2 widen_size = 0.5 * vec2(quad_height, quad_width) * zpt_to_texcoord_factor;\n    float outer_width = (width_zpt * wing_width_multiplier + border_width_zpt) * zpt_to_texcoord_factor;\n    return ArrowParameters(\n        zpt_to_texcoord_factor,\n        final_size,\n        outer_width,\n        widen_size);\n}\nstruct VertexShiftParameters\n{\n    vec4 clip_space_vertex;\n    float limited_factor;\n};\nVertexShiftParameters calculate_vertex_shift_parameters(\n    const mat4 mvp,\n    const vec2 vpt_size,\n    const vec2 vertex,\n    const vec2 widen,\n    const float shift_pixels)\n{\n    vec2 widen_perp = vec2(-widen.y, widen.x);\n    \n    vec4 clip_space_widen = mvp * vec4(widen, 0., 0.);\n    vec4 clip_space_widen_perp = mvp * vec4(widen_perp, 0., 0.);\n    vec2 half_viewport = vpt_size / 2.;\n    \n    vec4 clip_space_vertex = mvp * vec4(vertex, 0.0, 1.0) + clip_space_widen;\n    \n    float limited_factor = calculate_multiplication_factor(\n        half_viewport,\n        clip_space_widen,\n        clip_space_widen_perp,\n        clip_space_vertex,\n        shift_pixels);\n    return VertexShiftParameters(\n        clip_space_vertex + clip_space_widen * limited_factor,\n        limited_factor);\n}\n",circle_marker:"attribute vec4 a_vec4_vertex;\nattribute vec2 a_vec2_widen;\nuniform vec2 u_vec2_vpt_size;\nuniform float u_float_width;\nvarying vec2 v_vec2_circle;\nvarying float v_float_width;\nvoid main() {\n    vec4 clip_space_position = u_mat4_mvp * a_vec4_vertex;\n    vec4 ndc_position = clip_space_position / clip_space_position.w;\n    ndc_position.xy += a_vec2_widen * u_float_width / u_vec2_vpt_size;\n    gl_Position = ndc_position;\n    v_vec2_circle = a_vec2_widen;\n    v_float_width = u_float_width;\n}\n",circle_marker_identify:"attribute vec4 a_vec4_vertex;\nattribute vec2 a_vec2_widen;\nattribute vec4 a_vec4_identifier;\nuniform vec2 u_vec2_vpt_size;\nuniform float u_float_width;\nvarying vec2 v_vec2_circle;\nvarying vec4 v_vec4_identifier;\nvoid main() {\n    v_vec2_circle = a_vec2_widen;\n    v_vec4_identifier = a_vec4_identifier;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier)\n    {\n        vec4 clip_space_position = u_mat4_mvp * a_vec4_vertex;\n        vec4 ndc_position = clip_space_position / clip_space_position.w;\n        ndc_position.xy += a_vec2_widen * u_float_width / u_vec2_vpt_size;\n        gl_Position = ndc_position;\n    }\n    else\n    {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n}\n",raster_functions:"\nfloat unpack_scale(float value)\n{\n    return exp(abs(value) / 256.) * sign(value);\n}\nfloat unpack_positive_value(float value)\n{\n    return exp(value / 256.);\n}\nvec2 make_position(const vec2 position, const float w, const vec2 inv_half_size, const float rounding_factor)\n{\n    vec2 non_rounded_position = (position + w) / (w * inv_half_size);\n    vec2 rounded_position = floor(non_rounded_position + 0.5);\n    vec2 rounding_delta = rounded_position - non_rounded_position;\n    vec2 pixel_coord = non_rounded_position + rounding_factor * rounding_delta - 0.5;\n    return (pixel_coord * inv_half_size) * w - w;\n}\nvec2 overlay_transform(const vec2 position, const vec2 inv_half_size)\n{\n    \n    \n    return position * inv_half_size;\n}\nfloat clipw(const float w, const vec2 range, const float scale)\n{\n    return w * (step(unpack_scale(range.x), scale) - step(unpack_positive_value(range.y), scale));\n}\nvec2 rescale(const vec2 corner, const vec2 rescale, const vec2 scale_range, const float style_scale)\n{\n    \n    \n    if (scale_range.x < 0.)\n    {\n        float default_scale_denominator = unpack_positive_value(rescale.x);\n        float rescale_coeff = unpack_positive_value(rescale.y);\n        float min_scale = unpack_positive_value(-scale_range.x);\n        float stretch_exponent = floor(0.5 + log2(\n            max(1., 1. + rescale_coeff * (1. / max(min_scale, style_scale) - default_scale_denominator))));\n        return corner.xy * exp2(stretch_exponent);\n    }\n    return corner;\n}\n",road:"attribute vec2 a_vec2_vertex;\nattribute vec4 a_vec4_normals;\nattribute vec2 a_vec2_shift;\nuniform float u_float_width;\nuniform float u_float_tile_to_pixel_ratio;\nuniform float u_float_shift;\nvarying vec2 v_vec2_normal;\nvarying float v_float_half_width;\nconst float g_w_factor = 1e-6;\nconst float normal_unpack_multiplier = 0.011135539861205473;\nvoid main()\n{\n    \n    float half_width = 0.5 * (u_float_width + 1.0);\n    \n    vec4 normals = a_vec4_normals * normal_unpack_multiplier * half_width;\n    vec2 extender = normals.xy;\n    vec2 normal = normals.zw;\n    vec2 shift = a_vec2_shift * u_float_shift;\n    \n    vec4 shifted_vertex = vec4(a_vec2_vertex + (shift + extender) * u_float_tile_to_pixel_ratio, 0.0, 1.0);\n    gl_Position = g_w_factor * u_mat4_mvp * shifted_vertex;\n    v_vec2_normal = normal;\n    v_float_half_width = half_width;\n}\n",road_identify:"attribute vec2 a_vec2_vertex;\nattribute vec4 a_vec4_normals;\nattribute vec4 a_vec4_identifier;\nuniform float u_float_width;\nuniform float u_float_tile_to_pixel_ratio;\nvarying vec2 v_vec2_normal;\nvarying vec4 v_vec4_identifier;\nvarying float v_float_half_width;\nconst float g_w_factor = 1e-6;\nconst float normal_unpack_multiplier = 0.011135539861205473;\nvoid main()\n{\n    \n    float half_width = 0.5 * (u_float_width + 1.0);\n    \n    vec4 normals = a_vec4_normals * normal_unpack_multiplier * half_width;\n    vec2 extender = normals.xy;\n    vec2 normal = normals.zw;\n    if (vec4(1., 1., 1., 1.) != a_vec4_identifier) {\n        \n        vec4 shifted_vertex = vec4(a_vec2_vertex + extender * u_float_tile_to_pixel_ratio, 0.0, 1.0);\n        gl_Position = g_w_factor * u_mat4_mvp * shifted_vertex;\n    } else {\n        gl_Position = vec4(1., 1., 1., 1.);\n    }\n    v_vec2_normal = normal;\n    v_vec4_identifier = a_vec4_identifier;\n    v_float_half_width = half_width;\n}\n",rect:"attribute vec2 a_vec2_vertex;\nvoid main()\n{\n    gl_Position = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0);\n}\n",rect_with_texture:"attribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_texcoord;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    gl_Position = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0);\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n}\n",heatmap:"attribute vec2 a_vec2_position;\nattribute vec2 a_vec2_widen;\nattribute float a_float_weight;\nvarying vec2 v_vec2_extrude;\nvarying float v_float_weight;\nuniform float u_float_radius;\nuniform float u_float_intensity;\nuniform float u_float_tile_to_pixel_ratio;\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n    float S = sqrt(-2.0 * log(ZERO / a_float_weight / u_float_intensity / GAUSS_COEF)) / 3.0;\n    v_vec2_extrude = S * a_vec2_widen;\n    v_float_weight = a_float_weight;\n    vec2 pos = a_vec2_position + a_vec2_widen * u_float_radius * u_float_tile_to_pixel_ratio;\n    gl_Position = u_mat4_mvp * vec4(pos, 0.0, 1.0);\n}\n",heatmap_texture:"attribute vec2 a_vec2_position;\nvarying vec2 v_vec2_position;\nvoid main() {\n    gl_Position = vec4(a_vec2_position, 0.0, 1.0);\n    v_vec2_position = clamp(a_vec2_position, vec2(0,0), vec2(1,1));\n}\n",dem_mesh:"uniform mat4 u_mat4_flat_map_mvp;\nattribute vec2 a_vec2_position;\nvarying vec3 v_vec3_texcoord;\nvarying vec2 hs_tex_pos;\nvoid main()\n{\n    vec4 coords = u_mat4_mvp * vec4(a_vec2_position, 0.0, 1.0);\n    vec4 tex_pos = u_mat4_dem_mvp * vec4(a_vec2_position, 0.0, 1.0);\n    float height = dem_height_direct(tex_pos.xy / tex_pos.w);\n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = coords;\n        v_vec3_texcoord = vec3(a_vec2_position, 0);\n    } else {\n        gl_Position = u_mat4_mvp * vec4(a_vec2_position, height, 1.0);\n        vec4 flat_coord = u_mat4_flat_map_mvp * vec4(a_vec2_position, 0.0, 1.0);\n        v_vec3_texcoord = vec3(flat_coord.xy / flat_coord.w, 1);\n        hs_tex_pos = tex_pos.xy;\n    }\n}\n",dem_ground:"uniform mat4 u_mat4_model;\nattribute vec2 a_vec2_position;\nvarying vec4 v_vec4_coords;\nvoid main()\n{\n    vec4 coords = u_mat4_mvp * vec4(a_vec2_position, 0.0, 1.0);\n    vec4 tex_pos = u_mat4_dem_mvp * vec4(a_vec2_position, 0.0, 1.0);\n    float height = dem_height_direct(tex_pos.xy / tex_pos.w);\n    if (height == DEM_INVALID_VALUE) {\n        gl_Position = coords;\n        v_vec4_coords = vec4(0);\n    } else {\n        gl_Position = u_mat4_mvp * vec4(a_vec2_position, height, 1.0);\n        v_vec4_coords = u_mat4_model * vec4(a_vec2_position, 0, 1.0);\n        \n        v_vec4_coords[2] = height / (u_float_dem_scale * u_float_vertical_scale) + u_float_map_center_elevation;\n    }\n}\n",dem:"\nuniform sampler2D u_tex_dem;\nuniform sampler2D u_tex_corrected_dem;\nuniform float u_float_corrected_interval;\nuniform mat4 u_mat4_dem_corrected;\nuniform mat4 u_mat4_dem_mvp;\nuniform float u_float_dem_scale;\nuniform float u_float_map_center_elevation;\nuniform float u_float_vertical_scale;\nconst float DEM_INVALID_VALUE = -9999.;\nconst float UNPACK_CENTROID = 8. / 65535.;\nfloat dem_height_direct(const vec2 tex_pos) {\n    \n    if (u_float_dem_scale == 0.) {\n        return 0.;\n    }\n    vec4 elevation;\n    \n    if (u_float_corrected_interval == 0.) {\n        elevation = texture2D(u_tex_dem, tex_pos);\n    }\n    else {\n        vec2 test_tex_pos = abs(tex_pos - vec2(0.5, 0.5));\n        if (test_tex_pos.x < u_float_corrected_interval && test_tex_pos.y < u_float_corrected_interval) {\n            elevation = texture2D(u_tex_corrected_dem, (u_mat4_dem_corrected * vec4(tex_pos, 0, 1)).xy);\n        } else {\n            elevation = texture2D(u_tex_dem, tex_pos);\n        }\n    }\n    \n    if (elevation.a == 0.) {\n        \n        return DEM_INVALID_VALUE;\n    } else {\n        \n        return u_float_dem_scale * u_float_vertical_scale * (elevation.r - u_float_map_center_elevation);\n    }\n}\nfloat dem_height(const vec2 coords) {\n    \n    if (u_float_dem_scale == 0.) {\n        return 0.;\n    }\n    vec4 tex_pos = u_mat4_dem_mvp * vec4(coords, 0.0, 1.0);\n    return dem_height_direct(tex_pos.xy);\n}\nvec2 unpack_dem_position(const vec2 pos) {\n    return pos * UNPACK_CENTROID;\n}\n",dem_elevation:"attribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_texcoord;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    gl_Position = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0);\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n}\n",dem_elevation_copy:"uniform mat4 u_mat4_dem_corrected;\nattribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_texcoord;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    gl_Position = u_mat4_mvp * vec4(a_vec2_vertex, 0.0, 1.0);\n    v_vec2_texcoord = (u_mat4_dem_corrected * vec4(unpack_texcoord(a_vec2_texcoord), 0, 1)).xy;\n}\n",dem_hillshade:"attribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_texcoord;\nvarying vec2 v_vec2_texcoord;\nvoid main()\n{\n    gl_Position = vec4((a_vec2_vertex * 2. - vec2(1, 1)), 0.0, 1.0);\n    v_vec2_texcoord = unpack_texcoord(a_vec2_texcoord);\n}\n",mvp_mat:"uniform mat4 u_mat4_mvp;\n",dem_flat_bottom:"attribute vec2 a_vec2_vertex;\nattribute vec2 a_vec2_centroid;\nattribute vec2 a_vec2_extender;\nvarying vec4 v_vec4_color;\nvoid main()\n{\n    vec4 tex_pos = u_mat4_dem_corrected * u_mat4_mvp * vec4(unpack_dem_position(a_vec2_centroid), 0.0, 1.0);\n    v_vec4_color = texture2D(u_tex_dem, tex_pos.xy);\n    gl_Position = u_mat4_mvp * vec4(a_vec2_vertex + a_vec2_extender * 1./64., 0.0, 1.0);\n}\n",mesh:"uniform vec3 u_vec3_light_direction;\nuniform vec3 u_vec3_light_color;\nuniform vec3 u_vec3_ambient_color;\nuniform vec4 u_vec4_color;\nuniform mediump float u_float_opacity;\nattribute vec3 a_vec3_vertex;\nattribute vec3 a_vec3_normal;\nattribute vec2 a_vec2_tex_coord;\nvarying vec4 v_vec4_color;\nvarying vec3 v_vec3_light_factor;\nvarying vec2 v_vec2_tex_coord;\nvoid main()\n{\n    gl_Position = u_mat4_mvp * vec4(a_vec3_vertex, 1);\n    \n    \n    v_vec3_light_factor = u_vec3_ambient_color + u_vec3_light_color * abs(dot(u_vec3_light_direction, normalize_s08(a_vec3_normal)));\n    \n    \n    if (u_vec4_color.a > 0.) {\n        v_vec4_color =  apply_opacity(vec4(u_vec4_color.rgb * v_vec3_light_factor, u_vec4_color.a), u_float_opacity);\n        \n        v_vec2_tex_coord = vec2(-1, 0);\n    } else {\n        v_vec4_color = u_vec4_color;\n        v_vec2_tex_coord = a_vec2_tex_coord;\n    }\n}\n"},Gr={color:["prelude","mvp_mat","apply_opacity","color"],diffuse:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","apply_opacity","diffuse"],line:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","apply_opacity","line"],pointSprite:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","raster_functions","pointsprite"],labelPoint:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","label_fixed_anchor"],labelPointIdentify:["prelude","mvp_mat","dem","label_fixed_anchor_identify"],labelLine:["prelude","mvp_mat","packed_attributes","label_directional"],stripedLine:["prelude","mvp_mat","packed_attributes","pixel_offset","calculate_scale","line_width","apply_opacity","precision_constants","striped_line_functions","striped_line"],stripedLineIdentify:["prelude","mvp_mat","packed_attributes","pixel_offset","calculate_scale","line_width","apply_opacity","precision_constants","striped_line_functions","striped_line_identify"],oneWayLine:["prelude","mvp_mat","packed_attributes","pixel_offset","arrow_functions","apply_opacity","one_way_line"],colorIdentify:["prelude","mvp_mat","round_position","color_identify"],zbmModelIdentify:["prelude","mvp_mat","dem","round_position","zbm_model_identify"],buildingIdentify:["prelude","mvp_mat","dem","round_position","apply_height_factor","diffuse_identify"],pointSpriteIdentify:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","raster_functions","pointsprite_identify"],zbmModel:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","zbm_model"],gltfModel:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","gltf_model"],simpleLine:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","simple_line"],entranceArrow:["prelude","mvp_mat","packed_attributes","pixel_offset","arrow_functions","calculate_scale","apply_opacity","arrow_line_entrance"],circleMarker:["prelude","mvp_mat","circle_marker"],circleMarkerIdentify:["prelude","mvp_mat","circle_marker_identify"],rect:["prelude","mvp_mat","rect"],road:["prelude","mvp_mat","road"],roadIdentify:["prelude","mvp_mat","road_identify"],rectWithTexture:["prelude","mvp_mat","packed_attributes","apply_opacity","raster_functions","rect_with_texture"],heatmap:["prelude","mvp_mat","heatmap"],heatmapTexture:["prelude","heatmap_texture"],demMesh:["prelude","mvp_mat","dem","dem_mesh"],demGround:["prelude","mvp_mat","dem","dem_ground"],demElevation:["prelude","mvp_mat","packed_attributes","dem_elevation"],demElevationCopy:["prelude","mvp_mat","packed_attributes","dem_elevation_copy"],demHillshade:["prelude","mvp_mat","packed_attributes","dem_hillshade"],demFlatBottom:["prelude","mvp_mat","dem","dem_flat_bottom"],mesh:["prelude","mvp_mat","dem","packed_attributes","apply_height_factor","apply_opacity","mesh"]},Vr={color:["lowp_float","prelude","color"],gradient:["lowp_float","prelude","gradient"],texturedColor:["mediump_float","prelude","apply_opacity","textured_color"],line:["mediump_float","prelude","line"],pointSprite:["mediump_float","prelude","apply_opacity","pointsprite"],label:["mediump_float","prelude","apply_opacity","label"],stripedLine:["enable_standard_derivatives","mediump_float","prelude","affine_step","striped_line"],oneWayLine:["enable_standard_derivatives","mediump_float","prelude","affine_step","apply_opacity","arrow_functions","one_way_line"],colorIdentify:["lowp_float","prelude","color_identify"],pointSpriteIdentify:["mediump_float","prelude","pointsprite_identify"],zbmModel:["lowp_float","prelude","zbm_model"],gltfModel:["lowp_float","prelude","gltf_model"],simpleLine:["lowp_float","prelude","simple_line"],entranceArrow:["enable_standard_derivatives","highp_float","prelude","affine_step","arrow_functions","circle_functions","arrow_line"],entranceArrowIdentify:["lowp_float","prelude","arrow_line_identify"],circleMarker:["mediump_float","prelude","affine_step","circle_marker"],rect:["lowp_float","prelude","rect"],road:["enable_standard_derivatives","mediump_float","prelude","affine_step","road"],roadIdentify:["enable_standard_derivatives","lowp_float","prelude","road_identify"],rectWithTexture:["mediump_float","prelude","apply_opacity","rect_with_texture"],heatmap:["mediump_float","prelude","heatmap"],heatmapTexture:["mediump_float","prelude","heatmap_texture"],demMesh:["mediump_float","prelude","dem_mesh"],demGround:["mediump_float","prelude","dem_ground"],demElevation:["mediump_float","prelude","dem_elevation"],demElevationCopy:["mediump_float","prelude","dem_elevation_copy"],demHillshade:["lowp_float","prelude","dem_hillshade"],demFlatBottom:["mediump_float","prelude","dem_flat_bottom"],mesh:["mediump_float","prelude","apply_opacity","mesh"]};class qr{constructor(t,e,o=[]){this._shader=null,this.type="vertex"===t?qr.Vertex:qr.Fragment;const i=o.map((t=>void 0!==t.value?"#define "+t.type+" "+t.value:"#define "+t.type)),n=Array.isArray(e)?e:[e||""];let a=!0;for(const t of n)a&&-1!==t.indexOf("#version")?i.unshift(t):i.push(t),a=!1;this._code=i.join("\n")}get(t){return this._shader||this._compile(t),this._shader}remove(t){this._shader&&t.deleteShader(this._shader)}getCode(){return this._code.slice()}_compile(t){const e=this.type===qr.Vertex?t.VERTEX_SHADER:t.FRAGMENT_SHADER,o=this._shader=t.createShader(e);if(!o||t.isContextLost())throw new Error(`[2gl] Failed to create shader. Shader is null: ${!o}. Context is lost: ${t.isContextLost()}`);if(t.shaderSource(o,this._code),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(o),i=(this._code||"").split("\n");throw new Error(e?e.replace(/^ERROR:\s*(\d+):(\d+):\s*(.*?)\n/,(function(t,e,o,n){const a=i[Number(o)-1];return a?`ERROR ${e}:${o}: ${n}\nErroneous line: <<${a}>>\n`:t})):"Unknown shader compilation error")}}}qr.Vertex=1,qr.Fragment=2;const Xr={},$r={};for(const t in Gr){const e=Gr[t].map((t=>Zr[t]));$r[t]=e}for(const t in Vr){const e=Vr[t].map((t=>Ur[t]));Xr[t]=e}function Yr(t){const e=2===Il.webglVersion?["#version 300 es"]:[];return new qr("vertex",e.concat($r[t]),[{type:`WEBGL${Il.webglVersion}`,value:""}])}function Jr(t){const e=2===Il.webglVersion?["#version 300 es"]:[];return new qr("fragment",e.concat(Xr[t]),[{type:`WEBGL${Il.webglVersion}`,value:""}])}const Kr={name:"u_mat4_mvp",type:"mat4"},Qr=[{name:"u_tex_dem",type:"1i"},{name:"u_tex_corrected_dem",type:"1i"},{name:"u_float_corrected_interval",type:"1f"},{name:"u_mat4_dem_corrected",type:"mat4"},{name:"u_tex_hillshade_ramp",type:"1i"},{name:"u_mat4_dem_mvp",type:"mat4"},{name:"u_float_dem_scale",type:"1f"},{name:"u_float_vertical_scale",type:"1f"},{name:"u_float_dem_resolution",type:"1f"},{name:"u_float_dem_cell_size",type:"1f"},{name:"u_float_dem_light_direction",type:"1f"},{name:"u_float_dem_shade_intension",type:"1f"},{name:"u_float_map_center_elevation",type:"1f"}];var tl=o(412),el=o(309);const ol=(t,e,o,i,n)=>{o.length>0&&Number.isNaN(t.metrics.firstcontent)&&(t.metrics.firstcontent=performance.now()-t.metrics.start),yl(o,i,n),ul(o,t).forEach((o=>il(t,e,o,i)))},il=(t,e,o,i)=>{_l(e.styleManager,o,t).forEach((o=>{dl(e.styleManager,o[0])?nl(t,e,o,i):al(t,e,o,i)}))},nl=(t,e,o,i)=>{const n=dl(e.styleManager,o[0]);if(!n)return;const a=(o,r)=>{r>=n.orderBy.length?al(t,e,o,i):bl(n.orderBy[r],o,t).forEach(((t,e)=>a(t,e+1)))};a(o,0)},al=(t,e,o,i)=>{const n=o;n.sort(((t,e)=>t.tile.zoomLevel-e.tile.zoomLevel)),gl(e.styleManager,n,t).forEach((o=>rl(t,e,o,i)))},rl=(t,e,o,i)=>{fl(o,t).forEach((o=>ll(t,e,o,i)))},ll=(t,e,o,i)=>{const n=e.styleManager.getStyle(o[0].attributes.styleId);let a;n&&(a=n.layersById[o[0].attributes.layerId]);const r=a&&a.selectedIdx;void 0!==r&&o.sort(((t,e)=>{var o,i;return Number(null!==(o=t.attributes.tileData[r])&&void 0!==o?o:0)-Number(null!==(i=e.attributes.tileData[r])&&void 0!==i?i:0)})),xl(o,t).forEach((o=>sl(t,e,o,i)))},sl=(t,e,o,i)=>{var n;const a=o[0];if((null==a?void 0:a.type)===Bo.H.Custom){const t=zl(e.styleManager,a);if(!t)return;i.useCustomLayerState(t),e.styleManager.callCustomLayerRender(a.attributes.layerId)}else if("gltfModel"===a.symbol&&"anchor"===a.sink)null===(n=e.threeJsSceneManager)||void 0===n||n.render();else{const n=o;i.useProgram(n),vl(n,t).forEach((o=>{cl(t,e,o,i)}))}},cl=(t,e,o,i)=>{const n=o[0],a=zl(e.styleManager,n);a&&(i.useState(o,a),wl(o,t).forEach((o=>{i.drawSymbol(o,a,t,e)})))};function dl(t,e){const o=t.getStyle(e.attributes.styleId);if(!o)return;const i=o.layersById[e.attributes.layerId];if(!i)return;if(void 0===i.groupId)return;const n=o.groupsById[i.groupId];if(!n||"group"===n.type)return n;(0,el.cM)(`Expecting layer with type 'group' but got '${n.type}'`)}const ml=(t,e)=>Number(t)-Number(e),hl=t=>(e,o)=>{const i={};for(let n=0;n<e.length;n++){const a=e[n],r=t(a,o),l=i[r];void 0===l?i[r]=[a]:l.push(a)}const n=Object.keys(i);n.sort(ml);const a=[];for(let t=0;t<n.length;t++)a.push(i[n[t]]);return a},pl=t=>(e,o)=>{const i=new Map;for(let n=0;n<e.length;n++){const a=e[n],r=t(a,o);i.has(r)?i.get(r).push(a):i.set(r,[a])}return i},ul=hl((t=>{const{styleId:e}=t.attributes;return e===ke.jf?1:-e})),gl=(t,e,o)=>hl((e=>((t,e,o)=>{const i=t.getStyle(e);if(!i)return(0,el.cM)(`Cannot get style with id=${e} for renderIndex`),NaN;const n=i.layersById[o];return n?n.groupIndex||0:NaN})(t,e.attributes.styleId,e.attributes.layerId)))(e,o),_l=(t,e,o)=>hl((e=>((t,e,o)=>{const i=t.getStyle(e);if(!i)return(0,el.cM)(`Cannot get style with id=${e} for renderIndex`),NaN;const n=i.layersById[o];return n?n.renderIndex:NaN})(t,e.attributes.styleId,e.attributes.layerId)))(e,o),fl=hl((t=>t.layerSettings.subRenderIndex||0)),yl=(t,e,o)=>{const i=new Set;t.forEach((t=>{if(t.type===Bo.H.Custom)return;const n=t.layerSettings.programName;i.has(t.layerSettings.programName)||(i.add(n),e.setProgramBinder(t,o))}))},bl=(t,e,o)=>hl(((e,o)=>{const i=(0,Te.jJ)(o.styleZoom,o.styleState,e.attributes.tileData);return(0,Te.vn)(t,i,0)}))(e,o),xl=pl((t=>t.layerSettings.programName)),vl=pl((t=>t.layerSettings.webglState)),wl=pl((t=>t.sink+"_"+t.attributesHash+"_"+t.tile.readiness));function zl(t,e){const o=t.getStyle(e.attributes.styleId);if(o)return o.layersById[e.attributes.layerId]}const Fl=(t,e)=>{const o=e.renderer.getRenderingContext(),i={demUniformsBound:!1},n={drawSymbol:(t,e,o,n)=>Sl(t,e,o,n,i.demUniformsBound),useProgram:i=>{const{layerBinder:n,programName:a}=i[0].layerSettings,r=e.renderer.getShaderProgram(a);r.enable(o),null==n||n(o,r,t,e)},setProgramBinder:(a,r)=>{if(i.demUniformsBound=!1,a.layerSettings.programBinder){const i=e.renderer.getShaderProgram(a.layerSettings.programName);i.enable(o),a.layerSettings.programBinder(o,i,t,e,n,r)}},useState:(t,e)=>{Sn(o,t[0].layerSettings.webglState,e)},useCustomLayerState:t=>{Sn(o,Wn,t)},setFlags:t=>{Object.assign(i,t)}};return n},Sl=(t,e,o,i,n)=>{const a=i.renderer.getRenderingContext(),r=t[0],{objectBinder:l,programName:s,zoomBinder:c}=r.layerSettings,d=i.renderer.getShaderProgram(s);l(a,d,o,i,r,e)&&(c?Ml(t,o).forEach((t=>{c(a,d,o,i,t[0],e),t.forEach((t=>Cl(t,i,d,o,a,n,e)))})):t.forEach((t=>Cl(t,i,d,o,a,n,e))))},Cl=(t,e,o,i,n,a,r)=>{var l,s,c,d;const m=e.renderer.webGlExtensions;null===(s=(l=t.layerSettings).tileBinder)||void 0===s||s.call(l,n,o,i,e,t,a,r),"heatmap"===t.symbol&&"fill"===t.sink||o.bind(n,{u_mat4_mvp:t.tile.mvpMatrix}),a&&o.bind(n,{u_mat4_dem_mvp:t.tile.demMatrix,u_float_vertical_scale:he.C/t.tile.modelMatrix[10]}),t.instanceMatrix&&o.bind(n,{u_mat4_instance:t.instanceMatrix}),t.vao.bind({gl:n,extensions:m});const h=t.rangeStart/t.stride,p=(t.rangeEnd-t.rangeStart)/t.stride,u=null!==(c=t.drawMode)&&void 0!==c?c:No.Fg,g=null!==(d=t.instanceCount)&&void 0!==d?d:1,_=m.ANGLE_instanced_arrays,f=g>=1&&(!(n instanceof WebGLRenderingContext)||_),y=t.vao.getElementsGLType(n);null!==y?f?function(t,e,o,i,n,a,r){if(t instanceof WebGLRenderingContext){if(!r)return;r.drawElementsInstancedANGLE(e,o,i,n,a)}else t.drawElementsInstanced(e,o,i,n,a)}(n,u,p,y,h,g,_):n.drawElements(u,p,y,h):f?function(t,e,o,i,n,a){if(t instanceof WebGLRenderingContext){if(!a)return;a.drawArraysInstancedANGLE(e,o,i,n)}else t.drawArraysInstanced(e,o,i,n)}(n,u,h,p,g,_):n.drawArrays(u,h,p),i.collectStats&&!t.layerSettings.identify&&(i.stats.drawCount++,i.stats.vertexCount+=p*g)};const Ml=hl((t=>t.tile.zoomLevel)),Pl=new Float32Array(16);class Il extends class{constructor(t){if(this.webGlExtensions={},this._canvasElement=null,this._maxPluginOrder=0,this._size=[1,1],this._renderTarget=null,"canvas"in(t=t||{})){this._canvasElement="string"==typeof t.canvas?document.getElementById(t.canvas):t.canvas;const e={antialias:void 0===t.antialias||t.antialias,stencil:void 0!==t.stencil&&t.stencil,failIfMajorPerformanceCaveat:void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,preserveDrawingBuffer:void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer};this._gl=2===t.version?this._canvasElement.getContext("webgl2",e):this._canvasElement.getContext("webgl",e)||this._canvasElement.getContext("experimental-webgl",e)}else this._gl=t.gl;this._pixelRatio=t.pixelRatio||1,this.autoClear=void 0===t.autoClear||t.autoClear,this.clearColor=t.clearColor||[1,1,1,1],this.sortObjects=!0,this._plugins=[],this.addPlugin(new Ho,0),this.webGlExtensions={}}addPlugin(t,e){return void 0===e&&(e=this._maxPluginOrder+1),this._plugins.push({plugin:t,order:e}),this._plugins.sort(((t,e)=>t.order-e.order)),this._maxPluginOrder=Math.max(...this._plugins.map((t=>t.order))),this}setPixelRatio(t){return this._pixelRatio=t,this}getPixelRatio(){return this._pixelRatio}setSize(t,e){return this._size=[t*this._pixelRatio,e*this._pixelRatio],this._canvasElement&&(this._canvasElement.width=this._size[0],this._canvasElement.height=this._size[1],this._canvasElement.style.width=t+"px",this._canvasElement.style.height=e+"px"),this.setViewport(),this}setViewport(t,e){return void 0!==t&&void 0!==e?this._gl.viewport(0,0,t,e):this._gl.viewport(0,0,this._size[0],this._size[1]),this}getSize(){return this._size}setRenderTarget(t){return this._renderTarget=t,this}readPixels(t,e,o,i,n){const a=this._gl;return this._renderTarget?(this._renderTarget.bind(a),a.readPixels(t,e,o,i,a.RGBA,a.UNSIGNED_BYTE,n),this._renderTarget.unbind(a)):a.readPixels(t,e,o,i,a.RGBA,a.UNSIGNED_BYTE,n),this}clear(){const t=this._gl;return t.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this}addExtension(t){return this.webGlExtensions[t]=this._gl.getExtension(t),this}}{constructor(t,e){const o=e.layout.canvas,i={antialias:!1,stencil:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:t.preserveDrawingBuffer},n=t.webglVersion;let a=null;if(2===n&&(a=o.getContext("webgl2",i),Il.webglVersion=2),null!==a&&1!==n||(a=o.getContext("webgl",i)||o.getContext("experimental-webgl",i),Il.webglVersion=1),null===a||!(a instanceof WebGLRenderingContext||a instanceof WebGL2RenderingContext))throw new Error("Failed to obtain WebGL context");super({gl:a,clearColor:(0,Te.m2)((0,tl.MV)(t.defaultBackgroundColor))}),this.framebuffers=[],this.lastRenderedFramebuffers=[],this.trackContextLost=t=>{t.preventDefault(),this.modules.map.destroy(),fo({eventAction:"WebGlContext",eventLabel:"webglcontextlost"}),fo({eventCategory:"WebGlContext",eventAction:"webglcontextlost",eventLabel:t.statusMessage||""})},this.state=t,this.modules=e,this.identifyBuffer=new Ro({minFilter:Wo.NearestFilter,magFilter:Wo.NearestFilter}),this.shaderPrograms={diffuse:new Nr({vertex:Yr("diffuse"),fragment:Jr("color"),uniforms:[Kr,{name:"u_vec3_light_direction",type:"3fv"},{name:"u_vec3_light_color",type:"3fv"},{name:"u_vec3_ambient_color",type:"3fv"},{name:"u_vec4_color",type:"4fv"},{name:"u_float_height_limitation",type:"1f"},{name:"u_float_tile_height",type:"1f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_opacity",type:"1f"},{name:"u_mat4_gradient",type:"mat4"},...Qr],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec3_normal",location:1},{name:"a_vec2_dem_position",location:2}]}),gradientDiffuse:new Nr({vertex:Yr("diffuse"),fragment:Jr("gradient"),uniforms:[Kr,{name:"u_vec3_light_direction",type:"3fv"},{name:"u_vec3_light_color",type:"3fv"},{name:"u_vec3_ambient_color",type:"3fv"},{name:"u_vec4_color",type:"4fv"},{name:"u_float_height_limitation",type:"1f"},{name:"u_float_tile_height",type:"1f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_opacity",type:"1f"},{name:"u_mat4_gradient",type:"mat4"},...Qr],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec3_normal",location:1},{name:"a_vec2_dem_position",location:2}]}),labelLine:new Nr({vertex:Yr("labelLine"),fragment:Jr("label"),uniforms:[Kr,{name:"u_float_tile_to_pixel_ratio",type:"1f"},{name:"u_sr2d_texture",type:"1i"},{name:"u_float_buffer",type:"1f"},{name:"u_float_gamma",type:"1f"},{name:"u_float_scale",type:"1f"},{name:"u_vec4_color",type:"4fv"},{name:"u_float_style_zoom",type:"1f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec4_position",location:0},{name:"a_vec2_offset",location:1},{name:"a_vec2_texcoord",location:2},{name:"a_vec2_style_zoom_limits",location:3}]}),labelPoint:new Nr({vertex:Yr("labelPoint"),fragment:Jr("label"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2f"},{name:"u_sr2d_texture",type:"1i"},{name:"u_float_buffer",type:"1f"},{name:"u_float_gamma",type:"1f"},{name:"u_float_scale",type:"1f"},{name:"u_vec4_color",type:"4fv"},{name:"u_vec2_offset",type:"2f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_opacity",type:"1f"},...Qr],attributes:[{name:"a_vec4_position",location:0},{name:"a_vec2_offset",location:1},{name:"a_vec2_texcoord",location:2}]}),labelPointIdentify:new Nr({vertex:Yr("labelPointIdentify"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2f"},{name:"u_float_scale",type:"1f"},{name:"u_vec2_offset",type:"2f"},...Qr],attributes:[{name:"a_vec4_position",location:0},{name:"a_vec2_offset",location:1},{name:"a_vec4_identifier",location:2}]}),line:new Nr({vertex:Yr("line"),fragment:Jr("line"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec3_light_direction",type:"3fv"},{name:"u_vec3_light_color",type:"3fv"},{name:"u_vec3_ambient_color",type:"3fv"},{name:"u_vec4_color",type:"4fv"},{name:"u_float_height_limitation",type:"1f"},{name:"u_float_tile_height",type:"1f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_opacity",type:"1f"},{name:"u_mat4_gradient",type:"mat4"},...Qr],attributes:[{name:"a_vec4_vertex",location:0},{name:"a_vec2_normal",location:1},{name:"a_vec2_normal_delta",location:2},{name:"a_vec3_direction",location:3},{name:"a_float_distance",location:4},{name:"a_vec2_dem_position",location:5}]}),pointSprite:new Nr({vertex:Yr("pointSprite"),fragment:Jr("pointSprite"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_sr2d_texture",type:"1i"},{name:"u_float_rounding_factor",type:"1f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_opacity",type:"1f"},{name:"u_vec2_rotation",type:"2fv"},{name:"u_bool_skip_height_factor",type:"1i"},...Qr],attributes:[{name:"a_vec3_position",location:0},{name:"a_vec2_offset",location:1},{name:"a_vec2_texcoord",location:2},{name:"a_vec2_range",location:3},{name:"a_vec2_rescale",location:4}]}),pointSpriteIdentify:new Nr({vertex:Yr("pointSpriteIdentify"),fragment:Jr("pointSpriteIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_sr2d_texture",type:"1i"},{name:"u_float_height_factor",type:"1f"},{name:"u_vec2_rotation",type:"2fv"},{name:"u_bool_skip_height_factor",type:"1i"},...Qr],attributes:[{name:"a_vec3_position",location:0},{name:"a_vec2_offset",location:1},{name:"a_vec2_texcoord",location:2},{name:"a_vec2_range",location:3},{name:"a_vec2_rescale",location:4},{name:"a_vec4_identifier",location:5}]}),stripedLine:new Nr({vertex:Yr("stripedLine"),fragment:Jr("stripedLine"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_vec2_scaler_params",type:"2fv"},{name:"u_float_dash_length",type:"1f"},{name:"u_float_space_length",type:"1f"},{name:"u_float_dash2_length",type:"1f"},{name:"u_vec4_dash_color",type:"4fv"},{name:"u_vec4_space_color",type:"4fv"},{name:"u_vec4_border_color",type:"4fv"},{name:"u_float_width",type:"1f"},{name:"u_float_width_offset",type:"1f"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_texture_widen",location:1},{name:"a_vec2_widen",location:2},{name:"a_float_vertex_distance",location:3},{name:"a_float_component_distance",location:4},{name:"a_float_object_length",location:5},{name:"a_vec4_identifier",location:6}]}),stripedLineIdentify:new Nr({vertex:Yr("stripedLineIdentify"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_vec2_scaler_params",type:"2fv"},{name:"u_float_dash_length",type:"1f"},{name:"u_float_space_length",type:"1f"},{name:"u_float_dash2_length",type:"1f"},{name:"u_vec4_dash_color",type:"4fv"},{name:"u_vec4_space_color",type:"4fv"},{name:"u_vec4_border_color",type:"4fv"},{name:"u_float_width",type:"1f"},{name:"u_float_width_offset",type:"1f"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_texture_widen",location:1},{name:"a_vec2_widen",location:2},{name:"a_float_vertex_distance",location:3},{name:"a_float_component_distance",location:4},{name:"a_float_object_length",location:5},{name:"a_vec4_identifier",location:6}]}),vtxColor:new Nr({vertex:Yr("color"),fragment:Jr("texturedColor"),uniforms:[Kr,{name:"u_vec4_color",type:"4fv"},{name:"u_float_opacity",type:"1f"},{name:"u_sr2d_texture",type:"1i"},{name:"u_float_texture_opacity",type:"1f"},{name:"u_float_texture_params",type:"4fv"},{name:"u_float_sprite_texture_coords",type:"4fv"},{name:"u_int_is_textured",type:"1i"}],attributes:[{name:"a_vec2_vertex",location:0}]}),vtxColorIdentify:new Nr({vertex:Yr("colorIdentify"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec4_identifier",location:1}]}),zbmModelIdentify:new Nr({vertex:Yr("zbmModelIdentify"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},...Qr],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec4_identifier",location:1},{name:"a_vec2_dem_position",location:2}]}),buildingIdentify:new Nr({vertex:Yr("buildingIdentify"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_float_height_limitation",type:"1f"},{name:"u_float_tile_height",type:"1f"},{name:"u_float_height_factor",type:"1f"},...Qr],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec4_identifier",location:1},{name:"a_vec2_dem_position",location:2}]}),oneWayLine:new Nr({vertex:Yr("oneWayLine"),fragment:Jr("oneWayLine"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2f"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_vec4_color",type:"4f"},{name:"u_vec4_border_color",type:"4f"},{name:"u_vec2_wing_normal",type:"2f"},{name:"u_vec2_tip_normal",type:"2f"},{name:"u_float_width",type:"1f"},{name:"u_float_length",type:"1f"},{name:"u_float_border_width",type:"1f"},{name:"u_float_border_width_offset",type:"1f"},{name:"u_float_size_factor",type:"1f"},{name:"u_vec2_scale_limits",type:"2fv"},{name:"u_float_tip_height_multiplier",type:"1f"},{name:"u_float_wing_height_multiplier",type:"1f"},{name:"u_float_wing_width_multiplier",type:"1f"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_position",location:0},{name:"a_vec2_direction",location:1},{name:"a_vec2_widen_direction",location:2}]}),zbmModel:new Nr({vertex:Yr("zbmModel"),fragment:Jr("zbmModel"),uniforms:[Kr,{name:"u_vec4_color",type:"4fv"},{name:"u_sr2d_texture",type:"1i"},{name:"u_float_height_factor",type:"1f"},...Qr],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec2_texcoord",location:1},{name:"a_vec2_dem_position",location:2}]}),gltfModel:new Nr({vertex:Yr("gltfModel"),fragment:Jr("gltfModel"),uniforms:[Kr,{name:"u_mat4_instance",type:"mat4"},{name:"u_vec4_color",type:"4fv"},{name:"u_sr2d_texture_0",type:"1i"},{name:"u_float_identify",type:"1f"},...Qr],attributes:[{name:"position",location:0},{name:"normal",location:1},{name:"tangent",location:2},{name:"texcoord_0",location:3},{name:"a_vec3_instance_position",location:4},{name:"a_vec3_instance_offset",location:5},{name:"a_vec3_instance_scale",location:6},{name:"a_vec4_instance_rotation",location:7},{name:"a_vec4_instance_localid",location:8}]}),gltfModelIdentify:new Nr({vertex:Yr("gltfModel"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_mat4_instance",type:"mat4"},{name:"u_vec4_color",type:"4fv"},{name:"u_sr2d_texture_0",type:"1i"},{name:"u_float_identify",type:"1f"},...Qr],attributes:[{name:"position",location:0},{name:"normal",location:1},{name:"tangent",location:2},{name:"texcoord_0",location:3},{name:"a_vec3_instance_position",location:4},{name:"a_vec3_instance_offset",location:5},{name:"a_vec3_instance_scale",location:6},{name:"a_vec4_instance_rotation",location:7},{name:"a_vec4_instance_localid",location:8}]}),simpleLine:new Nr({vertex:Yr("simpleLine"),fragment:Jr("simpleLine"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec4_color",type:"4fv"},{name:"u_float_width",type:"1f"},{name:"u_float_height_factor",type:"1f"},{name:"u_float_height_limitation",type:"1f"},{name:"u_float_tile_height",type:"1f"},{name:"u_float_z_offset",type:"1f"},...Qr],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec4_direction_distance",location:1},{name:"a_vec2_dem_position",location:2}]}),road:new Nr({vertex:Yr("road"),fragment:Jr("road"),uniforms:[Kr,{name:"u_vec4_color",type:"4fv"},{name:"u_float_width",type:"1f"},{name:"u_float_tile_to_pixel_ratio",type:"1f"},{name:"u_float_shift",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec4_normals",location:1},{name:"a_vec2_shift",location:2}]}),roadIdentify:new Nr({vertex:Yr("roadIdentify"),fragment:Jr("roadIdentify"),uniforms:[Kr,{name:"u_float_width",type:"1f"},{name:"u_float_tile_to_pixel_ratio",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec4_normals",location:1},{name:"a_vec4_identifier",location:2}]}),entrance:new Nr({vertex:Yr("entranceArrow"),fragment:Jr("entranceArrow"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2f"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_vec2_scale_limits",type:"2fv"},{name:"u_vec4_color",type:"4f"},{name:"u_vec4_border_color",type:"4f"},{name:"u_vec2_wing_normal",type:"2f"},{name:"u_vec2_tip_normal",type:"2f"},{name:"u_float_width_zpt",type:"1f"},{name:"u_float_tip_height_multiplier",type:"1f"},{name:"u_float_wing_width_multiplier",type:"1f"},{name:"u_float_wing_height_multiplier",type:"1f"},{name:"u_float_border_width_zpt",type:"1f"},{name:"u_float_size_factor",type:"1f"},{name:"u_float_border_width_offset",type:"1f"},{name:"u_float_total_line_length",type:"1f"},{name:"u_float_relative_end_position",type:"1f"},{name:"u_float_vertex_shift",type:"1f"},{name:"u_float_tip_movement_amplitude",type:"1f"},{name:"u_vec2_bounce_direction",type:"2f"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_segment_end",location:1},{name:"a_vec4_texture_widen_arrow_widen",location:2},{name:"a_vec2_widen",location:3},{name:"a_vec2_direction",location:4},{name:"a_float_distance_from_start",location:5},{name:"a_float_object_length",location:6},{name:"a_float_type",location:7},{name:"a_vec4_identifier",location:8}]}),entranceIdentify:new Nr({vertex:Yr("entranceArrow"),fragment:Jr("entranceArrowIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2f"},{name:"u_vec3_projection_scale_style_scale_dpi",type:"3fv"},{name:"u_vec2_scale_limits",type:"2fv"},{name:"u_vec4_color",type:"4f"},{name:"u_vec4_border_color",type:"4f"},{name:"u_vec2_wing_normal",type:"2f"},{name:"u_vec2_tip_normal",type:"2f"},{name:"u_float_width_zpt",type:"1f"},{name:"u_float_tip_height_multiplier",type:"1f"},{name:"u_float_wing_width_multiplier",type:"1f"},{name:"u_float_wing_height_multiplier",type:"1f"},{name:"u_float_border_width_zpt",type:"1f"},{name:"u_float_size_factor",type:"1f"},{name:"u_float_border_width_offset",type:"1f"},{name:"u_float_total_line_length",type:"1f"},{name:"u_float_relative_end_position",type:"1f"},{name:"u_float_vertex_shift",type:"1f"},{name:"u_float_tip_movement_amplitude",type:"1f"},{name:"u_vec2_bounce_direction",type:"2f"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_segment_end",location:1},{name:"a_vec4_texture_widen_arrow_widen",location:2},{name:"a_vec2_widen",location:3},{name:"a_vec2_direction",location:4},{name:"a_float_distance_from_start",location:5},{name:"a_float_object_length",location:6},{name:"a_float_type",location:7},{name:"a_vec4_identifier",location:8}]}),circleMarker:new Nr({vertex:Yr("circleMarker"),fragment:Jr("circleMarker"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_vec4_color",type:"4fv"},{name:"u_float_width",type:"1f"}],attributes:[{name:"a_vec4_vertex",location:0},{name:"a_vec2_widen",location:1}]}),rect:new Nr({vertex:Yr("rect"),fragment:Jr("rect"),uniforms:[Kr,{name:"u_vec4_color",type:"4fv"}],attributes:[{name:"a_vec2_vertex",location:0}]}),rectWithTexture:new Nr({vertex:Yr("rectWithTexture"),fragment:Jr("rectWithTexture"),uniforms:[Kr,{name:"u_sr2d_texture",type:"1i"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_texcoord",location:1}]}),circleMarkerIdentify:new Nr({vertex:Yr("circleMarkerIdentify"),fragment:Jr("colorIdentify"),uniforms:[Kr,{name:"u_vec2_vpt_size",type:"2fv"},{name:"u_float_width",type:"1f"}],attributes:[{name:"a_vec4_vertex",location:0},{name:"a_vec2_widen",location:1},{name:"a_vec4_identifier",location:2}]}),heatmap:new Nr({vertex:Yr("heatmap"),fragment:Jr("heatmap"),uniforms:[Kr,{name:"u_float_radius",type:"1f"},{name:"u_float_intensity",type:"1f"},{name:"u_float_tile_to_pixel_ratio",type:"1f"}],attributes:[{name:"a_vec2_position",location:0},{name:"a_vec2_widen",location:1},{name:"a_float_weight",location:2}]}),heatmapTexture:new Nr({vertex:Yr("heatmapTexture"),fragment:Jr("heatmapTexture"),uniforms:[{name:"u_sr2d_texture",type:"1i"},{name:"u_sr2d_ramp_texture",type:"1i"},{name:"u_float_opacity",type:"1f"}],attributes:[{name:"a_vec2_position",location:0}]}),demMesh:new Nr({vertex:Yr("demMesh"),fragment:Jr("demMesh"),uniforms:[Kr,{name:"u_mat4_flat_map_mvp",type:"mat4"},{name:"u_flat_tex",type:"1i"},{name:"u_hillshade_tex",type:"1i"},...Qr],attributes:[{name:"a_vec2_position",location:0}]}),demGround:new Nr({vertex:Yr("demGround"),fragment:Jr("demGround"),uniforms:[Kr,{name:"u_mat4_model",type:"mat4"},...Qr],attributes:[{name:"a_vec2_position",location:0}]}),demElevation:new Nr({vertex:Yr("demElevation"),fragment:Jr("demElevation"),uniforms:[Kr,{name:"u_sr2d_texture",type:"1i"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_texcoord",location:1}]}),demElevationCopy:new Nr({vertex:Yr("demElevationCopy"),fragment:Jr("demElevationCopy"),uniforms:[Kr,{name:"u_sr2d_texture",type:"1i"},{name:"u_mat4_dem_corrected",type:"mat4"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_texcoord",location:1}]}),demHillshade:new Nr({vertex:Yr("demHillshade"),fragment:Jr("demHillshade"),uniforms:[...Qr,Kr,{name:"u_sr2d_texture",type:"1i"}],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_texcoord",location:1}]}),demFlatBottom:new Nr({vertex:Yr("demFlatBottom"),fragment:Jr("demFlatBottom"),uniforms:[Kr,...Qr],attributes:[{name:"a_vec2_vertex",location:0},{name:"a_vec2_centroid",location:1},{name:"a_vec2_extender",location:2}]}),mesh:new Nr({vertex:Yr("mesh"),fragment:Jr("mesh"),uniforms:[Kr,...Qr,{name:"u_sampler2d_texture",type:"1i"},{name:"u_float_opacity",type:"1f"},{name:"u_vec3_light_direction",type:"3fv"},{name:"u_vec3_light_color",type:"3fv"},{name:"u_vec3_ambient_color",type:"3fv"},{name:"u_vec4_color",type:"4fv"}],attributes:[{name:"a_vec3_vertex",location:0},{name:"a_vec3_normal",location:1},{name:"a_vec2_tex_coord",location:2}]})},e.map.once("idle",(()=>function(t,e){if(window.requestIdleCallback)for(const o in t){const i=t[o];window.requestIdleCallback((()=>{e.isContextLost()||(i.link(e),setTimeout((()=>{window.requestIdleCallback((()=>{e.isContextLost()||i.locate(e)}))}),2e3))}))}}(this.shaderPrograms,this._gl))),this.symbolSettingsList={line:{solid:[{programName:"road",vaoCreator:Fi,webglState:In,objectBinder:jr(ur,xa,ja,Ea),zoomBinder:Mr},{identify:!0,programName:"roadIdentify",vaoCreator:Ci,webglState:An,objectBinder:jr(ur,Ea),zoomBinder:Mr}]},polygon:{fill:[{programName:"vtxColor",vaoCreator:wi,webglState:In,layerBinder:di,objectBinder:jr(ur,Ya,$a,xa,ja,Pa,Ia),tileBinder:Hr},{identify:!0,programName:"vtxColorIdentify",vaoCreator:zi,webglState:kn,programBinder:$o,objectBinder:jr(ur,Ya,$a)}],stroke:[{programName:"simpleLine",vaoCreator:Ri,webglState:In,programBinder:ha,layerBinder:mi($o,ti,ri),objectBinder:jr(gr,ur,Ya,$a,Fa,La,ja,Oa),subRenderIndex:1}]},mesh:{fill:[{programName:"mesh",vaoCreator:ki,webglState:Pn,layerBinder:ii,programBinder:ea,objectBinder:jr(ur,xa,Ta,Pa)}]},polygonExtrusion:{sideFill:[{programName:"diffuse",vaoCreator:Ai,webglState:jn,layerBinder:oi,programBinder:ta,objectBinder:jr(ur,Ya,$a,wa,Ma,ja,hr,Pa)},{programName:"gradientDiffuse",vaoCreator:Ai,webglState:Tn,layerBinder:oi,programBinder:ta,objectBinder:jr(ur,Ya,$a,wa,za,Ma,ja,hr,Pa),subRenderIndex:1},{identify:!0,programName:"buildingIdentify",vaoCreator:ji,webglState:Cn,programBinder:oa,objectBinder:jr(ur,Ya,$a,Ja,hr)}],topFill:[{programName:"diffuse",vaoCreator:Ai,webglState:jn,layerBinder:oi,programBinder:ta,objectBinder:jr(ur,Ya,$a,va,Ma,ja,hr,Pa)},{programName:"diffuse",vaoCreator:Ai,webglState:Tn,layerBinder:oi,programBinder:ta,objectBinder:jr(ur,Ya,$a,va,Ma,ja,hr,Pa),subRenderIndex:1},{identify:!0,programName:"buildingIdentify",vaoCreator:ji,webglState:Cn,programBinder:oa,objectBinder:jr(ur,Ya,$a,Ja,hr)}],sideStroke:[{programName:"line",vaoCreator:Ti,webglState:Mn,programBinder:ia,layerBinder:oi,objectBinder:jr(ur,Ya,$a,wa,za,Aa,Ma,ja,hr,Pa),subRenderIndex:3}],topStroke:[{programName:"simpleLine",vaoCreator:Bi,webglState:Mn,programBinder:ha,layerBinder:mi(Xo,Qo,li),objectBinder:jr(ur,Ya,$a,Fa,ka,Ma,ja,Oa,hr),subRenderIndex:4}]},labelLine:{raster:[{programName:"labelLine",vaoCreator:Li,webglState:En,programBinder:na,objectBinder:jr(_r,vr,Za,Qa,xr,wr,Cr),zoomBinder:Mr,uniformSet:"fontHalo"},{programName:"labelLine",vaoCreator:Li,webglState:En,programBinder:na,objectBinder:jr(_r,Za,Qa,xr,wr,Cr),zoomBinder:Mr,uniformSet:"fontFill",subRenderIndex:1}]},dashedLine:{stroke:[{programName:"stripedLine",vaoCreator:Mi,webglState:In,programBinder:ra,objectBinder:jr(ur,ir,fr,or,Pa)},{identify:!0,programName:"stripedLineIdentify",vaoCreator:Mi,webglState:An,programBinder:ra,objectBinder:jr(ur,ir,fr,Pa,or)}]},oneWayLine:{raster:[{programName:"oneWayLine",vaoCreator:Hi,webglState:In,programBinder:aa,objectBinder:jr(_r,Za,xa,ja,nr,ar)}]},point:{raster:[{programName:"pointSprite",vaoCreator:Ei,webglState:En,programBinder:la,layerBinder:di,objectBinder:jr(_r,Ba,Ga,Ka,Va,Ar)},{identify:!0,programName:"pointSpriteIdentify",vaoCreator:Oi,webglState:kn,programBinder:sa,layerBinder:di,objectBinder:jr(_r,Ba,Ua,Ka,Va,Ar)}],text:[{programName:"labelPoint",vaoCreator:Pi,webglState:En,programBinder:ca,objectBinder:jr(_r,vr,Za,Qa,xr,zr,Sr),uniformSet:"fontHalo",subRenderIndex:1},{programName:"labelPoint",vaoCreator:Pi,webglState:En,programBinder:ca,objectBinder:jr(_r,Za,Qa,xr,zr,Sr),uniformSet:"fontFill",subRenderIndex:2},{identify:!0,programName:"labelPointIdentify",vaoCreator:Ii,webglState:kn,programBinder:Yn(Xo,Jn),objectBinder:jr(_r,Da,xr,Sr),subRenderIndex:1}]},buildingModel:{fill:[{programName:"zbmModel",vaoCreator:Wi,webglState:On,programBinder:Jn,objectBinder:jr(ur,xa,Ca,ja,dr,lr),subRenderIndex:2},{programName:"zbmModelIdentify",vaoCreator:ji,webglState:Cn,programBinder:Xo,objectBinder:jr(ur),subRenderIndex:2,identify:!0}],stroke:[{programName:"simpleLine",vaoCreator:Bi,webglState:Mn,programBinder:ha,layerBinder:mi(Xo,ti,ri),objectBinder:jr(ur,Fa,Ca,ja,Oa,dr),subRenderIndex:5}]},shiftedLine:{solid:[{programName:"road",vaoCreator:Si,webglState:In,objectBinder:jr(ur,xa,ja,Ea,Na),zoomBinder:Mr}]},circle:{fill:[{programName:"circleMarker",vaoCreator:Di,webglState:In,programBinder:da,objectBinder:jr(ur,xa,ja,Ea),subRenderIndex:2},{programName:"circleMarker",vaoCreator:Di,webglState:In,programBinder:da,objectBinder:jr(ur,Fa,ja,Ha),subRenderIndex:1},{programName:"circleMarker",vaoCreator:Di,webglState:In,programBinder:da,objectBinder:jr(ur,Sa,ja,Wa)},{identify:!0,programName:"circleMarkerIdentify",vaoCreator:Ui,webglState:kn,programBinder:da,objectBinder:jr(ur,Ra)}]},arrow:{stroke:[{programName:"entrance",vaoCreator:Ni,webglState:In,programBinder:ma,objectBinder:jr(ur,xa,ja,nr,rr,Pa)},{identify:!0,programName:"entranceIdentify",vaoCreator:Ni,webglState:kn,programBinder:ma,objectBinder:jr(ur,nr,rr,Pa)}]},lineExtrusion:{fill:[{programName:"gradientDiffuse",vaoCreator:Ai,webglState:Pn,layerBinder:ni,programBinder:ta,objectBinder:jr(ur,mr,wa,za,ja,Pa),subRenderIndex:9}],sideStroke:[{programName:"line",vaoCreator:Ti,webglState:Mn,programBinder:ia,layerBinder:ni,objectBinder:jr(ur,mr,wa,za,Aa,ja,Pa),subRenderIndex:10}],topStroke:[{programName:"simpleLine",vaoCreator:Bi,webglState:Mn,programBinder:ha,layerBinder:mi(Xo,Qo,ri),objectBinder:jr(ur,mr,Fa,ja,Oa),subRenderIndex:11}]},gltfModel:{anchor:[{programName:"gltfModel",vaoCreator:Ji,webglState:On,programBinder:Jn,objectBinder:jr(ur,xa,ja)}],instances:[{programName:"gltfModel",vaoCreator:Ki,webglState:On,programBinder:Jn,objectBinder:jr(ur,xa,cr,ja,sr)},{identify:!0,programName:"gltfModelIdentify",vaoCreator:Ki,webglState:Cn,programBinder:Jn,objectBinder:jr(ur)}],fill:[{programName:"gltfModel",vaoCreator:Ki,webglState:On,programBinder:Jn,objectBinder:jr()},{identify:!0,programName:"gltfModel",vaoCreator:Ki,webglState:On,programBinder:Jn,objectBinder:jr()}]},raster:{fill:[{programName:"rectWithTexture",vaoCreator:Zi,webglState:In,objectBinder:jr(ur,tr,qa)}]},heatmap:{framebuffer:[{programName:"heatmap",vaoCreator:Gi,webglState:Hn,objectBinder:jr(ur,yr,br),zoomBinder:Mr}],fill:[{programName:"heatmapTexture",vaoCreator:Vi,webglState:In,objectBinder:jr(ur,tr,er,Xa),subRenderIndex:1}]},dem:{mesh:[{programName:"demMesh",vaoCreator:qi,programBinder:Jn,webglState:Cn,objectBinder:jr(Pr,Lr)},{identify:!0,programName:"demMesh",vaoCreator:qi,programBinder:Yn(Jn,Kn),webglState:Cn,objectBinder:jr(Ir)}],ground:[{programName:"demGround",vaoCreator:qi,programBinder:Jn,tileBinder:Or,webglState:Cn,objectBinder:ba}],elevation:[{programName:"demElevation",vaoCreator:Xi,webglState:Ln,objectBinder:jr(tr)}],hillshade:[{programName:"demHillshade",vaoCreator:Yi,webglState:Ln,programBinder:Jn,objectBinder:jr()}],flatBottom:[{programName:"demFlatBottom",vaoCreator:$i,webglState:Ln,objectBinder:kr}]}},this.addExtension("OES_vertex_array_object").addExtension("OES_element_index_uint").addExtension("OES_standard_derivatives").addExtension("OES_texture_float").addExtension("OES_texture_float_linear").addExtension("ANGLE_instanced_arrays"),this.setPixelRatio(window.devicePixelRatio).setSize(e.layout.mapContainer.clientWidth,e.layout.mapContainer.clientHeight),t.collectStats&&(this.timers=new Wr(this._gl)),e.layout.canvas.addEventListener("webglcontextlost",this.trackContextLost)}setClearColor(t){return this.clearColor=(0,Te.m2)(t),this.state.needRerender=!0,this}setSize(t,e){return this.modules.layout.setCanvasSize(t,e),this.framebuffers.forEach((t=>{t&&t.onResize()})),this.updateIdentifySize(),this}updateIdentifySize(){const t=window.devicePixelRatio,{size:e}=this.state;return this.identifyBuffer.setSize([Math.ceil(e[0]*kt.yV.pixelDensity*t),Math.ceil(e[1]*kt.yV.pixelDensity*t)]),this}clear(t=!0){return this.clearWithColor(this.clearColor,t),this}clearWithColor(t,e=!0){const o=this._gl,i=!0===e?o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT:o.COLOR_BUFFER_BIT;o.depthMask(e),o.clearDepth(1),o.clearColor(t[0],t[1],t[2],t[3]),o.clear(i)}renderTileObjects(t){this.state.collectStats&&this.timers&&this.timers.addTimer(),t.forEach((t=>{t.tryToExpandInstancedObjects(this.state,this.modules)}));const e=Fl(this.state,this.modules),o=this.groupObjectsByFramebuffer(t,!1);if(this.lastRenderedFramebuffers.forEach((t=>{o.groups.some((e=>e.framebuffer===t))||this.clearFramebuffer(t)})),this.lastRenderedFramebuffers=[],o.groups.forEach((({objects:t,tileObjects:i,framebuffer:n})=>{var a,r,l,s;const c=this.modules.map.state.demMode&&(void 0===n||!0===n.useDem);if(n)null===(a=n.onRenderStart)||void 0===a||a.call(n),this.lastRenderedFramebuffers.push(n),n.renderTarget.bind(this._gl),this._gl.viewport(0,0,n.renderTarget.options.size[0],n.renderTarget.options.size[1]),n.clearColor&&this.clearWithColor(n.clearColor,!!n.clearDepth);else{const{size:t,viewport:i}=this.state,n=window.devicePixelRatio;this._gl.viewport(i.left*n,i.bottom*n,t[0]*n,t[1]*n),this.clear(!0),c&&o.flatObjectsGroup&&this.renderDemMesh(e,o.flatObjectsGroup)}const d=null!==(l=null===(r=null==n?void 0:n.getViewProjectionMatrix)||void 0===r?void 0:r.call(n))&&void 0!==l?l:this.modules.camera.viewProjectionMatrix,m=c?this.modules.demManager.demTextureMatrix:void 0;i.forEach((t=>{t.updateMvpMatrix(d,m)})),ol(this.state,this.modules,t,e),null==n||n.renderTarget.unbind(this._gl),null===(s=null==n?void 0:n.onRenderEnd)||void 0===s||s.call(n)})),this.state.collectStats&&this.timers){this.timers.stopTimer();const t=this.timers.tryToGetFirstTimerValue();t&&this.modules.map.emit("gpuRenderTime",t)}return this}renderIdentify(t){const e=this._gl,o=Fl(this.state,this.modules);t.forEach((t=>{t.tryToExpandInstancedObjects(this.state,this.modules)}));const i=this.groupObjectsByFramebuffer(t,!0);i.groups.forEach((({objects:t,tileObjects:n,framebuffer:a})=>{var r,l,s;const c=void 0===a&&this.modules.map.state.demMode,d=a?a.renderTarget:this.identifyBuffer;d.bind(e),this.clearIdentify(),c&&i.flatObjectsGroup&&this.renderDemMesh(o,i.flatObjectsGroup,!0),d.bind(e),e.viewport(0,0,d.options.size[0],d.options.size[1]);const m=null!==(l=null===(r=null==a?void 0:a.getViewProjectionMatrix)||void 0===r?void 0:r.call(a))&&void 0!==l?l:this.modules.camera.viewProjectionMatrix,h=c?this.modules.demManager.demTextureMatrix:void 0;n.forEach((t=>{t.updateMvpMatrix(m,h)})),ol(this.state,this.modules,t,o),d.unbind(e),null==a||a.renderTarget.unbind(this._gl),null===(s=null==a?void 0:a.onRenderEnd)||void 0===s||s.call(a)})),this.state.needRerender=!0}readIdentifyPixels(){const t=this._gl,e=this.identifyBuffer.options.size,o=new Uint8Array(e[0]*e[1]*4);return this.identifyBuffer.bind(t),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,o),this.identifyBuffer.unbind(t),o}getRenderingContext(){return this._gl}getShaderProgram(t){return this.shaderPrograms[t]}destroy(){this.lastRenderedFramebuffers=[],this.framebuffers.forEach((t=>{null==t||t.renderTarget.remove()})),this.modules.layout.canvas.removeEventListener("webglcontextlost",this.trackContextLost);const t=this._gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this.modules.layout.destroy()}addFramebuffer(t){return this.framebuffers.push(t),this.framebuffers.length-1}getFramebuffer(t){if(t!==pn.z)return this.framebuffers[t]}removeFramebuffer(t){var e;null===(e=this.framebuffers[t])||void 0===e||e.renderTarget.remove(),this.framebuffers[t]=void 0}renderDemMesh(t,e,o=!1){const{framebuffer:i,tiles:n}=e;if(!i)return;let a=this.modules.demManager.getFlatMapTextures();if(o&&(a=a.filter((t=>0===t.detailLevel))),!a.length)return;const r=this.modules.demManager.getMeshTiles();if(!r.length)return;const l=r[0],s=(o?l.identifyChildren:l.children)[0],c=this.state.handyStyleId,d=this.modules.styleManager.getStyleLayer(c,Qi.h);if(!d)return;const{size:m,viewport:h}=this.state,p=window.devicePixelRatio,{programBinder:u,layerBinder:g,programName:_}=s.layerSettings,f=this.modules.renderer.getShaderProgram(_),y=[];n.forEach(((t,e)=>{y.push({objects:t,tile:e})})),a.forEach((e=>{var n,a;const l=y.filter((t=>(0,sn.M4)(e.viewport,t.tile.bounds))).reduce(((t,o)=>{o.tile.updateMvpMatrix(e.mvpMatrix,this.modules.demManager.demTextureMatrix);const i=0===e.detailLevel?o.objects:o.objects.filter((t=>{if(t.type===Bo.H.Custom)return!1;const e=this.modules.styleManager.getStyleLayer(t.attributes.styleId,t.attributes.layerId);return!(!e||!0===e.farLimit)}));return t.concat(i)}),[]);if(null===(n=i.onRenderStart)||void 0===n||n.call(i),i.renderTarget.bind(this._gl),this._gl.viewport(0,0,i.renderTarget.options.size[0],i.renderTarget.options.size[1]),i.clearColor&&this.clearWithColor(i.clearColor,!1),ol(this.state,this.modules,l,t,!0),i.renderTarget.unbind(this._gl),null===(a=i.onRenderEnd)||void 0===a||a.call(i),o){this.identifyBuffer.bind(this._gl);const t=this.identifyBuffer.options.size;this._gl.viewport(0,0,t[0],t[1])}else this._gl.viewport(h.left*p,h.bottom*p,m[0]*p,m[1]*p);f.enable(this._gl),null==u||u(this._gl,f,this.state,this.modules,t),null==g||g(this._gl,f,this.state,this.modules),t.useState([s],d),r.forEach((i=>{if((0,sn.M4)(e.viewport,i.bounds)){Oo.Jp(Pl,e.texMatrix,i.modelMatrix),f.bind(this._gl,{u_mat4_flat_map_mvp:Pl}),i.updateMvpMatrix(this.modules.camera.viewProjectionMatrix,this.modules.demManager.demTextureMatrix);const n=o?i.identifyChildren:i.children;t.drawSymbol(n,d,this.state,this.modules)}})),o&&this.identifyBuffer.unbind(this._gl)}))}clearIdentify(){const t=this._gl;t.depthMask(!0),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),t.clearDepth(1),t.clearStencil(0)}clearFramebuffer(t){t.clearColor&&(t.renderTarget.bind(this._gl),this._gl.viewport(0,0,t.renderTarget.options.size[0],t.renderTarget.options.size[1]),this.clearWithColor(t.clearColor,!1),t.renderTarget.unbind(this._gl))}groupObjectsByFramebuffer(t,e){const o=this.modules.demManager,i={},n={framebuffer:void 0,objects:[],tileObjects:new Set},a=e?o.getIdentifyFlatFramebufferId():o.getFlatFramebufferId();let r;if(this.modules.map.state.demMode){const t=this.getFramebuffer(a);t&&(r={framebuffer:t,tiles:new Map})}e||n.objects.push(...this.modules.styleManager.getCustomSceneObjects()),t.forEach((t=>{(e?t.identifyChildren:t.children).forEach((e=>{var o;const a=this.modules.styleManager.getFramebufferId(e.attributes.styleId,e.attributes.layerId),l=a?a[e.sink]:void 0;var s;l!==pn.z&&(void 0!==l?(i[l]||(i[l]={framebuffer:this.getFramebuffer(l),objects:[],tileObjects:new Set}),i[l].objects.push(e),i[l].tileObjects.add(t)):this.modules.map.state.demMode&&(s=e.symbol,"mesh"!==e.sink&&"point"!==s&&"polygonExtrusion"!==s&&"lineExtrusion"!==s&&"buildingModel"!==s&&"gltfModel"!==s)?(null==r?void 0:r.tiles.has(t))?null===(o=null==r?void 0:r.tiles.get(t))||void 0===o||o.push(e):null==r||r.tiles.set(t,[e]):(n.objects.push(e),n.tileObjects.add(t)))}))}));const l=Object.values(i).filter((t=>!!t.framebuffer));return l.sort(((t,e)=>{var o,i,n,a;return(null!==(i=null===(o=t.framebuffer)||void 0===o?void 0:o.renderIndex)&&void 0!==i?i:0)-(null!==(a=null===(n=e.framebuffer)||void 0===n?void 0:n.renderIndex)&&void 0!==a?a:0)})),l.push(n),{flatObjectsGroup:r,groups:l}}}Il.webglVersion=NaN;var Ll=o(1375);class kl{constructor(t,e){this.isIdle=()=>0===this.searchQueue.size,this.state=t,this.modules=e,this.identifyData=[],this.needsUpdate=!1,this.forceUpdate=!1,this.searchQueue=new Map,this.stateDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"padding",type:"padding"},{path:"demMode",type:"boolean"}]),this.debouncedFillCache=(0,Po.D)((()=>{this.needsUpdate=!0}),kt.yV.cacheDebounceTime)}resetCache(){this.colorBuffer=void 0,this.debouncedFillCache()}search(t,e,o=!1){return void 0===this.colorBuffer&&o&&(this.needsUpdate=!0),this.forceUpdate=o,new Promise((o=>{this.searchQueue.set(t,{point:e,resolve:o})}))}searchSync(t){return this.searchHigherPriority(t)}update(){this.stateDiffer.check(this.state)&&(this.resetCache(),this.searchQueue.size>0&&this.searchQueue.clear()),this.needsUpdate&&(this.forceUpdate||this.modules.tileManager.isIdle()&&this.modules.labeler.isIdle()&&this.modules.layers.entranceAnimationFinished()&&this.modules.modelLayer.isIdle()&&!this.modules.buildingHeightAnimator.isAnimating()&&this.modules.assetManager.isIdle())&&(this.fillCache(),this.needsUpdate=!1,this.forceUpdate=!1),void 0!==this.colorBuffer&&this.searchQueue.size>0&&(this.searchQueue.forEach((t=>{t.resolve(this.searchHigherPriority(t.point))})),this.searchQueue.clear())}searchHigherPriority(t){const{viewport:e}=this.state,o=_e.al(t[0]-e.left,t[1]-e.top),i=this.state.identifyPickDistance*window.devicePixelRatio;let n,a=1/0,r=!1;const l=_e.Ue();for(l[0]=o[0]-i;l[0]<o[0]+i;l[0]++)for(l[1]=o[1]-i;l[1]<o[1]+i;l[1]++){const t=this.searchPointInCache(l);if(!t)continue;const e=void 0!==t.dynamicObjectId;if(r&&!e)continue;const i=_e.TE(o,l);(!n||!r&&e||t.phase>n.phase||t.phase===n.phase&&i<a)&&(n=t,a=i,e&&(r=!0))}return n}searchPointInCache(t){if(void 0===this.colorBuffer)return;const e=kt.yV.pixelDensity*window.devicePixelRatio,o=this.modules.renderer.identifyBuffer.options.size,i=this.state.size;if(t[0]<0||t[0]>i[0]-1||t[1]<0||t[1]>i[1]-1)return;const n=Math.floor(t[0]*e),a=4*((o[1]-1-Math.floor(t[1]*e))*o[0]+n),r=(this.colorBuffer[a+3]<<24|this.colorBuffer[a+2]<<16|this.colorBuffer[a+1]<<8|this.colorBuffer[a])>>>0;return this.indexToIdentifierResponse(r)}fillCache(){const t=this.modules.tileManager.getTileObjects();this.modules.renderer.renderIdentify(t),this.colorBuffer=this.modules.renderer.readIdentifyPixels();const e=this.state.metrics;Number.isNaN(e.interactive)&&(e.interactive=performance.now()-e.start),this.identifyData=this.modules.tileManager.getDisplayedIdentifyData(),this.modules.modelLayer.getDisplayedIdentifyData().forEach((t=>this.identifyData.push(t))),this.modules.floorManager.getDisplayedIdentifyData().forEach((t=>this.identifyData.push(t)));const o=this.modules.personalPoiManager.getIdentifyDataChunk();void 0!==o&&this.identifyData.push(o),this.modules.layers.getDynamicObjectLayers().forEach((t=>{t.getIdentifyData().forEach((t=>this.identifyData.push(t)))}))}indexToIdentifierResponse(t){var e,o,i;for(let n=0;n<this.identifyData.length;n++){const a=this.identifyData[n],{dynamicObjectId:r,ids:l,metatileHash:s,sourceId:c,tileKey:d}=a,{startIndex:m,endIndex:h,idBuffer:p,floorIdBuffer:u,phaseBuffer:g,sublayerBuffer:_,styleIdBuffer:f,layerIdBuffer:y,instanceIdBuffer:b,objectClassBuffer:x,centerBuffer:v,strings:w}=l;if(t<m||t>h)continue;const z=t-m,F=new Uint32Array(p,4*z*2,2),S=new Uint32Array(_)[z],C=new Uint8Array(b)[z],M=new Uint32Array(x)[z];let P,I,L="";const k=new Uint32Array(u,4*z*2,2);k[0]===ln.gl&&k[1]===ln.gl||(I=(0,ve.Ru)(k[0],k[1]));const A=this.modules.assetManager.getMetatile(s);if(A){(null===(e=A.reverseDictionaries.db_sublayer)||void 0===e?void 0:e[S])&&(P=A.reverseDictionaries.db_sublayer[S]);const n=w[t];L=void 0!==n?n.objectClass:null!==(i=null===(o=null==A?void 0:A.reverseDictionaries.db_object_class)||void 0===o?void 0:o[M])&&void 0!==i?i:""}const j=new Uint16Array(f)[z],T=new Uint32Array(y)[z],E=this.modules.styleManager.getStyleLayer(j,T);if(!E||"custom"===E.type||"gltfModel"===E.type&&E.style.useThreeJs)return;const O=new Int32Array(v,z*Int32Array.BYTES_PER_ELEMENT*2,2);return{id:(0,ve.Ru)(F[0],F[1]),floorId:I,phase:new Float32Array(g)[z],dynamicObjectId:r,sourceId:c,tileKey:d,sublayer:P,symbol:E.type,instanceId:C,objectClass:L,center:O[0]!==No.Cd||O[1]!==No.Cd?[O[0],O[1]]:void 0}}}}var Al=o(6479);function jl(t,e,o){const i=document.createElement("img");return i.width=e,i.height=o,new Promise((e=>{i.onload=()=>e(i),i.src=`data:image/svg+xml;base64,${btoa(t)}`}))}function Tl(t){const e=new Blob([t],{type:"image/png"}),o=URL.createObjectURL(e),i=document.createElement("img");return new Promise((e=>{i.onload=()=>{URL.revokeObjectURL(o),e(i)},0===t.byteLength?i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=":i.src=o}))}function El(t,e){if(e[0]===t.width&&e[1]===t.height)return t;const o=document.createElement("canvas"),i=o.getContext("2d");return o.width=e[0],o.height=e[1],i.shadowColor="transparent",i.shadowBlur=0,i.drawImage(t,0,0,e[0],e[1]),o}var Ol=o(3487),Hl=o(3144),Wl=o(4847);class Rl extends Wl.g{constructor(t){super(),this.sync=t=>{const{dictionaries:e,reverseDictionaries:o}=t;this.dictionaries=e,this.reverseDictionaries=o},t.set("syncMetatile",this.sync)}}var Bl=o(2627),Nl=o(7966),Dl=o(1284);function Ul(t){const e=new Dl.x;let o;for(const i of t.layers)void 0!==i.groupId&&o&&i.groupId===o.groupId?i.renderIndex=o.renderIndex:i.renderIndex=e.getIndex(),o=i;for(const e in t.groupsById){const o=t.groupsById[e];o&&(o.layers[0]&&(o.renderIndex=o.layers[0].renderIndex))}}var Zl=o(199);function Gl(t,e,o){const{map:{state:i},collector:n,imageManager:a,renderer:r,tileManager:l}=o;let s;try{s=function(t,e,o){const i=(0,Te.jJ)(t.styleZoom,t.styleState,[]),n=e.style.color,a=[];if(r=n.argument,"object"!=typeof r||"heatmap-density"!==r.type)throw new Error(`Heatmap color must be interpolate expression with 'heatmap-density' argument in layer ${e.id}`);var r;const l=o-1;for(let t=0;t<o;t++){const e=t/l,o=(0,Te.o4)(n,e,i);a.push(...o.value)}return new Wo(new Uint8Array(a),{size:[o,1]})}(i,t,256)}catch(t){return void console.error(t)}const c=a.addPreparedTexture(s),d=r.getRenderingContext(),{downscale:m}=t.style,{size:h}=i,p=new Ro({size:[Math.ceil(h[0]*window.devicePixelRatio/m),Math.ceil(h[1]*window.devicePixelRatio/m)],magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,wrapS:Wo.ClampToEdgeWrapping,wrapT:Wo.ClampToEdgeWrapping}),u=p.getTexture();if(!u)return void console.error("Can't init HeatMap Layer. Missing FrameBuffer texture");const g=a.addPreparedTexture(u),_=r.addFramebuffer({renderTarget:p,clearColor:[0,0,0,0],onResize:()=>{p.setSize([Math.ceil(i.size[0]*window.devicePixelRatio/m),Math.ceil(i.size[1]*window.devicePixelRatio/m)]),p.bind(d),p.unbind(d);const t=p.getTexture();t&&a.updatePreparedTexture(g,t)}});(0,Ie.XI)({collector:n,generator:fi.B.generateTexture,args:[e,t,g,c]});const f=n.getAccumulatedData(),y=new fe.W("dynamicObject",f.data,r);return l.addObject(y),n.reset(),t.framebufferId={framebuffer:_},t=>{l.removeObject(y),y.clean(t),a.deleteTexture(g),a.deleteTexture(c),r.removeFramebuffer(_)}}class Vl{constructor(t){this.modules=t,this.customLayers=new Map,this.styleIndex=1,this.handyStylesMap=new Map,this.waitingStyleRequests=new Map,this.onRemoveLayerHooks=new Map}createStyle(t,e,o,i){const{state:n}=this.modules.map;if(!Number.isNaN(n.handyStyleId)){const t=this.getStyle(n.handyStyleId);t&&(t.layers.forEach((t=>{const e=this.onRemoveLayerHooks.get(t.innerId);e&&e(n)})),this.onRemoveLayerHooks.clear())}const a=this.styleIndex++,r=(0,Ae.Cp)(t,a,o,i);(0,Nl.As)(r,e),this.handyStylesMap.set(r.id,r);const l=this.waitingStyleRequests.get(a);return l&&l.resolve(r),this.modules.workers.parser.syncStyle(r),this.modules.workers.labeling.syncStyle(r),r.layers.forEach((t=>this.initHandyLayer(a,t))),r}addLayer(t,e){const o=this.getStyle(this.modules.map.state.handyStyleId);if(!o)return void console.error('Cannot add layer before map style was completely set. Please use "styleload" event.');const i=(0,Ae.ys)(t);i&&(!function(t,e,o){var i;if(void 0===t.id)throw new Error("The layer id must be set.");if(e.layerIdToInnerId[t.id])throw new Error(`The layer with id «${t.id}» already exists in the map style.`);let n=-1;if(o){const a=Object.values(e.groupsById).find((t=>t&&t.id===o));if(a)n=e.layers.findIndex((t=>t.groupId===a.innerId));else{n=e.layers.findIndex((t=>t.id===o));const a=null===(i=e.layers[n])||void 0===i?void 0:i.groupId;if(void 0!==a&&"group"===t.type)throw new Error(`Group layer with id «${t.id}» can't be added before layer with id «${o}» in group with innerId «${a}». Layer groups doesn't support nesting.`)}}else n=e.layers.length;if(-1===n)throw new Error(`The layer with beforeId «${o}» doesn't exist in the map style.`);let a=[];if("group"!==t.type){a=[t];const o=n!==e.layers.length?e.layers[n]:void 0;if(o&&void 0!==o.groupId){const i=e.groupsById[o.groupId];if(!i)return void(0,el.cM)(`Для слоя с id «${o.id}» находящегося в группе с groupId «${o.groupId}» отсутствует группа id в стиле c id «${e.id}»`);const n=i.layers.findIndex((t=>t.id===o.id));if(-1===n)return void(0,el.cM)(`Слой с id «${o.id}» и groupId «${o.groupId}» отсутствует группе в стиле c id «${e.id}»`);t.groupId=i.innerId,i.layers.splice(n,0,t),i.layers.forEach(((t,e)=>t.groupIndex=e))}}else e.groupsById[t.innerId]=t,e.layerIdToInnerId[t.id]=t.innerId,a=t.layers;e.revision++,e.layers.splice(n,0,...a),a.forEach((t=>{if(e.layersById[t.innerId]=t,e.layerIdToInnerId[t.id]=t.innerId,"point"===t.type||"polygon"===t.type){const o=Math.max(0,...Object.keys(e.rasterSets.byIndex).map((t=>Number(t)))),i=new Dl.x(o+1);(0,Ae.z8)(t,i).forEach((t=>{e.rasterSets.byKey[t.key]||(e.rasterSets.byIndex[t.index]=t,e.rasterSets.byKey[t.key]=t)}))}})),Ul(e)}(i,o,e),"custom"===t.type&&"custom"===i.type?this.initCustomLayer(o.id,i,t.render,t.onRemove,t.onAdd):this.initHandyLayer(o.id,i),this.modules.workers.parser.syncStyle(o),this.modules.workers.labeling.syncStyle(o))}setTerrainStyle(t){const e=this.getStyle(this.modules.map.state.handyStyleId);e&&(e.dem=(0,Ae.vR)(t),this.modules.demManager.onStyleChange(),this.modules.map.state.needRerender=!0)}addIcon(t,e){const o=this.getStyle(this.modules.map.state.handyStyleId);if(!o)return console.error('Cannot add icons before map style was completely set. Please use "styleload" event.'),!1;const i=o.layers.filter((e=>"point"===e.type&&void 0!==e.style.iconImage&&(0,Te.EG)(e.style.iconImage).some((e=>e===t)))),n=o.layers.filter((e=>"polygon"===e.type&&Boolean(e.style.textureImage)&&(0,Te.EG)(e.style.textureImage).some((e=>e===t)))),a=Boolean(o.icons[t]),r=i.some((e=>{const i=(0,ga.PR)(t,e.style.iconAnchor[0],e.style.iconAnchor[1]);return Boolean(o.rasterSets.byKey[i])})),l=n.some((()=>{const e=(0,ga.FD)(t);return Boolean(o.rasterSets.byKey[e])}));if(r||l||a)return console.error(`The icon with the name ${t} already exists.`),!1;const s=Math.max(0,...Object.keys(o.rasterSets.byIndex).map((t=>Number(t)))),c=new Dl.x(s+1);return[...i,...n].forEach((e=>{const{imageType:i,anchor:n}=(0,Ae.Jn)(e),a=(0,Ae.Wy)(t,i,c,n);o.rasterSets.byIndex[a.index]=a,o.rasterSets.byKey[a.key]=a})),o.icons[t]=e,o.revision++,this.modules.workers.parser.syncStyle(o),this.modules.workers.labeling.syncStyle(o),!0}removeIcon(t){const e=this.getStyle(this.modules.map.state.handyStyleId);if(!e)return console.error('Cannot remove icons before map style was completely set. Please use "styleload" event.'),!1;delete e.icons[t];let o=!1;return e.layers.filter((t=>"point"===t.type&&Boolean(t.style.iconImage)||"polygon"===t.type&&Boolean(t.style.textureImage))).forEach((i=>{const{image:n,imageType:a,anchor:r}=(0,Ae.Jn)(i);(0,Te.EG)(n).forEach((i=>{if(i===t){const t="icon"===a?(0,ga.PR)(i,r[0],r[1]):(0,ga.FD)(i),n=e.rasterSets.byKey[t];n&&(this.modules.assetManager.removeRasterSet(n,e.id),o=!0)}}))})),!!o&&(e.revision++,this.modules.workers.parser.syncStyle(e),this.modules.workers.labeling.syncStyle(e),!0)}addModel(t,e){const o=this.getStyle(this.modules.map.state.handyStyleId);if(!o)return console.error('Cannot add models before map style was completely set. Please use "styleload" event.'),!1;return void 0!==o.modelIndex[t]?(console.error(`The model with the name ${t} already exists.`),!1):(o.models.push(e),o.modelIndex[t]=o.models.length-1,o.revision++,this.modules.workers.parser.syncStyle(o),this.modules.workers.labeling.syncStyle(o),!0)}removeLayer(t){const e=this.getStyle(this.modules.map.state.handyStyleId);e?Zl.T.some((e=>e.id===t))||(!function(t,e,o){const i=e.layerIdToInnerId[t];if(void 0===i)return;e.revision++;let n=[];const a=e.groupsById[i];if(a){if(n=a.layers,delete e.groupsById[i],delete e.layerIdToInnerId[a.id],0===n.length)return}else{const o=e.layersById[i];if(!o)return void(0,el.cM)(`Слой с id «${t}» есть в списке идентификаторов слоев стиля, но при этом отсутствует в стиле c id «${e.id}»`);if(void 0!==o.groupId&&void 0!==o.groupIndex){const t=e.groupsById[o.groupId];t&&(t.layers.splice(o.groupIndex,1),t.layers.forEach(((t,e)=>t.groupIndex=e)))}n=[o]}const r=e.layers.findIndex((t=>t.id===n[0].id));-1!==r&&(n.forEach((t=>{const{styleManager:i,map:{state:n}}=o,a=i.getRemoveLayerHook(t.innerId);a&&(a(n),i.clearRemoveLayerHook(t.innerId)),delete e.layersById[t.innerId],delete e.layerIdToInnerId[t.id]})),e.layers.splice(r,n.length),Ul(e))}(t,e,this.modules),this.modules.workers.parser.syncStyle(e),this.modules.workers.labeling.syncStyle(e)):console.error('Cannot remove layer before map style was completely set. Please use "styleload" event.')}setDynamicStyle(t){this.handyStylesMap.set(ke.jf,t),this.modules.workers.parser.syncStyle(t),this.modules.workers.labeling.syncStyle(t)}getStyle(t){return this.handyStylesMap.get(t)}getStyleLayer(t,e){var o;return null===(o=this.handyStylesMap.get(t))||void 0===o?void 0:o.layersById[e]}getStyleRevision(t){var e;return(null===(e=this.getStyle(t))||void 0===e?void 0:e.revision)||0}setFramebufferId(t,e,o){var i;const n=null===(i=this.handyStylesMap.get(t))||void 0===i?void 0:i.layersById[e];n&&(n.framebufferId=o)}getFramebufferId(t,e){var o,i;return null===(i=null===(o=this.handyStylesMap.get(t))||void 0===o?void 0:o.layersById[e])||void 0===i?void 0:i.framebufferId}waitForStyle(t){const e=this.handyStylesMap.get(t);if(e)return Promise.resolve(e);const o=this.waitingStyleRequests.get(t);if(o)return o.promise;const i={resolve:void 0,promise:void 0};return i.promise=new Promise((t=>{i.resolve=t})),this.waitingStyleRequests.set(t,i),i.promise}addRemoveLayerHook(t,e){this.onRemoveLayerHooks.set(t,e)}getRemoveLayerHook(t){return this.onRemoveLayerHooks.get(t)}clearRemoveLayerHook(t){this.onRemoveLayerHooks.delete(t)}callCustomLayerRender(t){const e=this.customLayers.get(t);e&&e.renderFunction(this.modules.renderer.getRenderingContext())}getCustomSceneObjects(){const t=[];return this.customLayers.forEach((e=>t.push(e.sceneObject))),t}initHandyLayer(t,e){let o;switch(e.type){case"group":return void e.layers.forEach((e=>this.initHandyLayer(t,e)));case"heatmap":o=Gl(e,t,this.modules)}o&&this.modules.styleManager.addRemoveLayerHook(e.innerId,o)}initCustomLayer(t,e,o,i,n){const a={sceneObject:{type:Bo.H.Custom,attributes:{styleId:t,layerId:e.innerId,tileData:[]},tile:{zoomLevel:0},layerSettings:{}},layer:e,renderFunction:o};null==n||n(),this.customLayers.set(e.innerId,a),this.modules.styleManager.addRemoveLayerHook(e.innerId,(()=>{null==i||i(),this.customLayers.delete(e.innerId)}))}}var ql=o(4619);const Xl=new Set(["position","texcoord_0","normal","tangent"]);class $l extends fe.Y{constructor(){super("model",[0,0,0,0]),this.children=[],this.identifyChildren=[]}setTileCoords(t){throw new Error("GLTF tile object does not support setting coordinates")}tryToExpandInstancedObjects(t,e){}}function Yl(t,e,o){return Jl(t,o.scenes[o.scene].nodes,o,[],e),t}function Jl(t,e,o,i,n){var a,r;if(!e)return;const l=n.symbolSettingsList.gltfModel.fill;if(l&&0!==l.length)for(const s of e){const e=o.nodes[s];if(e.matrix&&i.push(e.matrix),e.translation&&e.rotation&&e.scale){const t=Oo.Ue();Oo.Iw(t,e.rotation,e.translation,e.scale),i.push(t)}if(void 0!==e.mesh){const s=o.meshes[e.mesh],c=new $l;c.modelMatrix=ts(i),t.objects.push(c);for(const e of s.primitives){const i={};let s,d=0;for(const n in e.attributes){const l=n.toLowerCase();if(!Xl.has(l)){0;continue}const s=e.attributes[n],c=o.accessors[s];if(void 0===c.bufferView)continue;const m=o.bufferViews[c.bufferView];if(void 0===m)continue;const h=Ql(t,o,c.bufferView,c.componentType);h&&(i[n.toLowerCase()]=new ui(h,{itemSize:es(c.type),dataType:is(c.componentType),stride:null!==(a=m.byteStride)&&void 0!==a?a:0,offset:null!==(r=c.byteOffset)&&void 0!==r?r:0,normalized:!!c.normalized}),0===d&&(d=c.count))}if(void 0!==e.indices){const i=o.accessors[e.indices];if(void 0===i.bufferView)continue;if(s=Ql(t,o,i.bufferView,i.componentType,!0),!s)continue;d=i.count}if(void 0===e.material)continue;const m=o.materials[e.material];if(!m)continue;if(void 0===m.pbrMetallicRoughness)continue;const h={styleId:NaN,layerId:NaN,modelId:NaN,colorTexture:NaN,linkedIds:[],texmap:[],tileData:[]},p=m.pbrMetallicRoughness.baseColorTexture;if(void 0===p)continue;p.texCoord,Kl(t,o,p),h.colorTexture=p.index;const u=n.getShaderProgram("gltfModel"),g=new gi.j(u,i,s);for(const t of l)(t.identify?c.identifyChildren:c.children).push({type:Bo.H.Tile,layerSettings:t,stride:1,rangeStart:0,rangeEnd:d,attributes:h,attributesHash:JSON.stringify(h),drawMode:e.mode,vao:g,tile:c,symbol:"gltfModel",sink:"fill"})}}e.children&&Jl(t,e.children,o,i,n)}}function Kl(t,e,o){const i=e.textures[o.index];if(!i||void 0===i.source||void 0===i.sampler)return;const n=e.images[i.source],a=e.samplers[i.sampler];if(!a||!n)return;const r={};a.magFilter&&(r.magFilter=ns(a.magFilter)),a.minFilter&&(r.minFilter=ns(a.minFilter)),a.wrapS&&(r.wrapS=ns(a.wrapS)),a.wrapT&&(r.wrapT=ns(a.wrapT)),t.textures[o.index]=new Wo(n.image,r)}function Ql(t,e,o,i,n=!1){const a=e.bufferViews[o];if(void 0!==a){if(!t.buffers[o]){const r=e.buffers[a.buffer].buffer;if(!r)return;const l=new DataView(function(t){if(t instanceof ArrayBuffer)return t;return t.buffer}(r),a.byteOffset,a.byteLength),s=new pi.l(l,{dataType:is(i)});s.type=n?pi.l.ElementArrayBuffer:pi.l.ArrayBuffer,t.buffers[o]=s}return t.buffers[o]}}function ts(t){if(0===t.length)return Oo.Ue();const e=Oo.d9(t[0]);for(let o=1;o<t.length;o++)Oo.dC(e,e,t[o]);return e}function es(t){switch(t[0]){case"S":return 1;case"V":return Number(t[3]);case"M":return Math.pow(Number(t[3]),2)}return console.error(`Failed to determine channels count from accessor type = ${t}`),0}const os=window.WebGLRenderingContext;function is(t){if(void 0===t)return;const e={[os.UNSIGNED_BYTE]:pi.l.UnsignedByte,[os.UNSIGNED_SHORT]:pi.l.UnsignedShort,[os.UNSIGNED_INT]:pi.l.UnsignedInt,[os.BYTE]:pi.l.Byte,[os.SHORT]:pi.l.Short,[os.INT]:pi.l.Int,[os.FLOAT]:pi.l.Float}[t];return void 0===e?(console.error(`Cannot translate ${t} gltf componentType`),NaN):e}function ns(t){if(void 0===t)return;const e={[os.CLAMP_TO_EDGE]:Wo.ClampToEdgeWrapping,[os.REPEAT]:Wo.Repeat,[os.MIRRORED_REPEAT]:Wo.MirroredRepeat,[os.NEAREST]:Wo.NearestFilter,[os.NEAREST_MIPMAP_NEAREST]:Wo.NearestMipMapNearestFilter,[os.NEAREST_MIPMAP_LINEAR]:Wo.NearestMipMapLinearFilter,[os.LINEAR]:Wo.LinearFilter,[os.LINEAR_MIPMAP_NEAREST]:Wo.LinearMipMapNearestFilter,[os.LINEAR_MIPMAP_LINEAR]:Wo.LinearMipMapLinearFilter,[os.RGBA]:Wo.RgbaFormat,[os.ALPHA]:Wo.AlphaFormat,[os.RGB]:Wo.RgbFormat,[os.UNSIGNED_BYTE]:Wo.UnsignedByte,[os.FLOAT]:Wo.Float}[t];return void 0===e?(console.error(`Failed to translate texture parameter ${t}`),NaN):e}class as{constructor(t,e){this.loadFont=(t,e)=>{let o=this.requestFontRanges.get(t,e);return o||(o=this.createLoadFontRequest(t,e),this.requestFontRanges.set(t,e,o)),o},this.state=t,this.modules=e,this.requestedMetatiles=new Set,this.metatiles={},this.loadedRasters={},this.failedRasters={},this.requestedRasters={},this.requestedSvgs={},this.disableIconCache=t.disableIconCache,this.textures=[],this.fontGlyphs={},this.fontTextures=new Ol.c,this.requestFontRanges=new Ol.c,this.pendingFontRanges=0,this.loadedFontRanges=0,this.models={},this.visibleBuildingIds=new Set,this.metatileLoader=(t,e,o)=>{const i=(0,me.GG)(e);fetch(t).then((t=>{if(!t.ok)throw new Error(`Failed to load metatile "${i}"`);return t.json()})).then((t=>this.setMetatile(e,o,t))).catch((t=>console.error(t)))};const{fnRegistry:o}=this.modules.workers;o.set("addNewRasterSets",((t,e)=>{const o=this.modules.styleManager.getStyle(t);if(!o)return void console.error(`Not found style ${t} in AssetManager#addNewRasterSets`);const{rasterSets:i}=o;e.forEach((t=>{i.byIndex[t.index]=t,i.byKey[t.key]=t}))})),o.set("loadFont",this.loadFont),this.setPreparedMetatile(-1,me.nF),this.setPreparedMetatile(No.L2,(0,ql.X4)()),this.metatiles[No.DL]=new Rl(o)}loadMetatile(t,e,o){this.requestedMetatiles.has(e)||(this.requestedMetatiles.add(e),this.metatileLoader(t,e,o))}setMetatile(t,e,o){(0,Bl.lG)(o),o.tileProps=o.tileProps.map(Bl.dx);const i=(0,me.ev)(o);this.setPreparedMetatile(t,i),void 0===this.projectMetatileMetadata&&(this.projectMetatileMetadata={regionId:e,metatileHash:t})}setPreparedMetatile(t,e){this.metatiles[t]=e,this.modules.workers.parser.setMetatile(t,e)}prepareRasters(t,e,o){var i,n;const a=this.modules.styleManager.getStyle(t);if(!a)return void console.error(`Not found style ${t} in AssetManager#prepareRasters`);const{rasterSets:r}=a,l=this.modules.renderer.getRenderingContext(),s=e.length/7;for(let t=0;t<s;t++){const s=e[7*t],c=e[7*t+1],d=e[7*t+6],m=e[7*t+2],h=e[7*t+3],p=e[7*t+4],u=e[7*t+5],g=r.byIndex[s];if(g.isSvg){const t={rasterIndex:c,rasterSetIndex:s,x:m,y:h,w:p,h:u,anchorX:g.anchorX,anchorY:g.anchorY,atlasIndex:d,isPacked:!0};g.rasters[c]=t,null===(n=null===(i=this.requestedSvgs[a.id])||void 0===i?void 0:i[s])||void 0===n||n.then((e=>{const o=this.textures[t.atlasIndex];jl(e,t.w,t.h).then((e=>{o.subImage(l,e,t.x,t.y),this.state.needRerender=!0}))}))}else{const t=g.rasters[c];t.x=m,t.y=h,t.atlasIndex=d,t.isPacked=!0}void 0===this.textures[d]&&(this.textures[d]=new Wo(void 0,{size:kt.a5,flipY:!1,premultiplyAlpha:!go||!g.isSvg,unit:d,magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter}).prepare(this.modules.renderer.getRenderingContext()));const _=this.textures[d],f=o&&o[t];void 0===f||(_.subImage(l,f,m,h),this.state.needRerender=!0)}this.modules.workers.labeling.updatePackingInfo(t,e)}loadRasters(t){const e=t.length/3;for(let o=0;o<e;o++){const e=t[3*o],i=t[3*o+1],n=t[3*o+2],a=i<<16|n,r=this.modules.styleManager.getStyle(e);if(!r){console.error(`Not found style ${e} in AssetManager#loadRasters`);continue}if(this.loadedRasters[e]||(this.loadedRasters[e]=new Set,this.failedRasters[e]=new Set,this.requestedRasters[e]=new Set),this.requestedRasters[e].has(a))continue;const{rasterSets:l}=r,s=l.byIndex[i];!1!==s.rasters[n].isPacked?(this.requestedRasters[e].add(a),s.isSvg?this.loadSvg(a,r,i):this.loadPng(a,r,i,n)):console.error(`Try to load not packed raster ${s.key}`)}}removeRasterSet(t,e){const{key:o,index:i,rasters:n}=t;delete this.requestedSvgs[e][i],n.forEach((({rasterSetIndex:t,rasterIndex:o})=>{var i,n,a;const r=t<<16|o;null===(i=this.loadedRasters[e])||void 0===i||i.delete(r),null===(n=this.failedRasters[e])||void 0===n||n.delete(r),null===(a=this.requestedRasters[e])||void 0===a||a.delete(r)})),t.rasters.length=0;const a=this.modules.styleManager.getStyle(e);a&&(delete a.rasterSets.byIndex[i],delete a.rasterSets.byKey[o])}getMetatile(t){return this.metatiles[t]}getProjectMetadata(){return this.projectMetatileMetadata}getFontGlyphs(t){return this.fontGlyphs[t]||{}}getFontTextureByName(t,e){return this.fontTextures.get(t,e)}isIdle(){let t=0,e=0;for(const o in this.requestedRasters)t+=this.requestedRasters[o].size,e+=this.loadedRasters[o].size+this.failedRasters[o].size;return t===e&&this.pendingFontRanges===this.loadedFontRanges}dangerouslySetMetatiles(t){this.metatiles=t}dangerouslySetRasters(t,e){this.loadedRasters=t,this.failedRasters=e}addModel(t){const e=this.getModelUniqueKey(t);void 0===this.models[e]&&(this.models[e]={buffers:[],objects:[],textures:[]},this.modules.workers.parser.loadModel(this.state.handyStyleId,t).then((t=>{t&&(Yl(this.models[e],this.modules.renderer,t),this.state.needRerender=!0)})))}getModel(t){return this.models[this.getModelUniqueKey(t)]}invalidateUsedModels(){const t=new Set,e=this.modules.tileManager.getTileObjects();for(const o of e)for(const e of o.children){if("gltfModel"!==e.symbol)continue;const o=e.attributes.modelId,i=this.getModel(o);i?t.add(i):this.addModel(o)}for(const e in this.models){const o=this.models[e];!t.has(o)&&o.buffers.length>0&&(o.objects.forEach((t=>t.clean(this.state))),delete this.models[e])}}getModelUniqueKey(t){return t>0?`${this.state.handyStyleId},${t}`:String(t)}createLoadFontRequest(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){this.pendingFontRanges+=1;const o=Number.isNaN(this.state.handyStyleId)?1:this.state.handyStyleId;try{const i=yield this.modules.styleManager.waitForStyle(o),n=yield fetch((0,Nl.fb)(t,e,i)).then((t=>{if(!t.ok)throw new Error;return t})).catch((()=>(console.error(`Could not load font ${t} for range ${e} fallback to the default font ${No.Uo}`),fetch((0,Nl.fb)(No.Uo,e,i)).then((t=>{if(!t.ok)throw new Error(`Could not load default font ${No.Uo} for range ${e}`);return t}))))).then((t=>t.arrayBuffer())),a=(0,Hl.Xq)(n);return this.prepareFontAtlas(t,e,a),this.modules.workers.labeling.appendFont(t,a.glyphData),this.loadedFontRanges+=1,this.modules.workers.labeling.markFontAsLoaded(t,e)}catch(o){return console.error(o),this.loadedFontRanges+=1,this.modules.workers.labeling.markFontAsLoaded(t,e)}}))}prepareFontAtlas(t,e,o){const{bitmap:i,width:n,height:a,glyphData:r}=o;this.fontGlyphs[t]||(this.fontGlyphs[t]={});for(const e in r)this.fontGlyphs[t][e]=r[e];const l=new Wo(new Uint8Array(i),{size:[n,a],magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter,format:Wo.AlphaFormat,premultiplyAlpha:!1,flipY:!1,unit:0});this.fontTextures.set(t,e,l),this.state.needLabeling=!0}loadPng(t,e,o,i){const n=this.modules.renderer.getRenderingContext(),{rasterSets:a}=e,r=a.byIndex[o],l=r.rasters[i],s=this.textures[l.atlasIndex];let c="";if(r.type===Al.f.Unique){const t=(0,ve.Ak)(r.id);c=r.url?r.url.replace("image",`image_${l.w.toString()}x${l.h.toString()}`):(0,de.Gr)("dynamicPoi",{host:this.state.tileServer,tileSet:this.state.tileSet,protocol:this.state.tileProtocol,subdomain:(0,de.Sy)(this.state.subdomains,t),id:t,width:l.w.toString(),height:l.h.toString(),regionId:String(r.regionId)})}else r.type===Al.f.Static&&(c=(0,Nl.m_)(r.name,e,(0,de.Sy)(this.state.subdomains,r.name)));this.modules.workers.parser.prepareAtlas(c).then((o=>{o?(o.isBitmap?(s.subImage(n,o.data[0],l.x,l.y),this.state.needRerender=!0):Tl(o.data[0]).then((t=>{s.subImage(n,t,l.x,l.y),this.state.needRerender=!0})),this.loadedRasters[e.id].add(t)):this.failedRasters[e.id].add(t)}))}loadSvg(t,e,o){const i=this.modules.renderer.getRenderingContext(),n=e.rasterSets.byIndex[o];if(!e.iconBaseUrl||!e.legacyIconBaseUrl)return console.error("Attempt to load svg without existing style"),void this.failedRasters[e.id].add(t);const a=e.icons[n.name];let r="";r=(null==a?void 0:a.url)?(0,Nl.bX)(a.url,e,(0,de.Sy)(this.state.subdomains,n.name)):(0,Nl.m_)(n.name,e,(0,de.Sy)(this.state.subdomains,n.name)),this.requestedSvgs[e.id]||(this.requestedSvgs[e.id]={});let l=this.requestedSvgs[e.id][o];l&&!this.disableIconCache||(l=this.requestedSvgs[e.id][o]=fetch(r,{cache:this.disableIconCache?"no-cache":"default"}).then((t=>{if(!t.ok)throw new Error("Not 2xx response");return t.text()}))),l.then((o=>{for(const t of n.rasters){if(t.w<=0&&t.h<=0)continue;const e=this.textures[t.atlasIndex];jl(o,t.w,t.h).then((o=>{e.subImage(i,o,t.x,t.y),this.state.needRerender=!0}))}this.loadedRasters[e.id].add(t)})).catch((o=>{console.error(o),this.failedRasters[e.id].add(t)}))}}var rs=o(3429);class ls{constructor(t,e,o,i,n,a,r,l){this.modules=t,this.mapState=e,this.cache=o,this.maxStyleZoom=-1/0,this.minStyleZoom=1/0,this.ready=!1,this.useful=!1,this.status="initial",this.model=i,this.key=n,this.selectedIds=a,this.styleId=r,this.styleRevision=l,this.modelRevision=i.revision,this.objects=[]}update(){switch(this.status){case"initial":this.useful&&(this.loadModel(),this.status="generating");break;case"generating":if(this.useful&&this.processResponse&&this.model.texturesLoaded){const{objects:{data:t}}=this.processResponse;this.objects=function(t,e){var o;const i=new fe.W("model",t,e),n=[],a=ss(null!==(o=i.children[0])&&void 0!==o?o:i.identifyChildren[0]);a&&["children","identifyChildren"].forEach((t=>{Oo.JG(i.modelMatrix,a);let o=i[t].length;for(;o--;){const a=i[t][o],r=ss(a);if(!r)continue;if(Oo.I6(i.modelMatrix,r))continue;let l=n.find((t=>Oo.I6(t.modelMatrix,r)));l||(l=new fe.W("model",[],e),Oo.JG(l.modelMatrix,r),n.push(l)),l[t].push(a),a.tile=l,i[t].splice(o,1)}}));return[i,...n]}(t,this.modules.renderer),this.updateMinAndMaxStyleZoom(this.objects),this.status="generated",this.ready=!0,this.cache.add(this.key,this)}}}getIdentifyIds(){var t;return null===(t=this.processResponse)||void 0===t?void 0:t.objects.identifyIds}remove(){"generated"===this.status&&this.cache.remove(this.key),this.status="initial",this.objects.length&&(this.objects.forEach((t=>t.clean(this.mapState))),this.objects=[]),this.ready=!1}canBeRemoved(){return"initial"===this.status}loadModel(){const{model:{regionId:t,metatileHash:e,id:o,sourceModel:{fileName:i,matrix:n,offset:a}}}=this,r=(0,ve.IL)(o),l={url:(0,de.Gr)("model",{host:this.mapState.tileServer,tileSet:this.mapState.tileSet,protocol:this.mapState.tileProtocol,subdomain:(0,de.Sy)(this.mapState.subdomains,i),regionId:t.toString(),name:i}),id:r,regionId:t,metatileHash:e,selected:this.selectedIds.some((t=>(0,ve.v7)(t,r))),pixelRatio:window.devicePixelRatio,styleState:this.mapState.styleState,styleId:this.mapState.handyStyleId,offset:a,matrix:n};this.modules.defaultSource.generateModel(l).then((t=>{this.model.prepareTextures(t.textures),this.processResponse=t}))}updateMinAndMaxStyleZoom(t){this.minStyleZoom=Math.min(...t.map((t=>Math.min(...t.children.map((t=>{var e;const o=this.modules.styleManager.getStyleLayer(t.attributes.styleId,t.attributes.layerId);return null!==(e=null==o?void 0:o.minzoom)&&void 0!==e?e:-1/0})))))),this.maxStyleZoom=Math.max(...t.map((t=>Math.max(...t.children.map((t=>{var e;const o=this.modules.styleManager.getStyleLayer(t.attributes.styleId,t.attributes.layerId);return null!==(e=null==o?void 0:o.maxzoom)&&void 0!==e?e:1/0}))))))}}function ss(t){if(t&&"matrix"in t.attributes)return t.attributes.matrix}class cs{constructor(t,e,o,i,n,a){this.modules=t,this.mapState=e,this.cache=o,this.regionId=i,this.metatileHash=n,this.sourceModel=a,this.revision=0,this.texturesLoaded=!1,this.textures=[],this.readiness=0,this.id=a.id,this.readinessTickerName=`model-readiness-${this.id}`}update(){var t,e;(null===(t=this.currentMod)||void 0===t?void 0:t.useful)&&this.currentMod.update(),(null===(e=this.newMod)||void 0===e?void 0:e.useful)&&this.newMod.update(),Oe.Vx(this.readinessTickerName,{step:(t,e)=>this.readiness=e},this.mapState)}isAnimating(){return Oe.rS(this.readinessTickerName,this.mapState)}commitMod(){this.newMod&&this.newMod.ready&&(this.currentMod=this.newMod,this.newMod=void 0)}setUsefulMod(){const t=this.mapState.handyStyleId,e=this.modules.styleManager.getStyleRevision(t),o=(0,ve.IL)(this.id),i=this.mapState.selectedIds.filter((t=>(0,ve.v7)(t,o)));if(this.currentMod||this.newMod){if(this.currentMod){if((0,ve.y5)(this.currentMod.selectedIds,i)&&this.currentMod.styleId===t&&this.currentMod.styleRevision===e&&this.currentMod.modelRevision===this.revision)return this.currentMod.useful=!0,void(this.newMod=void 0)}if(this.newMod){(0,ve.y5)(this.newMod.selectedIds,i)&&this.newMod.styleId===t&&this.newMod.styleRevision===e&&this.newMod.modelRevision===this.revision?this.newMod.useful=!0:this.createNewMod(i,t,e,this.revision)}else this.createNewMod(i,t,e,this.revision)}else this.createNewMod(i,t,e,this.revision)}getUsefulMod(){return this.currentMod&&this.currentMod.useful?this.currentMod:this.newMod&&this.newMod.useful?this.newMod:void 0}getCurrentMod(){return this.currentMod}setAllModsNeedless(){this.currentMod&&(this.currentMod.useful=!1),this.newMod&&(this.newMod.useful=!1)}getOpacity(t){return this.readiness*this.modules.buildingHeightAnimator.getBuildingHeight(t)}getTexture(t){return this.textures[t]}prepareTextures(t){this.texturesLoaded||(t.isBitmap?(this.textures=t.data.map((t=>new Wo(t,{flipY:!1}))),this.texturesLoaded=!0,this.startReadinessTicker()):Promise.all(t.data.map(Tl)).then((t=>{this.textures=t.map((t=>new Wo(t,{flipY:!1}))),this.texturesLoaded=!0,this.startReadinessTicker()})))}clean(){this.canBeCleaned()&&(this.texturesLoaded&&(this.textures.forEach((t=>t.remove())),this.textures=[],this.texturesLoaded=!1),this.stopReadinessTicker())}canBeCleaned(){return(!this.currentMod||this.currentMod.canBeRemoved())&&(!this.newMod||this.newMod.canBeRemoved())}createNewMod(t,e,o,i){const n=function(t,e,o,i,n){const a=e.map((t=>`${t.lo},${t.hi}`)).join("|");return`model=${t}_sId=${o}_sRev=${i}_mRev=${n}_sel=${a}`}(this.id,t,e,o,i),a=this.cache.get(n);a?(this.newMod=a,this.newMod.useful=!0):this.newMod=new ls(this.modules,this.mapState,this.cache,this,n,t,e,o)}startReadinessTicker(){this.readiness=0,Oe.BL(this.readinessTickerName,{easing:kt.Wf.easing},this.mapState,0,1,kt.Wf.duration)}stopReadinessTicker(){this.readiness=0,Oe.sT(this.readinessTickerName,this.mapState)}}class ds{constructor(t,e){this.mapState=t,this.modules=e,this.buildingsHeight=new Map,this.models=new Map,this.displayedMods=new Map,this.viewportModels=[],this.requestedModelsInfo=new Set,this.loadedModelsInfo=new Set,this.isStyleUpdateInProgress=!1,this.cache=new rs.L(kt.eX,((t,e)=>e.remove()))}onFeatureStateMapChange(){this.models.forEach((t=>{t.revision++}))}update(){this.findViewportModels(),this.mapState.styleZoom>kt.Uh&&this.modules.tileManager.getViewportTiles().forEach((t=>{"terrain"===t.type&&t.serverMetadata&&t.serverMetadata.forEach((e=>{const o=this.modules.sourceStorage.getSourceById(t.sourceId);if(void 0!==o&&"getUrl"in o){const t=o.getUrl("modelInfo",{regionId:e.regionId.toString()});this.loadModelsInfo(t,e.regionId,e.metatileHash)}else{const t=(0,de.Gr)("modelInfo",{host:this.mapState.tileServer,tileSet:this.mapState.tileSet,protocol:this.mapState.tileProtocol,subdomain:this.mapState.subdomains[0],regionId:e.regionId.toString()});this.loadModelsInfo(t,e.regionId,e.metatileHash)}}))})),this.models.forEach((t=>t.setAllModsNeedless())),this.viewportModels.forEach((t=>t.setUsefulMod())),this.models.forEach((t=>t.update())),this.isStyleUpdateInProgress||this.models.forEach((t=>t.commitMod())),this.updateScene(),this.cleanUnnessasaryModels()}activateStyleUpdating(){this.isStyleUpdateInProgress=!0}finishStyleUpdating(){this.isStyleUpdateInProgress=!1}redraw(){this.cache.reset(),this.cleanUnnessasaryModels()}isModelsInfoLoaded(t){return this.loadedModelsInfo.has(t)}getTexture(t,e){var o;return null===(o=this.models.get(t))||void 0===o?void 0:o.getTexture(e)}getDisplayedIdentifyData(){const t=[];return this.viewportModels.forEach((e=>{const o=e.getUsefulMod();if(!o)return;const i=o.getIdentifyIds();i&&t.push({metatileHash:e.metatileHash,ids:i})})),t}getOpacity(t,e){var o;return(null===(o=this.models.get(t))||void 0===o?void 0:o.getOpacity(e))||0}hasModel(t){return this.models.has(t)}setBuildingHeight(t,e){this.buildingsHeight.set(t,e)}getBuildingHeight(t){return this.buildingsHeight.get(t)||0}getVisibleModelData(t){const e=this.models.get(t);if(!e)return;const o=e.getCurrentMod();if(!o||!o.ready)return;const i=Math.max(e.sourceModel.minZoom,o.minStyleZoom),n=Math.min(e.sourceModel.maxZoom,o.maxStyleZoom),{styleZoom:a}=this.mapState;return a<i||a>=n?void 0:{minStyleZoom:i,maxStyleZoom:n,opacity:this.getOpacity(t,i)}}isIdle(){return this.viewportModelsReady()&&!this.viewportModels.some((t=>t.isAnimating()))}viewportModelsReady(){return this.viewportModels.every((t=>{const e=t.getUsefulMod();return e&&e.ready}))}findViewportModels(){const{styleZoom:t}=this.mapState;this.viewportModels=[],this.models.forEach((e=>{const{bound:o,minZoom:i,maxZoom:n}=e.sourceModel;if(t<i||t>=n)return;if(this.modules.floorManager.hasDisplayedFloorBuilding(e.id))return;if(!!!this.modules.assetManager.getMetatile(e.metatileHash))return;(0,sn.M4)(this.mapState.tilesBounds,o)&&this.viewportModels.push(e)}))}updateScene(){let t=!1;const e=new Map;this.viewportModels.forEach((t=>{const o=t.getCurrentMod();o&&o.ready&&e.set(o.key,o)})),this.displayedMods.forEach(((o,i)=>{e.has(i)||(o.objects.length&&o.objects.forEach((t=>this.modules.tileManager.removeObject(t))),t=!0)})),e.forEach(((e,o)=>{this.displayedMods.has(o)||(e.objects.length&&e.objects.forEach((t=>this.modules.tileManager.addObject(t))),t=!0),this.cache.get(o)})),t&&(this.displayedMods=e,this.mapState.needRerender=!0,this.modules.identifier.resetCache())}cleanUnnessasaryModels(){const t=new Set(this.cache.getData().map((t=>t.model)));this.models.forEach((e=>{t.has(e)||e.clean()}))}loadModelsInfo(t,e,o){this.requestedModelsInfo.has(e)||(this.requestedModelsInfo.add(e),fetch(t).then((t=>{if(!t.ok)throw new Error(`Failed to load models info for region ${e}`);return t.json()})).then((t=>{this.modules.workers.parser.appendHiddenObjectIds(t.map((t=>(0,ve.IL)(t.id)))),t.forEach((t=>{const i=new cs(this.modules,this.mapState,this.cache,e,o,t);this.models.set(i.id,i)})),this.loadedModelsInfo.add(e)})).catch((t=>{this.loadedModelsInfo.add(e),console.error(t)})))}}var ms=o(7204),hs=o(2153);class ps{constructor(t,e){this.mapState=t,this.modules=e,this.isIdle=()=>!this.isGenerating,this.modCache=new Map,this.isGenerating=!1,this.currentPois=[],this.currentIdSet=new ms.c,this.currentTrafficState=!1,this.currentSelectedIds=[],this.currentModKey=us(this.currentTrafficState,this.currentSelectedIds)}setPersonalPoi(t){this.currentPois=t;const e=new ms.c;for(const o of t)e.add((0,ve.IL)(o.id));this.currentIdSet=e,this.modCache.clear(),this.displayedModKey=void 0}redraw(){this.modCache.clear(),this.displayedModKey=void 0}getIdentifyDataChunk(){return this.identifyDataChunk}update(){if(void 0===this.regionMetadata&&(this.regionMetadata=this.modules.assetManager.getProjectMetadata()),void 0===this.regionMetadata)return;this.updateModKey();const t=this.currentModKey,e=this.modCache.get(t);void 0!==e||this.isGenerating||this.generate(t,this.currentPois,this.regionMetadata),void 0!==e&&t!==this.displayedModKey&&this.show(t,e,this.regionMetadata)}generate(t,e,o){const{regionId:i,metatileHash:n}=o,a=this.modules.map.state;this.isGenerating=!0,this.modules.workers.parser.generatePersonalPoi(e,i,n,window.devicePixelRatio,a.selectedIds,a.handyStyleId,a.styleState,this.modules.defaultSource.getId()).then((e=>{if(void 0===e)return void(this.isGenerating=!1);const{collectorOutput:o,styleId:i}=e,{packedRasters:n,rastersToLoad:a}=o;void 0!==n&&this.modules.assetManager.prepareRasters(i,n),this.modules.assetManager.loadRasters(a),this.modCache.set(t,e),this.isGenerating=!1}))}show(t,e,o){const{metatileHash:i}=o,{collectorOutput:{labels:n,identifyIds:a},styleId:r}=e;this.modules.labeler.removeLabels("ppoi"),n.length&&this.modules.labeler.addLabels("ppoi",hs.AL.PersonalPoi,[{metatileHash:i,labels:n,styleId:r}]),this.identifyDataChunk={metatileHash:i,ids:a},this.modules.identifier.resetCache(),this.displayedModKey=t}updateModKey(){const t=(0,Le.vX)(this.mapState.selectedIds,this.currentIdSet),e=this.modules.trafficTileLayer.isEnabled();(0,ve.y5)(this.currentSelectedIds,t)&&this.currentTrafficState===e||(this.currentTrafficState=e,this.currentSelectedIds=t,this.currentModKey=us(e,t))}}function us(t,e){const o=e.map((t=>`${t.lo},${t.hi}`)).join("|");return`ppoi_${t}_${o}`}const gs=function(){var t=ENTRY_MODULE,e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.m=t,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.g=function(){if("[object Object]"===Object.prototype.toString.call(self))return self;try{return this||new Function("return this")()}catch(t){if("[object Object]"===Object.prototype.toString.call(window))return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i=o(ENTRY_MODULE);return i.default||i};gs.toString();var _s="[\\.|\\-|\\+|\\w|/|@]+",fs="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function ys(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function bs(t,e,i){var n={};n[i]=[];var a=e.toString(),r=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||a.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!r)return n;for(var l,s=r[1],c=new RegExp("(\\\\n|\\W)"+ys(s)+fs,"g");l=c.exec(a);)"dll-reference"!==l[3]&&n[i].push(l[3]);for(c=new RegExp("\\("+ys(s)+'\\("(dll-reference\\s('+_s+'))"\\)\\)'+fs,"g");l=c.exec(a);)t[l[2]]||(n[i].push(l[1]),t[l[2]]=o(l[1]).m),n[l[2]]=n[l[2]]||[],n[l[2]].push(l[4]);for(var d,m=Object.keys(n),h=0;h<m.length;h++)for(var p=0;p<n[m[h]].length;p++)d=n[m[h]][p],isNaN(1*d)||(n[m[h]][p]=1*n[m[h]][p]);return n}function xs(t){return Object.keys(t).reduce(((e,o)=>e||t[o].length>0),!1)}function vs(t,e,o,i){let n=t[i].map((t=>`"${t}": ${e[i][t].toString()}`)).join(","),a=gs.toString().split("ENTRY_MODULE");return`${a[0]}{${n}}${a[1]}"${o}"${a[2]}`}function ws(t,e){e=e||{};var i={main:o.m},n=e.all?{main:Object.keys(i.main)}:function(t,e){for(var o={main:[e]},i={main:[]},n={main:{}};xs(o);)for(var a=Object.keys(o),r=0;r<a.length;r++){var l=a[r],s=o[l].pop();if(n[l]=n[l]||{},!n[l][s]&&t[l][s]){n[l][s]=!0,i[l]=i[l]||[],i[l].push(s);for(var c=bs(t,t[l][s],l),d=Object.keys(c),m=0;m<d.length;m++)o[d[m]]=o[d[m]]||[],o[d[m]]=o[d[m]].concat(c[d[m]])}}return i}(i,t),a="";Object.keys(n).filter((t=>"main"!==t)).forEach((t=>{for(var e=0;n[t][e];)e++;n[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a+=`var ${t} = (${vs(n,i,e,modules)})();\n`})),a+=`(${vs(n,i,t,"main")})();`;var r=new window.Blob([a],{type:"text/javascript"});if(e.bare)return r;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(r),s=new window.Worker(l);return s.objectURL=l,s}var zs=o(7256),Fs=o(4500),Ss=o(5549),Cs=o(4411),Ms=o(7125),Ps=o(6381);class Is{constructor(){this.connector=new zs.H,this.fnRegistry=new Fs.J(this.connector),this.classRegistry=new Cs.Z(this.fnRegistry),this.parserWorker=ws(1278),this.connector.addWorker(Ss.P.Parser,this.parserWorker),this.labelingWorker=ws(2656),this.connector.addWorker(Ss.P.Labeling,this.labelingWorker),this.parser=function(t,e){return{setMetatile:t.get(Ss.P.Parser,"setMetatile"),generateFloor:t.get(Ss.P.Parser,"generateFloor"),loadFloor:t.get(Ss.P.Parser,"loadFloor"),appendHiddenObjectIds:t.get(Ss.P.Parser,"appendHiddenObjectIds"),prepareAtlas:t.get(Ss.P.Parser,"prepareAtlas"),packRasters:t.get(Ss.P.Parser,"packRasters"),fetchTrafficTile:t.get(Ss.P.Parser,"fetchTrafficTile"),deleteTrafficTile:t.get(Ss.P.Parser,"deleteTrafficTile"),abortTrafficTileRequest:t.get(Ss.P.Parser,"abortTrafficTileRequest"),generateTrafficTile:t.get(Ss.P.Parser,"generateTrafficTile"),generatePersonalPoi:t.get(Ss.P.Parser,"generatePersonalPoi"),syncStyle:t.get(Ss.P.Parser,"syncStyle"),loadModel:t.get(Ss.P.Parser,"loadModel"),GeoJsonSource:e.set("GeoJsonSource",Ms.T).get(Ss.P.Parser),ZenithSource:e.set("ZenithWorker",Ps.Z).get(Ss.P.Parser)}}(this.fnRegistry,this.classRegistry),this.labeling=function(t){return{setCommercialPoiRandomSeed:t.get(Ss.P.Labeling,"setComPoiRandomSeed"),appendFont:t.get(Ss.P.Labeling,"appendFont"),markFontAsLoaded:t.get(Ss.P.Labeling,"markFontAsLoaded"),addNewRasterSets:t.get(Ss.P.Labeling,"addNewRasterSets"),updatePackingInfo:t.get(Ss.P.Labeling,"updatePackingInfo"),syncStyle:t.get(Ss.P.Labeling,"syncStyle"),loadRtlPlugin:t.get(Ss.P.Labeling,"loadRtlPlugin"),markRtlPluginLoaded:t.get(Ss.P.Labeling,"markRtlPluginLoaded")}}(this.fnRegistry)}destroy(){this.parserWorker.terminate(),this.labelingWorker.terminate()}}class Ls extends pe.c{constructor(t,e){super(),this.demElevation=0,this.demTilesRevision=NaN,this.options=(0,ut.kn)(e,Ls.options),this.uniqId=(0,ue.f)(),this.labelKey=`html-${this.uniqId}`,this.mapPoint=(0,he.yq)(this.options.coordinates),this.screenPoint=[0,0],this.html=function(t){const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex=String(t.zIndex),t.interactive||(e.style.pointerEvents="none");t.animate&&(e.style.opacity="0",e.style.transition=`opacity ${t.duration}ms`,e.style.willChange="opacity");const o=document.createElement("div");"string"==typeof t.html?o.innerHTML=t.html:o.append(t.html);return e.append(o),e}(this.options),this.isHidden=!0,this.targetOpacity=0,this.modules=t.modules,this.modules.layers.addLayer(this),this.mapState=t.state,this.rounder=!this.options.disableRounding?ks:As;const{offset:o,labeling:i}=this.options;"none"!==i.type&&this.modules.labeler.addLabelBox(this.labelKey,{id:this.uniqId,width:i.width,height:i.height,position:this.mapPoint,offset:o,labelingGroup:this.getLabelingGroup(),parentPoiId:"pinnedToPoi"===i.type?i.poiId:void 0})}destroy(){this.removeHtml(),this.modules.labeler.removeLabels(this.labelKey),this.modules.layers.removeLayer(this)}update(){const t=this.checkZoom(),e=!this.isInvolvedInLabeling()||this.modules.labeler.isLabelBoxSurvived(this.uniqId);t&&e?this.show():this.hide(),this.updatePosition()}setContent(t){this.options.html=t,this.html.innerHTML="";const e=document.createElement("div");"string"==typeof t?e.innerHTML=t:e.append(t),this.html.append(e)}setLabelingSize(t,e){"none"!==this.options.labeling.type&&(this.options.labeling.width=t,this.options.labeling.height=e,this.updateLabelBox())}setPosition(t){this.mapPoint=(0,he.yq)(t),this.updateLabelBox()}setOffset(t){this.options.offset=[t[0],t[1]],this.updateLabelBox()}setMinZoom(t){this.options.minZoom=t}setMaxZoom(t){this.options.maxZoom=t}getZIndex(){return this.options.zIndex}getOffset(){return this.options.offset}getPosition(){return(0,he.PA)(this.mapPoint)}getHtmlElement(){return this.html.firstChild}dangerouslyGetRootElement(){return this.html}isShown(){return!this.isHidden}show(){if(this.isHidden&&(this.isHidden=!1,this.appendHtml(),this.emit("shown",{id:this.uniqId.toString(),point:[this.screenPoint[0],this.screenPoint[1]],object:this}),this.options.animate)){if(this.showAnimationTimer)return;this.hideAnimationTimer&&(clearTimeout(this.hideAnimationTimer),this.hideAnimationTimer=void 0),1!==this.targetOpacity&&(this.showAnimationTimer=window.setTimeout((()=>{this.setHtmlOpacity(1),this.showAnimationTimer=void 0}),0))}}hide(){if(!this.isHidden)if(this.isHidden=!0,this.options.animate){if(this.hideAnimationTimer)return;this.showAnimationTimer&&(clearTimeout(this.showAnimationTimer),this.showAnimationTimer=void 0),this.setHtmlOpacity(0),this.hideAnimationTimer=window.setTimeout((()=>{this.removeHtml(),this.hideAnimationTimer=void 0}),this.options.duration)}else this.removeHtml()}setHtmlOpacity(t){this.html.style.opacity=String(t),this.targetOpacity=t}removeHtml(){this.html.remove(),this.screenPoint=[0,0]}appendHtml(){this.getMarkerContainer().appendChild(this.html)}getMarkerContainer(){return this.options.preventMapInteractions?this.modules.layout.htmlContainerOutMap:this.modules.layout.htmlContainerInMap}updatePosition(){var t,e,o;const i=this.modules.demManager,n=this.mapState;let a=0;if(n.demMode){const o=i.getTilesRevision();this.demTilesRevision!==o&&(this.demElevation=null!==(t=i.getElevation(this.mapPoint))&&void 0!==t?t:0,this.demTilesRevision=o),a=(this.demElevation-(null!==(e=n.elevation)&&void 0!==e?e:0))*n.elevationScale}const r=[this.mapPoint[0],this.mapPoint[1],((null!==(o=this.mapPoint[2])&&void 0!==o?o:0)+a)*he.C],l=this.modules.camera.project(r);this.rounder(l,l[0]+this.options.offset[0],l[1]+this.options.offset[1],this.mapState.stillness),_e.fS(this.screenPoint,l)||(this.html.style.transform=`translate3d(${l[0]}px, ${l[1]}px, 0px)`,this.screenPoint=l)}updateLabelBox(){if("none"===this.options.labeling.type)return;const{labeling:{width:t,height:e},offset:o}=this.options;this.modules.labeler.removeLabels(this.labelKey),this.modules.labeler.addLabelBox(this.labelKey,{id:this.uniqId,width:t,height:e,position:this.mapPoint,offset:o,labelingGroup:this.getLabelingGroup(),parentPoiId:"pinnedToPoi"===this.options.labeling.type?this.options.labeling.poiId:void 0})}getLabelingGroup(){return this.isInvolvedInLabeling()?"markerText":"htmlLabel"}checkZoom(){const{zoom:t}=this.mapState,{minZoom:e,maxZoom:o}=this.options;return t>=e&&t<o}isInvolvedInLabeling(){return"full"===this.options.labeling.type||"pinnedToPoi"===this.options.labeling.type}}Ls.options={coordinates:[0,0],html:"",offset:[0,0],animate:!0,duration:500,labeling:{type:"none"},interactive:!0,preventMapInteractions:!1,zIndex:0,minZoom:-1/0,maxZoom:1/0,disableRounding:!1};const ks=(t,e,o,i)=>{const n=Math.round(e)-e,a=Math.round(o)-o;t[0]=e+i*n,t[1]=o+i*a},As=(t,e,o)=>{t[0]=e,t[1]=o};var js=o(4389);const Ts=we.Ue();class Es extends ge{constructor(t,e){var o,i,n,a,r,l,s;super(t),this.options=e,this.vectors=this.options.coordinates.map((t=>t.map(he.yq))),this.bouncePosition=0,this.growPosition=1;const{renderer:c,tileManager:d,dynamicStyle:m,collector:h,layers:p}=this.modules,u=(0,Ae.qw)({type:"arrow",id:`dynamic-entrance-${this.uniqId}`,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,style:{color:null!==(o=this.options.color)&&void 0!==o?o:"#0085a0",strokeColor:null!==(i=this.options.borderColor)&&void 0!==i?i:"#ffffff",lineWidth:null!==(n=this.options.width)&&void 0!==n?n:3,strokeWidth:null!==(a=this.options.borderWidth)&&void 0!==a?a:1,tipWidth:null!==(r=this.options.wingWidthMultiplier)&&void 0!==r?r:2,tipHeight:null!==(l=this.options.tipHeightMultiplier)&&void 0!==l?l:4,animation:null===(s=this.options.animate)||void 0===s||s?{type:"appearance",tipMovementAmplitude:this.options.tipMovementAmplitude||20}:void 0}});if(!u)return;m.addLayer(u,this.options.zIndex),this.layerId=u.innerId;const g=this.getTileInfo(),_=(0,ke.FJ)({id:[0,0]}),f=(0,Te.Yi)(this.mapState.styleState,me.i4,me.Dz,_,me.wz);for(let t=0;t<this.vectors.length;t++){const e=this.vectors[t],o=this.getVertices(e,g);_[me.Dz.id]=[t,0],(0,Ie.XI)({collector:h,generator:js.l.generate,args:[m.getStyle().id,u,f,o]})}const y=h.getAccumulatedData(),b=new fe.W("dynamicObject",y.data,c,g.coords,this);if(this.tileObjects.push(b),d.addObject(b),this.identifyIds.push(y.identifyIds),this.options.animate){const t=`entrance-bounce-${this.uniqId}`,e=`entrance-grow-${this.uniqId}`;this.bounceTickerUpdate=Oe.Vx.bind(null,t,{step:(t,e)=>this.bouncePosition=e,complete:()=>{this.bounceTickerUpdate=void 0}},this.mapState),this.growTickerUpdate=Oe.Vx.bind(null,e,{step:(t,e)=>this.growPosition=e,complete:()=>{this.growTickerUpdate=void 0}},this.mapState),Oe.BL(t,{easing:kt.fT.bounceType},this.mapState,-1,0,kt.fT.bounceTime),Oe.BL(e,{easing:kt.fT.growType},this.mapState,0,1,kt.fT.growTime)}else this.bouncePosition=0,this.growPosition=1;p.addLayer(this),h.reset(),this.mapState.needRerender=!0}update(){this.bounceTickerUpdate&&this.bounceTickerUpdate(),this.growTickerUpdate&&this.growTickerUpdate()}entranceAnimationInProgress(){return void 0!==this.bounceTickerUpdate||void 0!==this.growTickerUpdate}remove(){void 0!==this.layerId&&this.modules.dynamicStyle.removeLayer(this.layerId),super.destroy()}getTileInfo(){const t=Re.Ue();for(let e=0;e<this.vectors.length;e++){const o=this.vectors[e];for(let e=0;e<o.length;e++)Re.aM(t,o[e])}return(0,Le.Bs)((0,Le.x7)(t))}getVertices(t,e){const o=[[],[],[]];for(let i=0;i<t.length;i++)(0,Le.a2)(Ts,t[i],e),o[0][i]=Ts[0],o[1][i]=Ts[1];return o}}class Os{constructor(t){this.state=t,this.layers=[]}addLayer(t){this.layers.push(t),this.state.needRerender=!0}removeLayer(t){const e=this.layers.indexOf(t);-1!==e&&(this.layers.splice(e,1),this.state.needRerender=!0)}getLayers(){return this.layers}getDynamicObjectLayers(){return this.layers.filter((t=>t instanceof ge))}getHtmlMarkers(){return this.layers.filter((t=>t instanceof Ls))}entranceAnimationFinished(){return this.layers.every((t=>!(t instanceof Es)||!t.entranceAnimationInProgress()))}}const Hs=()=>"",Ws=[.5,.5];class Rs{constructor(t){this.loadingCounter=0,this.isIdle=()=>0===this.loadingCounter,this.modules=t,this.cache={}}getRasterSet(t,e,o,n){return(0,i.mG)(this,void 0,void 0,(function*(){const i=this.getKey(t,o,n),a=this.getFromCache(i,e);if(a)return a;const r=yield this.loadIcon(t,e,o,n);return r&&this.storeInCache(r,i,e),r}))}decreaseLoadingCounter(){this.loadingCounter=Math.max(this.loadingCounter-1,0)}loadIcon(t,e,o,n){return(0,i.mG)(this,void 0,void 0,(function*(){const{dynamicStyle:i,workers:a,assetManager:r}=this.modules;let l=t;this.loadingCounter++,e&&(l=yield this.loadImageForTransformer(t).then((t=>e(t))).catch((()=>t)));const s=yield this.loadImage(l);return s?Promise.resolve().then((()=>{o=void 0!==o?o:[s.width,s.height];const t=void 0!==n?[n[0]/o[0],n[1]/o[1]]:Ws,e=[o[0]*window.devicePixelRatio,o[1]*window.devicePixelRatio],r=(0,Tr.W8)([{w:e[0],h:e[1],x:0,y:0,atlasIndex:0,isPacked:!1,anchorX:t[0],anchorY:t[1]}]);i.appendRasterSet(r),a.labeling.addNewRasterSets(i.getStyle().id,[r]);const l=new Uint16Array(3);return l[0]=e[0],l[1]=e[1],l[2]=r.index,a.parser.packRasters(l).then((t=>({packedRasters:t.packedRasters,rasterSet:r,scaledSize:e})))})).then((t=>{const{packedRasters:e,rasterSet:o,scaledSize:n}=t;return void 0!==e&&r.prepareRasters(i.getStyle().id,e,[El(s,n)]),this.decreaseLoadingCounter(),o})):(this.decreaseLoadingCounter(),Promise.resolve(void 0))}))}getFromCache(t,e){const o=this.cache[t];if(o)return o.get(e||Hs)}storeInCache(t,e,o){this.cache[e]||(this.cache[e]=new Map),this.cache[e].set(o||Hs,t)}getKey(t,e,o){return`${t}_${void 0!==e?`${e[0]},${e[1]}`:""}_${void 0!==o?`${o[0]},${o[1]}`:""}`}loadImage(t){return new Promise((e=>{const o=new Image;o.crossOrigin="Anonymous",o.src=t,o.onload=()=>e(o),o.onerror=()=>e(void 0)}))}loadImageForTransformer(t){return-1===t.indexOf(".svg")?new Promise((e=>{const o=new Image;o.crossOrigin="Anonymous",o.src=t,o.onload=()=>{e({type:"raster",source:o})},o.onerror=()=>{e({type:"unknown"})}})):new Promise((e=>{const o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=function(){200===o.status&&0!==o.response.byteLength?e({type:"vector",source:o.response}):e({type:"unknown"})},o.onerror=function(){e({type:"unknown"})},o.send()}))}}class Bs{constructor(t,e,o,i,n,a,r,l,s,c,d,m){this.key=o,this.id=i,this.object=void 0,this.ready=!1,this.modules=t,this.mapState=e,this.status="initial",this.regionId=n,this.metatileHash=No.DL,this.styleId=a,this.styleRevision=r,this.floorIndex=l,this.cache=s,this.onGenerated=m,this.useful=!0,this.selectedIds=c.slice(0),this.needFilterIds=d}update(){switch(this.status){case"initial":this.useful&&(this.modules.workers.parser.generateFloor(this.id,this.regionId,window.devicePixelRatio,this.floorIndex,this.selectedIds,this.styleId,this.mapState.styleState,this.modules.defaultSource.getId(),this.mapState.mobileSdkMode).then((t=>{const{collectorOutput:{packedRasters:e},styleId:o}=t;e&&this.modules.assetManager.prepareRasters(o,e),this.processResponse=t})),this.status="generating");break;case"generating":if(this.useful&&this.processResponse){const{collectorOutput:{data:t},tileCoords:e}=this.processResponse;this.object=new fe.W("floor",t,this.modules.renderer,e),this.status="generated",this.ready=!0,this.cache.add(this.key,this),this.onGenerated(this)}}}getLabels(){return this.processResponse&&this.processResponse.collectorOutput.labels.length?[{metatileHash:this.metatileHash,labels:this.processResponse.collectorOutput.labels,styleId:this.processResponse.styleId}]:[]}getGeoIds(){if(this.processResponse)return this.processResponse.collectorOutput.geoIds}canBeRemoved(){return"initial"===this.status}remove(){"generated"===this.status&&this.cache.remove(this.key),this.status="initial",this.object&&this.object.clean(this.mapState),this.ready=!1}getIdentifyIds(){if(this.processResponse){const t={};return t[this.metatileHash]=this.processResponse.collectorOutput.identifyIds,t}}isDataEmpty(){return!this.processResponse||0===this.processResponse.collectorOutput.data.length}}class Ns{constructor(t,e,o,i,n,a){this.onModGenerated=t=>{let e=this.idSetByFloorIndex.get(t.floorIndex);if(!e){e=new ms.c;const o=t.getGeoIds();o&&e.addFromFlatArray(o),this.idSetByFloorIndex.set(t.floorIndex,e)}t.needFilterIds&&(t.needFilterIds=!1,t.selectedIds=(0,Le.vX)(t.selectedIds,e))},this.modules=t,this.mapState=e,this.id=o,this.regionId=i,this.idSetByFloorIndex=new Map,this.cache=n,this.floorIndex=a,this.createNewMod(a,this.mapState.selectedIds,this.mapState.handyStyleId,this.modules.styleManager.getStyleRevision(this.mapState.handyStyleId))}update(){this.currentMod&&this.currentMod.useful&&this.currentMod.update(),this.newMod&&this.newMod.useful&&this.newMod.update()}setFloorIndex(t){this.floorIndex=t}getCurrentMod(){return this.currentMod}commitMod(){this.newMod&&this.newMod.ready&&(this.currentMod=this.newMod,this.newMod=void 0)}setUsefulMod(){const t=this.mapState.handyStyleId,e=this.modules.styleManager.getStyleRevision(t),o=this.floorIndex;let i=this.mapState.selectedIds;const n=this.idSetByFloorIndex.get(o);if(n&&(i=(0,Le.vX)(i,n)),this.currentMod||this.newMod){if(this.currentMod){if((0,ve.y5)(this.currentMod.selectedIds,i)&&this.currentMod.styleId===t&&this.currentMod.styleRevision===e&&this.currentMod.floorIndex===o)return this.currentMod.useful=!0,void(this.newMod=void 0)}if(this.newMod){(0,ve.y5)(this.newMod.selectedIds,i)&&this.newMod.styleId===t&&this.newMod.styleRevision===e&&this.newMod.floorIndex===o?this.newMod.useful=!0:this.createNewMod(o,i,t,e)}else this.createNewMod(o,i,t,e)}else this.createNewMod(o,i,t,e)}getUsefulMod(){return this.currentMod&&this.currentMod.useful?this.currentMod:this.newMod&&this.newMod.useful?this.newMod:void 0}setAllModsNeedless(){this.currentMod&&(this.currentMod.useful=!1),this.newMod&&(this.newMod.useful=!1)}canBeRemoved(){return(!this.currentMod||this.currentMod.canBeRemoved())&&(!this.newMod||this.newMod.canBeRemoved())}remove(){this.currentMod&&this.currentMod.remove(),this.newMod&&this.newMod.remove()}createNewMod(t,e,o,i){const n=function(t,e,o,i,n){const a=o.map((t=>`${t.lo},${t.hi}`)).join("|");return`floor_plan=${t}_ind=${e}_sId=${i}_sRev=${n}_sel=${a}`}(this.id,t,e,o,i),a=this.cache.get(n);if(a)this.newMod=a,this.newMod.useful=!0;else{const a=!this.idSetByFloorIndex.has(t);this.newMod=new Bs(this.modules,this.mapState,n,this.id,this.regionId,o,i,t,this.cache,e,a,this.onModGenerated)}}}const Ds={trafficOn:!1,parkingOn:!1,navigatorOn:!1};function Us(t,e,o){return Object.assign(Object.assign({},t),{_activeFloorIds:e,_activeFloorBuildingIds:o})}class Zs{constructor(t,e){this.isStyleUpdateInProgress=!1,this.state=t,this.modules=e,this.floors=new Map,this.complexDescriptors=new Map,this.hiddenObjectIds=new Map,this.displayedMods=new Map,this.requestedFloors=new Set,this.failedRequestedFloors=new Set,this.needUpdate=!1,this.cache=new rs.L(10,((t,e)=>e.remove())),this.stateDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"padding",type:"padding"},{path:"demMode",type:"boolean"}])}update(){if(this.stateDiffer.check(this.state)||this.needUpdate){this.needUpdate=!1;const t=this.findActiveFloor();if(this.activeFloor!==t){if(this.activeFloor&&this.modules.map.emit("floorcomplexhide",{id:this.activeFloor}),t){const e=this.complexDescriptors.get(t);if(e){const{id:o,regionId:i,defaultFloor:n,floors:a}=e;let r=this.floors.get(t);r?r.setUsefulMod():(r=new Ns(this.modules,this.state,o,i,this.cache,n),this.floors.set(t,r));const l=r.getUsefulMod();this.modules.map.emit("floorcomplexshow",{id:o,currentFloor:l?l.floorIndex:n,floorNames:a.map((({name:t})=>t)),firmsToFloorIndexMap:e.firmsToFloorIndexMap})}}this.activeFloor=t}}if(this.floors.forEach((t=>t.setAllModsNeedless())),this.activeFloor){const t=this.floors.get(this.activeFloor);t&&t.setUsefulMod()}this.floors.forEach(((t,e)=>{t.update(),t.canBeRemoved()&&this.floors.delete(e)})),this.updateStyleState(),this.isStyleUpdateInProgress||this.commitMods(),this.updateScene()}getActiveFloorHiddenIds(){const t=[];if(!this.activeFloor)return t;const e=this.complexDescriptors.get(this.activeFloor),o=this.floors.get(this.activeFloor);if(!e||!o)return t;const i=o.getCurrentMod();if(!i)return t;if(i.isDataEmpty())return t;for(let o=0;o<e.buildings.length;o++){const i=this.hiddenObjectIds.get(e.buildings[o]);i&&i.forEach((e=>t.push(e)))}return t}prepareFloors(t,e,o,i){"terrain"===i&&o.forEach(((o,i)=>{const n=(0,ve.Ak)(i);let a=this.hiddenObjectIds.get(n);void 0===a&&(a=new Set,this.hiddenObjectIds.set(n,a));for(let t=0;t<o.length;t+=2)a.add((0,ve.Ak)((0,ve.Ru)(o[t],o[t+1])));this.loadFloor(n,t,e)}))}changeFloorNumber(t,e){const o=this.floors.get(t),i=this.complexDescriptors.get(t);o&&i&&(o.setFloorIndex(e),this.modules.map.emit("floorcomplexlevelchange",{id:t,floorIndex:e,floorName:i.floors[e].name}))}resetCache(){this.floors.forEach(((t,e)=>{t.remove(),this.floors.delete(e)})),this.cache.reset(),this.activeFloor=void 0,this.needUpdate=!0}getDisplayedIdentifyData(){const t=[];return this.displayedMods.forEach((e=>{const o=e.getIdentifyIds();o&&Object.keys(o).forEach((e=>{const i=Number(e);t.push({ids:o[i],metatileHash:Number(i)})}))})),t}hasDisplayedFloorBuilding(t){if(!this.activeFloor)return!1;const e=this.complexDescriptors.get(this.activeFloor),o=this.floors.get(this.activeFloor);if(!e||!o)return!1;const i=o.getCurrentMod();if(!i||!i.ready)return!1;if(i.isDataEmpty())return!1;for(let o=0;o<e.buildings.length;o++){const i=this.hiddenObjectIds.get(e.buildings[o]);if(i&&i.has(t))return!0}return!1}activateStyleUpdating(){this.isStyleUpdateInProgress=!0,this.needUpdate=!0}finishStyleUpdating(){this.isStyleUpdateInProgress=!1}activeFloorLoadingOrReady(){if(!this.activeFloor)return!0;const t=this.floors.get(this.activeFloor);if(!t)return!0;const e=t.getUsefulMod();return Boolean(e&&e.ready)}floorsReady(){return Array.from(this.requestedFloors).every((t=>{const e=this.floors.get(t);if(!e)return this.failedRequestedFloors.has(t)||this.complexDescriptors.has(t);const o=e.getUsefulMod();return Boolean(!o||o.ready)}))}loadFloor(t,e,o){this.requestedFloors.has(t)||(this.requestedFloors.add(t),this.modules.workers.parser.loadFloor(t,this.state.floorsUrl).then((i=>{if("error"===i.type)return 404!==i.errorStatus&&console.error(`Loading floor ${t} failed`),void this.failedRequestedFloors.add(t);this.complexDescriptors.set(t,{id:t,regionId:e,metatileHash:o,center:i.center,defaultFloor:i.defaultFloor,floors:i.floors,buildings:i.buildings,bound:i.bound,firmsToFloorIndexMap:i.firmsToFloorIndexMap}),this.needUpdate=!0})))}updateStyleState(){const{styleState:t}=this.state;if(!this.activeFloor)return void((t._activeFloorIds||t._activeFloorBuildingIds)&&(this.state.styleState=Us(t,void 0,void 0)));const e=this.complexDescriptors.get(this.activeFloor),o=this.floors.get(this.activeFloor);if(!e||!o)return;const i=o.getUsefulMod();if(!i)return;const n=e.floors[i.floorIndex].ids,a=e.buildings;n===t._activeFloorIds&&a===t._activeFloorBuildingIds||(this.state.styleState=Us(t,n,a))}updateScene(){let t=!1;const e=new Map;if(this.activeFloor){const t=this.floors.get(this.activeFloor);if(!t)return;const o=t.getCurrentMod();o&&o.ready&&e.set(o.key,o)}this.displayedMods.forEach(((o,i)=>{e.has(i)||(this.removeFloorMod(o),t=!0)})),e.forEach(((e,o)=>{this.displayedMods.has(o)||(this.addFloorMod(e),t=!0),this.cache.get(o)})),t&&(this.displayedMods=e,this.state.needLabeling=!0,this.state.needRerender=!0,this.modules.identifier.resetCache())}addFloorMod(t){t.object&&(this.modules.tileManager.addObject(t.object),this.modules.labeler.addLabels(t.key,hs.AL.Floor,t.getLabels()))}removeFloorMod(t){t.object&&(this.modules.tileManager.removeObject(t.object),this.modules.labeler.removeLabels(t.key))}commitMods(){if(this.activeFloor){const t=this.floors.get(this.activeFloor);t&&t.commitMod()}}findActiveFloor(){const t=this.complexDescriptors,{center:e,zoom:o,styleZoom:i,rotation:n,size:a,pitch:r,viewport:l,padding:s}=this.state;if(i<kt.o.displayStyleZoom)return;const c=new _n.V({center:e,zoom:o,rotation:n,size:[Math.floor(a[0]*(1-kt.o.viewportPadding)),Math.floor(a[1]*(1-kt.o.viewportPadding))],pitch:r,viewport:l,padding:s});let d,m=1/0;return t.forEach((t=>{const o=_e.TE(e,t.center);m>o&&(0,sn.M4)(c.getViewportVertices(),t.bound)&&(m=o,d=t)})),d?d.id:void 0}}class Gs{constructor(t,e){this.state=t,this.modules=e,this.tileLayers=[],this.objects=[],this.viewportDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"padding",type:"padding"},{path:"demMode",type:"boolean"},{path:"elevation",type:"number"},{path:"minElevation",type:"number"}])}addTileLayer(t){-1===this.tileLayers.indexOf(t)&&(this.tileLayers.push(t),t.redraw(),this.modules.identifier.resetCache(),this.state.needLabeling=!0,this.state.needRerender=!0)}removeTileLayer(t){(0,ut.VJ)(this.tileLayers,t)&&(t.resetHoverId(),this.modules.identifier.resetCache(),this.state.needLabeling=!0,this.state.needRerender=!0)}redraw(){this.modules.labeler.clearPreviousLabels();for(const t of this.tileLayers)t.resetHoverId(),t.redraw();this.state.needRerender=!0}activateStyleUpdating(){this.tileLayers.forEach((t=>t.activateStyleUpdating()))}finishStyleUpdating(){this.tileLayers.forEach((t=>t.finishStyleUpdating()))}setSelectedIds(){this.tileLayers.forEach((t=>t.setSelectedIds()))}getViewportTiles(){const t=[];for(const e of this.tileLayers)t.push(...e.getViewportTiles());return t}viewportTilesReady(){return this.tileLayers.every((t=>t.viewportTilesReady()))}displayedTilesAnimationFinished(){return this.tileLayers.every((t=>t.displayedTilesAnimationFinished()))}getDisplayedIdentifyData(){const t=[];for(const e of this.tileLayers)t.push(...e.getDisplayedIdentifyData());return t}getLabelingData(){return this.tileLayers.map((t=>t.getLabelingData()))}isIdle(){return this.viewportTilesReady()&&this.displayedTilesAnimationFinished()}update(){const t=this.state;this.viewportDiffer.check(t)&&this.tileLayers.forEach((t=>t.updateViewport()));for(const t of this.tileLayers)t.update();if(this.updateTickers(),t.collectStats){this.state.stats.tileCount=0;for(const t of this.tileLayers)this.state.stats.tileCount+=t.getTileCount();this.state.stats.dynamicTileCount=this.objects.filter((t=>"dynamicObject"===t.purpose||"floor"===t.purpose)).length}}getTileObjects(){return this.objects}addObject(t){-1===this.objects.indexOf(t)&&(this.objects.push(t),this.state.needRerender=!0)}removeObject(t){(0,ut.VJ)(this.objects,t)&&(this.state.needRerender=!0)}destroy(){for(const t of this.tileLayers)t.destroy();this.objects.forEach((t=>t.clean(this.state)))}updateTickers(){this.objects.forEach((t=>t.updateTicker(this.state)))}}const Vs=Oe.Vx.bind(null,"labelingOpacity",{step:(t,e)=>t.labelingOpacity=e});class qs{constructor(t,e){this.state=t,this.modules=e,this.viewportDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"padding",type:"padding"},{path:"demMode",type:"boolean"}]),this.useThrottleUpdate=!0,this.isLabelingInProgress=!1,this.skipHysteresisInNextLabeling=!1,this.alwaysActiveLabelKeys=[],this.survivedLabelBoxes=new Set,this.prevSurvivedCommPoiIds=new Set,this.demKeys={},this.worker=(t=>({appendLabels:t.get(Ss.P.Labeling,"appendLabels"),appendLabelBox:t.get(Ss.P.Labeling,"appendLabelBox"),removeLabels:t.get(Ss.P.Labeling,"removeLabels"),processLabels:t.get(Ss.P.Labeling,"processLabels"),clearPreviousLabels:t.get(Ss.P.Labeling,"clearPreviousLabels")}))(this.modules.workers.fnRegistry),this.setLabelingInterval(kt.n5.interval)}disableThrottleUpdateOnce(){this.useThrottleUpdate=!1}update(){Vs(this.state),!this.viewportDiffer.check(this.state)&&!this.state.needLabeling||this.isLabelingInProgress||(this.state.needLabeling=!1,this.isLabelingInProgress=!0,this.useThrottleUpdate?this.throttledUpdateLabeling():(this.useThrottleUpdate=!0,this.generateLabelingTile()))}isIdle(){return void 0===this.state.tickers.labelingOpacity&&!this.isLabelingInProgress&&!this.state.needLabeling}setLabelingInterval(t){this.throttledUpdateLabeling=yo((()=>{this.generateLabelingTile()}),t)}addLabels(t,e,o){this.worker.appendLabels(t,e,o,this.state.styleState,this.state.styleZoom),this.enrichWithElevation(o,t),this.alwaysActiveLabelKeys.push(t),this.state.needLabeling=!0}addTileLabels(t,e,o){this.worker.appendLabels(t,e,o,this.state.styleState,this.state.styleZoom),this.enrichWithElevation(o,t),this.state.needLabeling=!0}addLabelBox(t,e){this.worker.appendLabelBox(t,e),this.state.needLabeling=!0}removeLabels(t){this.worker.removeLabels(t);const e=this.alwaysActiveLabelKeys.indexOf(t);-1!==e&&this.alwaysActiveLabelKeys.splice(e,1),this.state.needLabeling=!0}isLabelBoxSurvived(t){return this.survivedLabelBoxes.has(t)}clearPreviousLabels(){this.worker.clearPreviousLabels()}resetHysteresis(){this.skipHysteresisInNextLabeling=!0,this.state.needLabeling=!0}generateLabelingTile(){const t=(0,Le.x7)((0,sn.BS)(this.state.tilesBounds),kt.n5.tileMultiplier),e={center:this.state.center,elevation:this.state.elevation,zoom:this.state.zoom,styleZoom:this.state.styleZoom,rotation:this.state.rotation,size:this.state.size,pitch:this.state.pitch,viewport:this.state.viewport,padding:this.state.padding,styleState:this.state.styleState,buildingHeight:this.modules.buildingHeightAnimator.getDefaultBuildingHeight(),tilesBounds:this.state.tilesBounds,debugLabels:this.modules.labelsDebug.isEnabled()};this.worker.processLabels(this.modules.tileManager.getLabelingData(),this.alwaysActiveLabelKeys,e,(0,Le.Bs)(t),window.devicePixelRatio,this.modules.floorManager.getActiveFloorHiddenIds(),kt.n5.commercialMargins,this.skipHysteresisInNextLabeling).then((e=>{this.survivedLabelBoxes.clear(),e.survivedLabelBoxIds.forEach((t=>this.survivedLabelBoxes.add(t))),this.processSurvivedCommPoiIds(e.survivedCommPois),this.labelTile&&(this.modules.tileManager.removeObject(this.labelTile),this.labelTile.clean(this.state)),this.modules.assetManager.loadRasters(e.collectorOutput.rastersToLoad),this.labelTile=new fe.W("labeling",e.collectorOutput.data,this.modules.renderer,t),this.modules.tileManager.addObject(this.labelTile);const o=this.state.metrics;Number.isNaN(o.firstlabeling)&&e.collectorOutput.data.length>0&&(o.firstlabeling=performance.now()-o.start);const{animationTime:i,animationType:n,interval:a}=kt.n5;((t,e,o,i,n)=>{Oe.BL("labelingOpacity",{easing:e},t,o,i,n)})(this.state,n,0,1,Math.min(i,a)),this.state.needRerender=!0,e.labels&&this.modules.labelsDebug.drawLabels(e.labels),this.isLabelingInProgress=!1})),this.skipHysteresisInNextLabeling=!1}processSurvivedCommPoiIds(t){if(0===t.length)return void this.prevSurvivedCommPoiIds.clear();const e=t.filter((t=>!this.prevSurvivedCommPoiIds.has(t.id)));0!==e.length&&this.modules.map.emit("commpoishow",{commPois:e}),this.prevSurvivedCommPoiIds=new Set(t.map((t=>t.id)))}enrichWithElevation(t,e){const{demManager:o,map:i}=this.modules;if(i.state.demMode){const i=this.demKeys[e],n=o.getLabelsDemKey(t);if(void 0===n||n===i)return;o.enrichWithElevation(t),this.demKeys[e]=n}}}const Xs=10,$s=7,Ys=3,Js=2,Ks=0,Qs=4,tc=2,ec="#ffffff",oc="#667799",ic="#ffffff",nc=5,ac=4,rc=2,lc=1,sc="#667799",cc="#ffffff",dc="#00000026",mc="#66779966",hc=13,pc={start:{en:"Start",ru:"Старт"},addPoint:{en:"Add point",ru:"Добавить точку"},meter:{en:"m",ru:"м"},kilometer:{en:"km",ru:"км"}};function uc(t,e,o){if(e)return pc.start[o]||pc.start.en;if(t<1e3)return`${t} ${pc.meter[o]||pc.meter.en}`;return`${(t/1e3).toFixed(1)} ${pc.kilometer[o]||pc.kilometer.en}`}function gc(t,e){return`\n        <div style="font-size: ${e}px;\n            color: #667799;\n            user-select: none;\n            font-family: SuisseIntl, Helvetica, Arial, sans-serif;\n            text-shadow: 1px 0px 1px #fff, -1px 0px 1px #fff, 0px 1px 1px #fff, 0px -1px 1px #fff;\n            white-space: nowrap;\n            cursor: pointer;\n        ">\n            ${t}\n        </div>\n    `}function _c(t,e){return`\n        <div style="text-shadow: 1px 0px 1px #fff, -1px 0px 1px #fff, 0px 1px 1px #fff, 0px -1px 1px #fff;\n            user-select: none;\n            color: #667799;\n            font-family: SuisseIntl, Helvetica, Arial, sans-serif;\n            font-size: 13px;\n            margin: -12px 0 0 12px; /** отступы от точки наведения */\n            white-space: nowrap;\n            cursor: pointer;\n        ">\n            ${t}\n            <br>\n            ${function(t){return pc.addPoint[t]||pc.addPoint.en}(e)}\n        </div>\n    `}function fc(t,e,o,i){return new Ee(i,{coordinates:t,interactive:o,draggable:o,width:e?$s:Ks,borderWidth:e?Ys:Qs,border2Width:e?Js:tc,color:ec,borderColor:oc,border2Color:ic,zIndex:Xs})}function yc(t,e,o){return new wd(o,{coordinates:t,zIndex:nc,zIndex2:nc-1,zIndex3:nc-2,width:ac,width2:e?0:ac+2*rc,width3:e?0:ac+2*(rc+lc),color:e?mc:sc,color2:cc,color3:dc,interactive:!e})}const bc="PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjxkZWZzPjxwYXRoIGlkPSJBIiBkPSJNMTIgMTAuNTg2bDMuNzkzLTMuNzkzIDEuNDE0IDEuNDE0TDEzLjQxNCAxMmwzLjc5MyAzLjc5My0xLjQxNCAxLjQxNEwxMiAxMy40MTRsLTMuNzkzIDMuNzkzLTEuNDE0LTEuNDE0TDEwLjU4NiAxMiA2Ljc5MyA4LjIwN2wxLjQxNC0xLjQxNEwxMiAxMC41ODZ6Ii8+PC9kZWZzPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEgLTEpIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMC41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIuMTUiLz48bWFzayBpZD0iQiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjQSIvPjwvbWFzaz48dXNlIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgeGxpbms6aHJlZj0iI0EiLz48ZyBmaWxsPSIjMjYyNjI2IiBtYXNrPSJ1cmwoI0IpIj48cGF0aCBkPSJNMCAwaDI0djI0SDB6Ii8+PC9nPjwvZz48L3N2Zz4=";class xc extends pe.c{constructor(t,e,o,i){super(),this.markerOrLabelMouseover=()=>{this.markerOrLabelHovered||(this.markerOrLabelHovered=!0,void 0===this.hoverTimer&&this.emit("mouseover"))},this.markerOrLabelMouseout=()=>{this.markerOrLabelHovered&&(this.markerOrLabelHovered=!1,this.hoverTimer=window.setTimeout((()=>{this.markerOrLabelHovered||(this.emit("mouseout"),this.hoverTimer=void 0)}),100))},this.onClick=()=>this.emit("click"),this.labelText=uc(i,o,t.state.lang),this.point=e,this.distance=i,this.label=function(t,e,o){const i=gc(e,hc),n=function(t,e){return.55*e*t.length}(e,hc);return new Ls(o,{coordinates:t,html:i,offset:[($s+Ys+Js)/2+2,-hc/2-2],labeling:{type:"full",width:n,height:hc},animate:!1,zIndex:nc+1})}(e,this.labelText,t),this.marker=fc(e,o,!0,t),this.markerOrLabelHovered=!1;const n=this.label.dangerouslyGetRootElement();n.addEventListener("mouseover",this.markerOrLabelMouseover),n.addEventListener("mouseout",this.markerOrLabelMouseout),n.addEventListener("click",this.onClick),this.marker.on("mouseover",(()=>this.markerOrLabelMouseover())),this.marker.on("mouseout",(()=>this.markerOrLabelMouseout())),this.marker.on("dragstart",(t=>{const{lngLat:e,originalEvent:o,point:i,target:n}=t;this.emit("dragstart",{lngLat:e,originalEvent:o,point:i,targetData:this,target:n})})),this.marker.on("dragend",(t=>{const{lngLat:e,originalEvent:o,point:i,target:n}=t;this.emit("dragend",{lngLat:e,originalEvent:o,point:i,targetData:this,target:n})}))}getDistance(){return this.distance}getPoint(){return this.point}getMarkerUniqId(){return this.marker.uniqId}getLabelUniqId(){return this.label.uniqId}setPoint(t){this.point=t}remove(){this.marker.remove();const t=this.label.dangerouslyGetRootElement();t.removeEventListener("mouseover",this.markerOrLabelMouseover),t.removeEventListener("mouseout",this.markerOrLabelMouseout),t.removeEventListener("click",this.onClick),this.label.destroy()}activateHover(){this.label.setContent(`\n        <img style="\n            user-select: none;\n            width: 24px;\n            height: 24px;\n            margin-top: -4px;\n            cursor: pointer;\n        " src="data:image/svg+xml;base64,${bc}" alt="close">\n    `)}deactivateHover(){this.label.setContent(gc(this.labelText,hc))}}class vc{constructor(t,e){this.onDocumentMouseMove=t=>{this.mousePos=ye(this.modules.layout.rootContainer,t.clientX,t.clientY),this.needsUpdate=!0},this.modules=e,this.state=t,this.joints=[],this.enabled=!1,this.needsUpdate=!1,this.hidePreviewLine=!1,this.hideMouseElem=!1,this.mousePos=[0,0],document.addEventListener("mousemove",this.onDocumentMouseMove),this.langDiffer=new vo([{path:"lang",type:"string"}])}destroy(){document.removeEventListener("mousemove",this.onDocumentMouseMove)}enable(){this.enabled||(this.enabled=!0,this.state.identifyPickDistance=2*kt.yV.pickDistance,this.popup=new Ls(this.modules.map,{coordinates:[0,0],html:"",interactive:!1,animate:!1,zIndex:1}))}disable(){this.enabled=!1,this.reset(),void 0!==this.mouseElem&&(this.mouseElem.remove(),this.mouseElem=void 0),this.state.identifyPickDistance=kt.yV.pickDistance,this.popup&&(this.popup.destroy(),this.popup=void 0)}update(){this.enabled&&(this.langDiffer.check(this.state)&&this.recalculate(),this.needsUpdate&&(this.needsUpdate=!1,this.drawMousePoint(),this.drawPreviewLine()))}setPoints(t){this.reset(),t.forEach((t=>this.addPointToEnd(t))),this.drawPolyline(),this.sendRulerChangeEvent(!1)}handleClick(t,e){const o=this.getJointByUniqId(e&&e.dynamicObjectId);if(o){const t=this.getJointIndexByReferer(o);void 0!==t&&(o.remove(),this.joints.splice(t,1),this.recalculate(),this.hidePreviewLine=!1,this.hideMouseElem=!1),this.popup&&this.popup.setContent("")}else if(e&&this.polyline&&this.polyline.uniqId===e.dynamicObjectId){const e=this.polyline.snapPoint(t),o=this.getJointIndexByDistance(e.distance),i=this.createJoint(e.point,!1,e.distance);this.joints.splice(o,0,i),this.hidePreviewLine=!0,this.hideMouseElem=!0,this.drawPolyline(),this.sendRulerChangeEvent(!0),this.popup&&this.popup.setContent("")}else{const e=(0,he.PA)(this.modules.camera.unproject(t));this.addPointToEnd(e),this.drawPolyline(),this.sendRulerChangeEvent(!0)}}recalculate(){const t=[];this.joints.forEach(((e,o)=>{e.remove();const i=0===o;let n=0;if(!i){const i=t[o-1];n=i.getDistance()+(0,he.vn)(i.getPoint(),e.getPoint())}const a=this.createJoint(e.getPoint(),i,n);t.push(a)})),this.joints=t,this.drawPolyline(),this.sendRulerChangeEvent(!0)}sendRulerChangeEvent(t){this.modules.map.emit("rulerchange",{points:this.getPoints(),isUser:t})}getJointByUniqId(t){if(void 0!==t)for(const e of this.joints)if(t===e.getMarkerUniqId()||t===e.getLabelUniqId())return e}getJointIndexByDistance(t){let e=0;for(const o of this.joints){if(t<o.getDistance())break;e++}return e}getJointIndexByReferer(t){let e=0;for(const o of this.joints){if(o===t)return e;e++}}getPoints(){return this.joints.map((t=>t.getPoint()))}reset(){this.joints.forEach((t=>t.remove())),this.joints=[],void 0!==this.polyline&&(this.polyline.remove(),this.polyline=void 0),void 0!==this.previewLine&&(this.previewLine.remove(),this.previewLine=void 0),this.hidePreviewLine=!1,this.hideMouseElem=!1,this.popup&&this.popup.setContent("")}createJoint(t,e,o){const i=new xc(this.modules.map,t,e,o);return i.on("mouseover",(()=>{void 0===this.draggableJointIndex&&(this.requestUpdate(!0,!0),i.activateHover())})),i.on("mouseout",(()=>{void 0===this.draggableJointIndex&&(this.requestUpdate(!1,!0),i.deactivateHover())})),i.on("dragstart",(()=>{this.requestUpdate(!1,!0),this.draggableJointIndex=this.getJointIndexByReferer(i)})),i.on("dragend",(t=>{this.requestUpdate(!1,!0),this.draggableJointIndex=void 0,i.setPoint(t.lngLat),this.recalculate()})),i.on("click",(()=>{const t=this.getJointIndexByReferer(i);void 0!==t&&(i.remove(),this.joints.splice(t,1),this.recalculate(),this.hidePreviewLine=!1,this.hideMouseElem=!1),this.popup&&this.popup.setContent("")})),i}addPointToEnd(t){let e=!0,o=0;if(this.joints.length>0){e=!1;const i=this.joints[this.joints.length-1];o=i.getDistance()+(0,he.vn)(i.getPoint(),t)}const i=this.createJoint(t,e,o);this.joints.push(i)}drawPolyline(){void 0!==this.polyline&&(this.polyline.remove(),this.polyline=void 0);const t=this.getPoints();if(t.length<2)return;const e=yc(t,!1,this.modules.map);e.on("mousemove",(t=>{if(void 0===this.draggableJointIndex){if(this.popup){const o=e.snapPoint(t.point),i=uc(o.distance,!1,this.state.lang);this.popup.setPosition(o.point),this.popup.setContent(_c(i,this.state.lang)),this.snapPoint=o.point}this.requestUpdate(!0,!1)}})),e.on("mouseout",(()=>{void 0===this.draggableJointIndex&&(this.popup&&this.popup.setContent(""),this.requestUpdate(!1,!0))})),this.polyline=e}requestUpdate(t,e){this.hidePreviewLine=t,this.hideMouseElem=e,this.needsUpdate=!0}getPreviewPoints(){const t=this.getPoints();if(this.hidePreviewLine||t.length<1)return[];const e=this.draggableJointIndex,o=(0,he.PA)(this.modules.camera.unproject(this.mousePos));if(void 0===e||1===t.length)return[];if(e===this.joints.length-1)return[t[t.length-2],o];if(0===e)return[t[1],o];const i=this.joints[e-1],n=this.joints[e+1];return[i.getPoint(),o,n.getPoint()]}drawPreviewLine(){void 0!==this.previewLine&&(this.previewLine.remove(),this.previewLine=void 0);const t=this.getPreviewPoints();t.length<1||(this.previewLine=yc(t,!0,this.modules.map))}drawMousePoint(){void 0!==this.mouseElem&&(this.mouseElem.remove(),this.mouseElem=void 0),this.hideMouseElem||void 0===this.snapPoint||(this.mouseElem=fc(this.snapPoint,!0,!1,this.modules.map))}}class wc{constructor(t,e,o){this.type=t,this.handler=o,this.mouseDownPoint=e,this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionstart",{target:"pitch/rotation"})}processAction(t){switch(t.type){case"mousemove":return this.processMouseMoveAction(t);case"mouseup":return this.processMouseUpAction(t);case"keyup":return this.processKeyUpAction(t);default:return this}}processMouseMoveAction(t){const e=ye(this.handler.container,t.clientX,t.clientY);return new zc(this.type,this.mouseDownPoint,e,this.handler)}processMouseUpAction(t){switch(this.type){case"keyPrimary":if(0===t.button&&(t.ctrlKey||t.metaKey))return this.returnToInitialState();break;case"secondary":if(2===t.button){const e=ye(this.handler.container,t.clientX,t.clientY);return this.handler.modules.identifier.search("contextmenu",e,!0).then((o=>{Me("contextmenu",o,t,e,this.handler.modules)})),this.returnToInitialState()}break;case"auxiliary":if(1===t.button)return this.returnToInitialState()}return this}processKeyUpAction(t){return"keyPrimary"!==this.type||"Control"!==t.key&&"Meta"!==t.key?this:(this.handler.modules.map.emit("interactionend",{target:"pitch/rotation"}),new Fc(this.mouseDownPoint,this.handler))}returnToInitialState(){return this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionend",{target:"pitch/rotation"}),new Ac(this.handler)}}class zc{constructor(t,e,o,i){this.type=t,this.mouseDownPoint=e,this.mouseMovePoint=o,this.handler=i,this.handler.mapState.userHasInteracted=!0,this.handler.mapState.disablePitchByUserInteraction&&this.handler.mapState.disableRotationByUserInteraction||this.handler.container.classList.add("mapgl-rotating"),this.update(this.handler.mapState)}processAction(t){switch(t.type){case"mousemove":return this.processMouseMoveAction(t);case"mouseleave":return this.returnToInitialState();case"mouseup":return this.processMouseUpAction(t);case"keyup":return this.processKeyUpAction(t);default:return this}}update(t){0===this.mouseDownPoint[0]&&0===this.mouseDownPoint[1]&&(this.mouseDownPoint=this.mouseMovePoint);const e=(0,ut.Te)(t.size,this.mouseDownPoint),o=(0,ut.Te)(t.size,this.mouseMovePoint),i=(e[0]-o[0])*kt.sP.mouseRotateDelta,n=(o[1]-e[1])*kt.sP.mousePitchDelta;bo(t),t.disableRotationByUserInteraction||Ye(t,t.rotation+i,{animate:!1}),t.disablePitchByUserInteraction||to(t,(0,ut.uZ)(t.pitch+n,t.minPitch,t.maxPitch),{animate:!1}),this.mouseDownPoint=this.mouseMovePoint,t.needRerender=!0}processMouseMoveAction(t){return this.mouseMovePoint=ye(this.handler.container,t.clientX,t.clientY),this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState),this}processMouseUpAction(t){switch(this.type){case"keyPrimary":if(0===t.button&&(t.ctrlKey||t.metaKey))return this.returnToInitialState();break;case"secondary":if(2===t.button)return this.returnToInitialState();break;case"auxiliary":if(1===t.button)return this.returnToInitialState()}return this}processKeyUpAction(t){return"keyPrimary"!==this.type||"Control"!==t.key&&"Meta"!==t.key?this:(this.handler.container.classList.remove("mapgl-rotating"),this.handler.modules.map.emit("interactionend",{target:"pitch/rotation"}),new Fc(this.mouseMovePoint,this.handler))}returnToInitialState(){return this.handler.mapState.userHasInteracted=!0,this.handler.container.classList.remove("mapgl-rotating"),this.handler.modules.map.emit("interactionend",{target:"pitch/rotation"}),new Ac(this.handler)}}class Fc{constructor(t,e){this.handler=e,this.toInitialOnMouseUp=!1,this.mouseDownPoint=t,this.dragStartPoint=t,this.isTimerStarted=void 0!==this.handler.dblClickTimer,this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionstart",{target:"center"}),this.isTimerStarted&&(window.clearTimeout(this.handler.dblClickTimer),this.handler.dblClickTimer=void 0)}processAction(t){switch(t.type){case"mousedown":return this.toInitialOnMouseUp=!0,this;case"mouseup":return this.processMouseUpAction(t);case"mousemove":return this.processMouseMoveAction(t);case"click":return this.processMouseClickAction(t);case"keydown":return this.processKeyDownAction(t);default:return this}}processMouseUpAction(t){return 0!==t.button||!this.toInitialOnMouseUp&&this.handler.modules.layout.isActionWithCanvas(t)?this:(this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionend",{target:"center"}),new Ac(this.handler))}processMouseMoveAction(t){const e=ye(this.handler.container,t.clientX,t.clientY);return this.handler.mapState.disableDragging?(this.mouseDownPoint=e,this.dragStartPoint=e,this.toInitialOnMouseUp=!0,this):_e.TE(this.mouseDownPoint,e)<kt.U3.dragThreshold?(this.dragStartPoint=e,this):new Sc(e,this.dragStartPoint,this.handler)}processMouseClickAction(t){if(!this.handler.modules.layout.isActionWithCanvas(t))return this;if(this.isTimerStarted){if(this.handler.mapState.zoom<this.handler.mapState.maxZoom){const e=this.handler.mapState,o=Math.min(e.zoom+1,e.maxZoom),i=ye(this.handler.container,t.clientX,t.clientY);bo(e),no(e,o,{duration:kt.sP.animDuration,zoomPoint:e.keepCenterWhileUserZoomRotate?void 0:i,blockBuildingAnimation:!0}),this.handler.mapState.needRerender=!0}}else{const e=ye(this.handler.container,t.clientX,t.clientY);this.handler.modules.identifier.search("mouseClick",e,!0).then((o=>{const i=this.handler.modules.ruler;i.enabled?i.handleClick(e,o):this.handler.dblClickTimer||(this.handler.dblClickTimer=window.setTimeout((()=>{Me("click",o,t,e,this.handler.modules),this.handler.dblClickTimer=void 0}),kt.U3.doubleClickTime))}))}return this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionend",{target:"center"}),new Ac(this.handler)}processKeyDownAction(t){return"Control"===t.key||"Meta"===t.key?(this.handler.modules.map.emit("interactionend",{target:"center"}),new wc("keyPrimary",this.mouseDownPoint,this.handler)):this}}class Sc{constructor(t,e,o){this.mouseMovePoint=t,this.dragStartPoint=e,this.handler=o,this.handler.container.classList.add("mapgl-dragging"),this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState)}processAction(t){switch(t.type){case"mousemove":return this.processMouseMoveAction(t);case"mouseup":return this.processMouseUpAction(t);case"keydown":return this.processKeyDownAction(t);default:return this}}update(t){const e=this.handler.modules.camera.unproject(this.dragStartPoint),o=this.handler.modules.camera.unproject(this.mouseMovePoint),i=we.d9(t.center);we.IH(i,i,e),we.lu(i,i,o),bo(t),Ge(t,i,{animate:!1}),this.dragStartPoint=this.mouseMovePoint,t.needRerender=!0}processMouseMoveAction(t){return this.mouseMovePoint=ye(this.handler.container,t.clientX,t.clientY),this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState),this}processMouseUpAction(t){return 0===t.button?this.returnToInitialState():this}processKeyDownAction(t){return"Control"===t.key||"Meta"===t.key?(this.handler.container.classList.remove("mapgl-dragging"),this.handler.modules.map.emit("interactionend",{target:"center"}),new wc("keyPrimary",this.mouseMovePoint,this.handler)):this}returnToInitialState(){return this.handler.container.classList.remove("mapgl-dragging"),this.handler.modules.map.emit("interactionend",{target:"center"}),this.handler.mapState.userHasInteracted=!0,new Ac(this.handler)}}class Cc{constructor(t,e,o){this.handler=o,this.touchStartPoints=e,this.touchMovePoints=t,this.handler.mapState.userHasInteracted=!0,this.handler.mapState.disablePitchByUserInteraction||this.handler.container.classList.add("mapgl-rotating"),this.update(this.handler.mapState)}processAction(t){switch(t.type){case"touchstart":return this.processTouchStartAction(t);case"touchmove":return this.processTouchMoveAction(t);case"touchend":return this.processTouchEndAction(t);default:return this}}processTouchStartAction(t){return this.handler.container.classList.remove("mapgl-rotating"),this.handler.modules.map.emit("interactionend",{target:"pitch/zoom/rotation"}),new Ic(t,this.handler,!1)}processTouchMoveAction(t){return t.preventDefault(),this.touchMovePoints=be(t.touches,this.handler.container),this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState),this}processTouchEndAction(t){return this.handler.container.classList.remove("mapgl-rotating"),this.handler.modules.map.emit("interactionend",{target:"pitch/zoom/rotation"}),0===t.touches.length?(this.handler.mapState.userHasInteracted=!0,new Ac(this.handler)):new Ic(t,this.handler,!1)}}class Mc extends Cc{constructor(t,e,o){super(t,e,o),this.startPxAngle=0,this.rotationDetected=!1,e.length>1&&(this.startPxAngle=(0,xt.Hl)(e[0],e[1]))}update(t){if(this.touchStartPoints.length<2||this.touchMovePoints.length<2)return;const e=(0,xt.L$)(this.touchMovePoints[0],this.touchMovePoints[1]),o=_e.TK(this.touchMovePoints[0],this.touchMovePoints[1])/_e.TK(this.touchStartPoints[0],this.touchStartPoints[1]),i=t.zoom+Math.log(o)/Math.log(2)*kt.sP.mobilePinchDelta;let n=0,a=0;if(!this.rotationDetected){const t=(0,xt.Hl)(this.touchMovePoints[0],this.touchMovePoints[1]);a=Math.abs(this.startPxAngle-t),a>Math.PI&&(a=2*Math.PI-a),a>=this.handler.mapState.touchRotationThreshold&&(this.rotationDetected=!0)}if(this.rotationDetected){const t=this.handler.modules.camera.unproject(this.touchStartPoints[0]),e=this.handler.modules.camera.unproject(this.touchStartPoints[1]),o=this.handler.modules.camera.unproject(this.touchMovePoints[0]),i=this.handler.modules.camera.unproject(this.touchMovePoints[1]);if(t&&e&&o&&i){n=(0,xt.Hl)(t,e)-(0,xt.Hl)(o,i)}}const r=t.rotation+n,l=t.center;t.keepCenterWhileUserZoomRotate||we.IH(l,t.center,(0,ut.Kv)(t,e,{zoom:i,rotation:r})),bo(t),Ge(t,l,{animate:!1}),no(t,i,{animate:!1}),this.handler.mapState.disableRotationByUserInteraction||Ye(t,r,{animate:!1}),this.touchStartPoints=this.touchMovePoints,t.needRerender=!0}}class Pc extends Cc{constructor(t,e,o){super(t,e,o)}update(t){const e=this.touchStartPoints.map((e=>(0,ut.Te)(t.size,e))),o=this.touchMovePoints.map((e=>(0,ut.Te)(t.size,e))),i=(0,xt.L$)(e[0],e[1]),n=((0,xt.L$)(o[0],o[1])[1]-i[1])*kt.sP.mousePitchDelta;bo(t),to(t,(0,ut.uZ)(t.pitch+n,t.minPitch,t.maxPitch),{animate:!1}),this.touchStartPoints=this.touchMovePoints,t.needRerender=!0}}class Ic{constructor(t,e,o){this.handler=e,this.needClickOnTouchEnd=o,this.toZoomRotate=!1,this.touchStartPoints=be(t.touches,this.handler.container),this.handler.mapState.userHasInteracted=!0,this.isTimerStarted=void 0!==this.handler.dblClickTimer,xe(t)?this.startedInteractionTarget="pitch/zoom/rotation":this.isTimerStarted?(this.startedInteractionTarget="zoom/rotation",window.clearTimeout(this.handler.dblClickTimer),this.handler.dblClickTimer=void 0):this.startedInteractionTarget="center",this.handler.modules.map.emit("interactionstart",{target:this.startedInteractionTarget})}processAction(t){switch(t.type){case"touchstart":return this.processTouchStartAction(t);case"touchmove":return this.processTouchMoveAction(t);case"touchend":return this.processTouchEndAction(t);default:return this}}getStartedInteractionTarget(){return this.startedInteractionTarget}processTouchStartAction(t){return t.preventDefault(),1===this.touchStartPoints.length&&(this.needClickOnTouchEnd=!1,this.handler.modules.map.emit("interactionend",{target:"center"}),this.startedInteractionTarget="pitch/zoom/rotation",this.handler.modules.map.emit("interactionstart",{target:this.startedInteractionTarget}),this.handler.mapState.userHasInteracted=!0),this.touchStartPoints=be(t.touches,this.handler.container),this}processTouchMoveAction(t){t.preventDefault();const e=be(t.touches,this.handler.container);if(!xe(t))return _e.TE(this.touchStartPoints[0],e[0])<kt.U3.dragThreshold?(this.touchStartPoints=e,this):this.isTimerStarted?new kc(e[0],this.touchStartPoints[0],this.handler):this.handler.mapState.disableDragging?(this.touchStartPoints=e,this.needClickOnTouchEnd=!1,this):new Lc(e[0],this.touchStartPoints[0],this.handler);if(this.touchStartPoints.length<2)return this.processTouchStartAction(t);const o=_e.Ue(),i=_e.Ue();_e.lu(o,e[0],this.touchStartPoints[0]),_e.lu(i,e[1],this.touchStartPoints[1]);const n=_e.AK(o,i);if(n>0){const t=_e.TE(this.touchStartPoints[0],e[0]),o=_e.TE(this.touchStartPoints[1],e[1]);return t<kt.U3.pitchThreshold||o<kt.U3.pitchThreshold?(this.touchStartPoints=e,this):this.handler.mapState.disablePitchByUserInteraction?this:new Pc(e,this.touchStartPoints,this.handler)}if(n<0)return new Mc(e,this.touchStartPoints,this.handler);return(0,xt.se)(o)||(0,xt.se)(i)?this.pitchWaitingTimer?this:this.toZoomRotate?(this.toZoomRotate=!1,new Mc(e,this.touchStartPoints,this.handler)):(this.pitchWaitingTimer=window.setTimeout((()=>{this.toZoomRotate=!0,this.pitchWaitingTimer=void 0}),kt.U3.pitchWaitingTime),this):new Mc(e,this.touchStartPoints,this.handler)}processTouchEndAction(t){return t.cancelable&&t.preventDefault(),0===t.touches.length?1===t.changedTouches.length&&this.needClickOnTouchEnd?this.processTouchClickAction(this.touchStartPoints[0],t):(this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionend",{target:t.changedTouches.length>1?"pitch/zoom/rotation":"center"}),new Ac(this.handler)):(xe(t)||(this.handler.modules.map.emit("interactionend",{target:"pitch/zoom/rotation"}),this.startedInteractionTarget="center",this.handler.modules.map.emit("interactionstart",{target:this.startedInteractionTarget}),this.handler.mapState.userHasInteracted=!0),this.touchStartPoints=be(t.touches,this.handler.container),this)}processTouchClickAction(t,e){if(this.isTimerStarted){if(this.handler.mapState.zoom<this.handler.mapState.maxZoom){const e=this.handler.mapState,o=Math.min(e.zoom+1,e.maxZoom),i=e.keepCenterWhileUserZoomRotate?void 0:t;bo(e),no(e,o,{duration:kt.sP.animDuration,zoomPoint:i,blockBuildingAnimation:!0}),this.handler.mapState.needRerender=!0}}else if(this.handler.modules.layout.isActionWithCanvas(e))this.handler.modules.identifier.search("mouseClick",t,!0).then((o=>{const i=this.handler.modules.ruler;i.enabled?i.handleClick(t,o):this.handler.dblClickTimer||(this.handler.dblClickTimer=window.setTimeout((()=>{Me("click",o,e,t,this.handler.modules),this.handler.dblClickTimer=void 0}),kt.U3.doubleClickTime))}));else{const t=e.changedTouches[0];e.target&&t&&e.target.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}))}return this.handler.mapState.userHasInteracted=!0,this.handler.modules.map.emit("interactionend",{target:"center"}),new Ac(this.handler)}}class Lc{constructor(t,e,o){this.handler=o,this.touchMovePoint=t,this.touchStartPoint=e,this.handler.mapState.userHasInteracted=!0,this.handler.container.classList.add("mapgl-dragging"),this.update(this.handler.mapState)}processAction(t){switch(t.type){case"touchstart":return this.processTouchStartAction(t);case"touchmove":return this.processTouchMoveAction(t);case"touchend":return this.processTouchEndAction();default:return this}}update(t){const e=this.handler.modules.camera.unproject(this.touchStartPoint),o=this.handler.modules.camera.unproject(this.touchMovePoint),i=we.d9(t.center);we.IH(i,i,e),we.lu(i,i,o),bo(t),Ge(t,i,{animate:!1}),this.touchStartPoint=this.touchMovePoint,t.needRerender=!0}processTouchStartAction(t){return this.handler.container.classList.remove("mapgl-dragging"),this.handler.modules.map.emit("interactionend",{target:"center"}),new Ic(t,this.handler,!1)}processTouchMoveAction(t){t.preventDefault();const e=be(t.touches,this.handler.container);return this.touchMovePoint=e[0],this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState),this}processTouchEndAction(){return this.handler.container.classList.remove("mapgl-dragging"),this.handler.modules.map.emit("interactionend",{target:"center"}),this.handler.mapState.userHasInteracted=!0,new Ac(this.handler)}}class kc{constructor(t,e,o){this.handler=o,this.mapHeight=o.mapState.size[1],this.startZoom=o.mapState.zoom,this.touchMovePointY=t[1],this.touchStartPoint=e,this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState)}processAction(t){switch(t.type){case"touchstart":return this.processTouchStartAction(t);case"touchmove":return this.processTouchMoveAction(t);case"touchend":return this.processTouchEndAction();default:return this}}update(t){const e=this.touchMovePointY-this.touchStartPoint[1];if(0===e)return;const o=e/this.mapHeight,i=(0,ut.uZ)(this.startZoom+o*kt.sP.mobileTapDelta,t.minZoom,t.maxZoom),n=t.center;t.keepCenterWhileUserZoomRotate||we.IH(n,t.center,(0,ut.Kv)(t,this.touchStartPoint,{zoom:i})),bo(t),Ge(t,n,{animate:!1}),no(t,i,{animate:!1}),t.needRerender=!0}processTouchStartAction(t){return this.handler.modules.map.emit("interactionend",{target:"zoom/rotation"}),new Ic(t,this.handler,!1)}processTouchMoveAction(t){t.preventDefault();const e=be(t.touches,this.handler.container);return this.touchMovePointY=e[0][1],this.handler.mapState.userHasInteracted=!0,this.update(this.handler.mapState),this}processTouchEndAction(){return this.handler.modules.map.emit("interactionend",{target:"zoom/rotation"}),this.handler.mapState.userHasInteracted=!0,new Ac(this.handler)}}class Ac{constructor(t){this.handler=t}processAction(t){switch(t.type){case"mousedown":return this.processMouseDownAction(t);case"touchstart":return this.processTouchStartAction(t);default:return this}}processMouseDownAction(t){const e=ye(this.handler.container,t.clientX,t.clientY);switch(t.button){case 0:if(t.ctrlKey||t.metaKey)return new wc("keyPrimary",e,this.handler);if(this.handler.modules.layout.isActionWithCanvas(t)){Me("mousedown",this.handler.modules.identifier.searchSync(e),t,e,this.handler.modules)}return new Fc(e,this.handler);case 1:return new wc("auxiliary",e,this.handler);case 2:return new wc("secondary",e,this.handler);default:return this}}processTouchStartAction(t){if(t.preventDefault(),!t.touches)return this;if(this.handler.modules.layout.isActionWithCanvas(t)){const e=ye(this.handler.container,t.changedTouches[0].clientX,t.changedTouches[0].clientY);Me("touchstart",this.handler.modules.identifier.searchSync(e),t,e,this.handler.modules)}return new Ic(t,this.handler,1===t.touches.length)}}class jc{processAction(){return this}}class Tc{constructor(t,e){this.preventDefault=t=>{t.preventDefault()},this.onMouseMove=t=>{this.dblClickTimer&&(this.dblClickTimer=void 0),this.switchState(t)},this.onTouchStart=t=>{this.modules.layout.isActionWithMap(t)&&this.switchState(t)},this.switchState=t=>{this.state;const e=this.state.processAction(t);this.state instanceof jc||(this.state=e)},this.state=new Ac(this),this.mapState=t,this.modules=e,this.container=e.layout.mapContainer,document.addEventListener("mouseup",this.switchState),document.addEventListener("keydown",this.switchState),document.addEventListener("keyup",this.switchState),document.addEventListener("mouseleave",this.switchState),document.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("click",this.switchState),this.container.addEventListener("mousedown",this.switchState),this.container.addEventListener("mouseout",this.switchState),document.addEventListener("touchstart",this.onTouchStart),document.addEventListener("touchend",this.switchState),document.addEventListener("touchmove",this.switchState),this.container.addEventListener("dragstart",this.preventDefault),this.container.addEventListener("drag",this.preventDefault),this.container.addEventListener("dragend",this.preventDefault),this.container.addEventListener("contextmenu",this.preventDefault),this.container.addEventListener("touchmove",this.preventDefault)}destroy(){document.removeEventListener("mouseup",this.switchState),document.removeEventListener("keydown",this.switchState),document.removeEventListener("keyup",this.switchState),document.removeEventListener("mouseleave",this.switchState),document.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("click",this.switchState),this.container.removeEventListener("mousedown",this.switchState),this.container.removeEventListener("mouseout",this.switchState),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchend",this.switchState),document.removeEventListener("touchmove",this.switchState),this.container.removeEventListener("dragstart",this.preventDefault),this.container.removeEventListener("drag",this.preventDefault),this.container.removeEventListener("dragend",this.preventDefault),this.container.removeEventListener("contextmenu",this.preventDefault),this.container.removeEventListener("touchmove",this.preventDefault)}block(){if(this.state instanceof jc)return;const{map:t}=this.modules;switch(this.container.classList.remove("mapgl-dragging"),this.container.classList.remove("mapgl-rotating"),this.state.constructor){case Fc:case Sc:case Lc:t.emit("interactionend",{target:"center"});break;case wc:case zc:t.emit("interactionend",{target:"pitch/rotation"});break;case kc:t.emit("interactionend",{target:"zoom/rotation"});break;case Mc:case Pc:t.emit("interactionend",{target:"pitch/zoom/rotation"});break;case Ic:{const e=this.state.getStartedInteractionTarget();t.emit("interactionend",{target:e});break}}this.state=new jc}unblock(){this.state instanceof Ac||this.state instanceof jc&&(this.state=new Ac(this))}}var Ec=o(9311),Oc=o(4138),Hc=o(4635),Wc=o(1813),Rc=o(1683),Bc=o(1285);class Nc{constructor(t,e){this.mapState=t,this.modules=e,this.enabled=!1,this.justEnabled=!1,this.isMetaLoading=!1,this.lastUpdateTime=-1/0,this.regionIds=new Set,this.id=(0,ue.f)(),this.gridState=(0,Hc.y7)("traffic",0,this.id,kt.nM.minZoom,kt.nM.maxZoom,kt.nM.minZoom,kt.nM.maxDetailLevel,e,t),this.viewportDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"demMode",type:"boolean"}])}show(){this.enabled||(this.enabled=!0,this.justEnabled=!0,this.modules.map.emit("trafficshow"))}hide(){this.enabled&&((0,Hc.d1)(this.gridState),this.enabled=!1,this.modules.map.emit("traffichide"))}isEnabled(){return this.enabled}destroy(){(0,Hc.d1)(this.gridState)}redraw(){this.enabled&&((0,Hc.d1)(this.gridState),(0,Ec.o)(this.gridState,this.mapState))}activateStyleUpdating(){this.enabled&&(0,Bc.I2)(this.gridState,this.mapState.handyStyleId,this.modules.styleManager.getStyleRevision(this.mapState.handyStyleId),this.modules.map.core.getIsFirstStyleUpdate())}finishStyleUpdating(){this.enabled&&(0,Bc.cA)(this.gridState)}update(){if(!this.enabled)return;if((0,ut.TH)(this.regionIds,this.mapState.shownRegionIds)||(this.regionIds=new Set(this.mapState.shownRegionIds),this.fetchMeta()),Date.now()-this.lastUpdateTime>kt.nM.updateInterval&&this.fetchMeta(),void 0===this.timestamp)return;(this.viewportDiffer.check(this.mapState)||this.justEnabled)&&(this.justEnabled=!1,(0,Ec.o)(this.gridState,this.mapState),this.mapState.needRerender=!0);const t=Object.assign({},this.gridState.displayedMods);(0,Oc.r)(this.gridState,this.mapState,this.modules),this.fetch((0,Hc.w1)(this.gridState),this.timestamp),this.abortFetch((0,Hc.lH)(this.gridState)),this.generate((0,Hc.e)(this.gridState)),this.clearTiles((0,Hc.HM)(this.gridState)),(0,Hc.aq)(this.modules.tileManager,this.mapState,this.gridState,t)}viewportTilesReady(){return(0,Hc.ej)(this.gridState.tiles,this.gridState.viewportTiles)}fetch(t,e){t.sort(((t,e)=>(0,Le.qu)(this.mapState.center,t,e))).forEach((t=>function(t,e,o,i,n){if(!i.size)return;e.workers.parser.fetchTrafficTile({coords:t.coords,tileServer:o.trafficServer,tileProtocol:o.trafficProtocol||o.tileProtocol,regionIds:Array.from(i),timestamp:n}).then((()=>{t.status===Wc.z3.Loading&&(t.serverMetadata=[{regionId:0,metatileHash:-2}])}))}(t,this.modules,this.mapState,this.regionIds,e)))}abortFetch(t){t.forEach((t=>this.modules.workers.parser.abortTrafficTileRequest(t.key)))}generate(t){t.sort(((t,e)=>(0,Le.qu)(this.mapState.center,t,e))).forEach((t=>{const e=(0,Wc._v)(t);e&&this.modules.workers.parser.generateTrafficTile({styleId:this.mapState.handyStyleId,coords:t.coords,pixelRatio:window.devicePixelRatio,styleState:this.mapState.styleState,sourceId:this.modules.defaultSource.getId()}).then((({results:t})=>(0,Rc.aK)(e,t)))}))}clearTiles(t){for(const e of t)this.modules.workers.parser.deleteTrafficTile(e.key),delete this.gridState.tiles[e.key]}fetchMeta(){if(this.isMetaLoading||!this.regionIds.size)return;this.isMetaLoading=!0;const t=this.mapState,e=(0,de.XK)(kt.nM.timestampUrl,{host:t.trafficServer,protocol:t.trafficProtocol||t.tileProtocol,regions:Array.from(this.regionIds).join(",")});fetch(e).then((t=>{if(t.ok)return t.json();throw new Error(`Request traffic timestamp error with status ${t.status}`)})).then((t=>{var e,o;if(!t.length||void 0===(null===(e=t[0])||void 0===e?void 0:e.time)||void 0===(null===(o=t[0])||void 0===o?void 0:o.score))throw new Error(`Bad traffic timestamp and score response ${t}`);let i=0;t.forEach((t=>i+=t.score)),i=Math.round(i/t.length),this.modules.map.emit("trafficscore",{score:i}),this.timestamp=t[0].time,this.isMetaLoading=!1,this.lastUpdateTime=Date.now(),this.redraw()})).catch((t=>{this.isMetaLoading=!1,console.error(t)}))}}class Dc{constructor(t){this.externalContainer=t,this.rootContainer=document.createElement("div"),this.rootContainer.style.position="relative",this.rootContainer.style.height="100%",this.rootContainer.style.width="100%",this.rootContainer.style.overflow="hidden",this.externalContainer.appendChild(this.rootContainer),this.mapContainer=document.createElement("div"),this.mapContainer.style.position="relative",this.mapContainer.style.height="100%",this.mapContainer.style.width="100%",this.mapContainer.style.touchAction="none",this.mapContainer.style.webkitUserSelect="none",this.mapContainer.style.userSelect="none",this.rootContainer.appendChild(this.mapContainer),this.canvas=document.createElement("canvas"),this.canvas.style.display="block",this.mapContainer.appendChild(this.canvas),this.htmlContainerInMap=document.createElement("div"),this.htmlContainerInMap.style.position="absolute",this.htmlContainerInMap.style.left="0",this.htmlContainerInMap.style.top="0",this.htmlContainerInMap.style.width="100%",this.htmlContainerInMap.style.height="0",this.htmlContainerInMap.style.webkitUserSelect="auto",this.htmlContainerInMap.style.userSelect="auto",this.mapContainer.appendChild(this.htmlContainerInMap),this.htmlContainerOutMap=document.createElement("div"),this.htmlContainerOutMap.style.position="absolute",this.htmlContainerOutMap.style.left="0",this.htmlContainerOutMap.style.top="0",this.htmlContainerOutMap.style.width="100%",this.htmlContainerOutMap.style.height="0",this.mapContainer.after(this.htmlContainerOutMap)}setCanvasSize(t,e){const o=window.devicePixelRatio;return this.canvas.width=t*o,this.canvas.height=e*o,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this}destroy(){for(;this.externalContainer.lastChild;)this.externalContainer.removeChild(this.externalContainer.lastChild)}isActionWithCanvas(t){return t.target===this.canvas}isActionWithMap(t){if(t instanceof MouseEvent||t instanceof KeyboardEvent)return this.isTargetInMap(t.target);return Array.from(t.touches).map((t=>t.target)).some((t=>this.isTargetInMap(t)))}isTargetInMap(t){return!!(t&&t instanceof Node)&&this.mapContainer.contains(t)}}class Uc{constructor(t,e){this.loadingCounter=0,this.isIdle=()=>0===this.loadingCounter,this.state=t,this.modules=e,this.textureKeys=[],this.texturesMap=new Map}addTexture(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){this.loadingCounter++;const o=yield Tl(t);return yield this.storeTexture(o,e)}))}addPreparedTexture(t){const e=`prepared-${(0,ue.f)()}`;return this.textureKeys.push(e),this.texturesMap.set(e,t),this.textureKeys.length-1}updatePreparedTexture(t,e){this.deleteTexture(t),this.texturesMap.set(this.textureKeys[t],e)}loadTexture(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){this.loadingCounter++;const o=yield this.loadImage(t);if(o)return yield this.storeTexture(o,e);this.decreaseLoadingCounter()}))}getTexture(t){return this.texturesMap.get(this.textureKeys[t])}destroy(){this.textureKeys=[],this.texturesMap.clear()}deleteTexture(t){var e;const o=this.textureKeys[t];return null===(e=this.texturesMap.get(o))||void 0===e||e.remove(),this.texturesMap.delete(o)}decreaseLoadingCounter(){this.loadingCounter=Math.max(this.loadingCounter-1,0)}storeTexture(t,e){var o,n;return(0,i.mG)(this,void 0,void 0,(function*(){const i=null==e?void 0:e.size,a=null!==(o=null==e?void 0:e.pixelRatio)&&void 0!==o?o:window.devicePixelRatio,r=null!==(n=null==e?void 0:e.imagePadding)&&void 0!==n?n:1;this.decreaseLoadingCounter();const l=function(t,e){const o=void 0!==e?`_${e[0]},${e[1]}`:"";return`${t}${o}`}(t.getAttribute("src")||t.currentSrc,i),s=this.textureKeys.indexOf(l);if(s>-1&&this.texturesMap.has(l))return s;const c=this.modules.renderer.getRenderingContext(),d=(i||[t.width,t.height]).map((t=>t*a)),m=El(t,d),h=d.map((t=>t+2*r));if(!(null==e?void 0:e.skipAtlasSizeChecking)&&(h[0]>kt.a5[0]||h[1]>kt.a5[1]))throw new Error(`Image texture dimensions ${h} are larger than the maximum possible ${kt.a5}`);const p=new Wo(void 0,{size:h,flipY:!1,magFilter:Wo.LinearFilter,minFilter:Wo.LinearFilter}).prepare(c);return p.subImage(c,m,r,r),this.texturesMap.set(l,p),this.textureKeys.push(l),this.state.needRerender=!0,this.textureKeys.length-1}))}loadImage(t){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise((e=>{const o=new Image;o.crossOrigin="Anonymous",o.src=t,o.onload=()=>e(o),o.onerror=()=>e(void 0)}))}))}}var Zc=o(6849),Gc=o(1e3);class Vc{constructor(t){this.isLoading=!1,this.getKeyInfo=()=>(0,i.mG)(this,void 0,void 0,(function*(){return yield this.request})),this.isIdle=()=>!this.isLoading;const{tileKey:e}=t;if(e===kt.Sv.tileKey||Gc.X)this.request=Promise.resolve({showCommPoi:!1,urbi:!1});else{const t=(0,de.IG)(Zc.ns,{keyID:e});this.isLoading=!0,this.request=fetch(t).then((t=>{if(t.ok)return t.json()}),(()=>{console.error("Could not load tile key info. A style layers with commercial POI will be added to applied styles.")})).then((t=>{if(this.isLoading=!1,!t||!t.result||200!==t.meta.code)return{showCommPoi:true,urbi:false};const{showCommPoi:e,urbi:o}=t.result.service.properties.public;return{showCommPoi:null==e||e,urbi:null!=o&&o}}))}}}class qc{constructor(){this.sources=[]}addSource(t){this.sources.push(t)}removeSource(t){this.sources=this.sources.filter((e=>e.getId()!==t))}getSourceById(t){return this.sources.find((e=>e.getId()===t))}}var Xc=o(7231);class $c{constructor(t,e){var o;this.modules=e,this.type="default",this.id=(0,Dn.Q)(),this.options={tileServer:t.tileServer,tileSet:t.tileSet,tileProtocol:t.tileProtocol,tileKey:t.tileKey,subdomains:t.subdomains,appId:t.appId,defaultLang:t.tileServerDefaultLang,sessionId:null!==(o=t.tileSessionId)&&void 0!==o?o:t.sessionId,isDefaultSource:!0,identifyAsDefaultSource:!0,modelsPath:t.defaultSourceModelsRootUrl},this.zenithSource=new Bl.nt(this.id,this.modules,this.options),this.universeTileLayer=new hi.I(0,kt.Sv.maxUniverseZoom,0,kt.Sv.maxUniverseZoom,this.modules,t,this.zenithSource),this.universeTileLayer.getLabelingData=()=>{const t=hi.I.prototype.getLabelingData.call(this.universeTileLayer);return this.regionalTileLayer.isBlank()||(t.labelsKeys=[]),t},this.modules.tileManager.addTileLayer(this.universeTileLayer),this.regionalTileLayer=new hi.I(kt.Sv.maxUniverseZoom+1,kt.Sv.maxRegionalZoom,kt.Sv.maxUniverseZoom+1,kt.Sv.maxDetailLevel,this.modules,t,this.zenithSource),this.modules.tileManager.addTileLayer(this.regionalTileLayer),this.commercialPoiSource=new Xc.n(this.id,this.modules,{url:`${t.tileProtocol}://${t.tileServer}/v2/ald?ts=${t.commercialTileSet}&x={x}&y={y}&z={z}&lang=${t.lang}`,flipY:!0,identifyAsDefaultSource:!0}),this.commercialPoiTileLayer=new hi.I(kt.KL.minZoom,kt.KL.maxZoom,kt.KL.minZoom,ua.rR,this.modules,t,this.commercialPoiSource),this.modules.tileManager.addTileLayer(this.commercialPoiTileLayer),this.modules.sourceStorage.addSource(this)}destroy(){var t;this.modules.tileManager.removeTileLayer(this.universeTileLayer),this.universeTileLayer.destroy(),this.modules.tileManager.removeTileLayer(this.regionalTileLayer),this.regionalTileLayer.destroy(),this.zenithSource.destroy(),this.commercialPoiTileLayer&&(this.modules.tileManager.removeTileLayer(this.commercialPoiTileLayer),this.commercialPoiTileLayer.destroy()),null===(t=this.commercialPoiSource)||void 0===t||t.destroy(),this.modules.sourceStorage.removeSource(this.id)}setAttributes(t){var e,o;this.zenithSource.setAttributes(Object.assign(Object.assign({},t),me.so)),this.universeTileLayer.redraw(),this.regionalTileLayer.redraw(),null===(e=this.commercialPoiSource)||void 0===e||e.setAttributes(t),null===(o=this.commercialPoiTileLayer)||void 0===o||o.redraw()}getAttributes(){return this.zenithSource.getAttributes()}getId(){return this.id}setHoverId(t){this.regionalTileLayer.setHoverId(t)}setDisabledRegionsId(t){this.regionalTileLayer.disabledRegions=t,this.universeTileLayer.disabledRegions=t}resetHoverId(){this.regionalTileLayer.resetHoverId()}setFeatureStateMap(t){this.zenithSource.setFeatureStateMap(t),this.universeTileLayer.onFeatureStateMapChange(),this.regionalTileLayer.onFeatureStateMapChange(),this.modules.modelLayer.onFeatureStateMapChange()}setFeatureStateMapBinary(t){this.zenithSource.setFeatureStateMapBinary(t),this.universeTileLayer.onFeatureStateMapChange(),this.regionalTileLayer.onFeatureStateMapChange(),this.modules.modelLayer.onFeatureStateMapChange()}setCommercialModelIds(t){this.zenithSource.appendHiddenObjectIds(t),this.regionalTileLayer.onCommercialModelsChange(t)}generateHoverTile(t,e,o,i,n,a,r,l){return this.zenithSource.generateTile(t,e,o,i,n,a,r,l)}generateModel(t){return this.zenithSource.generateModel(t)}isIdentifiedAsDefault(){return!0}}const Yc={dead:!0,alive:!0,unused:!0,commercialDead:!1,commercialAlive:!1};class Jc{constructor(t,e){this.mapState=t,this.modules=e,this.options={},this.viewportDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"padding",type:"padding"},{path:"demMode",type:"boolean"}]),this.sizeDiffer=new vo([{path:"size",type:"vec2"}])}update(){this.isEnabled()&&(this.sizeDiffer.check(this.mapState)&&this.updateSize(),this.viewportDiffer.check(this.mapState)&&this.clear())}isEnabled(){return!!this.canvas}show(t=Yc){this.options=t;Object.values(t).every((t=>!1===t))?this.hide():(this.createCanvas(),this.mapState.needLabeling=!0)}hide(){this.canvas&&(this.modules.layout.mapContainer.removeChild(this.canvas),this.ctx=void 0,this.canvas=void 0)}drawLabels(t){if(!this.canvas||!this.ctx)return;const e=this.ctx,o=this.options,i={[hs.m3.Dead]:"#ff0000",[hs.m3.Alive]:"#30763c",[hs.m3.Unused]:"#aaa",[hs.m3.CommercialAlive]:"#3a9f22",[hs.m3.CommercialDead]:"#ff0000"},n=new Int32Array(t),a={[hs.m3.Dead]:[],[hs.m3.Alive]:[],[hs.m3.Unused]:[],[hs.m3.CommercialAlive]:[],[hs.m3.CommercialDead]:[]};for(let t=0;t<n.length;t+=5){const e=n[t+4];a[e].push({x:n[t],y:n[t+1],width:n[t+2],height:n[t+3]})}this.clear();const r=window.devicePixelRatio,l=t=>{e.strokeStyle=i[t],a[t].forEach((t=>e.strokeRect(t.x*r+.5,t.y*r+.5,t.width*r,t.height*r)))};e.setLineDash([]),o.unused&&l(hs.m3.Unused),o.dead&&l(hs.m3.Dead),o.alive&&l(hs.m3.Alive),e.setLineDash([6]),o.commercialDead&&l(hs.m3.CommercialDead),o.commercialAlive&&l(hs.m3.CommercialAlive)}clear(){if(this.canvas&&this.ctx){const{clientWidth:t,clientHeight:e}=this.canvas;this.ctx.clearRect(0,0,t*window.devicePixelRatio,e*window.devicePixelRatio)}}createCanvas(){this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.modules.layout.mapContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")||void 0,this.updateSize())}updateSize(){if(!this.canvas)return;const{clientWidth:t,clientHeight:e}=this.modules.layout.rootContainer;this.canvas.width=t*window.devicePixelRatio,this.canvas.height=e*window.devicePixelRatio,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"}}function Kc(t,e,o){const i=document.createElement("script");i.onload=e,i.onerror=t=>o(function(t){let e="A problem with loading of the script";"string"==typeof t?e=`${e} ${t}`:t.target instanceof Element&&(e=`${e} ${t.target.getAttribute("src")||""}`);return e}(t)),i.src=t,document.head.appendChild(i)}function Qc(t){return new Promise(((e,o)=>{Kc(t,e,o)}))}class td{isReady(){return!0}render(){}update(){}hasDisplayedBuilding(){return!1}getEventTarget(){}}class ed{constructor(t,e){this.state=t,this.modules=e,this.impl=new td,this.scriptFetchState="init"}getEventTarget(t){return this.impl.getEventTarget(t)}hasDisplayedBuilding(t){return this.impl.hasDisplayedBuilding(t)}isReady(){return("init"===this.scriptFetchState||"done"===this.scriptFetchState)&&this.impl.isReady()}render(){this.impl.render()}update(){if(!this.state.needRerender)return;const t=[];this.modules.tileManager.getTileObjects().forEach((({children:e})=>{if(e)return e.filter((({symbol:t,sink:e})=>"gltfModel"===t&&"anchor"===e)).forEach((({attributes:e})=>{t.push(e)}))})),0!==t.length&&"init"===this.scriptFetchState&&(this.scriptFetchState="loading",function(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){const o=t.threeJs.path,i=`${o}/three.min.js`,n=`${o}/DRACOLoader.js`,a=`${o}/GLTFLoader.js`;if(window.THREE)return new od(t,e,window.THREE);try{yield Qc(i),yield Promise.all([Qc(n),Qc(a)]);const{THREE:o}=window;return new od(t,e,o)}catch(t){console.error(t)}}))}(this.state,this.modules).then((e=>{e&&(this.impl=e,this.scriptFetchState="done",this.impl.update(t))}))),this.impl.update(t)}}class od{constructor(t,e,o){this.state=t,this.modules=e,this.three=o,this.maxStyleZoom=-1/0,this.minStyleZoom=1/0,this.isModelReady=!1,this.modelFetchState="init",this.scene=new this.three.Scene,this.tmpMatrix=new this.three.Matrix4,this.camera=new this.three.PerspectiveCamera,this.modelDataMap={},this.modelIds=new Set,this.displayedModelAttributes=new Map,this.modelsVisibilityMap=new Map,this.modelsMapPoints=new Map,this.camera.updateMatrix=()=>{},this.camera.updateMatrixWorld=()=>{},this.camera.updateProjectionMatrix=()=>{},this.renderer=new this.three.WebGLRenderer({canvas:this.modules.map.getCanvas(),context:this.modules.map.getWebGLContext(),alpha:!0,antialias:window.devicePixelRatio<2}),this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=this.three.sRGBEncoding,this.renderer.autoClear=!1;const i=new this.three.AmbientLight(16777215,2.9);this.scene.add(i),this.raycaster=new this.three.Raycaster,this.pointer=new this.three.Vector2;const n=new this.three.LoadingManager,a=new this.three.DRACOLoader(n).setDecoderPath(this.state.threeJs.path.concat("/draco/"));this.loader=(new this.three.GLTFLoader).setDRACOLoader(a)}render(){const t=this.modules.map.getStyleZoom();t<this.minStyleZoom||t>this.maxStyleZoom||(this.camera.projectionMatrix.fromArray(this.modules.camera.projectionMatrix),this.camera.projectionMatrixInverse.copy(this.camera.projectionMatrix).invert(),this.tmpMatrix.fromArray(this.modules.camera.viewProjectionMatrix.slice()),this.camera.matrixWorldInverse.multiplyMatrices(this.camera.projectionMatrixInverse,this.tmpMatrix),this.camera.matrixWorld.copy(this.camera.matrixWorldInverse).invert(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.renderer.resetState(),this.renderer.setViewport(this.state.viewport.left*window.devicePixelRatio,this.state.viewport.bottom*window.devicePixelRatio,this.state.size[0]*window.devicePixelRatio,this.state.size[1]*window.devicePixelRatio),this.renderer.render(this.scene,this.camera),"done"===this.modelFetchState&&(this.isModelReady=!0,this.modelFetchState="init"))}hasDisplayedBuilding(t){const{styleZoom:e}=this.state;return e>=this.minStyleZoom&&e<=this.maxStyleZoom&&this.modelIds.has(t)}getEventTarget(t){const{clientX:e,clientY:o}="changedTouches"in t?t.changedTouches[0]:t,i=this.getThreeJsViewportBounds();if(!(0,Re.r3)(i,[e,window.innerHeight-o]))return;const n=i.max[0]-i.min[0],a=i.max[1]-i.min[1],r=e-i.min[0],l=window.innerHeight-o-i.min[1];this.pointer.x=r/n*2-1,this.pointer.y=l/a*2-1,this.raycaster.setFromCamera(this.pointer,this.camera);const s=this.raycaster.intersectObjects(this.scene.children,!0),c=s[0]?s[0]:void 0;return c&&"Mesh"===c.object.type?{target:c,distance:c.distance,symbol:"buildingModel",id:c.object.userData._id}:void 0}isReady(){return"init"===this.modelFetchState||!("done"!==this.modelFetchState||!this.isModelReady)}update(t){let e=!1;const o=new Map;t.forEach((t=>{o.set(t.buildingId,t)}));const i=[];this.displayedModelAttributes.forEach(((t,n)=>{o.has(n)||(i.push(t),e=!0)}));const n=[];o.forEach(((t,o)=>{this.displayedModelAttributes.has(o)||(n.push(t),e=!0)})),e&&(this.updateMinAndMaxStyleZoom(t),this.loadAndDisplayModels(n),this.removeOldModels(i),this.displayedModelAttributes=o,e=!1),this.updateModelsVisibilityState()}getThreeJsViewportBounds(){const t=window.devicePixelRatio,e=new this.three.Vector4;this.renderer.getViewport(e);const o=e.x/t,i=e.y/t,n=e.z/t,a=e.w/t;return(0,Re.Ue)([o,i],[o+n,i+a])}updateMinAndMaxStyleZoom(t){t.forEach((t=>{var e,o;const i=this.modules.styleManager.getStyleLayer(t.styleId,t.layerId);this.minStyleZoom=Math.min(null!==(e=null==i?void 0:i.minzoom)&&void 0!==e?e:-1/0,this.minStyleZoom),this.maxStyleZoom=Math.max(null!==(o=null==i?void 0:i.maxzoom)&&void 0!==o?o:1/0,this.maxStyleZoom)}))}updateModelsVisibilityState(){const{styleZoom:t}=this.state;if(t<this.minStyleZoom)return this.displayedModelAttributes.forEach((t=>{this.modelsVisibilityMap.get(t.buildingId)&&this.modules.map.emit("commmodelhide",{buildingId:t.buildingId})})),void this.modelsVisibilityMap.clear();const e=new _n.V(this.state).getViewportVertices();this.displayedModelAttributes.forEach((t=>{var o;const i=null!==(o=this.modelsMapPoints.get(t.buildingId))&&void 0!==o?o:(0,zt.yq)(t.lngLat),n=this.modelsVisibilityMap.get(t.buildingId),a=(0,Re.r3)((0,sn.BS)(e),i);if(void 0===n)return a&&this.modules.map.emit("commmodelshow",{buildingId:t.buildingId}),void this.modelsVisibilityMap.set(t.buildingId,a);n!==a&&(this.modules.map.emit(a?"commmodelshow":"commmodelhide",{buildingId:t.buildingId}),this.modelsVisibilityMap.set(t.buildingId,a))}))}appendHiddenObjectIds(){const t=[];this.modelIds.forEach((e=>{t.push((0,ve.IL)(e))})),this.modules.defaultSource.setCommercialModelIds(t)}loadAndDisplayModels(t){0!==t.length&&(this.isModelReady=!1,this.modelFetchState="loading",Promise.all(t.reduce(((t,e)=>(t.push(new Promise((t=>{const o=new this.three.Object3D;this.loader.load(e.modelSrc,(i=>{i.scene.traverse((t=>{t.isMesh&&(t.userData._id=e.buildingId)})),o.add(i.scene);const n=(0,zt.yq)(e.lngLat),a=(0,zt.yq)(e.lngLatDirection),r=a[0]-n[0],l=a[1]-n[1];o.rotateX(Math.PI/2),o.rotateY(Math.atan2(l,r));const s=_e.TE(n,a);o.scale.set(s,s,s),o.position.set(n[0],n[1],0);const c=id(e);this.modelDataMap[c]=o,this.modelsMapPoints.set(e.buildingId,n),t({id:c,model:o,buildingId:e.buildingId})}),(()=>{}),(()=>t(void 0)))}))),t)),[])).then((t=>{t.forEach((t=>{if(!t)return;const e=this.modelDataMap[t.id];e&&(this.scene.add(e),this.state.needRerender=!0,this.modelFetchState="done",this.modelIds.add(t.buildingId))})),this.appendHiddenObjectIds()})).catch((()=>{this.modelFetchState="init"})))}removeOldModels(t){0!==t.length&&t.forEach((t=>{const e=id(t),o=this.modelDataMap[e];o&&(this.scene.remove(o),this.disposeObject(o),this.modelDataMap[e]=void 0,this.modelIds.delete(t.buildingId),this.appendHiddenObjectIds()),this.modelsMapPoints.delete(t.buildingId)}))}disposeObject(t){const e=t.children;if(e)for(let t=0;t<e.length;t+=1)this.disposeObject(e[t]);const o=t.geometry,i=t.material;if(o&&o.dispose(),i){const t=i.map;t&&t.dispose(),i.dispose()}}}function id(t){return`${t.modelSrc}_${t.buildingId}`}class nd{constructor(t,e,o){this.map=o,this.camera=new _n.V(t),this.layout=new Dc(e),this.collector=new Eo.P("main"),this.workers=new Is,this.styleManager=new Vl(this),this.assetManager=new as(t,this),this.imageManager=new Uc(t,this),this.floorManager=new Zs(t,this),this.personalPoiManager=new ps(t,this),this.buildingHeightAnimator=new Ao(t,this),this.gltfAnimator=new To(t,this),this.renderer=new Il(t,this),this.layers=new Os(t),this.sourceStorage=new qc,this.tileManager=new Gs(t,this),this.modelLayer=new ds(t,this),this.dynamicStyle=new ke.hX,this.imageCache=new Rs(this),this.identifier=new kl(t,this),this.labeler=new qs(t,this),this.ruler=new vc(t,this),this.trafficTileLayer=new Nc(t,this),this.handler=new Tc(t,this),this.mouseMoveHandler=new Lo(this),this.tileKeyInfo=new Vc(t),this.demManager=new Xn(this),this.defaultSource=new $c(t,this),this.labelsDebug=new Jc(t,this),t.threeJs.active&&(this.threeJsSceneManager=new ed(t,this))}destroy(){this.demManager.disable(),this.imageManager.destroy(),this.trafficTileLayer.destroy(),this.tileManager.destroy(),this.workers.destroy(),this.renderer.destroy(),this.handler.destroy(),this.mouseMoveHandler.destroy(),this.ruler.destroy(),this.labelsDebug.hide(),this.layout.destroy()}}class ad{constructor(t,e={},o){var i,n,a,r;this.isStyleUpdateInProgress=!1,this.isFirstStyleUpdate=!0,this.lastResizeTime=-1/0,this.renderLoop=t=>{var e;this.requestedFrame=requestAnimationFrame(this.renderLoop),this.modules.map.emit("framestart");const o=this.state;o.time=Date.now(),o.collectStats&&(o.stats.drawCount=0,o.stats.vertexCount=0,o.stats.tileCount=0);const i=o.metrics;if(Number.isNaN(i.interactive+i.firstlabeling+i.ready)||o.metricsSent||(this.modules.map.emit("metrics",o.metrics),o.metricsSent=!0),this.state.enableTrackResize&&this.autoResize(t),this.modules.mouseMoveHandler.update(),this.handlers.forEach((t=>t.update())),ro(o),qe(o),Ke(o),oo(o),this.stillnessUpdater.update(o),De(o,this.modules.layout.rootContainer),((t,e,o)=>{Oe.Vx("viewport",{step:(t,i)=>{t.viewport={top:i[0],right:i[1],bottom:i[2],left:i[3]},He(t,e,o)}},t)})(o,this.modules.layout.rootContainer,this.modules.renderer),((t,e)=>{Oe.Vx("padding",{step:(t,o)=>{t.padding={top:o[0],right:o[1],bottom:o[2],left:o[3]},We(t,e)}},t)})(o,this.modules.renderer),this.modules.buildingHeightAnimator.update(),this.modules.gltfAnimator.update(),null===(e=this.modules.threeJsSceneManager)||void 0===e||e.update(),o.demMode=this.checkDemEnabled()&&o.elevationScale>0,this.modules.camera.update(),this.updateElevation(),this.updateTilesBounds(),this.modules.demManager.update(),this.modules.labelsDebug.update(),this.modules.trafficTileLayer.update(),this.modules.layers.getLayers().forEach((t=>{void 0!==t.update&&t.update()})),this.modules.tileManager.update(),this.modules.floorManager.update(),this.modules.modelLayer.update(),this.modules.personalPoiManager.update(),this.modules.ruler.update(),this.modules.dynamicStyle.update(),this.modules.map.emit("update"),this.modules.labeler.update(),this.performanceChecker.update(),this.modules.identifier.update(),kt.sY.alwaysRerender||o.needRerender){let t=this.modules.tileManager.getTileObjects();o.demMode&&(t=t.concat(this.modules.demManager.getGroundTiles())),Number.isNaN(o.metrics.firstdraw)&&(o.metrics.firstdraw=performance.now()-o.metrics.start),this.modules.renderer.renderTileObjects(t),o.needRerender=!1,o.collectStats&&this.modules.map.emit("stats",o.stats)}this.finishStyleUpdatingCheck(),this.modules.map.update(),this.isReady()&&this.modules.assetManager.invalidateUsedModels(),o.shouldIsReadyWaitForUpdates=!1,this.modules.map.emit("frameend")},this.onWindowUnload=()=>{const t=this.performanceChecker.getEarlyFps();void 0!==t&&fo({eventAction:"FPS",eventLabel:"Early",eventValue:t})};const l=Object.assign(Object.assign({},ad.options),e),s=Object.assign(Object.assign({},ad.options.padding),l.padding),c=Object.assign(Object.assign({},ad.options.viewport),l.viewport),d=l.maxBounds?Re.X3(l.maxBounds):he.Vv,m=(0,he.yq)(l.center);Re.Rk(m,d,m);const h=this.state={time:Date.now(),center:m,zoom:void 0!==l.styleZoom?(0,he.Z3)(l.styleZoom,m):l.zoom,styleZoom:void 0!==l.styleZoom?l.styleZoom:(0,he.X$)(l.zoom,m),zoomTypePreserving:void 0!==l.styleZoom?"styleZoom":"zoom",minZoom:l.minZoom,maxZoom:l.maxZoom,maxBounds:d,rotation:(0,ut.Id)(l.rotation),touchRotationThreshold:(0,ut.Id)(l.touchRotationThreshold),pitch:(0,ut.Id)(l.pitch),minPitch:(0,ut.Id)(l.minPitch),maxPitch:(0,ut.Id)(l.maxPitch),size:[Math.max(1,t.clientWidth-c.left-c.right),Math.max(1,t.clientHeight-c.top-c.bottom)],selectedIds:[],hiddenObjectIds:new Set,tickers:{},stillness:1,needRerender:!0,needLabeling:!1,userHasInteracted:!1,viewport:c,padding:s,labelingOpacity:0,tileServer:l.tileServer,tileSet:l.tileSet,tileProtocol:l.tileProtocol,commercialTileSet:l.commercialTileSet,subdomains:l.subdomains.split(""),floorsEnabled:l.floorsEnabled,floorsUrl:l.floorsUrl,collectStats:l.collectStats,stats:{tileCount:0,dynamicTileCount:0,drawCount:0,vertexCount:0},trafficServer:l.trafficServer,trafficProtocol:l.trafficProtocol,identifyPickDistance:kt.yV.pickDistance,lang:l.lang,tileServerDefaultLang:l.tileServerDefaultLang,tileKey:l.key,appId:l.appId,disableHoverStyles:l.disableHoverStyles,keepCenterWhileUserZoomRotate:!!l.keepCenterWhileUserZoomRotate,disableRotationByUserInteraction:!!l.disableRotationByUserInteraction,disablePitchByUserInteraction:!!l.disablePitchByUserInteraction,disableDragging:!!l.disableDragging,performanceCaveatEmitted:!1,sessionId:l.sessionId,tileSessionId:l.tileSessionId,shownRegionIds:new Set,preserveDrawingBuffer:!!l.preserveDrawingBuffer,defaultBackgroundColor:l.defaultBackgroundColor,handyStyleId:NaN,styleState:(p=l.styleState,Object.assign(Object.assign({},Ds),p)),disableIconCache:l.disableIconCache,rtlPlugin:{scenario:null!==(i=l.useRtlTextPlugin)&&void 0!==i?i:"depends-on-language",loadFailed:!1,url:null!==(n=l.rtlPluginUrl)&&void 0!==n?n:Zc.k0,hash:null!==(a=l.rtlPluginHash)&&void 0!==a?a:Zc.aT},mobileSdkMode:l.mobileSdkMode,demMode:!1,tilesBounds:[[0,0],[0,0],[0,0],[0,0]],demTilesBounds:[[0,0],[0,0],[0,0],[0,0]],elevation:void 0,elevationScale:0,minElevation:void 0,skipElevationAnimation:l.skipElevationAnimation,metrics:{start:performance.now(),init:NaN,firstdraw:NaN,firstlabeling:NaN,firstcontent:NaN,interactive:NaN,ready:NaN},metricsSent:!1,shouldIsReadyWaitForUpdates:!1,commercialPoiRandomSeed:l.commercialPoiRandomSeed,webglVersion:l.webglVersion,threeJs:{active:!!l.useThreeJs,path:null!==(r=l.threeJsPath)&&void 0!==r?r:Zc.Dd},enableTrackResize:!!l.enableTrackResize,autoResizeInterval:kt.sY.autoResizeInterval,showDefaultTileBounds:!!l.showDefaultTileBounds,defaultSourceModelsRootUrl:l.defaultSourceModelsRootUrl};var p,u,g,_,f,y,b;this.modules=new nd(h,t,o),"number"==typeof h.commercialPoiRandomSeed&&this.modules.workers.labeling.setCommercialPoiRandomSeed(h.commercialPoiRandomSeed),this.modules.styleManager.setDynamicStyle(this.modules.dynamicStyle.getStyle()),this.handlers=[new zo(h,this.modules.layout.mapContainer),new Fo(this.modules)],l.disableZoomOnScroll||this.handlers.push(new xo(h,this.modules.layout.mapContainer)),po&&uo&&this.handlers.push(new So(h,t,o)),this.performanceChecker=new Co(h),this.stillnessUpdater=new Io,this.requestedFrame=requestAnimationFrame(this.renderLoop),l.sendAnalytics&&(u=window,g=document,_="script",f="ga",u.GoogleAnalyticsObject=f,u.ga=u.ga||function(){(u.ga.q=u.ga.q||[]).push(arguments)},u.ga.l=Date.now(),y=g.createElement(_),b=g.getElementsByTagName(_)[0],y.async=1,y.src="https://www.google-analytics.com/analytics.js",b.parentNode.insertBefore(y,b),window.ga&&(window.ga("create",kt.co.gaCode,{storage:"none",name:kt.co.gaName,sampleRate:80}),window.ga(`${kt.co.gaName}.set`,"anonymizeIp",!0),window.ga(`${kt.co.gaName}.send`,"pageview")),window.addEventListener("unload",this.onWindowUnload))}destroy(){cancelAnimationFrame(this.requestedFrame),this.modules.destroy(),this.handlers.forEach((t=>t.destroy())),window.removeEventListener("unload",this.onWindowUnload)}isIdle(){return!this.state.needRerender&&this.modules.tileManager.isIdle()&&this.modules.assetManager.isIdle()&&this.modules.trafficTileLayer.viewportTilesReady()&&this.modules.floorManager.activeFloorLoadingOrReady()&&this.modules.layers.entranceAnimationFinished()&&this.modules.modelLayer.isIdle()&&!this.modules.buildingHeightAnimator.isAnimating()&&!this.modules.gltfAnimator.isAnimating()&&this.modules.labeler.isIdle()}isReady(){var t;let e=!0;return(null===(t=this.modules)||void 0===t?void 0:t.threeJsSceneManager)&&(e=this.modules.threeJsSceneManager.isReady()),this.isIdle()&&this.modules.floorManager.floorsReady()&&this.modules.identifier.isIdle()&&this.modules.imageManager.isIdle()&&this.modules.imageCache.isIdle()&&this.modules.personalPoiManager.isIdle()&&this.modules.tileKeyInfo.isIdle()&&!this.state.shouldIsReadyWaitForUpdates&&e}redrawMap(){this.modules.tileManager.redraw(),this.modules.trafficTileLayer.redraw(),this.modules.modelLayer.redraw(),this.modules.floorManager.resetCache(),this.modules.personalPoiManager.redraw()}activateStyleUpdating(){this.modules.tileManager.activateStyleUpdating(),this.modules.floorManager.activateStyleUpdating(),this.modules.modelLayer.activateStyleUpdating(),this.modules.trafficTileLayer.activateStyleUpdating(),this.isStyleUpdateInProgress=!0}getIsFirstStyleUpdate(){return this.isFirstStyleUpdate}finishStyleUpdatingCheck(){if(this.isStyleUpdateInProgress&&this.modules.tileManager.viewportTilesReady()&&this.modules.trafficTileLayer.viewportTilesReady()&&this.modules.floorManager.activeFloorLoadingOrReady()&&this.modules.modelLayer.viewportModelsReady()){this.modules.tileManager.finishStyleUpdating(),this.modules.floorManager.finishStyleUpdating(),this.modules.trafficTileLayer.finishStyleUpdating(),this.modules.modelLayer.finishStyleUpdating(),this.modules.personalPoiManager.redraw();const t=this.modules.styleManager.getStyle(this.state.handyStyleId);t&&this.modules.renderer.setClearColor(t.background.color),this.isStyleUpdateInProgress=!1,this.isFirstStyleUpdate=!1,this.state.needRerender=!0,this.state.needLabeling=!0}}checkDemEnabled(){return!0===this.state.styleState.terrainEnabled?this.modules.demManager.isEnabled()||this.modules.demManager.enable():this.modules.demManager.isEnabled()&&this.modules.demManager.disable(),this.modules.demManager.isEnabled()}updateTilesBounds(){const{size:t,zoom:e}=this.state,[o,i,n,a]=this.modules.camera.getViewportVertices(),r=(0,fn.hS)(o,i);let l=(0,fn.Oy)(n,r);const s=(0,he.h0)(t[1],e)*kt.nS.viewportLimitRatio;if(l>s){const t=s/l;we.t7(n,i,n,t),we.t7(a,o,a,t),l=s}if(this.state.tilesBounds[0]=o.slice(),this.state.tilesBounds[1]=i.slice(),this.state.tilesBounds[2]=n.slice(),this.state.tilesBounds[3]=a.slice(),this.state.demMode){const t=(0,fn.iE)(this.modules.camera.position,r);if(t<0){const e=(l+Math.abs(t))/l;we.t7(o,a,o,e),we.t7(i,n,i,e)}if(void 0!==this.state.elevation&&!Number.isNaN(this.state.elevation)){const t=this.modules.camera.position[2],e=void 0===this.state.minElevation||Number.isNaN(this.state.minElevation)?this.state.elevation:this.state.minElevation,r=Math.max(this.state.elevation-e,0)*he.C/t+1,l=(r-1)*Math.max(1-this.state.pitch/this.state.maxPitch,.1)+1,s=Math.max(this.state.pitch/this.state.maxPitch*30,4);we.t7(o,this.modules.camera.position,o,Math.min(l,s)),we.t7(i,this.modules.camera.position,i,Math.min(l,s)),we.t7(a,this.modules.camera.position,a,Math.min(r,s)),we.t7(n,this.modules.camera.position,n,Math.min(r,s))}}this.state.demTilesBounds[0]=o,this.state.demTilesBounds[1]=i,this.state.demTilesBounds[2]=n,this.state.demTilesBounds[3]=a}updateElevation(){if(this.state.elevationScale=this.modules.demManager.getVerticalScale(),!this.state.demMode)return void(void 0!==this.state.elevation&&(this.state.needRerender=!0,this.state.elevation=void 0));const t=this.modules.demManager.getElevation(this.state.center);if(void 0!==t)if(void 0===this.state.elevation||this.state.skipElevationAnimation)this.state.elevation=t;else{const e=.1*(t-this.state.elevation);Math.abs(e)<.3?this.state.elevation=t:this.state.elevation+=e;const o=this.modules.demManager.getElevation(this.modules.camera.position);if(void 0!==o){const t=this.state.elevationScale,e=o*t,i=this.modules.camera.position[2]/he.C,n=Math.min(30,.2*i),a=this.state.elevation*t+i-n;e>a&&(this.state.elevation+=(e-a)/t)}}const e=this.modules.demManager.getMinElevation();void 0!==e&&(this.state.minElevation=e)}autoResize(t){if(t-this.lastResizeTime>=this.state.autoResizeInterval){const e=this.modules.layout.canvas,{clientWidth:o,clientHeight:i}=this.modules.layout.rootContainer,n=window.devicePixelRatio;e.width===Math.floor(o*n)&&e.height===Math.floor(i*n)||(this.lastResizeTime=t,this.modules.map.invalidateSize())}}}ad.options={center:[0,0],zoom:0,minZoom:kt.Xd.minZoom,maxZoom:kt.Xd.maxZoom,rotation:0,touchRotationThreshold:10,pitch:0,minPitch:0,maxPitch:45,viewport:{top:0,right:0,bottom:0,left:0},padding:{top:0,right:0,bottom:0,left:0},tileServer:kt.Sv.server,tileSet:kt.Sv.tileSet,tileProtocol:kt.Sv.protocol,commercialTileSet:kt.KL.tileSet,key:kt.Sv.tileKey,subdomains:kt.Sv.subdomains,floorsEnabled:kt.o.enabled,floorsUrl:kt.o.url,trafficProtocol:kt.nM.protocol,trafficServer:kt.nM.host,collectStats:!1,style:"",styleState:Object.assign({},Ds),styleOptions:{rootUrl:"",iconsPath:"",fontsPath:"",stylePath:""},sendAnalytics:!0,lang:kt.Fp,appId:kt.Sv.appId,disableHoverStyles:!1,disableZoomOnScroll:!1,disableDragging:!1,disableRotationByUserInteraction:!1,disablePitchByUserInteraction:!1,defaultBackgroundColor:"#f6f2de",disableIconCache:!1,mobileSdkMode:!1,skipElevationAnimation:!1,enableTrackResize:!1,showDefaultTileBounds:!1};var rd=o(3379),ld=o.n(rd),sd=o(7795),cd=o.n(sd),dd=o(569),md=o.n(dd),hd=o(3565),pd=o.n(hd),ud=o(9216),gd=o.n(ud),_d=o(4589),fd=o.n(_d),yd=o(5618),bd={};bd.styleTagTransform=fd(),bd.setAttributes=pd(),bd.insert=md().bind(null,"head"),bd.domAPI=cd(),bd.insertStyleElement=gd();ld()(yd.Z,bd);yd.Z&&yd.Z.locals&&yd.Z.locals;o(7636),o(9981),o(8906);var xd=o(8450),vd=o(8009);class wd extends ge{constructor(t,e){var o,i,n,a,r,l,s,c,d,m;super(t),this.length=1,this.removed=!1,this.options=e,this.isInteractive=null===(o=e.interactive)||void 0===o||o,this.geoPoints=this.options.coordinates.filter(((t,e,o)=>0===e||!we.I6(o[e],o[e-1]))),this.points=this.geoPoints.map(he.yq);let h=0;this.distances=[],this.distances.push(h);for(let t=1;t<this.geoPoints.length;t++)h+=(0,he.vn)(this.geoPoints[t-1],this.geoPoints[t]),this.distances.push(h);e.showAnimation&&!1!==e.showAnimation.animate&&this.points.length>1&&(this.animationTickerName=`polyline-${this.uniqId}`,this.startShowTicker(this.animationTickerName)),this.stateDiffer=new vo([{path:"center",type:"vec2"},{path:"zoom",type:"number"},{path:"size",type:"vec2"},{path:"rotation",type:"number"},{path:"pitch",type:"number"},{path:"padding",type:"padding"},{path:"demMode",type:"boolean"}]),this.debouncedGenerate=(0,Po.D)((()=>{this.generate()}),200),this.tileAttrs=(0,ke.FJ)({id:this.isInteractive?(0,ve.Ru)(0,0):NaN,beginningIsCut:0,endingIsCut:0});const{dynamicStyle:p,layers:u}=this.modules;if(0!==this.options.width){this.rawStyleLayer={type:"line",id:`dynamic-polyline-${this.uniqId}`,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,style:{color:null!==(i=this.options.color)&&void 0!==i?i:"#3388ff",width:null!==(n=this.options.width)&&void 0!==n?n:3},webglState:this.options.webglState};const t=(0,Ae.qw)(this.rawStyleLayer);t&&(this.styleLayerId=t.innerId,p.addLayer(t,null!==(a=this.options.zIndex)&&void 0!==a?a:0))}if(this.options.width2){this.rawStyleLayer2={type:"line",id:`dynamic-polyline2-${this.uniqId}`,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,style:{color:null!==(r=this.options.color2)&&void 0!==r?r:"#00000000",width:null!==(l=this.options.width2)&&void 0!==l?l:0}};const t=(0,Ae.qw)(this.rawStyleLayer2);t&&(this.styleLayer2Id=t.innerId,p.addLayer(t,null!==(s=this.options.zIndex2)&&void 0!==s?s:-1))}if(this.options.width3){this.rawStyleLayer3={type:"line",id:`dynamic-polyline3-${this.uniqId}`,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,style:{color:null!==(c=this.options.color3)&&void 0!==c?c:"#00000000",width:null!==(d=this.options.width3)&&void 0!==d?d:0}};const t=(0,Ae.qw)(this.rawStyleLayer3);t&&(this.styleLayer3Id=t.innerId,p.addLayer(t,null!==(m=this.options.zIndex3)&&void 0!==m?m:-2))}void 0===this.styleLayerId&&void 0===this.styleLayer2Id&&void 0===this.styleLayer3Id||(u.addLayer(this),this.generate())}update(){this.removed||(this.stateDiffer.check(this.mapState)&&this.debouncedGenerate(),this.animationTickerName&&this.updateShowTicker(this.animationTickerName))}snapPoint(t){const e=this.points.map((t=>this.modules.camera.project(t)));let o=1/0,i=e[0],n=0;for(let a=0;a<e.length-1;a++){const r=e[a],l=e[a+1],s=(0,fn.Z4)(t,r,l),c=s[0]-t[0],d=s[1]-t[1],m=c*c+d*d;m<o&&(o=m,i=s,n=a)}const a=(0,he.PA)(this.modules.camera.unproject(i));return{point:a,distance:this.distances[n]+(0,he.vn)(a,this.geoPoints[n])}}setStyle(t){this.setSubLayerStyle(this.styleLayerId,this.rawStyleLayer,t.color),this.setSubLayerStyle(this.styleLayer2Id,this.rawStyleLayer2,t.color2),this.setSubLayerStyle(this.styleLayer3Id,this.rawStyleLayer3,t.color3)}remove(){this.removed||(this.removed=!0,this.animationTickerName&&Oe.sT(this.animationTickerName,this.mapState),this.isInteractive&&this.modules.identifier.resetCache(),void 0!==this.styleLayerId&&this.modules.dynamicStyle.removeLayer(this.styleLayerId),void 0!==this.styleLayer2Id&&this.modules.dynamicStyle.removeLayer(this.styleLayer2Id),void 0!==this.styleLayer3Id&&this.modules.dynamicStyle.removeLayer(this.styleLayer3Id),super.destroy())}startShowTicker(t){var e,o,i;const n=void 0!==(null===(e=this.options.showAnimation)||void 0===e?void 0:e.easing)?this.options.showAnimation.easing:"linear",a=void 0!==(null===(o=this.options.showAnimation)||void 0===o?void 0:o.duration)?this.options.showAnimation.duration:250;Oe.BL(t,{easing:n,animationGroup:null===(i=this.options.showAnimation)||void 0===i?void 0:i.animationGroup},this.mapState,0,1,a),this.length=0}setSubLayerStyle(t,e,o){if(void 0!==t&&o&&e&&o!==e.style.color){const{dynamicStyle:i}=this.modules;e.style.color=o;const n=(0,Ae.qw)(e);n&&(i.updateLayerStyle(t,n),this.mapState.needRerender=!0)}}updateShowTicker(t){Oe.Vx(t,{step:(t,e)=>{var o,i,n,a;const r=(0,ut.sB)((null===(i=null===(o=this.options.showAnimation)||void 0===o?void 0:o.durationRange)||void 0===i?void 0:i.start)||0,(null===(a=null===(n=this.options.showAnimation)||void 0===n?void 0:n.durationRange)||void 0===a?void 0:a.end)||1,e);r!==this.length&&(this.length=r,this.generate())}},this.mapState)}generate(){if(this.points.length<2||this.removed)return;const{dynamicStyle:t,collector:e,renderer:o,tileManager:i,identifier:n,map:a}=this.modules,{tileProps:r}=me.nF,l=Math.min(Math.floor(a.getZoom()),12),s=(0,Le.aq)(l),c=(0,fn.z_)(this.points,this.distances,this.length),d=(0,fn.Jh)(c,s),m=we.Ue(),h=Re.Ue();this.tileObjects.forEach((t=>{t.clean(this.mapState),i.removeObject(t)})),this.tileObjects=[];for(let n=0;n<d.length;n++){const a=d[n];Re.mc(h);for(let t=0;t<a.length;t++)Re.aM(h,a[t]);Re.be(m,h);const s=(0,Le.z6)(m,l);if(!(0,Le.Ny)(s,this.mapState.tilesBounds))continue;if(this.options.displayTileBounds){const n=t.getStyle().layers.find((t=>"debug-tile-bounds"===t.id));(0,Ll.cX)(e,n,this.mapState.styleState);const a=e.getAccumulatedData(),r=new fe.W("dynamicObject",a.data,o,s);this.tileObjects.push(r),i.addObject(r)}const c=(0,Le.Bs)(s),p=[[],[]];for(let t=0;t<a.length;t++)(0,Le.a2)(m,a[t],c),p[0][t]=m[0],p[1][t]=m[1];this.tileAttrs[r.beginningIsCut]=0,this.tileAttrs[r.endingIsCut]=0,0!==n&&(this.tileAttrs[r.beginningIsCut]=1),n+1!==d.length&&(this.tileAttrs[r.endingIsCut]=1);const u=(0,Te.Yi)(this.mapState.styleState,me.i4,me.Dz,this.tileAttrs,me.wz);if(void 0!==this.styleLayerId){const o=t.getStyle().layersById[this.styleLayerId];(0,xd.ot)(o)&&(0,Ie.XI)({collector:e,generator:vd.z.generate,args:[t.getStyle().id,o,u,p]})}if(void 0!==this.styleLayer2Id){const o=t.getStyle().layersById[this.styleLayer2Id];(0,xd.ot)(o)&&(0,Ie.XI)({collector:e,generator:vd.z.generate,args:[t.getStyle().id,o,u,p]})}if(void 0!==this.styleLayer3Id){const o=t.getStyle().layersById[this.styleLayer3Id];(0,xd.ot)(o)&&(0,Ie.XI)({collector:e,generator:vd.z.generate,args:[t.getStyle().id,o,u,p]})}const g=e.getAccumulatedData(),_=new fe.W("dynamicObject",g.data,o,c.coords);i.addObject(_),this.tileObjects.push(_),this.isInteractive&&this.identifyIds.push(g.identifyIds)}this.isInteractive&&n.resetCache(),e.reset(),this.mapState.needRerender=!0}}o(3097);o(7084);var zd=o(2097);o(9808),o(4333);var Fd=o(5600),Sd=o(2702);(0,Fd.D)({symbol:"polygon",sinks:{fill:{stride:8,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.localID=new Uint32Array(e,4)},packObjectAttributes:(t,e,o,i)=>(0,Sd.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,i,n){const a=n[0],r=n[1],l=t.idIndexer.getIndex({id:i.tileAttrs[i.tileProps.id],styleId:e,layer:o,sublayer:i.tileAttrs[i.tileProps.db_sublayer]}),s=t.getBucket(o.type,"fill",zd.a.sinks.fill.packObjectAttributes(e,o.innerId,NaN,o.dataKeys,i),zd.a.sinks.fill.binder);let c=s.elements.offset;!function(t,e,o,i,n,a,r,l){const s=t.buffer,c=t.offset;s[c]=e+o,s[c+1]=e+i,s[c+2]=e+n,s[c+3]=e+a,s[c+4]=e+r,s[c+5]=e+l,t.offset=c+6}(s.indices,c,0,1,2,2,1,3),Cd(s,c++,a[0],r[0],l),Cd(s,c++,a[1],r[1],l),Cd(s,c++,a[2],r[2],l),Cd(s,c++,a[3],r[3],l),s.elements.offset=c}});function Cd(t,e,o,i,n){const a=4*e;t.views.position[a]=No.jO+o,t.views.position[a+1]=No.jO+i;const r=2*e;t.views.localID[r]=n}var Md=o(8585),Pd={};Pd.styleTagTransform=fd(),Pd.setAttributes=pd(),Pd.insert=md().bind(null,"head"),Pd.domAPI=cd(),Pd.insertStyleElement=gd();ld()(Md.Z,Pd);const Id=Md.Z&&Md.Z.locals?Md.Z.locals:void 0;Id.root,Id.button,Id.zoomIn,Id.button,Id.zoomOut;var Ld=o(4928),kd={};kd.styleTagTransform=fd(),kd.setAttributes=pd(),kd.insert=md().bind(null,"head"),kd.domAPI=cd(),kd.insertStyleElement=gd();ld()(Ld.Z,kd);Ld.Z&&Ld.Z.locals&&Ld.Z.locals;var Ad=o(4306),jd={};jd.styleTagTransform=fd(),jd.setAttributes=pd(),jd.insert=md().bind(null,"head"),jd.domAPI=cd(),jd.insertStyleElement=gd();ld()(Ad.Z,jd);Ad.Z&&Ad.Z.locals&&Ad.Z.locals;var Td;!function(t){t.osm="osm",t.api="api",t.license="license"}(Td||(Td={}));var Ed=o(438),Od={};Od.styleTagTransform=fd(),Od.setAttributes=pd(),Od.insert=md().bind(null,"head"),Od.domAPI=cd(),Od.insertStyleElement=gd();ld()(Ed.Z,Od);(Ed.Z&&Ed.Z.locals?Ed.Z.locals:void 0).container;var Hd=o(1704),Wd={};Wd.styleTagTransform=fd(),Wd.setAttributes=pd(),Wd.insert=md().bind(null,"head"),Wd.domAPI=cd(),Wd.insertStyleElement=gd();ld()(Hd.Z,Wd);const Rd=Hd.Z&&Hd.Z.locals?Hd.Z.locals:void 0;Rd.root,Rd.container,Rd.scroller,Rd.content;var Bd=o(3274),Nd={};Nd.styleTagTransform=fd(),Nd.setAttributes=pd(),Nd.insert=md().bind(null,"head"),Nd.domAPI=cd(),Nd.insertStyleElement=gd();ld()(Bd.Z,Nd);Bd.Z&&Bd.Z.locals&&Bd.Z.locals;var Dd=o(6032),Ud={};Ud.styleTagTransform=fd(),Ud.setAttributes=pd(),Ud.insert=md().bind(null,"head"),Ud.domAPI=cd(),Ud.insertStyleElement=gd();ld()(Dd.Z,Ud);Dd.Z&&Dd.Z.locals&&Dd.Z.locals;const Zd={attributes:{},maxZoom:17,dimensions:2,modelsPath:""};class Gd{constructor(t,e){this.options=function(t,e){const o=Object.assign({},t);for(const t in e){const i=t;void 0===o[i]&&(o[i]=e[i])}return o}(e,Zd),this._impl=new ua.gs(t._impl,this.options,this)}destroy(){this._impl.destroy()}setAttributes(t){return this._impl.setAttributes(t),this}getAttributes(){return this._impl.getAttributes()}setData(t){return(0,i.mG)(this,void 0,void 0,(function*(){yield this._impl.setData(t)}))}}var Vd=o(3103),qd={};qd.styleTagTransform=fd(),qd.setAttributes=pd(),qd.insert=md().bind(null,"head"),qd.domAPI=cd(),qd.insertStyleElement=gd();ld()(Vd.Z,qd);Vd.Z&&Vd.Z.locals&&Vd.Z.locals;setTimeout((()=>{const t=Array.from(document.querySelectorAll("script")).find((t=>t.src.match("https://mapgl.2gis.com/api/js")));if(!t)return;const e=function(t){const e=t.split("?")[1];if(!e)return;const o=e.split("&").map((t=>t.split("="))).find((t=>"callback"===t[0]));return o?o[1]:void 0}(t.src);if(e){if("function"!=typeof window[e])throw new Error(`Not found callback function with name "${e}"`);window[e]()}}),0);o(2205);const Xd="tile{subdomain}.maps.2gis.com";function $d(t){return t}var Yd=1e-6;function Jd(t){return"translate("+t+",0)"}function Kd(t){return"translate(0,"+t+")"}function Qd(t){return e=>+t(e)}function tm(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),o=>+t(o)+e}function em(){return!this.__axis}function om(t,e){var o=[],i=null,n=null,a=6,r=6,l=3,s="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,d=4===t||2===t?"x":"y",m=1===t||3===t?Jd:Kd;function h(h){var p=null==i?e.ticks?e.ticks.apply(e,o):e.domain():i,u=null==n?e.tickFormat?e.tickFormat.apply(e,o):$d:n,g=Math.max(a,0)+l,_=e.range(),f=+_[0]+s,y=+_[_.length-1]+s,b=(e.bandwidth?tm:Qd)(e.copy(),s),x=h.selection?h.selection():h,v=x.selectAll(".domain").data([null]),w=x.selectAll(".tick").data(p,e).order(),z=w.exit(),F=w.enter().append("g").attr("class","tick"),S=w.select("line"),C=w.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(F),S=S.merge(F.append("line").attr("stroke","currentColor").attr(d+"2",c*a)),C=C.merge(F.append("text").attr("fill","currentColor").attr(d,c*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==x&&(v=v.transition(h),w=w.transition(h),S=S.transition(h),C=C.transition(h),z=z.transition(h).attr("opacity",Yd).attr("transform",(function(t){return isFinite(t=b(t))?m(t+s):this.getAttribute("transform")})),F.attr("opacity",Yd).attr("transform",(function(t){var e=this.parentNode.__axis;return m((e&&isFinite(e=e(t))?e:b(t))+s)}))),z.remove(),v.attr("d",4===t||2===t?r?"M"+c*r+","+f+"H"+s+"V"+y+"H"+c*r:"M"+s+","+f+"V"+y:r?"M"+f+","+c*r+"V"+s+"H"+y+"V"+c*r:"M"+f+","+s+"H"+y),w.attr("opacity",1).attr("transform",(function(t){return m(b(t)+s)})),S.attr(d+"2",c*a),C.attr(d,c*g).text(u),x.filter(em).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return o=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(o=null==t?[]:Array.from(t),h):o.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(n=t,h):n},h.tickSize=function(t){return arguments.length?(a=r=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(r=+t,h):r},h.tickPadding=function(t){return arguments.length?(l=+t,h):l},h.offset=function(t){return arguments.length?(s=+t,h):s},h}function im(){}function nm(t){return null==t?im:function(){return this.querySelector(t)}}function am(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function rm(){return[]}function lm(t){return null==t?rm:function(){return this.querySelectorAll(t)}}function sm(t){return function(){return this.matches(t)}}function cm(t){return function(e){return e.matches(t)}}var dm=Array.prototype.find;function mm(){return this.firstElementChild}var hm=Array.prototype.filter;function pm(){return Array.from(this.children)}function um(t){return new Array(t.length)}function gm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function _m(t){return function(){return t}}function fm(t,e,o,i,n,a){for(var r,l=0,s=e.length,c=a.length;l<c;++l)(r=e[l])?(r.__data__=a[l],i[l]=r):o[l]=new gm(t,a[l]);for(;l<s;++l)(r=e[l])&&(n[l]=r)}function ym(t,e,o,i,n,a,r){var l,s,c,d=new Map,m=e.length,h=a.length,p=new Array(m);for(l=0;l<m;++l)(s=e[l])&&(p[l]=c=r.call(s,s.__data__,l,e)+"",d.has(c)?n[l]=s:d.set(c,s));for(l=0;l<h;++l)c=r.call(t,a[l],l,a)+"",(s=d.get(c))?(i[l]=s,s.__data__=a[l],d.delete(c)):o[l]=new gm(t,a[l]);for(l=0;l<m;++l)(s=e[l])&&d.get(p[l])===s&&(n[l]=s)}function bm(t){return t.__data__}function xm(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function vm(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}gm.prototype={constructor:gm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var wm="http://www.w3.org/1999/xhtml";const zm={svg:"http://www.w3.org/2000/svg",xhtml:wm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fm(t){var e=t+="",o=e.indexOf(":");return o>=0&&"xmlns"!==(e=t.slice(0,o))&&(t=t.slice(o+1)),zm.hasOwnProperty(e)?{space:zm[e],local:t}:t}function Sm(t){return function(){this.removeAttribute(t)}}function Cm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mm(t,e){return function(){this.setAttribute(t,e)}}function Pm(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Im(t,e){return function(){var o=e.apply(this,arguments);null==o?this.removeAttribute(t):this.setAttribute(t,o)}}function Lm(t,e){return function(){var o=e.apply(this,arguments);null==o?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,o)}}function km(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Am(t){return function(){this.style.removeProperty(t)}}function jm(t,e,o){return function(){this.style.setProperty(t,e,o)}}function Tm(t,e,o){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,o)}}function Em(t,e){return t.style.getPropertyValue(e)||km(t).getComputedStyle(t,null).getPropertyValue(e)}function Om(t){return function(){delete this[t]}}function Hm(t,e){return function(){this[t]=e}}function Wm(t,e){return function(){var o=e.apply(this,arguments);null==o?delete this[t]:this[t]=o}}function Rm(t){return t.trim().split(/^|\s+/)}function Bm(t){return t.classList||new Nm(t)}function Nm(t){this._node=t,this._names=Rm(t.getAttribute("class")||"")}function Dm(t,e){for(var o=Bm(t),i=-1,n=e.length;++i<n;)o.add(e[i])}function Um(t,e){for(var o=Bm(t),i=-1,n=e.length;++i<n;)o.remove(e[i])}function Zm(t){return function(){Dm(this,t)}}function Gm(t){return function(){Um(this,t)}}function Vm(t,e){return function(){(e.apply(this,arguments)?Dm:Um)(this,t)}}function qm(){this.textContent=""}function Xm(t){return function(){this.textContent=t}}function $m(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ym(){this.innerHTML=""}function Jm(t){return function(){this.innerHTML=t}}function Km(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Qm(){this.nextSibling&&this.parentNode.appendChild(this)}function th(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eh(t){return function(){var e=this.ownerDocument,o=this.namespaceURI;return o===wm&&e.documentElement.namespaceURI===wm?e.createElement(t):e.createElementNS(o,t)}}function oh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ih(t){var e=Fm(t);return(e.local?oh:eh)(e)}function nh(){return null}function ah(){var t=this.parentNode;t&&t.removeChild(this)}function rh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function sh(t){return t.trim().split(/^|\s+/).map((function(t){var e="",o=t.indexOf(".");return o>=0&&(e=t.slice(o+1),t=t.slice(0,o)),{type:t,name:e}}))}function ch(t){return function(){var e=this.__on;if(e){for(var o,i=0,n=-1,a=e.length;i<a;++i)o=e[i],t.type&&o.type!==t.type||o.name!==t.name?e[++n]=o:this.removeEventListener(o.type,o.listener,o.options);++n?e.length=n:delete this.__on}}}function dh(t,e,o){return function(){var i,n=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(n)for(var r=0,l=n.length;r<l;++r)if((i=n[r]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=o),void(i.value=e);this.addEventListener(t.type,a,o),i={type:t.type,name:t.name,value:e,listener:a,options:o},n?n.push(i):this.__on=[i]}}function mh(t,e,o){var i=km(t),n=i.CustomEvent;"function"==typeof n?n=new n(e,o):(n=i.document.createEvent("Event"),o?(n.initEvent(e,o.bubbles,o.cancelable),n.detail=o.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function hh(t,e){return function(){return mh(this,t,e)}}function ph(t,e){return function(){return mh(this,t,e.apply(this,arguments))}}Nm.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var uh=[null];function gh(t,e){this._groups=t,this._parents=e}function _h(){return new gh([[document.documentElement]],uh)}gh.prototype=_h.prototype={constructor:gh,select:function(t){"function"!=typeof t&&(t=nm(t));for(var e=this._groups,o=e.length,i=new Array(o),n=0;n<o;++n)for(var a,r,l=e[n],s=l.length,c=i[n]=new Array(s),d=0;d<s;++d)(a=l[d])&&(r=t.call(a,a.__data__,d,l))&&("__data__"in a&&(r.__data__=a.__data__),c[d]=r);return new gh(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return am(t.apply(this,arguments))}}(t):lm(t);for(var e=this._groups,o=e.length,i=[],n=[],a=0;a<o;++a)for(var r,l=e[a],s=l.length,c=0;c<s;++c)(r=l[c])&&(i.push(t.call(r,r.__data__,c,l)),n.push(r));return new gh(i,n)},selectChild:function(t){return this.select(null==t?mm:function(t){return function(){return dm.call(this.children,t)}}("function"==typeof t?t:cm(t)))},selectChildren:function(t){return this.selectAll(null==t?pm:function(t){return function(){return hm.call(this.children,t)}}("function"==typeof t?t:cm(t)))},filter:function(t){"function"!=typeof t&&(t=sm(t));for(var e=this._groups,o=e.length,i=new Array(o),n=0;n<o;++n)for(var a,r=e[n],l=r.length,s=i[n]=[],c=0;c<l;++c)(a=r[c])&&t.call(a,a.__data__,c,r)&&s.push(a);return new gh(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,bm);var o=e?ym:fm,i=this._parents,n=this._groups;"function"!=typeof t&&(t=_m(t));for(var a=n.length,r=new Array(a),l=new Array(a),s=new Array(a),c=0;c<a;++c){var d=i[c],m=n[c],h=m.length,p=xm(t.call(d,d&&d.__data__,c,i)),u=p.length,g=l[c]=new Array(u),_=r[c]=new Array(u),f=s[c]=new Array(h);o(d,m,g,_,f,p,e);for(var y,b,x=0,v=0;x<u;++x)if(y=g[x]){for(x>=v&&(v=x+1);!(b=_[v])&&++v<u;);y._next=b||null}}return(r=new gh(r,i))._enter=l,r._exit=s,r},enter:function(){return new gh(this._enter||this._groups.map(um),this._parents)},exit:function(){return new gh(this._exit||this._groups.map(um),this._parents)},join:function(t,e,o){var i=this.enter(),n=this,a=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(n=e(n))&&(n=n.selection()),null==o?a.remove():o(a),i&&n?i.merge(n).order():n},merge:function(t){for(var e=t.selection?t.selection():t,o=this._groups,i=e._groups,n=o.length,a=i.length,r=Math.min(n,a),l=new Array(n),s=0;s<r;++s)for(var c,d=o[s],m=i[s],h=d.length,p=l[s]=new Array(h),u=0;u<h;++u)(c=d[u]||m[u])&&(p[u]=c);for(;s<n;++s)l[s]=o[s];return new gh(l,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,o=t.length;++e<o;)for(var i,n=t[e],a=n.length-1,r=n[a];--a>=0;)(i=n[a])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(t){function e(e,o){return e&&o?t(e.__data__,o.__data__):!e-!o}t||(t=vm);for(var o=this._groups,i=o.length,n=new Array(i),a=0;a<i;++a){for(var r,l=o[a],s=l.length,c=n[a]=new Array(s),d=0;d<s;++d)(r=l[d])&&(c[d]=r);c.sort(e)}return new gh(n,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,o=t.length;e<o;++e)for(var i=t[e],n=0,a=i.length;n<a;++n){var r=i[n];if(r)return r}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,o=0,i=e.length;o<i;++o)for(var n,a=e[o],r=0,l=a.length;r<l;++r)(n=a[r])&&t.call(n,n.__data__,r,a);return this},attr:function(t,e){var o=Fm(t);if(arguments.length<2){var i=this.node();return o.local?i.getAttributeNS(o.space,o.local):i.getAttribute(o)}return this.each((null==e?o.local?Cm:Sm:"function"==typeof e?o.local?Lm:Im:o.local?Pm:Mm)(o,e))},style:function(t,e,o){return arguments.length>1?this.each((null==e?Am:"function"==typeof e?Tm:jm)(t,e,null==o?"":o)):Em(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Om:"function"==typeof e?Wm:Hm)(t,e)):this.node()[t]},classed:function(t,e){var o=Rm(t+"");if(arguments.length<2){for(var i=Bm(this.node()),n=-1,a=o.length;++n<a;)if(!i.contains(o[n]))return!1;return!0}return this.each(("function"==typeof e?Vm:e?Zm:Gm)(o,e))},text:function(t){return arguments.length?this.each(null==t?qm:("function"==typeof t?$m:Xm)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ym:("function"==typeof t?Km:Jm)(t)):this.node().innerHTML},raise:function(){return this.each(Qm)},lower:function(){return this.each(th)},append:function(t){var e="function"==typeof t?t:ih(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var o="function"==typeof t?t:ih(t),i=null==e?nh:"function"==typeof e?e:nm(e);return this.select((function(){return this.insertBefore(o.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(ah)},clone:function(t){return this.select(t?lh:rh)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,o){var i,n,a=sh(t+""),r=a.length;if(!(arguments.length<2)){for(l=e?dh:ch,i=0;i<r;++i)this.each(l(a[i],e,o));return this}var l=this.node().__on;if(l)for(var s,c=0,d=l.length;c<d;++c)for(i=0,s=l[c];i<r;++i)if((n=a[i]).type===s.type&&n.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?ph:hh)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,o=t.length;e<o;++e)for(var i,n=t[e],a=0,r=n.length;a<r;++a)(i=n[a])&&(yield i)}};const fh=_h;var yh={value:()=>{}};function bh(){for(var t,e=0,o=arguments.length,i={};e<o;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new xh(i)}function xh(t){this._=t}function vh(t,e){return t.trim().split(/^|\s+/).map((function(t){var o="",i=t.indexOf(".");if(i>=0&&(o=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:o}}))}function wh(t,e){for(var o,i=0,n=t.length;i<n;++i)if((o=t[i]).name===e)return o.value}function zh(t,e,o){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=yh,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=o&&t.push({name:e,value:o}),t}xh.prototype=bh.prototype={constructor:xh,on:function(t,e){var o,i=this._,n=vh(t+"",i),a=-1,r=n.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<r;)if(o=(t=n[a]).type)i[o]=zh(i[o],t.name,e);else if(null==e)for(o in i)i[o]=zh(i[o],t.name,null);return this}for(;++a<r;)if((o=(t=n[a]).type)&&(o=wh(i[o],t.name)))return o},copy:function(){var t={},e=this._;for(var o in e)t[o]=e[o].slice();return new xh(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var o,i,n=new Array(o),a=0;a<o;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,o=(i=this._[t]).length;a<o;++a)i[a].value.apply(e,n)},apply:function(t,e,o){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,a=i.length;n<a;++n)i[n].value.apply(e,o)}};const Fh=bh;var Sh,Ch,Mh=0,Ph=0,Ih=0,Lh=0,kh=0,Ah=0,jh="object"==typeof performance&&performance.now?performance:Date,Th="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Eh(){return kh||(Th(Oh),kh=jh.now()+Ah)}function Oh(){kh=0}function Hh(){this._call=this._time=this._next=null}function Wh(t,e,o){var i=new Hh;return i.restart(t,e,o),i}function Rh(){kh=(Lh=jh.now())+Ah,Mh=Ph=0;try{!function(){Eh(),++Mh;for(var t,e=Sh;e;)(t=kh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mh}()}finally{Mh=0,function(){var t,e,o=Sh,i=1/0;for(;o;)o._call?(i>o._time&&(i=o._time),t=o,o=o._next):(e=o._next,o._next=null,o=t?t._next=e:Sh=e);Ch=t,Nh(i)}(),kh=0}}function Bh(){var t=jh.now(),e=t-Lh;e>1e3&&(Ah-=e,Lh=t)}function Nh(t){Mh||(Ph&&(Ph=clearTimeout(Ph)),t-kh>24?(t<1/0&&(Ph=setTimeout(Rh,t-jh.now()-Ah)),Ih&&(Ih=clearInterval(Ih))):(Ih||(Lh=jh.now(),Ih=setInterval(Bh,1e3)),Mh=1,Th(Rh)))}function Dh(t,e,o){var i=new Hh;return e=null==e?0:+e,i.restart((o=>{i.stop(),t(o+e)}),e,o),i}Hh.prototype=Wh.prototype={constructor:Hh,restart:function(t,e,o){if("function"!=typeof t)throw new TypeError("callback is not a function");o=(null==o?Eh():+o)+(null==e?0:+e),this._next||Ch===this||(Ch?Ch._next=this:Sh=this,Ch=this),this._call=t,this._time=o,Nh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nh())}};var Uh=Fh("start","end","cancel","interrupt"),Zh=[];function Gh(t,e,o,i,n,a){var r=t.__transition;if(r){if(o in r)return}else t.__transition={};!function(t,e,o){var i,n=t.__transition;function a(t){o.state=1,o.timer.restart(r,o.delay,o.time),o.delay<=t&&r(t-o.delay)}function r(a){var c,d,m,h;if(1!==o.state)return s();for(c in n)if((h=n[c]).name===o.name){if(3===h.state)return Dh(r);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[c])}if(Dh((function(){3===o.state&&(o.state=4,o.timer.restart(l,o.delay,o.time),l(a))})),o.state=2,o.on.call("start",t,t.__data__,o.index,o.group),2===o.state){for(o.state=3,i=new Array(m=o.tween.length),c=0,d=-1;c<m;++c)(h=o.tween[c].value.call(t,t.__data__,o.index,o.group))&&(i[++d]=h);i.length=d+1}}function l(e){for(var n=e<o.duration?o.ease.call(null,e/o.duration):(o.timer.restart(s),o.state=5,1),a=-1,r=i.length;++a<r;)i[a].call(t,n);5===o.state&&(o.on.call("end",t,t.__data__,o.index,o.group),s())}function s(){for(var i in o.state=6,o.timer.stop(),delete n[e],n)return;delete t.__transition}n[e]=o,o.timer=Wh(a,0,o.time)}(t,o,{name:e,index:i,group:n,on:Uh,tween:Zh,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Vh(t,e){var o=Xh(t,e);if(o.state>0)throw new Error("too late; already scheduled");return o}function qh(t,e){var o=Xh(t,e);if(o.state>3)throw new Error("too late; already running");return o}function Xh(t,e){var o=t.__transition;if(!o||!(o=o[e]))throw new Error("transition not found");return o}function $h(t,e){return t=+t,e=+e,function(o){return t*(1-o)+e*o}}var Yh,Jh=180/Math.PI,Kh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qh(t,e,o,i,n,a){var r,l,s;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(s=t*o+e*i)&&(o-=t*s,i-=e*s),(l=Math.sqrt(o*o+i*i))&&(o/=l,i/=l,s/=l),t*i<e*o&&(t=-t,e=-e,s=-s,r=-r),{translateX:n,translateY:a,rotate:Math.atan2(e,t)*Jh,skewX:Math.atan(s)*Jh,scaleX:r,scaleY:l}}function tp(t,e,o,i){function n(t){return t.length?t.pop()+" ":""}return function(a,r){var l=[],s=[];return a=t(a),r=t(r),function(t,i,n,a,r,l){if(t!==n||i!==a){var s=r.push("translate(",null,e,null,o);l.push({i:s-4,x:$h(t,n)},{i:s-2,x:$h(i,a)})}else(n||a)&&r.push("translate("+n+e+a+o)}(a.translateX,a.translateY,r.translateX,r.translateY,l,s),function(t,e,o,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:o.push(n(o)+"rotate(",null,i)-2,x:$h(t,e)})):e&&o.push(n(o)+"rotate("+e+i)}(a.rotate,r.rotate,l,s),function(t,e,o,a){t!==e?a.push({i:o.push(n(o)+"skewX(",null,i)-2,x:$h(t,e)}):e&&o.push(n(o)+"skewX("+e+i)}(a.skewX,r.skewX,l,s),function(t,e,o,i,a,r){if(t!==o||e!==i){var l=a.push(n(a)+"scale(",null,",",null,")");r.push({i:l-4,x:$h(t,o)},{i:l-2,x:$h(e,i)})}else 1===o&&1===i||a.push(n(a)+"scale("+o+","+i+")")}(a.scaleX,a.scaleY,r.scaleX,r.scaleY,l,s),a=r=null,function(t){for(var e,o=-1,i=s.length;++o<i;)l[(e=s[o]).i]=e.x(t);return l.join("")}}}var ep=tp((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Kh:Qh(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),op=tp((function(t){return null==t?Kh:(Yh||(Yh=document.createElementNS("http://www.w3.org/2000/svg","g")),Yh.setAttribute("transform",t),(t=Yh.transform.baseVal.consolidate())?Qh((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Kh)}),", ",")",")");function ip(t,e){var o,i;return function(){var n=qh(this,t),a=n.tween;if(a!==o)for(var r=0,l=(i=o=a).length;r<l;++r)if(i[r].name===e){(i=i.slice()).splice(r,1);break}n.tween=i}}function np(t,e,o){var i,n;if("function"!=typeof o)throw new Error;return function(){var a=qh(this,t),r=a.tween;if(r!==i){n=(i=r).slice();for(var l={name:e,value:o},s=0,c=n.length;s<c;++s)if(n[s].name===e){n[s]=l;break}s===c&&n.push(l)}a.tween=n}}function ap(t,e,o){var i=t._id;return t.each((function(){var t=qh(this,i);(t.value||(t.value={}))[e]=o.apply(this,arguments)})),function(t){return Xh(t,i).value[e]}}function rp(t,e,o){t.prototype=e.prototype=o,o.constructor=t}function lp(t,e){var o=Object.create(t.prototype);for(var i in e)o[i]=e[i];return o}function sp(){}var cp=.7,dp=1/cp,mp="\\s*([+-]?\\d+)\\s*",hp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",up=/^#([0-9a-f]{3,8})$/,gp=new RegExp(`^rgb\\(${mp},${mp},${mp}\\)$`),_p=new RegExp(`^rgb\\(${pp},${pp},${pp}\\)$`),fp=new RegExp(`^rgba\\(${mp},${mp},${mp},${hp}\\)$`),yp=new RegExp(`^rgba\\(${pp},${pp},${pp},${hp}\\)$`),bp=new RegExp(`^hsl\\(${hp},${pp},${pp}\\)$`),xp=new RegExp(`^hsla\\(${hp},${pp},${pp},${hp}\\)$`),vp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wp(){return this.rgb().formatHex()}function zp(){return this.rgb().formatRgb()}function Fp(t){var e,o;return t=(t+"").trim().toLowerCase(),(e=up.exec(t))?(o=e[1].length,e=parseInt(e[1],16),6===o?Sp(e):3===o?new Ip(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===o?Cp(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===o?Cp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=gp.exec(t))?new Ip(e[1],e[2],e[3],1):(e=_p.exec(t))?new Ip(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=fp.exec(t))?Cp(e[1],e[2],e[3],e[4]):(e=yp.exec(t))?Cp(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=bp.exec(t))?Ep(e[1],e[2]/100,e[3]/100,1):(e=xp.exec(t))?Ep(e[1],e[2]/100,e[3]/100,e[4]):vp.hasOwnProperty(t)?Sp(vp[t]):"transparent"===t?new Ip(NaN,NaN,NaN,0):null}function Sp(t){return new Ip(t>>16&255,t>>8&255,255&t,1)}function Cp(t,e,o,i){return i<=0&&(t=e=o=NaN),new Ip(t,e,o,i)}function Mp(t){return t instanceof sp||(t=Fp(t)),t?new Ip((t=t.rgb()).r,t.g,t.b,t.opacity):new Ip}function Pp(t,e,o,i){return 1===arguments.length?Mp(t):new Ip(t,e,o,null==i?1:i)}function Ip(t,e,o,i){this.r=+t,this.g=+e,this.b=+o,this.opacity=+i}function Lp(){return`#${Tp(this.r)}${Tp(this.g)}${Tp(this.b)}`}function kp(){const t=Ap(this.opacity);return`${1===t?"rgb(":"rgba("}${jp(this.r)}, ${jp(this.g)}, ${jp(this.b)}${1===t?")":`, ${t})`}`}function Ap(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function jp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Tp(t){return((t=jp(t))<16?"0":"")+t.toString(16)}function Ep(t,e,o,i){return i<=0?t=e=o=NaN:o<=0||o>=1?t=e=NaN:e<=0&&(t=NaN),new Hp(t,e,o,i)}function Op(t){if(t instanceof Hp)return new Hp(t.h,t.s,t.l,t.opacity);if(t instanceof sp||(t=Fp(t)),!t)return new Hp;if(t instanceof Hp)return t;var e=(t=t.rgb()).r/255,o=t.g/255,i=t.b/255,n=Math.min(e,o,i),a=Math.max(e,o,i),r=NaN,l=a-n,s=(a+n)/2;return l?(r=e===a?(o-i)/l+6*(o<i):o===a?(i-e)/l+2:(e-o)/l+4,l/=s<.5?a+n:2-a-n,r*=60):l=s>0&&s<1?0:r,new Hp(r,l,s,t.opacity)}function Hp(t,e,o,i){this.h=+t,this.s=+e,this.l=+o,this.opacity=+i}function Wp(t){return(t=(t||0)%360)<0?t+360:t}function Rp(t){return Math.max(0,Math.min(1,t||0))}function Bp(t,e,o){return 255*(t<60?e+(o-e)*t/60:t<180?o:t<240?e+(o-e)*(240-t)/60:e)}function Np(t,e,o,i,n){var a=t*t,r=a*t;return((1-3*t+3*a-r)*e+(4-6*a+3*r)*o+(1+3*t+3*a-3*r)*i+r*n)/6}rp(sp,Fp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:wp,formatHex:wp,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Op(this).formatHsl()},formatRgb:zp,toString:zp}),rp(Ip,Pp,lp(sp,{brighter(t){return t=null==t?dp:Math.pow(dp,t),new Ip(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?cp:Math.pow(cp,t),new Ip(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ip(jp(this.r),jp(this.g),jp(this.b),Ap(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lp,formatHex:Lp,formatHex8:function(){return`#${Tp(this.r)}${Tp(this.g)}${Tp(this.b)}${Tp(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:kp,toString:kp})),rp(Hp,(function(t,e,o,i){return 1===arguments.length?Op(t):new Hp(t,e,o,null==i?1:i)}),lp(sp,{brighter(t){return t=null==t?dp:Math.pow(dp,t),new Hp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?cp:Math.pow(cp,t),new Hp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,o=this.l,i=o+(o<.5?o:1-o)*e,n=2*o-i;return new Ip(Bp(t>=240?t-240:t+120,n,i),Bp(t,n,i),Bp(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new Hp(Wp(this.h),Rp(this.s),Rp(this.l),Ap(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ap(this.opacity);return`${1===t?"hsl(":"hsla("}${Wp(this.h)}, ${100*Rp(this.s)}%, ${100*Rp(this.l)}%${1===t?")":`, ${t})`}`}}));const Dp=t=>()=>t;function Up(t,e){return function(o){return t+o*e}}function Zp(t){return 1==(t=+t)?Gp:function(e,o){return o-e?function(t,e,o){return t=Math.pow(t,o),e=Math.pow(e,o)-t,o=1/o,function(i){return Math.pow(t+i*e,o)}}(e,o,t):Dp(isNaN(e)?o:e)}}function Gp(t,e){var o=e-t;return o?Up(t,o):Dp(isNaN(t)?e:t)}const Vp=function t(e){var o=Zp(e);function i(t,e){var i=o((t=Pp(t)).r,(e=Pp(e)).r),n=o(t.g,e.g),a=o(t.b,e.b),r=Gp(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=n(e),t.b=a(e),t.opacity=r(e),t+""}}return i.gamma=t,i}(1);function qp(t){return function(e){var o,i,n=e.length,a=new Array(n),r=new Array(n),l=new Array(n);for(o=0;o<n;++o)i=Pp(e[o]),a[o]=i.r||0,r[o]=i.g||0,l[o]=i.b||0;return a=t(a),r=t(r),l=t(l),i.opacity=1,function(t){return i.r=a(t),i.g=r(t),i.b=l(t),i+""}}}qp((function(t){var e=t.length-1;return function(o){var i=o<=0?o=0:o>=1?(o=1,e-1):Math.floor(o*e),n=t[i],a=t[i+1],r=i>0?t[i-1]:2*n-a,l=i<e-1?t[i+2]:2*a-n;return Np((o-i/e)*e,r,n,a,l)}})),qp((function(t){var e=t.length;return function(o){var i=Math.floor(((o%=1)<0?++o:o)*e),n=t[(i+e-1)%e],a=t[i%e],r=t[(i+1)%e],l=t[(i+2)%e];return Np((o-i/e)*e,n,a,r,l)}}));var Xp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$p=new RegExp(Xp.source,"g");function Yp(t,e){var o,i,n,a=Xp.lastIndex=$p.lastIndex=0,r=-1,l=[],s=[];for(t+="",e+="";(o=Xp.exec(t))&&(i=$p.exec(e));)(n=i.index)>a&&(n=e.slice(a,n),l[r]?l[r]+=n:l[++r]=n),(o=o[0])===(i=i[0])?l[r]?l[r]+=i:l[++r]=i:(l[++r]=null,s.push({i:r,x:$h(o,i)})),a=$p.lastIndex;return a<e.length&&(n=e.slice(a),l[r]?l[r]+=n:l[++r]=n),l.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var o,i=0;i<e;++i)l[(o=s[i]).i]=o.x(t);return l.join("")})}function Jp(t,e){var o;return("number"==typeof e?$h:e instanceof Fp?Vp:(o=Fp(e))?(e=o,Vp):Yp)(t,e)}function Kp(t){return function(){this.removeAttribute(t)}}function Qp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tu(t,e,o){var i,n,a=o+"";return function(){var r=this.getAttribute(t);return r===a?null:r===i?n:n=e(i=r,o)}}function eu(t,e,o){var i,n,a=o+"";return function(){var r=this.getAttributeNS(t.space,t.local);return r===a?null:r===i?n:n=e(i=r,o)}}function ou(t,e,o){var i,n,a;return function(){var r,l,s=o(this);if(null!=s)return(r=this.getAttribute(t))===(l=s+"")?null:r===i&&l===n?a:(n=l,a=e(i=r,s));this.removeAttribute(t)}}function iu(t,e,o){var i,n,a;return function(){var r,l,s=o(this);if(null!=s)return(r=this.getAttributeNS(t.space,t.local))===(l=s+"")?null:r===i&&l===n?a:(n=l,a=e(i=r,s));this.removeAttributeNS(t.space,t.local)}}function nu(t,e){return function(o){this.setAttribute(t,e.call(this,o))}}function au(t,e){return function(o){this.setAttributeNS(t.space,t.local,e.call(this,o))}}function ru(t,e){var o,i;function n(){var n=e.apply(this,arguments);return n!==i&&(o=(i=n)&&au(t,n)),o}return n._value=e,n}function lu(t,e){var o,i;function n(){var n=e.apply(this,arguments);return n!==i&&(o=(i=n)&&nu(t,n)),o}return n._value=e,n}function su(t,e){return function(){Vh(this,t).delay=+e.apply(this,arguments)}}function cu(t,e){return e=+e,function(){Vh(this,t).delay=e}}function du(t,e){return function(){qh(this,t).duration=+e.apply(this,arguments)}}function mu(t,e){return e=+e,function(){qh(this,t).duration=e}}function hu(t,e){if("function"!=typeof e)throw new Error;return function(){qh(this,t).ease=e}}function pu(t,e,o){var i,n,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Vh:qh;return function(){var r=a(this,t),l=r.on;l!==i&&(n=(i=l).copy()).on(e,o),r.on=n}}var uu=fh.prototype.constructor;function gu(t){return function(){this.style.removeProperty(t)}}function _u(t,e,o){return function(i){this.style.setProperty(t,e.call(this,i),o)}}function fu(t,e,o){var i,n;function a(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&_u(t,a,o)),i}return a._value=e,a}function yu(t){return function(e){this.textContent=t.call(this,e)}}function bu(t){var e,o;function i(){var i=t.apply(this,arguments);return i!==o&&(e=(o=i)&&yu(i)),e}return i._value=t,i}var xu=0;function vu(t,e,o,i){this._groups=t,this._parents=e,this._name=o,this._id=i}function wu(){return++xu}var zu=fh.prototype;vu.prototype=function(t){return fh().transition(t)}.prototype={constructor:vu,select:function(t){var e=this._name,o=this._id;"function"!=typeof t&&(t=nm(t));for(var i=this._groups,n=i.length,a=new Array(n),r=0;r<n;++r)for(var l,s,c=i[r],d=c.length,m=a[r]=new Array(d),h=0;h<d;++h)(l=c[h])&&(s=t.call(l,l.__data__,h,c))&&("__data__"in l&&(s.__data__=l.__data__),m[h]=s,Gh(m[h],e,o,h,m,Xh(l,o)));return new vu(a,this._parents,e,o)},selectAll:function(t){var e=this._name,o=this._id;"function"!=typeof t&&(t=lm(t));for(var i=this._groups,n=i.length,a=[],r=[],l=0;l<n;++l)for(var s,c=i[l],d=c.length,m=0;m<d;++m)if(s=c[m]){for(var h,p=t.call(s,s.__data__,m,c),u=Xh(s,o),g=0,_=p.length;g<_;++g)(h=p[g])&&Gh(h,e,o,g,p,u);a.push(p),r.push(s)}return new vu(a,r,e,o)},selectChild:zu.selectChild,selectChildren:zu.selectChildren,filter:function(t){"function"!=typeof t&&(t=sm(t));for(var e=this._groups,o=e.length,i=new Array(o),n=0;n<o;++n)for(var a,r=e[n],l=r.length,s=i[n]=[],c=0;c<l;++c)(a=r[c])&&t.call(a,a.__data__,c,r)&&s.push(a);return new vu(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,o=t._groups,i=e.length,n=o.length,a=Math.min(i,n),r=new Array(i),l=0;l<a;++l)for(var s,c=e[l],d=o[l],m=c.length,h=r[l]=new Array(m),p=0;p<m;++p)(s=c[p]||d[p])&&(h[p]=s);for(;l<i;++l)r[l]=e[l];return new vu(r,this._parents,this._name,this._id)},selection:function(){return new uu(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,o=wu(),i=this._groups,n=i.length,a=0;a<n;++a)for(var r,l=i[a],s=l.length,c=0;c<s;++c)if(r=l[c]){var d=Xh(r,e);Gh(r,t,o,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new vu(i,this._parents,t,o)},call:zu.call,nodes:zu.nodes,node:zu.node,size:zu.size,empty:zu.empty,each:zu.each,on:function(t,e){var o=this._id;return arguments.length<2?Xh(this.node(),o).on.on(t):this.each(pu(o,t,e))},attr:function(t,e){var o=Fm(t),i="transform"===o?op:Jp;return this.attrTween(t,"function"==typeof e?(o.local?iu:ou)(o,i,ap(this,"attr."+t,e)):null==e?(o.local?Qp:Kp)(o):(o.local?eu:tu)(o,i,e))},attrTween:function(t,e){var o="attr."+t;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;var i=Fm(t);return this.tween(o,(i.local?ru:lu)(i,e))},style:function(t,e,o){var i="transform"==(t+="")?ep:Jp;return null==e?this.styleTween(t,function(t,e){var o,i,n;return function(){var a=Em(this,t),r=(this.style.removeProperty(t),Em(this,t));return a===r?null:a===o&&r===i?n:n=e(o=a,i=r)}}(t,i)).on("end.style."+t,gu(t)):"function"==typeof e?this.styleTween(t,function(t,e,o){var i,n,a;return function(){var r=Em(this,t),l=o(this),s=l+"";return null==l&&(this.style.removeProperty(t),s=l=Em(this,t)),r===s?null:r===i&&s===n?a:(n=s,a=e(i=r,l))}}(t,i,ap(this,"style."+t,e))).each(function(t,e){var o,i,n,a,r="style."+e,l="end."+r;return function(){var s=qh(this,t),c=s.on,d=null==s.value[r]?a||(a=gu(e)):void 0;c===o&&n===d||(i=(o=c).copy()).on(l,n=d),s.on=i}}(this._id,t)):this.styleTween(t,function(t,e,o){var i,n,a=o+"";return function(){var r=Em(this,t);return r===a?null:r===i?n:n=e(i=r,o)}}(t,i,e),o).on("end.style."+t,null)},styleTween:function(t,e,o){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,fu(t,e,null==o?"":o))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ap(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,bu(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var o in this.__transition)if(+o!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var o=this._id;if(t+="",arguments.length<2){for(var i,n=Xh(this.node(),o).tween,a=0,r=n.length;a<r;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((null==e?ip:np)(o,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?su:cu)(e,t)):Xh(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?du:mu)(e,t)):Xh(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(hu(e,t)):Xh(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var o=e.apply(this,arguments);if("function"!=typeof o)throw new Error;qh(this,t).ease=o}}(this._id,t))},end:function(){var t,e,o=this,i=o._id,n=o.size();return new Promise((function(a,r){var l={value:r},s={value:function(){0==--n&&a()}};o.each((function(){var o=qh(this,i),n=o.on;n!==t&&((e=(t=n).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),o.on=e})),0===n&&a()}))},[Symbol.iterator]:zu[Symbol.iterator]};var Fu={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Su(t,e){for(var o;!(o=t.__transition)||!(o=o[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return o}fh.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var o,i,n,a=t.__transition,r=!0;if(a){for(n in e=null==e?null:e+"",a)(o=a[n]).name===e?(i=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(i?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete a[n]):r=!1;r&&delete t.__transition}}(this,t)}))},fh.prototype.transition=function(t){var e,o;t instanceof vu?(e=t._id,t=t._name):(e=wu(),(o=Fu).time=Eh(),t=null==t?null:t+"");for(var i=this._groups,n=i.length,a=0;a<n;++a)for(var r,l=i[a],s=l.length,c=0;c<s;++c)(r=l[c])&&Gh(r,t,e,c,l,o||Su(r,e));return new vu(i,this._parents,t,e)};const{abs:Cu,max:Mu,min:Pu}=Math;function Iu(t){return[+t[0],+t[1]]}function Lu(t){return[Iu(t[0]),Iu(t[1])]}["w","e"].map(ku),["n","s"].map(ku),["n","w","e","s","nw","ne","sw","se"].map(ku);function ku(t){return{type:t}}function Au(t){return"string"==typeof t?new gh([[document.querySelector(t)]],[document.documentElement]):new gh([[t]],uh)}function ju(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var o=e.ownerSVGElement||e;if(o.createSVGPoint){var i=o.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop]}}return[t.pageX,t.pageY]}const Tu={passive:!1},Eu={capture:!0,passive:!1};function Ou(t){t.stopImmediatePropagation()}function Hu(t){t.preventDefault(),t.stopImmediatePropagation()}const Wu=t=>()=>t;function Ru(t,{sourceEvent:e,subject:o,target:i,identifier:n,active:a,x:r,y:l,dx:s,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Bu(t){return!t.ctrlKey&&!t.button}function Nu(){return this.parentNode}function Du(t,e){return null==e?{x:t.x,y:t.y}:e}function Uu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zu(){var t,e,o,i,n=Bu,a=Nu,r=Du,l=Uu,s={},c=Fh("start","drag","end"),d=0,m=0;function h(t){t.on("mousedown.drag",p).filter(l).on("touchstart.drag",_).on("touchmove.drag",f,Tu).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(r,l){if(!i&&n.call(this,r,l)){var s=b(this,a.call(this,r,l),r,l,"mouse");s&&(Au(r.view).on("mousemove.drag",u,Eu).on("mouseup.drag",g,Eu),function(t){var e=t.document.documentElement,o=Au(t).on("dragstart.drag",Hu,Eu);"onselectstart"in e?o.on("selectstart.drag",Hu,Eu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(r.view),Ou(r),o=!1,t=r.clientX,e=r.clientY,s("start",r))}}function u(i){if(Hu(i),!o){var n=i.clientX-t,a=i.clientY-e;o=n*n+a*a>m}s.mouse("drag",i)}function g(t){Au(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var o=t.document.documentElement,i=Au(t).on("dragstart.drag",null);e&&(i.on("click.drag",Hu,Eu),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in o?i.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}(t.view,o),Hu(t),s.mouse("end",t)}function _(t,e){if(n.call(this,t,e)){var o,i,r=t.changedTouches,l=a.call(this,t,e),s=r.length;for(o=0;o<s;++o)(i=b(this,l,t,e,r[o].identifier,r[o]))&&(Ou(t),i("start",t,r[o]))}}function f(t){var e,o,i=t.changedTouches,n=i.length;for(e=0;e<n;++e)(o=s[i[e].identifier])&&(Hu(t),o("drag",t,i[e]))}function y(t){var e,o,n=t.changedTouches,a=n.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<a;++e)(o=s[n[e].identifier])&&(Ou(t),o("end",t,n[e]))}function b(t,e,o,i,n,a){var l,m,p,u=c.copy(),g=ju(a||o,e);if(null!=(p=r.call(t,new Ru("beforestart",{sourceEvent:o,target:h,identifier:n,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:u}),i)))return l=p.x-g[0]||0,m=p.y-g[1]||0,function o(a,r,c){var _,f=g;switch(a){case"start":s[n]=o,_=d++;break;case"end":delete s[n],--d;case"drag":g=ju(c||r,e),_=d}u.call(a,t,new Ru(a,{sourceEvent:r,subject:p,target:h,identifier:n,active:_,x:g[0]+l,y:g[1]+m,dx:g[0]-f[0],dy:g[1]-f[1],dispatch:u}),i)}}return h.filter=function(t){return arguments.length?(n="function"==typeof t?t:Wu(!!t),h):n},h.container=function(t){return arguments.length?(a="function"==typeof t?t:Wu(t),h):a},h.subject=function(t){return arguments.length?(r="function"==typeof t?t:Wu(t),h):r},h.touchable=function(t){return arguments.length?(l="function"==typeof t?t:Wu(!!t),h):l},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,h):Math.sqrt(m)},h}Ru.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Gu=Math.sqrt(50),Vu=Math.sqrt(10),qu=Math.sqrt(2);function Xu(t,e,o){var i=(e-t)/Math.max(0,o),n=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,n);return n>=0?(a>=Gu?10:a>=Vu?5:a>=qu?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Gu?10:a>=Vu?5:a>=qu?2:1)}function $u(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yu(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ju(t){let e,o,i;function n(t,i,n=0,a=t.length){if(n<a){if(0!==e(i,i))return a;do{const e=n+a>>>1;o(t[e],i)<0?n=e+1:a=e}while(n<a)}return n}return 2!==t.length?(e=$u,o=(e,o)=>$u(t(e),o),i=(e,o)=>t(e)-o):(e=t===$u||t===Yu?t:Ku,o=t,i=t),{left:n,center:function(t,e,o=0,a=t.length){const r=n(t,e,o,a-1);return r>o&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,i,n=0,a=t.length){if(n<a){if(0!==e(i,i))return a;do{const e=n+a>>>1;o(t[e],i)<=0?n=e+1:a=e}while(n<a)}return n}}}function Ku(){return 0}const Qu=Ju($u),tg=Qu.right,eg=(Qu.left,Ju((function(t){return null===t?NaN:+t})).center,tg);function og(t,e){var o,i=e?e.length:0,n=t?Math.min(i,t.length):0,a=new Array(n),r=new Array(i);for(o=0;o<n;++o)a[o]=rg(t[o],e[o]);for(;o<i;++o)r[o]=e[o];return function(t){for(o=0;o<n;++o)r[o]=a[o](t);return r}}function ig(t,e){var o=new Date;return t=+t,e=+e,function(i){return o.setTime(t*(1-i)+e*i),o}}function ng(t,e){var o,i={},n={};for(o in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)o in t?i[o]=rg(t[o],e[o]):n[o]=e[o];return function(t){for(o in i)n[o]=i[o](t);return n}}function ag(t,e){e||(e=[]);var o,i=t?Math.min(e.length,t.length):0,n=e.slice();return function(a){for(o=0;o<i;++o)n[o]=t[o]*(1-a)+e[o]*a;return n}}function rg(t,e){var o,i=typeof e;return null==e||"boolean"===i?Dp(e):("number"===i?$h:"string"===i?(o=Fp(e))?(e=o,Vp):Yp:e instanceof Fp?Vp:e instanceof Date?ig:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?ag:Array.isArray(e)?og:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ng:$h)(t,e)}function lg(t,e){return t=+t,e=+e,function(o){return Math.round(t*(1-o)+e*o)}}function sg(t){return+t}var cg=[0,1];function dg(t){return t}function mg(t,e){return(e-=t=+t)?function(o){return(o-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function hg(t,e,o){var i=t[0],n=t[1],a=e[0],r=e[1];return n<i?(i=mg(n,i),a=o(r,a)):(i=mg(i,n),a=o(a,r)),function(t){return a(i(t))}}function pg(t,e,o){var i=Math.min(t.length,e.length)-1,n=new Array(i),a=new Array(i),r=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<i;)n[r]=mg(t[r],t[r+1]),a[r]=o(e[r],e[r+1]);return function(e){var o=eg(t,e,1,i)-1;return a[o](n[o](e))}}function ug(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gg(){var t,e,o,i,n,a,r=cg,l=cg,s=rg,c=dg;function d(){var t,e,o,s=Math.min(r.length,l.length);return c!==dg&&(t=r[0],e=r[s-1],t>e&&(o=t,t=e,e=o),c=function(o){return Math.max(t,Math.min(e,o))}),i=s>2?pg:hg,n=a=null,m}function m(e){return null==e||isNaN(e=+e)?o:(n||(n=i(r.map(t),l,s)))(t(c(e)))}return m.invert=function(o){return c(e((a||(a=i(l,r.map(t),$h)))(o)))},m.domain=function(t){return arguments.length?(r=Array.from(t,sg),d()):r.slice()},m.range=function(t){return arguments.length?(l=Array.from(t),d()):l.slice()},m.rangeRound=function(t){return l=Array.from(t),s=lg,d()},m.clamp=function(t){return arguments.length?(c=!!t||dg,d()):c!==dg},m.interpolate=function(t){return arguments.length?(s=t,d()):s},m.unknown=function(t){return arguments.length?(o=t,m):o},function(o,i){return t=o,e=i,d()}}function _g(){return gg()(dg,dg)}function fg(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var yg,bg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xg(t){if(!(e=bg.exec(t)))throw new Error("invalid format: "+t);var e;return new vg({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function vg(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function wg(t,e){if((o=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var o,i=t.slice(0,o);return[i.length>1?i[0]+i.slice(2):i,+t.slice(o+1)]}function zg(t){return(t=wg(Math.abs(t)))?t[1]:NaN}function Fg(t,e){var o=wg(t,e);if(!o)return t+"";var i=o[0],n=o[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}xg.prototype=vg.prototype,vg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Sg={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fg(100*t,e),r:Fg,s:function(t,e){var o=wg(t,e);if(!o)return t+"";var i=o[0],n=o[1],a=n-(yg=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,r=i.length;return a===r?i:a>r?i+new Array(a-r+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+wg(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Cg(t){return t}var Mg,Pg,Ig,Lg=Array.prototype.map,kg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ag(t){var e,o,i=void 0===t.grouping||void 0===t.thousands?Cg:(e=Lg.call(t.grouping,Number),o=t.thousands+"",function(t,i){for(var n=t.length,a=[],r=0,l=e[0],s=0;n>0&&l>0&&(s+l+1>i&&(l=Math.max(1,i-s)),a.push(t.substring(n-=l,n+l)),!((s+=l+1)>i));)l=e[r=(r+1)%e.length];return a.reverse().join(o)}),n=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?Cg:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Lg.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",d=void 0===t.nan?"NaN":t.nan+"";function m(t){var e=(t=xg(t)).fill,o=t.align,m=t.sign,h=t.symbol,p=t.zero,u=t.width,g=t.comma,_=t.precision,f=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Sg[y]||(void 0===_&&(_=12),f=!0,y="g"),(p||"0"===e&&"="===o)&&(p=!0,e="0",o="=");var b="$"===h?n:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?a:/[%p]/.test(y)?s:"",v=Sg[y],w=/[defgprs%]/.test(y);function z(t){var n,a,s,h=b,z=x;if("c"===y)z=v(t)+z,t="";else{var F=(t=+t)<0||1/t<0;if(t=isNaN(t)?d:v(Math.abs(t),_),f&&(t=function(t){t:for(var e,o=t.length,i=1,n=-1;i<o;++i)switch(t[i]){case".":n=e=i;break;case"0":0===n&&(n=i),e=i;break;default:if(!+t[i])break t;n>0&&(n=0)}return n>0?t.slice(0,n)+t.slice(e+1):t}(t)),F&&0==+t&&"+"!==m&&(F=!1),h=(F?"("===m?m:c:"-"===m||"("===m?"":m)+h,z=("s"===y?kg[8+yg/3]:"")+z+(F&&"("===m?")":""),w)for(n=-1,a=t.length;++n<a;)if(48>(s=t.charCodeAt(n))||s>57){z=(46===s?r+t.slice(n+1):t.slice(n))+z,t=t.slice(0,n);break}}g&&!p&&(t=i(t,1/0));var S=h.length+t.length+z.length,C=S<u?new Array(u-S+1).join(e):"";switch(g&&p&&(t=i(C+t,C.length?u-z.length:1/0),C=""),o){case"<":t=h+t+z+C;break;case"=":t=h+C+t+z;break;case"^":t=C.slice(0,S=C.length>>1)+h+t+z+C.slice(S);break;default:t=C+h+t+z}return l(t)}return _=void 0===_?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),z.toString=function(){return t+""},z}return{format:m,formatPrefix:function(t,e){var o=m(((t=xg(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(zg(e)/3))),n=Math.pow(10,-i),a=kg[8+i/3];return function(t){return o(n*t)+a}}}}function jg(t,e,o,i){var n,a=function(t,e,o){var i=Math.abs(e-t)/Math.max(0,o),n=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/n;return a>=Gu?n*=10:a>=Vu?n*=5:a>=qu&&(n*=2),e<t?-n:n}(t,e,o);switch((i=xg(null==i?",f":i)).type){case"s":var r=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(n=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zg(e)/3)))-zg(Math.abs(t)))}(a,r))||(i.precision=n),Ig(i,r);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(n=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zg(e)-zg(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=n-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(n=function(t){return Math.max(0,-zg(Math.abs(t)))}(a))||(i.precision=n-2*("%"===i.type))}return Pg(i)}function Tg(t){var e=t.domain;return t.ticks=function(t){var o=e();return function(t,e,o){var i,n,a,r,l=-1;if(o=+o,(t=+t)==(e=+e)&&o>0)return[t];if((i=e<t)&&(n=t,t=e,e=n),0===(r=Xu(t,e,o))||!isFinite(r))return[];if(r>0){let o=Math.round(t/r),i=Math.round(e/r);for(o*r<t&&++o,i*r>e&&--i,a=new Array(n=i-o+1);++l<n;)a[l]=(o+l)*r}else{r=-r;let o=Math.round(t*r),i=Math.round(e*r);for(o/r<t&&++o,i/r>e&&--i,a=new Array(n=i-o+1);++l<n;)a[l]=(o+l)/r}return i&&a.reverse(),a}(o[0],o[o.length-1],null==t?10:t)},t.tickFormat=function(t,o){var i=e();return jg(i[0],i[i.length-1],null==t?10:t,o)},t.nice=function(o){null==o&&(o=10);var i,n,a=e(),r=0,l=a.length-1,s=a[r],c=a[l],d=10;for(c<s&&(n=s,s=c,c=n,n=r,r=l,l=n);d-- >0;){if((n=Xu(s,c,o))===i)return a[r]=s,a[l]=c,e(a);if(n>0)s=Math.floor(s/n)*n,c=Math.ceil(c/n)*n;else{if(!(n<0))break;s=Math.ceil(s*n)/n,c=Math.floor(c*n)/n}i=n}return t},t}function Eg(){var t=_g();return t.copy=function(){return ug(t,Eg())},fg.apply(t,arguments),Tg(t)}function Og(t,e,o){this.k=t,this.x=e,this.y=o}Mg=Ag({thousands:",",grouping:[3],currency:["$",""]}),Pg=Mg.format,Ig=Mg.formatPrefix,Og.prototype={constructor:Og,scale:function(t){return 1===t?this:new Og(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Og(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Og(1,0,0);Og.prototype;var Hg=o(835),Wg={};Wg.styleTagTransform=fd(),Wg.setAttributes=pd(),Wg.insert=md().bind(null,"head"),Wg.domAPI=cd(),Wg.insertStyleElement=gd();ld()(Hg.Z,Wg);Hg.Z&&Hg.Z.locals&&Hg.Z.locals;class Rg extends pe.c{constructor(t,e,o){super(),this.points=t,this.presets=o;const i=e.style||{},n=e.width||700,a=e.height||300,r=e.xDomain||[0,1];this.xDomain=r;const l=e.yDomain||[0,1],s=document.createElement("div"),c=o.length>0?30:0;s.style.background="white",s.style.padding="0",s.style.position="absolute",s.style.top="",s.style.left="0",s.style.bottom="0",s.style.width=`${n}px`,s.style.height=`${a+c}px`,s.style.zIndex="10001";for(const t in i)s.style[t]=i[t];if(s.innerHTML=`<svg class="interpolate-editor" width="${n}" height="${a}">\n            <g>\n                <path></path>\n                <g class="color-scale" transform="translate(0, ${a-5})">\n                </g>\n                <g class="points-menu" transform="translate(${n-40}, ${a-40})">\n                    <g class="remove-point">\n                        <rect x="-6" y="-6" width="12" height="12"></rect>\n                        <line x1="-6" x2="6"></line>\n                    </g>\n                    <g class="add-point" transform="translate(20,0)">\n                        <rect x="-6" y="-6" width="12" height="12"></rect>\n                        <line x1="-6" x2="6"></line><line y1="-6" y2="6"></line>\n                    </g>\n                </g>\n            </g>\n        </svg>\n        <select id="presets"></select>`,this.editor=s,this.svg=Au(s.querySelector("svg")),this.xScale=Eg().domain(r).range([30,n-20]),this.yScale=Eg().domain(l.reverse()).range([10,a-30]),this.svg.append("g").attr("transform",`translate(0, ${a-30})`).call(function(t){return om(3,t)}(this.xScale)),this.svg.append("g").attr("transform","translate(30, 0)").call(function(t){return om(4,t)}(this.yScale)),this.colorScale=Eg().domain(l).range(["white","black"]),this.drag=Zu().on("drag",(t=>{t.subject[0]=this.xScale.invert(t.x),t.subject[1]=this.yScale.invert(t.y),this.update()})),o.length>0){const t=Au(s.querySelector("select"));t.selectAll("option").data(o).enter().append("option").text((t=>t.name)).attr("value",(t=>String(t.value))),t.on("change",(t=>{this.activatePreset(t.target.selectedIndex)}))}this.update()}getContainer(){return this.editor}hide(){this.editor.style.display="none"}show(){this.editor.style.display="block"}isHidden(){return"block"!==this.editor.style.display}activatePreset(t){const e=this.presets[t];e?(this.points=e.value,this.update()):console.log(`Пресет за индексом ${t} не найден`)}setPoints(t){this.points=JSON.parse(decodeURIComponent(t)),this.update()}getPoints(){return encodeURIComponent(JSON.stringify(this.points))}update(){this.isHidden()||console.log(`Current value: ${JSON.stringify(this.points)}`),this.updatePoints(),this.updatePointsMenu();const t=function(t){const e=t.map((([t,e])=>({key:t,value:e})));return e.sort(((t,e)=>t.key-e.key)),{type:"interpolate",base:1,steps:e,argument:{type:"shading-intensity"}}}(this.points),e=function(t,e){const o=[],i=128,[n,a]=e,r=(a-n)/i;for(let e=n;e<a;e+=r)o.push([e,(0,Te.UP)(t,e,{})]);return o}(t,this.xDomain);this.updateLines(e),this.updateColorScale(e),this.emit("change",[t,this.getPoints()])}updateLines(t){const e=this.svg.selectAll("path").data([this.points]);e.enter().append("path").merge(e).style("stroke","#ccc").attr("d",this.toD(t))}updatePoints(){const t=this.svg.selectAll("circle").data(this.points);t.enter().append("circle").attr("r",4).call(this.drag).merge(t).attr("cx",(t=>this.xScale(t[0]))).attr("cy",(t=>this.yScale(t[1]))),t.exit().remove()}updatePointsMenu(){const t=this.points,e=t.length,o=this.svg;o.select(".remove-point").classed("active",e>2).on("click",(()=>{e<=2||(t.splice(-1,1),this.update())})),o.select(".add-point").classed("active",e<20).on("click",(()=>{e>=20||(t.push([1,.5]),this.update())}))}updateColorScale(t){const e=this.svg.select(".color-scale").selectAll("rect").data(t);e.enter().append("rect").attr("x",(t=>this.xScale(t[0]))).attr("y",0).attr("width",this.xScale(1)/t.length).attr("height",5).merge(e).attr("fill",(t=>this.colorScale(t[1]))),e.exit().remove()}toD(t){const e=[];e.push(`M${this.xScale(t[0][0])},${this.yScale(t[0][1])}`);for(let o=0;o<t.length;o++)e.push(`L${this.xScale(t[o][0])},${this.yScale(t[o][1])}`);return e.join("")}}const Bg={name:"(основной стиль) Онлайн 2ГИС",icons:{exit:{width:24,height:24,stretchX:[[0,23]],stretchY:[[0,23]]},km_pillar:{width:30,height:30,stretchX:[[4,26]],stretchY:[[4,26]]},highway_number:{width:30,height:30,stretchX:[[4,26]],stretchY:[[4,26]]},poi_parking_price:{width:24,height:24,stretchX:[[4,20]],stretchY:[[4,20]]},highway_number_uae_federal:{width:30,height:30,stretchX:[[4,26]],stretchY:[[4,26]]},highway_number_uae_magistral:{width:30,height:30,stretchX:[[4,26]],stretchY:[[4,26]]}},layers:[{id:"906446",type:"group",layers:[{id:"253023",name:"Фон",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],10,"#A4D8EB",12,"#9ED3F0",15,"#92D1F0"],visibility:"visible"},filter:["match",["get","sublayer"],["Background"],!0,!1],metadata:{group:{id:"906446"}}},{id:"307910",name:"Страна",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],0,"#F8F6E7",8,"#F7F3DF"],visibility:"none"},filter:["match",["get","sublayer"],["Country_area"],!0,!1],metadata:{group:{id:"906446"}}},{id:"385177",name:"Страна 2ГИС",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],0,"#FFFCF0",9,"#F5F0D6",12,"#EFECDC",14,"#F3EFDD",16,"#F5F2E0"],visibility:"visible"},filter:["match",["get","db_sublayer"],["Country_2gis_area","Country_area"],!0,!1],metadata:{group:{id:"906446"}}},{id:"756420",name:"Лес",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],3.2,"#E0EEB6",10,"#CCE39D",12,"#C7E295",15,"#C0DD8A",17,"#BCDD86"],visibility:"visible"},filter:["match",["get","sublayer"],["Forest"],!0,!1],minzoom:0,metadata:{group:{id:"906446"}}},{id:"925058",name:"Вода",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],10,"#A4D8EB",12,"#9ED3F0",15,"#92D1F0"],visibility:"visible"},filter:["match",["get","sublayer"],["Water"],!0,!1],metadata:{group:{id:"906446"}}},{id:"403259",name:"Граница страны подложка",type:"line",style:{color:"rgba(0,0,0,0.05)",width:["interpolate",["linear"],["zoom"],5,1,6,4],visibility:"none"},filter:["match",["get","sublayer"],["Country_line"],!0,!1],maxzoom:8.9,metadata:{group:{id:"906446"}}},{id:"842413",name:"Спорная граница UA подложка",type:"line",style:{color:"rgba(0,0,0,0.05)",width:["interpolate",["linear"],["zoom"],5,1,6,4],visibility:"none"},filter:["all",["match",["get","sublayer"],["Disputed_country_line"],!0,!1],["match",["get","db_dispute_position"],["crimea_ua"],!0,!1],["match",["global","jurisdiction"],["ua"],!0,!1]],maxzoom:8.9,metadata:{group:{id:"906446"},filterInputMode:"json"}},{id:"286637",name:"Спорная граница RU подложка",type:"line",style:{color:"rgba(0,0,0,0.05)",width:["interpolate",["linear"],["zoom"],5,1,6,4],visibility:"none"},filter:["all",["match",["get","sublayer"],["Disputed_country_line"],!0,!1],["match",["get","db_dispute_position"],["crimea_ru"],!0,!1],["match",["global","jurisdiction"],["ru"],!0,!1]],maxzoom:8.9,metadata:{group:{id:"906446"},filterInputMode:"json"}},{id:"457457",name:"Граница страны",type:"line",style:{color:["interpolate",["linear"],["zoom"],2,"rgba(148,148,148,0.5)",3,"#9D9D9D",5,"#B1B1B1",6,"#B3B3B3"],width:["interpolate",["linear"],["zoom"],0,.1,6,1],visibility:"none"},filter:["match",["get","sublayer"],["Country_line"],!0,!1],maxzoom:8.9,metadata:{group:{id:"906446"}}},{id:"660154",name:"Спорная граница UA",type:"line",style:{color:["interpolate",["linear"],["zoom"],2,"rgba(148,148,148,0.5)",3,"#9D9D9D",5,"#B1B1B1",6,"#B3B3B3"],width:["interpolate",["linear"],["zoom"],0,.1,6,1],visibility:"none"},filter:["all",["match",["get","sublayer"],["Disputed_country_line"],!0,!1],["match",["get","db_dispute_position"],["crimea_ua"],!0,!1],["match",["global","jurisdiction"],["ua"],!0,!1]],maxzoom:8.9,metadata:{group:{id:"906446"},filterInputMode:"json"}},{id:"39868",name:"Спорная граница RU",type:"line",style:{color:["interpolate",["linear"],["zoom"],2,"rgba(148,148,148,0.5)",3,"#9D9D9D",5,"#B1B1B1",6,"#B3B3B3"],width:["interpolate",["linear"],["zoom"],0,.1,6,1],visibility:"none"},filter:["all",["match",["get","sublayer"],["Disputed_country_line"],!0,!1],["match",["get","db_dispute_position"],["crimea_ru"],!0,!1],["match",["global","jurisdiction"],["ru"],!0,!1]],maxzoom:8.9,metadata:{group:{id:"906446"},filterInputMode:"json"}},{id:"32588",name:"Дороги",type:"line",style:{color:["interpolate",["linear"],["zoom"],7,"#FFC16B",10,"#F5A22E"],width:1.5,visibility:"visible"},filter:["match",["get","sublayer"],["Roads"],!0,!1],metadata:{group:{id:"906446"}}},{id:"166021",name:"Граница области",type:"line",style:{color:["interpolate",["linear"],["zoom"],3.8,"rgba(0,0,0,0)",4,"rgba(0,0,0,0.15)",6,"rgba(0,0,0,0.2)"],width:.7,visibility:"visible"},filter:["match",["get","db_sublayer"],["Region_line","Country_line"],!0,!1],maxzoom:8.9,minzoom:3.8,metadata:{group:{id:"906446"}}},{id:"590069",name:"Океан",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"rgba(255,255,255,0.9)",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],2,12,3,14,4,15],textLabelingMargin:{leftRight:0,topBottom:0},textMaxLengthPerLine:15},filter:["match",["get","sublayer"],["Ocean"],!0,!1],metadata:{group:{id:"906446"}}},{id:"213400",name:"Крупное море",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"rgba(89,128,191,0.7)",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],3,11,5,13],textLabelingMargin:{leftRight:20,topBottom:20}},filter:["match",["get","sublayer"],["Sea_big"],!0,!1],metadata:{group:{id:"906446"}}},{id:"454577",name:"Мелкое море и крупное озеро",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"rgba(89,128,191,0.7)",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],5,11,7,14],textLabelingMargin:{leftRight:40,topBottom:20}},filter:["match",["get","sublayer"],["Sea_small","Lake_big"],!0,!1],metadata:{group:{id:"906446"}}},{id:"272431",name:"Мелкое озеро",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"rgba(89,128,191,0.7)",visibility:"visible",textFontSize:11,textLabelingMargin:{leftRight:0,topBottom:0}},filter:["match",["get","sublayer"],["Lake_small"],!0,!1],metadata:{group:{id:"906446"}}},{id:"561200",name:"Страны 2ГИС",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],5,"#3A3F40",7,"rgba(58,63,64,0.4)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],2,11,3,13,4,15,5,18],textHaloColor:["interpolate",["linear"],["zoom"],6,"#FFFFFF",7,"rgba(255,255,255,0.4)"],textHaloWidth:1,textLabelingMargin:{leftRight:3,topBottom:3},textMaxLengthPerLine:15},filter:["match",["get","sublayer"],["Country_text_2gis"],!0,!1],metadata:{group:{id:"906446"}}},{id:"190692",name:"Крупные страны",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],6,"#3A3F40",7,"rgba(58,63,64,0.4)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],2,11,3,13,4,15,5,18],textHaloColor:["interpolate",["linear"],["zoom"],6,"#FFFFFF",7,"rgba(255,255,255,0.4)"],textHaloWidth:1,textLabelingMargin:{leftRight:3,topBottom:3},textMaxLengthPerLine:15},filter:["match",["get","sublayer"],["Country_text_big"],!0,!1],metadata:{group:{id:"906446"}}},{id:"537314",name:"Средние страны",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],6,"#3A3F40",7,"rgba(58,63,64,0.4)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],2,11,3,13,4,15,6,16],textHaloColor:["interpolate",["linear"],["zoom"],6,"#FFFFFF",7,"rgba(255,255,255,0.4)"],textHaloWidth:1,textLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:15},filter:["match",["get","sublayer"],["Country_text_medium"],!0,!1],metadata:{group:{id:"906446"}}},{id:"785464",name:"Малые страны",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],6,"#3A3F40",7,"rgba(58,63,64,0.4)"],visibility:"visible",textFontSize:13,textHaloColor:["interpolate",["linear"],["zoom"],6,"#FFFFFF",7,"rgba(255,255,255,0.4)"],textHaloWidth:1,textLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["Country_text_small"],!0,!1],metadata:{group:{id:"906446"}}},{id:"338912",name:"Область",type:"point",style:{textFont:"Noto_Sans_Semibold",textColor:["interpolate",["linear"],["zoom"],6,"rgba(32,34,35,0.4)",9,"rgba(32,34,35,0.4)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],6,11,9,20],textHaloColor:["interpolate",["linear"],["zoom"],6,"rgba(255,255,255,0.4)",9,"rgba(255,255,255,0.4)"],textHaloWidth:1,textLabelingMargin:{leftRight:25,topBottom:15},textMaxLengthPerLine:15},filter:["all",["match",["get","sublayer"],["Region_text"],!0,!1],["match",["get","db_dispute_position"],["crimea_ru"],!0,!1],["match",["global","jurisdiction"],["ru"],!0,!1]],metadata:{group:{id:"906446"},filterInputMode:"json"}},{id:"43642",name:"Средние города",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],7,"#4D4D4D",9,"#1A1A1A"],visibility:"visible",textFontSize:12,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1,textLabelingMargin:{leftRight:60,topBottom:30}},filter:["all",["match",["get","sublayer"],["City_medium"],!0,!1],["match",["get","objectClass"],["universe_city"],!0,!1]],metadata:{group:{id:"906446"}}},{id:"918795",name:"Малые города",type:"point",style:{textFont:"Noto_Sans",textColor:"#4D4D4D",visibility:"visible",textFontSize:11,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1,textLabelingMargin:{leftRight:40,topBottom:20}},filter:["match",["get","sublayer"],["City_small"],!0,!1],minzoom:8,metadata:{group:{id:"906446"}}},{id:"731969",name:"Региональные центры",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],7,"#4D4D4D",9,"#1A1A1A"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],6,11,7,12],textHaloColor:"#FFFFFF",textHaloWidth:1,textLabelingMargin:{leftRight:20,topBottom:20}},filter:["all",["match",["get","sublayer"],["City_regional_center"],!0,!1],["match",["get","objectClass"],["universe_city_rc"],!0,!1]],metadata:{group:{id:"906446"}}},{id:"686798",name:"Малые города 2ГИС",type:"point",style:{textFont:"Noto_Sans",textColor:"#262626",visibility:"visible",textFontSize:12,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1,textLabelingMargin:{leftRight:0,topBottom:0}},filter:["all",["match",["get","sublayer"],["City_2gis_small"],!0,!1],["match",["get","objectClass"],["universe_city_2gis","universe_city_2gis_rc"],!0,!1]],maxzoom:9,metadata:{group:{id:"906446"}}},{id:"503721",name:"Крупные города",type:"point",style:{textFont:"Noto_Sans",iconImage:"universe_city",iconWidth:6,textColor:"#2C2C2C",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],6,11,7,13],textHaloColor:"#FFFFFF",textHaloWidth:1,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textLabelingMargin:{leftRight:20,topBottom:20}},filter:["match",["get","sublayer"],["City_big"],!0,!1],metadata:{group:{id:"906446"}}},{id:"369444",name:"Средние города 2ГИС",type:"point",style:{textFont:"Noto_Sans",iconImage:"universe_city",iconWidth:6,textColor:["interpolate",["linear"],["zoom"],7,"#2C2C2C",9,"#1A1A1A"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],5,10.5,7,13],textHaloColor:"#FFFFFF",textHaloWidth:1,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:0,topBottom:0},textLabelingMargin:{leftRight:0,topBottom:0}},filter:["all",["match",["get","sublayer"],["Check_in_desk_caption_underground","Area_caption_underground","Terminal_caption_underground","Cabinet_caption_underground","City_2gis_medium"],!0,!1],["match",["get","objectClass"],["universe_city_2gis","universe_city_2gis_rc"],!0,!1]],maxzoom:9,metadata:{group:{id:"906446"}}},{id:"581711",name:"Крупные города 2ГИС",type:"point",style:{textFont:"Noto_Sans",iconImage:"universe_city",iconWidth:6,textColor:["interpolate",["linear"],["zoom"],7,"#2C2C2C",9,"#1A1A1A"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],4,10.5,5,12,6,14],textHaloColor:"#FFFFFF",textHaloWidth:1,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:5,topBottom:5},textLabelingMargin:{leftRight:5,topBottom:5}},filter:["all",["match",["get","sublayer"],["City_2gis_big"],!0,!1],["match",["get","objectClass"],["universe_city_2gis","universe_city_2gis_rc"],!0,!1]],maxzoom:9,metadata:{group:{id:"906446"}}},{id:"625673",name:"Малые столицы",type:"point",style:{textFont:"Noto_Sans",iconImage:"universe_capital",iconWidth:8,textColor:"#2C2C2C",visibility:"visible",textFontSize:14,textHaloColor:"#FFFFFF",textHaloWidth:1,iconLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["Capital_small"],!0,!1],metadata:{group:{id:"906446"}}},{id:"583987",name:"Столицы",type:"point",style:{textFont:"Noto_Sans",iconImage:"universe_capital",iconWidth:8,textColor:"#2C2C2C",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],4,11,5,13,7,16],textHaloColor:"#FFFFFF",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Capital"],!0,!1],["match",["get","objectClass"],["universe_capital"],!0,!1]],metadata:{group:{id:"906446"}}},{id:"328078",name:"Столицы 2ГИС",type:"point",style:{textFont:"Noto_Sans",iconImage:"universe_capital",iconWidth:8,textColor:["interpolate",["linear"],["zoom"],0,"#2C2C2C",20,"#1A1A1A"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],4,11,5,13,7,16,11,22],textPriority:1,textHaloColor:"#FFFFFF",textHaloWidth:1,iconLabelingMargin:{leftRight:5,topBottom:5},textLabelingMargin:{leftRight:5,topBottom:5}},filter:["all",["match",["get","sublayer"],["Capital_2gis"],!0,!1],["match",["get","objectClass"],["universe_capital_2gis"],!0,!1]],maxzoom:9,metadata:{group:{id:"906446"}}}]},{id:"background",name:"Регион",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],9,"hsl(50, 61%, 90%)",12,"#F1EEE0",14,"#F4F1E1",16,"#F7F6E8"],visibility:"visible",strokeWidth:0},filter:["match",["get","sublayer"],["Region"],!0,!1],minzoom:9.5},{id:"197277",type:"group",layers:[{id:"substrate",name:"Подложка кварталов",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],14,"#C0DD8A",17,"hsl(80, 71%, 92%)"],visibility:"visible"},filter:["match",["get","sublayer"],["Substrate"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_green",name:"Зеленое насаждение",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],10,"#CCE39D",12,"#C7E295",15,"#C0DD8A",17,"#BCDD86"],visibility:"visible",strokeColor:["interpolate",["linear"],["zoom"],10,"#CCE39D",12,"#C7E295",15,"#C0DD8A",17,"hsl(83, 56%, 68%)"],strokeWidth:["interpolate",["linear"],["zoom"],13.9,0,14,1]},filter:["match",["get","sublayer"],["Forest_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_living",name:"Жилой",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],1,"#f2edd4",12,"#EBE9D5",15,"#EEECDD",17,"#EDECDF"],visibility:"visible"},filter:["match",["get","sublayer"],["Dwelling_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_graveyard",name:"Кладбище",type:"polygon",style:{color:"hsl(75, 37%, 81%)",visibility:"visible"},filter:["match",["get","sublayer"],["Graveyard_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_private",name:"Частный сектор",type:"polygon",style:{color:"hsl(50, 57%, 90%)",visibility:"visible"},filter:["match",["get","sublayer"],["Private_quarter","s_kvar_beach"],!0,!1],minzoom:9,metadata:{group:{id:"197277"}}},{id:"kvar_prom",name:"Промышленная территория",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],1,"#efefde",9,"hsl(60, 30%, 91%)",12,"hsl(55, 21%, 89%)",15,"hsl(60, 14%, 90%)"],visibility:"visible"},filter:["match",["get","sublayer"],["Garage_quarter","Technical_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_dacha",name:"Дача",type:"polygon",style:{color:"#D0EB97",visibility:"visible"},filter:["match",["get","sublayer"],["Dacha_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_pedestrian",name:"Пешеходная зона",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],14,"#C7E295",14.2,"#F7F6E8"],visibility:"visible",strokeColor:["interpolate",["linear"],["zoom"],14,"#C7E295",14.2,"#F7F6E8"],strokeWidth:.5},filter:["match",["get","sublayer"],["Pedestrian_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_sport",name:"Спортивный объект",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],14,"rgba(222,218,200,0)",14.2,"#dedac8"],visibility:"visible"},filter:["match",["get","sublayer"],["Sport_quarter"],!0,!1],metadata:{group:{id:"197277"}},farLimit:!0},{id:"kvar_supplementary",name:"Вспомогательный",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],14,"#F4F1E1",14.2,"hsl(0, 0%, 100%)"],visibility:"visible"},filter:["match",["get","sublayer"],["Supplementary_quarter"],!0,!1],minzoom:14,metadata:{group:{id:"197277"}}},{id:"kvar_runway",name:"ВПП",type:"polygon",style:{color:"#ffffff",visibility:"visible"},filter:["match",["get","sublayer"],["Runway_quarter"],!0,!1],minzoom:13,metadata:{group:{id:"197277"}}},{id:"31871",name:"Места интереса",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],11,"rgba(255,153,0,0)",11.2,"rgba(255,213,129,0.3)",16,"rgba(255,194,28,0.08)"],visibility:"visible",strokeWidth:0},filter:["match",["get","sublayer"],["Area_of_interest"],!0,!1],metadata:{group:{id:"197277"}}},{id:"kvar_flowerbed",name:"Клумбы",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],12,"#C7E295",15,"#CDE5A5",17,"#D3EDAF"],visibility:"visible",strokeColor:["interpolate",["linear"],["zoom"],12,"#C7E295",15,"#CDE5A5",17,"#D3EDAF"]},filter:["match",["get","sublayer"],["Flowerbed_quarter"],!0,!1],minzoom:14,metadata:{group:{id:"197277"}}},{id:"kvar_platform",name:"Ж/Д платформа",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],14,"hsl(55, 21%, 89%)",18,"#F2F2F2"],visibility:"visible",strokeColor:["interpolate",["linear"],["zoom"],14,"hsl(55, 21%, 89%)",18,"#D4D4D4"],strokeWidth:.5},filter:["match",["get","sublayer"],["Platform_quarter"],!0,!1],metadata:{group:{id:"197277"}}},{id:"307774",name:"Парковые дорожки и тропинки подложка",type:"line",style:{color:["interpolate",["linear"],["zoom"],14,"#C7E295",14.2,"#EFF9DC",17,"#F7F6E8"],width:["interpolate",["linear"],["zoom"],15,1.5,16,2,17,8,19,12],visibility:"visible"},filter:["match",["get","db_sublayer"],["Pedestrian_road_park_path","Bike_road"],!0,!1],minzoom:14,metadata:{group:{id:"197277"}},farLimit:!0}]},{id:"314726",type:"group",layers:[{id:"899558",name:"Хилшейд темный",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],13,"rgba(0,0,0,0.03)",14,"rgba(0,0,0,0)"],visibility:"visible",strokeWidth:0},filter:["match",["get","db_sublayer"],["Hillshade_dark"],!0,!1],maxzoom:14,metadata:{group:{id:"314726"},filterInputMode:"json"}},{id:"957949",name:"Хилшейд светлый",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],13,"rgba(255,255,255,0.1)",14,"rgba(255,255,255,0)"],visibility:"visible",strokeWidth:0},filter:["match",["get","db_sublayer"],["Hillshade_light"],!0,!1],maxzoom:14.5,metadata:{group:{id:"314726"},filterInputMode:"json"}}]},{id:"149885",type:"group",layers:[{id:"river",name:"Река",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],10,"#A4D8EB",12,"#9ED3F0",15,"#92D1F0"],visibility:"visible",strokeWidth:["interpolate",["linear"],["zoom"],13.9,0,14,1]},filter:["match",["get","sublayer"],["Water_area"],!0,!1],metadata:{group:{id:"149885"}}},{id:"pool",name:"Бассейн",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],10,"#A4D8EB",12,"#9ED3F0",15,"#92D1F0",16,"hsl(200, 84%, 68%)"],visibility:"visible"},filter:["match",["get","sublayer"],["Pool"],!0,!1],metadata:{group:{id:"149885"}},farLimit:!0},{id:"river line",name:"Река линия",type:"line",style:{color:["interpolate",["linear"],["zoom"],10,"#A4D8EB",12,"#9ED3F0",15,"#92D1F0"],width:["interpolate",["exponential",1.3],["zoom"],9.5,.1,20,8],visibility:"visible"},filter:["match",["get","sublayer"],["Water_line"],!0,!1],metadata:{group:{id:"149885"}}}]},{id:"523344",name:"Кварталы ручной генерализации",type:"polygon",style:{color:["interpolate",["linear"],["zoom"],9,"hsl(50, 61%, 90%)",12,"#F1EEE0",14,"#F4F1E1",16,"#F7F6E8"],visibility:"visible",strokeWidth:0},filter:["match",["get","sublayer"],["Manual_generalization_quarter"],!0,!1]},{id:"parking area",name:"Территория парковки",type:"polygon",style:{color:["match",["get","selected"],[!0],"rgba(250,92,74,0.4)",["interpolate",["linear"],["zoom"],16,"rgba(200,208,214,0)",16.2,"rgba(200,208,214,0.23)"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(250,92,74,0)",["interpolate",["linear"],["zoom"],16,"rgba(200,208,214,0)",16.2,"rgba(200,208,214,0.23)"]],strokeWidth:0},filter:["all",["match",["get","hovered"],[!0],!1,!0],["match",["global","parkingOn"],[!1],!0,!1],["match",["get","db_sublayer"],["Parking_area"],!0,!1]],minzoom:16,metadata:{filterInputMode:"json"}},{id:"282807",type:"group",layers:[{id:"510726",name:"Туннель Междугородние подложка ",type:"line",style:{color:["interpolate",["linear"],["zoom"],14,"hsl(0, 0%, 100%)",14.3,"rgba(255,255,255,0)"],width:["interpolate",["exponential",1.3],["zoom"],9,3,19,30,20,30],visibility:"visible"},filter:["match",["get","sublayer"],["Magistral_road_primary_tunnel","Intercity_road_tunnel"],!0,!1],minzoom:9,metadata:{group:{id:"282807"}}},{id:"intercity roads background white",name:"Междугородние подложка",type:"line",style:{color:"hsl(0, 0%, 100%)",width:["interpolate",["exponential",1.3],["zoom"],9,3,19,30,20,30],visibility:"visible"},filter:["match",["get","sublayer"],["Oneway_intercity_road","Magistral_road_primary","Intercity_road","Intercity_road_bridge","Magistral_road_primary_bridge","Magistral_road_primary_pay","Intercity_road_pay","Intercity_road_pay_bridge","Magistral_road_primary_pay_bridge"],!0,!1],minzoom:9,metadata:{group:{id:"282807"}}},{id:"605588",name:"Туннель Федеральные подложка",type:"line",style:{color:["interpolate",["linear"],["zoom"],14,"#ffffff",14.3,"rgba(255,255,255,0)"],width:["interpolate",["exponential",1.5],["zoom"],9,4,19,32,20,32],visibility:"visible"},filter:["match",["get","sublayer"],["Federal_road_pay","Federal_road_bridge","Federal_road_tunnel"],!0,!1],minzoom:9,metadata:{group:{id:"282807"}}},{id:"federal roads background",name:"Федеральные подложка",type:"line",style:{color:"#ffffff",width:["interpolate",["exponential",1.5],["zoom"],9,4.5,19,36,20,36],visibility:"visible"},filter:["match",["get","sublayer"],["Oneway_federal_road","Federal_road","Federal_road_pay","Federal_road_pay_bridge","Federal_road_bridge"],!0,!1],minzoom:9,metadata:{group:{id:"282807"}}}]},{id:"882018",type:"group",layers:[{id:"215577",name:"Внутриквартальные тоннель пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#C6C6C6",16.5,"#CCCCCC"],width:["interpolate",["exponential",2],["zoom"],16,1.4,18,7,20,7],gapColor:["interpolate",["linear"],["zoom"],14,"#C6C6C6",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],15,1.5,16,2,18,3],dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4]},filter:["match",["get","sublayer"],["Internal_road_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"665685",name:"Внутриквартальные тоннель линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#FFFFFF",14.5,"#F9F7EF"],width:["interpolate",["exponential",2],["zoom"],15,.1,18,5,20,5],gapColor:["interpolate",["linear"],["zoom"],14,"#FFFFFF",14.5,"#F9F7EF"],gapLength:0,dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4]},filter:["match",["get","sublayer"],["Internal_road_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"375931",name:"Прочие тоннель пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#C6C6C6",16.5,"#CCCCCC"],width:["interpolate",["exponential",1.9],["zoom"],14,1.5,15,5,19,16,20,16],gapColor:["interpolate",["linear"],["zoom"],14,"#C6C6C6",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],15,1.5,16,2,18,3],dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4]},filter:["match",["get","sublayer"],["Other_road_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"93879",name:"Прочие тоннель линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#FFFFFF",14.5,"#F9F7EF"],width:["interpolate",["exponential",1.9],["zoom"],14,1,15,4,19,13,20,13],gapColor:["interpolate",["linear"],["zoom"],14,"#FFFFFF",14.5,"#F9F7EF"],gapLength:0,dashLength:1},filter:["match",["get","sublayer"],["Other_road_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"768633",name:"Основные тоннель пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],1,"#C6C6C6",10,"#CCCCCC"],width:["interpolate",["exponential",1.5],["zoom"],13,1.8,15,5.8,19,16,20,16],gapColor:["interpolate",["linear"],["zoom"],14,"#CCCCCC",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],15,1.5,16,2,18,3],dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4],visibility:"visible"},filter:["match",["get","sublayer"],["Main_road_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"4033",name:"Основные тоннель линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#FFFFFF",16.5,"#F9F7EF"],width:["interpolate",["exponential",1.5],["zoom"],11,1,13,1.5,15,4.5,19,13.5,20,13.5],gapColor:["interpolate",["linear"],["zoom"],14,"#FFFFFF",16.5,"#F9F7EF"],gapLength:0,dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4],visibility:"visible"},filter:["match",["get","sublayer"],["Main_road_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"magistral roads tunnel",name:"Магистральные тоннель пунктир",type:"dashedLine",style:{color:"#CCCCCC",width:["interpolate",["exponential",2],["zoom"],12.5,4,14,5,16,7.5,20,16.8],gapColor:["interpolate",["linear"],["zoom"],14,"#CCCCCC",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],15,2,16,2.5,18,3],dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4]},filter:["match",["get","sublayer"],["Magistral_road_standard_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"917763",name:"Магистральные тоннель линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#FFFFFF",14.5,"#FFFFFF",16.5,"#F9F7EF"],width:["interpolate",["exponential",2],["zoom"],9,1,12.5,3,14,4,16,5,20,14],gapColor:["interpolate",["linear"],["zoom"],14,"#FFFFFF",14.5,"#FFFFFF",16.5,"#F9F7EF"],gapLength:0,dashLength:["interpolate",["linear"],["zoom"],14,1,16,3,18,4]},filter:["match",["get","sublayer"],["Magistral_road_standard_tunnel"],!0,!1],metadata:{group:{id:"882018"}}},{id:"607795",name:"Междугородние тоннель пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],1,"#FADA70",14.5,"#ED9B35",15,"#ED9B35"],width:["interpolate",["exponential",1.3],["zoom"],9,1.2,19,22,20,22],gapColor:["interpolate",["linear"],["zoom"],14,"#ED9B35",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],14.5,2,16,2.5,18,3],dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4]},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Magistral_road_primary_tunnel","Intercity_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"432276",name:"Междугородние тоннель линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#FCBD40",14.3,"#F4DBA0",14.5,"#F5EBD3"],width:["interpolate",["exponential",1.3],["zoom"],14.5,5.5,19,20,20,20],gapColor:["interpolate",["linear"],["zoom"],14,"#FCBD40",14.3,"#F4DBA0",14.5,"#F5EBD3"],gapLength:0,dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Magistral_road_primary_tunnel","Intercity_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"594543",name:"Междугородние тоннель пунктир в режиме пробок",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],1,"#FADA70",14.5,"#EFD189",15,"#EFD189"],width:["interpolate",["exponential",1.3],["zoom"],9,1.2,19,22,20,22],gapColor:["interpolate",["linear"],["zoom"],14,"#ED9B35",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],14.5,2,16,2.5,18,3],dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Magistral_road_primary_tunnel","Intercity_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"747181",name:"Междугородние тоннель линия в режиме пробок",type:"dashedLine",style:{color:"#F3EFD4",width:["interpolate",["exponential",1.3],["zoom"],9,.3,19,20,20,20],gapColor:"#F3EFD4",gapLength:["interpolate",["linear"],["zoom"],14.5,2,16,2.5,18,3],dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Magistral_road_primary_tunnel","Intercity_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"801560",name:"Федеральные тоннель пунктир",type:"dashedLine",style:{color:"#ED9B35",width:["interpolate",["exponential",1.5],["zoom"],9,2.8,19,25,20,25],gapColor:["interpolate",["linear"],["zoom"],14,"#ED9B35",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],14.5,2,16,2.5,18,3],dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4]},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Federal_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"571765",name:"Федеральные тоннель линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14,"#F29B21",14.3,"#ECD2A8",14.5,"#F2E3C9"],width:["interpolate",["exponential",1.5],["zoom"],14.5,4.5,19,23,20,23],gapColor:["interpolate",["linear"],["zoom"],14,"#F29B21",14.3,"#ECD2A8",14.5,"#F2E3C9"],gapLength:0,dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4]},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Federal_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"722760",name:"Федеральные тоннель пунктир в режиме пробок",type:"dashedLine",style:{color:"#EFD189",width:["interpolate",["exponential",1.5],["zoom"],9,2.8,19,25,20,25],gapColor:["interpolate",["linear"],["zoom"],14,"#ED9B35",14.5,"#00000000"],gapLength:["interpolate",["linear"],["zoom"],14.5,2,16,2.5,18,3],dashLength:["interpolate",["linear"],["zoom"],14,2,16,3,18,4]},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Federal_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}},{id:"306777",name:"Федеральные тоннель линия в режиме пробок",type:"dashedLine",style:{color:"#F3EFD4",width:["interpolate",["exponential",1.5],["zoom"],14.5,4.5,19,23,20,23],gapColor:"#F3EFD4",gapLength:0,dashLength:3},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Federal_road_tunnel"],!0,!1]],metadata:{group:{id:"882018"}}}]},{id:"91350",name:"Зона запрета парковки",type:"line",style:{color:"#FC787C",width:["interpolate",["linear"],["zoom"],15,1.5,20,6]},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_line_forbiden"],!0,!1]],metadata:{}},{id:"110965",name:"Территория парковки для слоя",type:"polygon",style:{color:["match",["get","selected"],[!0],"rgba(250,92,74,0.4)","rgba(107,176,255,0.4)"],visibility:"visible",strokeWidth:0},filter:["all",["match",["get","hovered"],[!0],!1,!0],["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_area","Parking_area_autogenerated"],!0,!1]],minzoom:14,metadata:{filterInputMode:"json"}},{id:"282893",type:"group",layers:[{id:"house adm 2d",name:"Административные дома",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],14,"rgba(220,216,198,0)",14.3,"#DEDAC9",15,"#E4E0D3"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],15,"#DFDCCD",15.2,"#CCC8B8"]],strokeWidth:["interpolate",["linear"],["zoom"],14.9,0,15,.5]},filter:["match",["get","sublayer"],["Administrative_house","Floor_plan_house","Underground_house"],!0,!1],maxzoom:16,minzoom:14,metadata:{group:{id:"282893"}},farLimit:!0},{id:"house known type 2d",name:"Промышленные дома",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],14,"rgba(212,212,212,0)",14.3,"#D6D6D6"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],14,"rgba(212,212,212,0)",14.3,"#d4d4d4"]],strokeWidth:0},filter:["match",["get","sublayer"],["Technical_house"],!0,!1],maxzoom:16,minzoom:14,metadata:{group:{id:"282893"}},farLimit:!0},{id:"school 2d",name:"Школы",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],14,"rgba(252,251,237,0)",14.3,"#fcfbed",15.5,"#dae1f2"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],15,"#FCFBED",15.5,"#D0D7EA",15.8,"#D0D7EA",16,"#B6BCCB"]],strokeWidth:["interpolate",["linear"],["zoom"],14.9,0,15,.5]},filter:["match",["get","sublayer"],["School_house"],!0,!1],maxzoom:16,minzoom:14,metadata:{group:{id:"282893"}},farLimit:!0},{id:"preschool 2d",name:"Сады",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],14,"rgba(252,251,237,0)",14.3,"#F8F7DD",15.5,"#ead8eb"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],15,"#fcfbed",15.5,"#ead8eb",15.8,"#EAD8EB",16,"#CBB9CC"]],strokeWidth:["interpolate",["linear"],["zoom"],14.9,0,15,.5]},filter:["match",["get","sublayer"],["Preschool_house"],!0,!1],maxzoom:16,minzoom:14,metadata:{group:{id:"282893"}},farLimit:!0},{id:"house dwelling 2d",name:"Жилые дома",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],14,"rgba(252,251,237,0)",14.3,"#FAF8E8",14.7,"#FFFDED",16,"#FCFBED"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],15,"#FCFBED",15.2,"#E0DDD5",15.8,"#DCDAD3",16,"#C9C3B4"]],strokeWidth:["interpolate",["linear"],["zoom"],14.9,0,15,.5]},filter:["match",["get","sublayer"],["Dwelling_house"],!0,!1],maxzoom:16,minzoom:14,metadata:{group:{id:"282893"}},farLimit:!0},{id:"house new 2d",name:"Новостройки",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],14,"rgba(252,251,237,0)",14.3,"#fcfbed",15.5,"#EADBB5"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],15,"#FCFBED",15.5,"#E3D6B1",15.8,"#E3D6B1",16,"rgba(202,189,157,0.82)"]],strokeWidth:["interpolate",["linear"],["zoom"],14.9,0,15,.5]},filter:["match",["get","sublayer"],["New_house"],!0,!1],maxzoom:16,minzoom:14,metadata:{group:{id:"282893"}},farLimit:!0},{id:"house private 2d",name:"Частные дома",type:"polygon",style:{color:["match",["get","selected"],[!0],"#FF9387",["interpolate",["linear"],["zoom"],15,"rgba(255,244,217,0)",15.3,"#fff4d9"]],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)",["interpolate",["linear"],["zoom"],15,"#EBDFC1",15.8,"#EBDFC1",16,"#D7CEB7"]],strokeWidth:.5},filter:["match",["get","sublayer"],["Private_house"],!0,!1],maxzoom:16,minzoom:15,metadata:{group:{id:"282893"}},farLimit:!0}]},{id:"687899",type:"group",layers:[{id:"604498",name:"Пешеходные улицы подложка",type:"line",style:{color:["interpolate",["linear"],["zoom"],12,"hsla(0, 0%, 78%, 0)",13,"#A8B5A0"],width:["interpolate",["exponential",1.99],["zoom"],14,1.5,15,5,19,16.5,20,16.5],visibility:"visible"},filter:["match",["get","db_sublayer"],["Pedestrian_street"],!0,!1],minzoom:14,metadata:{group:{id:"687899"}},farLimit:!0},{id:"other roads background",name:"Прочие подложка",type:"line",style:{color:["interpolate",["linear"],["zoom"],12,"hsla(0, 0%, 78%, 0)",13,"#c6c6c6"],width:["interpolate",["exponential",1.99],["zoom"],14,0,15,5,19,16.5,20,16.5],visibility:"visible"},filter:["match",["get","sublayer"],["Other_road","Uncovered_road","Other_road_pay","Uncovered_road_pay","Oneway_other_road","Oneway_uncovered_road","Other_road_bridge","Uncovered_road_bridge","Other_road_pay_bridge","Uncovered_road_pay_bridge"],!0,!1],minzoom:14,metadata:{group:{id:"687899"}},farLimit:!0},{id:"main roads background",name:"Основные подложка",type:"line",style:{color:"#c6c6c6",width:["interpolate",["exponential",1.5],["zoom"],13,0,14,3.8,19,16.5,20,16.5],visibility:"visible"},filter:["match",["get","sublayer"],["Main_road","Main_road_pay","Oneway_main_road","Main_road_bridge","Main_road_pay_bridge"],!0,!1],minzoom:13.5,metadata:{group:{id:"687899"}}},{id:"407309",name:"Магистрали подложка",type:"line",style:{color:["interpolate",["linear"],["zoom"],12.3,"rgba(198,198,198,0)",12.4,"#c6c6c6"],width:["interpolate",["exponential",2],["zoom"],12.5,4,14,5,16,8,20,22],visibility:"visible"},filter:["match",["get","sublayer"],["Magistral_road_standard","Magistral_road_standard_pay","Oneway_magistral_road_standard","Magistral_road_standard_bridge","Magistral_road_standard_pay_bridge"],!0,!1],minzoom:12,metadata:{group:{id:"687899"}}},{id:"internal roads copy",name:"Внутриквартальные подложка",type:"line",style:{color:["interpolate",["linear"],["zoom"],15,"rgba(198,198,198,0)",18,"#C6C6C6"],width:["interpolate",["exponential",2],["zoom"],16,0,17,3,18,7,20,7],visibility:"visible"},filter:["match",["get","sublayer"],["Internal_road","Oneway_internal_road"],!0,!1],minzoom:15,metadata:{group:{id:"687899"}},farLimit:!0},{id:"437244",name:"Строящиеся дороги  подложка",type:"dashedLine",style:{color:"#C6C6C6",width:["interpolate",["exponential",1.5],["zoom"],14,2.5,20,15.5],gapLength:["interpolate",["exponential",1.5],["zoom"],14,1.5,20,12.5],dashLength:["interpolate",["exponential",1.5],["zoom"],14,3.5,20,30.5]},filter:["match",["get","sublayer"],["Under_construction_road"],!0,!1],metadata:{group:{id:"687899"}},farLimit:!0},{id:"24404",name:"Подземные переходы темная подложка",type:"dashedLine",style:{color:"#C6C6C6",width:["interpolate",["linear"],["zoom"],16,3,20,9],gapLength:0,dashLength:0},filter:["match",["get","sublayer"],["Pedestrian_road_underground","Pedestrian_road_tunnel"],!0,!1],minzoom:16,metadata:{group:{id:"687899"}},farLimit:!0},{id:"789358",name:"Подземные переходы белая подложка",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"#EBEBEB",16.2,"#EBEBEB"],width:["interpolate",["linear"],["zoom"],16,2,20,8],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_underground","Pedestrian_road_tunnel"],!0,!1],minzoom:16,metadata:{group:{id:"687899"}},farLimit:!0},{id:"630940",name:"Подземные переходы",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.2)"],width:["interpolate",["linear"],["zoom"],16,0,17,.4],gapLength:["interpolate",["linear"],["zoom"],16,2,19,2.5],dashLength:["interpolate",["linear"],["zoom"],16,2,17,3,19,3.5],visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_tunnel","Pedestrian_road_underground"],!0,!1],minzoom:16,metadata:{group:{id:"687899"}},farLimit:!0},{id:"14056",name:"Пешеходные улицы",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A",["interpolate",["linear"],["zoom"],14,"#EDF5DC",16,"#F8FCEF"]],width:["match",["get","selected"],[!0],["interpolate",["exponential",2],["zoom"],14,1.5,15,5,19,16.5,20,16.5],["interpolate",["exponential",1.99],["zoom"],14,1,15,4,19,14,20,14]],visibility:"visible"},filter:["match",["get","db_sublayer"],["Pedestrian_street"],!0,!1],minzoom:13,metadata:{group:{id:"687899"}},farLimit:!0},{id:"192939",name:"Пешеходные улицы пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],15.5,"rgba(168,181,160,0)",15.7,"rgba(168,181,160,0.3)",17.5,"rgba(168,181,160,0.8)"],width:["interpolate",["linear"],["zoom"],15,0,17,1.4],gapLength:["interpolate",["linear"],["zoom"],16,2,19,2.5],dashLength:["interpolate",["linear"],["zoom"],16,2,17,3,19,3.5],visibility:"visible"},filter:["match",["get","db_sublayer"],["Pedestrian_street"],!0,!1],minzoom:16,metadata:{group:{id:"687899"}},farLimit:!0},{id:"834014",name:"Велодорожки",type:"dashedLine",style:{color:["match",["get","selected"],[!0],"#FA5C4A",["interpolate",["linear"],["zoom"],16,"rgba(158,138,219,0.3)",16.5,"rgba(158,138,219,0.6)",17,"#9E8ADB"]],width:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,2.2,17,2.4,18,2.8,19,3.2],["interpolate",["linear"],["zoom"],16,1.2,17,1.4,18,1.8,19,2.2]],gapLength:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,3,17,3.5,19,4],["interpolate",["linear"],["zoom"],16,2,17,2.5,19,3]],dashLength:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,3.5,17,4.5,18,5,19,5.5],["interpolate",["linear"],["zoom"],16,2.5,17,3.5,18,4,19,4.5]]},filter:["match",["get","sublayer"],["Bike_road"],!0,!1],minzoom:16,metadata:{group:{id:"687899"}},farLimit:!0},{id:"internal roads copy 1",name:"Пешеходные дорожки",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.3)",18,"rgba(0,0,0,0.4)"],width:["interpolate",["linear"],["zoom"],16,0,17,.4],gapLength:["interpolate",["linear"],["zoom"],16,2,19,2.5],dashLength:["interpolate",["linear"],["zoom"],16,2,17,3,19,3.5],visibility:"visible"},filter:["match",["get","db_sublayer"],["Pedestrian_road","Pedestrian_road_park_footpath","Pedestrian_road_park_path","Pedestrian_street_bad_road"],!0,!1],minzoom:16,metadata:{group:{id:"687899"}},farLimit:!0},{id:"359950",name:"Горные тропы",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],12.9,"rgba(0,0,0,0)",13.1,"rgba(0,0,0,0.3)",18,"rgba(0,0,0,0.4)"],width:["interpolate",["linear"],["zoom"],13,0,17,.4],gapLength:["interpolate",["linear"],["zoom"],16,2,19,2.5],dashLength:["interpolate",["linear"],["zoom"],16,2,17,3,19,3.5],visibility:"visible"},filter:["match",["get","db_sublayer"],["Mountain_pedestrian_road"],!0,!1],minzoom:13,metadata:{group:{id:"687899"},filterInputMode:"ui"},farLimit:!0},{id:"internal roads",name:"Внутриквартальные",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A","hsl(0, 0%, 100%)"],width:["match",["get","selected"],[!0],["interpolate",["exponential",2],["zoom"],16,1.4,18,7,20,7],["interpolate",["exponential",2],["zoom"],15,.5,18,6,20,6]],visibility:"visible"},filter:["match",["get","sublayer"],["Internal_road","Oneway_internal_road"],!0,!1],minzoom:15,metadata:{group:{id:"687899"}},farLimit:!0},{id:"567113",name:"Строящиеся дороги",type:"dashedLine",style:{color:"#FFFFFF",width:["interpolate",["exponential",1.5],["zoom"],14,2,20,15],gapLength:["interpolate",["exponential",1.5],["zoom"],14,2,20,13],dashLength:["interpolate",["exponential",1.5],["zoom"],14,3,20,30]},filter:["match",["get","sublayer"],["Under_construction_road"],!0,!1],metadata:{group:{id:"687899"}},farLimit:!0},{id:"other roads",name:"Прочие",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A","hsl(0, 0%, 100%)"],width:["match",["get","selected"],[!0],["interpolate",["exponential",2],["zoom"],14,1.5,15,5,19,16.5,20,16.5],["interpolate",["exponential",1.99],["zoom"],14,1,15,4,19,15,20,15]],visibility:"visible"},filter:["match",["get","sublayer"],["Other_road","Uncovered_road","Other_road_pay","Uncovered_road_pay","Oneway_other_road","Oneway_uncovered_road","Other_road_bridge","Uncovered_road_bridge","Other_road_pay_bridge","Uncovered_road_pay_bridge"],!0,!1],minzoom:13,metadata:{group:{id:"687899"}},farLimit:!0},{id:"949777",name:"Выделение пешеходных дорожек",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A","rgba(0,0,0,0)"],width:["match",["get","selected"],[!0],["interpolate",["exponential",2],["zoom"],15,5,19,16,20,16],0]},filter:["match",["get","sublayer"],["Pedestrian_road"],!0,!1],metadata:{group:{id:"687899"}},farLimit:!0},{id:"main roads",name:"Основные",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A",["interpolate",["linear"],["zoom"],11,"rgba(255,255,255,0)",11.2,"rgba(255,255,255,0.8)",12,"rgba(255,255,255,0.9)",13,"#FFFFFF"]],width:["match",["get","selected"],[!0],["interpolate",["exponential",2],["zoom"],11,1.4,15,5.8,19,16.5,20,16.5],["interpolate",["exponential",1.5],["zoom"],11,1,13,1.5,15,4.5,19,15,20,15]],visibility:"visible"},filter:["match",["get","sublayer"],["Main_road","Main_road_pay","Oneway_main_road","Main_road_bridge","Main_road_pay_bridge"],!0,!1],minzoom:11,metadata:{group:{id:"687899"}}},{id:"726655",name:"Магистральные",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A",["interpolate",["linear"],["zoom"],9,"rgba(255,255,255,0)",9.1,"rgba(255,255,255,0.7)",12,"rgba(255,255,255,0.7)",12.5,"#FFFFFF",13.9,"#FFFFFF"]],width:["match",["get","selected"],[!0],["interpolate",["exponential",2],["zoom"],12.5,4,14,5,16,8,20,22],["interpolate",["exponential",2],["zoom"],9,1,12.5,3,14,4,16,6.7,20,20]],visibility:"visible"},filter:["match",["get","sublayer"],["Magistral_road_standard","Magistral_road_standard_pay","Magistral_road_standard_bridge","Magistral_road_standard_pay_bridge","Oneway_magistral_road_standard"],!0,!1],maxzoom:20,minzoom:9,metadata:{group:{id:"687899"}}},{id:"intercity roads background",name:"Междугородние обводка",type:"line",style:{color:["interpolate",["linear"],["zoom"],1,"#fada70",10,"#ed9b35"],width:["interpolate",["exponential",1.3],["zoom"],9,1.2,19,21.5,20,21.5],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Oneway_intercity_road","Magistral_road_primary","Intercity_road","Intercity_road_bridge","Magistral_road_primary_bridge","Magistral_road_primary_pay","Intercity_road_pay","Intercity_road_pay_bridge","Magistral_road_primary_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}},{id:"390875",name:"Междугородние обводка в режиме пробок",type:"line",style:{color:"#FCEBBA",width:["interpolate",["exponential",1.3],["zoom"],9,1.2,19,21.5,20,21.5],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Oneway_intercity_road","Magistral_road_primary","Intercity_road","Intercity_road_bridge","Magistral_road_primary_bridge","Magistral_road_primary_pay","Intercity_road_pay","Intercity_road_pay_bridge","Magistral_road_primary_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}},{id:"intercity roads",name:"Междугородние",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A",["interpolate",["linear"],["zoom"],1,"#fada70",10,"#ffc83d",12,"#fcbd40",15,"#ffb92e"]],width:["match",["get","selected"],[!0],["interpolate",["exponential",1.3],["zoom"],9,1.5,19,21.5,20,21.5],["interpolate",["exponential",1.3],["zoom"],9,.4,19,20,20,20]],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Oneway_intercity_road","Magistral_road_primary","Intercity_road","Intercity_road_bridge","Magistral_road_primary_bridge","Magistral_road_primary_pay","Intercity_road_pay","Intercity_road_pay_bridge","Magistral_road_primary_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}},{id:"121829",name:"Междугородние в режиме пробок",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A","#FCEBBA"],width:["match",["get","selected"],[!0],["interpolate",["exponential",1.3],["zoom"],9,1.5,19,21.5,20,21.5],["interpolate",["exponential",1.3],["zoom"],9,.4,19,20,20,20]],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Oneway_intercity_road","Magistral_road_primary","Intercity_road","Intercity_road_bridge","Magistral_road_primary_bridge","Magistral_road_primary_pay","Intercity_road_pay","Intercity_road_pay_bridge","Magistral_road_primary_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}},{id:"362345",name:"Федеральные обводка",type:"line",style:{color:["interpolate",["linear"],["zoom"],1,"#faac38",10,"#f5a22e",12,"#f29b21",15,"#BF6F0D"],width:["interpolate",["exponential",1.5],["zoom"],9,2.8,14,6.5,19,27,20,27],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Oneway_federal_road","Federal_road","Federal_road_pay","Federal_road_bridge","Federal_road_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}},{id:"federal roads",name:"Федеральные",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A",["interpolate",["linear"],["zoom"],1,"#faac38",10,"#f5a22e",12,"#f29b21",15,"#ee9211"]],width:["match",["get","selected"],[!0],["interpolate",["exponential",1.5],["zoom"],9,3.8,19,27,20,27],["interpolate",["exponential",1.5],["zoom"],9,2.8,19,25,20,25]],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!1],!0,!1],["match",["get","sublayer"],["Oneway_federal_road","Federal_road","Federal_road_pay","Federal_road_bridge","Federal_road_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}},{id:"29938",name:"Федеральные в режиме пробок",type:"line",style:{color:["match",["get","selected"],[!0],"#FA5C4A","#FCEBBA"],width:["interpolate",["exponential",1.5],["zoom"],9,2.8,19,25,20,25],visibility:"visible"},filter:["all",["match",["global","trafficOn"],[!0],!0,!1],["match",["get","sublayer"],["Oneway_federal_road","Federal_road","Federal_road_pay","Federal_road_bridge","Federal_road_pay_bridge"],!0,!1]],minzoom:9,metadata:{group:{id:"687899"}}}],orderBy:[["get","db_segment_level"]]},{id:"595890",name:"Стрелки внутриквартальные",type:"oneWayLine",style:{color:["interpolate",["linear"],["zoom"],17,"rgba(181,185,205,0.56)",19,"#B5B9CD"],tipWidth:1.4,lineWidth:["interpolate",["exponential",2],["zoom"],17,1.8,19,2.1],tipHeight:2,lineLength:["interpolate",["exponential",2],["zoom"],15,9,19,12],visibility:"visible",endingOffsets:5,duplicationSpacing:["interpolate",["linear"],["zoom"],15,100,19,500]},filter:["match",["get","sublayer"],["Oneway_internal_road"],!0,!1],minzoom:17},{id:"692658",name:"Стрелки серые",type:"oneWayLine",style:{color:["interpolate",["linear"],["zoom"],15,"rgba(181,185,205,0.56)",17,"#B5B9CD"],tipWidth:1.4,lineWidth:["interpolate",["exponential",2],["zoom"],15,1.8,19,2.1],tipHeight:2,lineLength:["interpolate",["exponential",2],["zoom"],15,9,19,12],visibility:"visible",endingOffsets:10,duplicationSpacing:["interpolate",["linear"],["zoom"],15,100,19,500]},filter:["match",["get","sublayer"],["Oneway_main_road","Oneway_other_road","Oneway_uncovered_road","Oneway_magistral_road_standard"],!0,!1],minzoom:15},{id:"99517",name:"Стрелки белые",type:"oneWayLine",style:{color:["interpolate",["linear"],["zoom"],15,"rgba(255,255,255,0.56)",17,"#FFFFFF"],tipWidth:1.4,lineWidth:["interpolate",["exponential",2],["zoom"],15,2.1,19,2.5],tipHeight:2,lineLength:["interpolate",["exponential",2],["zoom"],15,10,19,14],visibility:"visible",endingOffsets:10,duplicationSpacing:["interpolate",["linear"],["zoom"],15,100,19,500]},filter:["match",["get","sublayer"],["Oneway_federal_road","Oneway_intercity_road"],!0,!1],minzoom:15},{id:"602230",name:"Зебры",type:"dashedLine",style:{color:"rgba(2,2,2,0.1)",width:["interpolate",["linear"],["zoom"],16.5,8,18,10,20,24],gapColor:["interpolate",["linear"],["zoom"],16.5,"rgba(255,255,255,0.5)",16.7,"rgba(255,255,255,0.7)"],gapLength:["interpolate",["linear"],["zoom"],16.5,1,20,4],dashLength:["interpolate",["linear"],["zoom"],16.5,1.5,20,4],visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_zebra"],!0,!1],minzoom:16.5,metadata:{}},{id:"fences",name:"Заборы линия",type:"line",style:{color:["interpolate",["linear"],["zoom"],15.8,"hsla(34, 6%, 79%, 0)",16,"hsla(34, 6%, 79%, 0.4)",16.5,"hsla(34, 6%, 79%, 0.6)"],width:["interpolate",["linear"],["zoom"],14,.5,20,1.5],visibility:"visible"},filter:["match",["get","sublayer"],["Fence","Temporary_fence","Low_fence"],!0,!1],maxzoom:16.5,minzoom:15.8,farLimit:!0},{id:"stairs",name:"Лестницы",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.3)"],width:["interpolate",["linear"],["zoom"],16,3,18,5,20,10],gapLength:["interpolate",["linear"],["zoom"],16,1,18,2,20,4],dashLength:.5,visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_stairs"],!0,!1],minzoom:16},{id:"764094",type:"group",layers:[{id:"633779",name:"Горнолыжная трасса чёрная",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],12.7,"rgba(83,83,83,0)",12.9,"#333333"],width:["interpolate",["linear"],["zoom"],13,1,14,1.2],gapLength:["interpolate",["linear"],["zoom"],13,1,18,5],dashLength:["interpolate",["linear"],["zoom"],13,1,18,5],visibility:"visible"},filter:["match",["get","sublayer"],["Skiing_trail_black"],!0,!1],minzoom:12.7,metadata:{group:{id:"764094"}}},{id:"978104",name:"Горнолыжная трасса синяя",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],12.7,"rgba(14,137,247,0)",12.9,"#0687FF"],width:["interpolate",["linear"],["zoom"],13,1,14,1.2],gapLength:["interpolate",["linear"],["zoom"],13,1,18,5],dashLength:["interpolate",["linear"],["zoom"],13,1,18,5],visibility:"visible"},filter:["match",["get","sublayer"],["Skiing_trail_blue"],!0,!1],minzoom:12.7,metadata:{group:{id:"764094"}}},{id:"511416",name:"Горнолыжная трасса красная",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],12.7,"rgba(210,0,0,0)",12.9,"#D20000"],width:["interpolate",["linear"],["zoom"],13,1,14,1.2],gapLength:["interpolate",["linear"],["zoom"],13,1,18,5],dashLength:["interpolate",["linear"],["zoom"],13,1,18,5],visibility:"visible"},filter:["match",["get","sublayer"],["Skiing_trail_red"],!0,!1],minzoom:12.7,metadata:{group:{id:"764094"}}},{id:"372254",name:"Горнолыжная трасса зелёная",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],12.7,"rgba(37,159,18,0)",12.9,"#25C80B"],width:["interpolate",["linear"],["zoom"],13,1,14,1.2],gapLength:["interpolate",["linear"],["zoom"],13,1,18,5],dashLength:["interpolate",["linear"],["zoom"],13,1,18,5],visibility:"visible"},filter:["match",["get","sublayer"],["Skiing_trail_green"],!0,!1],minzoom:12.7,metadata:{group:{id:"764094"}}},{id:"water transport",name:"Водный транспорт",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],14.5,"rgba(255,255,255,0)",15,"#ffffff"],gapLength:5,dashLength:["interpolate",["linear"],["zoom"],14,2.3,20,4],visibility:"visible"},filter:["match",["get","sublayer"],["Ship_line"],!0,!1],minzoom:14.5,metadata:{group:{id:"764094"}}},{id:"608437",name:"Трамвай линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"#7B8FA1",17.5,"#4F9BE2"],width:["interpolate",["linear"],["zoom"],14.5,.7,16,.7,18,1.5],gapLength:0,visibility:"visible"},filter:["match",["get","sublayer"],["Tram_line","Speed_tram_line","Subway_tram_line","Funicular_line"],!0,!1],minzoom:14.7,metadata:{group:{id:"764094"}}},{id:"tram_dash",name:"Трамвай пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"#7B8FA1",17.5,"#4F9BE2"],width:["interpolate",["linear"],["zoom"],16,1.7,16.7,3,19,6],gapColor:"rgba(0,0,0,0)",gapLength:["interpolate",["linear"],["zoom"],15,8,19,40],dashLength:["interpolate",["linear"],["zoom"],14.5,.5,16,.7,19,1],visibility:"visible"},filter:["match",["get","sublayer"],["Tram_line","Subway_tram_line","Speed_tram_line","Funicular_line"],!0,!1],minzoom:15.5,metadata:{group:{id:"764094"}}},{id:"railroad_white_dash",name:"Ж/Д линия светлая",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],13.5,"hsl(0, 0%, 75%)",17,"#ebebeb"],width:["interpolate",["linear"],["zoom"],13.5,1,20,4],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","db_sublayer"],["Railroad_line"],!0,!1],minzoom:13.5,metadata:{group:{id:"764094"}}},{id:"railroad",name:"Ж/Д линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],13.5,"hsl(0, 0%, 75%)",17,"#a2aab4"],width:["interpolate",["linear"],["zoom"],13.5,1,20,4],gapLength:["interpolate",["linear"],["zoom"],13.5,1,15,3,20,6],dashLength:["interpolate",["linear"],["zoom"],13.5,1,15,3,20,6],visibility:"visible"},filter:["match",["get","sublayer"],["Railroad_line"],!0,!1],minzoom:13.5,metadata:{group:{id:"764094"},filterInputMode:"ui"}},{id:"885762",name:"Ж/Д тонкая линия",type:"line",style:{color:["interpolate",["linear"],["zoom"],10,"rgba(179,179,179,0)",10.3,"#B3B3B3"],width:["interpolate",["linear"],["zoom"],10,.5,13.5,1],visibility:"visible"},filter:["match",["get","sublayer"],["Railroad_line"],!0,!1],maxzoom:13.5,metadata:{group:{id:"764094"}}},{id:"709448",name:"Наземное метро линия светлая",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],13.5,"#9FB3BD",17,"#E0E6EA"],width:["interpolate",["linear"],["zoom"],13.5,1,20,4],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","db_sublayer"],["Subway_overground_line"],!0,!1],minzoom:14.3,metadata:{group:{id:"764094"}}},{id:"543604",name:"Наземное метро линия",type:"dashedLine",style:{color:"#9FB3BD",width:["interpolate",["linear"],["zoom"],13.5,1,20,4],gapLength:["interpolate",["linear"],["zoom"],13.5,1,15,3,20,6],dashLength:["interpolate",["linear"],["zoom"],13.5,1,15,3,20,6],visibility:"visible"},filter:["match",["get","db_sublayer"],["Subway_overground_line"],!0,!1],minzoom:14.3,metadata:{group:{id:"764094"},filterInputMode:"ui"}},{id:"130528",name:"Наземное метро тонкая линия",type:"line",style:{color:["interpolate",["linear"],["zoom"],14,"rgba(179,179,179,0)",14.3,"#9FB3BD"],width:["interpolate",["linear"],["zoom"],10,.5,13.5,1],visibility:"visible"},filter:["match",["get","db_sublayer"],["Subway_overground_line"],!0,!1],maxzoom:14.3,minzoom:14,metadata:{group:{id:"764094"}}},{id:"994159",name:"Монорельс",type:"line",style:{color:["interpolate",["linear"],["zoom"],15,"rgba(216,214,201,0)",15.2,"#D8D6C9",17,"#4F9BE2"],width:["interpolate",["linear"],["zoom"],15,.65,18,1.5]},filter:["match",["get","db_sublayer"],["Monorail_line"],!0,!1],minzoom:15,metadata:{group:{id:"764094"}}}]},{id:"bridge",name:"Мосты",type:"line",style:{color:"hsla(0, 0%, 0%, 0.08)",width:["interpolate",["linear"],["zoom"],13,1,15,6],visibility:"visible"},filter:["match",["get","sublayer"],["Bridge_line"],!0,!1],minzoom:16},{id:"porch under house",name:"Подъезды под домами",type:"point",style:{iconImage:["match",["get","selected"],[!0],"ent_i","ent"],iconWidth:["interpolate",["linear"],["zoom"],17,6,17.5,8,18.5,12],textColor:"#353a3d",textOffset:0,visibility:"visible",iconPriority:19,textFontSize:10,textPlacement:"bottomCenter"},filter:["match",["get","sublayer"],["Porch"],!0,!1],maxzoom:19,minzoom:17},{id:"15309",type:"group",layers:[{id:"759281",name:"Пробки белая подложка",type:"shiftedLine",style:{color:"#FFFFFF",shift:["match",["get","traffic_road_class"],[6],["interpolate",["linear"],["zoom"],13,3,15,4.5,17,6.5,19,10],[7],["interpolate",["linear"],["zoom"],13,3.5,15,5,17,7.5,19,10],["interpolate",["linear"],["zoom"],13,3,15,4,17,5,19,10]],width:["match",["get","traffic_road_class"],[5],["interpolate",["linear"],["zoom"],14,6,20,14],[6],["interpolate",["linear"],["zoom"],14,6,20,19],[7],["interpolate",["linear"],["zoom"],14,6,20,22],["interpolate",["linear"],["zoom"],14,6,20,11]]},filter:["match",["get","sublayer"],["Traffic_jams"],!0,!1],metadata:{group:{id:"15309"}}},{id:"26328",name:"Пробки обводка",type:"shiftedLine",style:{color:["match",["get","traffic_color"],[0],["interpolate",["linear"],["zoom"],12,"#53B651",14,"#45A344"],[1],["interpolate",["linear"],["zoom"],12,"#F0B71D",14,"#DDAB15"],[2],["interpolate",["linear"],["zoom"],12,"#E20D0D",14,"#CC1212"],[3],["interpolate",["linear"],["zoom"],12,"#8D1010",14,"#760E0E"],[12],"#FFFFFF","#FFFFFF"],shift:["match",["get","traffic_road_class"],[6],["interpolate",["linear"],["zoom"],13,3,15,4.5,17,6.5,19,10],[7],["interpolate",["linear"],["zoom"],13,3.5,15,5,17,7.5,19,10],["interpolate",["linear"],["zoom"],13,3,15,4,17,5,19,10]],width:["match",["get","traffic_road_class"],[5],["interpolate",["linear"],["zoom"],14,3,20,10.4],[6],["interpolate",["linear"],["zoom"],14,3,20,13.8],[7],["interpolate",["linear"],["zoom"],14,3,20,16.5],["interpolate",["linear"],["zoom"],14,3,20,7.4]]},filter:["all",["match",["get","sublayer"],["Traffic_jams"],!0,!1],["match",["get","traffic_color"],[12],!1,!0]],metadata:{group:{id:"15309"},filterInputMode:"json"}},{id:"132534",name:"Пробки заливка",type:"shiftedLine",style:{color:["match",["get","traffic_color"],[0],"#53B651",[1],"#F0B71D",[2],"#E20D0D",[3],"#8D1010",[12],"#2A0608","#FFFFFF"],shift:["match",["get","traffic_road_class"],[6],["interpolate",["linear"],["zoom"],13,3,15,4.5,17,6.5,19,10],[7],["interpolate",["linear"],["zoom"],13,3.5,15,5,17,7.5,19,10],["interpolate",["linear"],["zoom"],13,3,15,4,17,5,19,10]],width:["match",["get","traffic_road_class"],[5],["interpolate",["linear"],["zoom"],14,2,20,7.4],[6],["interpolate",["linear"],["zoom"],14,2,20,10.8],[7],["interpolate",["linear"],["zoom"],14,2,20,13.2],["interpolate",["linear"],["zoom"],14,2,20,4.4]]},filter:["all",["match",["get","sublayer"],["Traffic_jams"],!0,!1],["match",["get","traffic_color"],[12],!1,!0]],metadata:{group:{id:"15309"},filterInputMode:"json"}},{id:"540899",name:"Пробки обводка перекрытия",type:"shiftedLine",style:{color:["match",["get","traffic_color"],[12],"#2A0608","#FFFFFF"],shift:["match",["get","traffic_road_class"],[6],["interpolate",["linear"],["zoom"],13,3,15,4.5,17,6.5,19,10],[7],["interpolate",["linear"],["zoom"],13,3.5,15,5,17,7.5,19,10],["interpolate",["linear"],["zoom"],13,3,15,4,17,5,19,10]],width:["match",["get","traffic_road_class"],[5],["interpolate",["linear"],["zoom"],14,3,20,10.4],[6],["interpolate",["linear"],["zoom"],14,3,20,13.8],[7],["interpolate",["linear"],["zoom"],14,3,20,16.5],["interpolate",["linear"],["zoom"],14,3,20,7.4]]},filter:["all",["match",["get","sublayer"],["Traffic_jams"],!0,!1],["match",["get","traffic_color"],[12],!0,!1]],metadata:{group:{id:"15309"},filterInputMode:"json"}},{id:"104129",name:"Пробки перекрытия",type:"shiftedLine",style:{color:["match",["get","traffic_color"],[12],"#2A0608","#FFFFFF"],shift:["match",["get","traffic_road_class"],[6],["interpolate",["linear"],["zoom"],13,3,15,4.5,17,6.5,19,10],[7],["interpolate",["linear"],["zoom"],13,3.5,15,5,17,7.5,19,10],["interpolate",["linear"],["zoom"],13,3,15,4,17,5,19,10]],width:["match",["get","traffic_road_class"],[5],["interpolate",["linear"],["zoom"],14,2,20,7.4],[6],["interpolate",["linear"],["zoom"],14,2,20,10.8],[7],["interpolate",["linear"],["zoom"],14,2,20,13.2],["interpolate",["linear"],["zoom"],14,2,20,4.4]]},filter:["all",["match",["get","sublayer"],["Traffic_jams"],!0,!1],["match",["get","traffic_color"],[12],!0,!1]],metadata:{group:{id:"15309"},filterInputMode:"json"}}]},{id:"70184",type:"group",layers:[{id:"500109",name:"Подложка этажей",type:"polygon",style:{color:"rgba(255,255,255,0.74)",visibility:"visible"},filter:["match",["get","sublayer"],["Floor_ground","Floor_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"592422",name:"Подложка парковки этажей",type:"polygon",style:{color:"#E0E0DE",visibility:"visible"},filter:["match",["get","sublayer"],["Parking_road_area_ground","Parking_road_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"29301",name:"Коридор",type:"polygon",style:{color:"#EDEDED",visibility:"visible"},filter:["match",["get","sublayer"],["Hall_ground","Hall_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"842005",name:"Зона незарегистрированных пассажиров",type:"polygon",style:{color:"#F7F9FA",visibility:"visible"},filter:["match",["get","sublayer"],["Notcheck_in_area_ground","Notcheck_in_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"237933",name:"Зона зарегистрированных пассажиров",type:"polygon",style:{color:"#EDEDED",visibility:"visible"},filter:["match",["get","sublayer"],["Check_in_area_ground","Check_in_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"92260",name:"Парковки этажей",type:"polygon",style:{color:"#EDEDED",visibility:"visible"},filter:["match",["get","sublayer"],["Parking_red_area_ground","Parking_blue_area_ground","Parking_yellow_area_ground","Parking_green_area_ground","Parking_common_area_ground","Parking_red_area_underground_ground","Parking_blue_area_underground_ground","Parking_yellow_area_underground_ground","Parking_green_area_underground_ground","Parking_common_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"362203",name:"Фудкорт",type:"polygon",style:{color:"#FAE0CD",visibility:"visible"},filter:["match",["get","sublayer"],["Foodcourt_ground","Foodcourt_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"641434",name:"Атриум",type:"polygon",style:{color:"#E0E0DE",visibility:"visible"},filter:["match",["get","sublayer"],["Atrium_ground","Atrium_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"53668",name:"Каток",type:"polygon",style:{color:"#AEE3E8",visibility:"visible"},filter:["match",["get","sublayer"],["Ice_rink_ground","Ice_rink_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"193652",name:"Технические помещения",type:"polygon",style:{color:"#C8CACC",visibility:"visible"},filter:["match",["get","sublayer"],["Technical_area_ground","Technical_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"494043",name:"Зона пасажиров",type:"polygon",style:{color:"#EDEDED",visibility:"visible"},filter:["match",["get","sublayer"],["Passenger_area_ground","Passenger_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"837736",name:"Административная площадь",type:"polygon",style:{color:"#F9EAEA",visibility:"visible"},filter:["match",["get","sublayer"],["Admistrative_area_ground","Admistrative_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"604557",name:"Стойка регистрации",type:"polygon",style:{color:"#E6CFF1",visibility:"visible"},filter:["match",["get","sublayer"],["Check_in_desk_ground","Check_in_desk_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"513564",name:"Duty Free",type:"polygon",style:{color:"#FBF9A3",visibility:"visible"},filter:["match",["get","sublayer"],["Duty_free_ground","Duty_free_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"942219",name:"Технические помещения аэропорта",type:"polygon",style:{color:"#D9DBDD",visibility:"visible"},filter:["match",["get","sublayer"],["Technical_area_airport_ground","Technical_area_airport_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"193980",name:"Административные помещения аэропорта",type:"polygon",style:{color:"#F9EAEA",visibility:"visible"},filter:["match",["get","sublayer"],["Admistrative_area_airport_ground","Admistrative_area_airport_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"123454",name:"Багажные ленты",type:"polygon",style:{color:"#D9DBDD",visibility:"visible"},filter:["match",["get","sublayer"],["Baggage_line_ground","Baggage_line_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"811078",name:"Зона ожидания",type:"polygon",style:{color:"#C7EBBC",visibility:"visible"},filter:["match",["get","sublayer"],["Waiting_area_ground","Waiting_area_underground_ground"],!0,!1],metadata:{group:{id:"70184"}}},{id:"322367",name:"Стойка регистрации островок",type:"polygonExtrusion",style:{topColor:"#E6CFF1",sideColor:"#D2BDDC",visibility:"visible",strokeColor:"rgba(230,207,241,0)"},filter:["match",["get","sublayer"],["Check_in_desk_underground_island","Check_in_desk_island"],!0,!1],metadata:{group:{id:"70184"}}}]},{id:"563870",type:"group",layers:[{id:"97089",name:"Якорные организации этажей",type:"polygon",style:{color:["match",["get","selected"],[!0],"#EBDD83","#FBF9A3"],visibility:"visible"},filter:["match",["get","sublayer"],["Organizations_area_anchor_ground","Organizations_area_anchor_underground_ground"],!0,!1],metadata:{group:{id:"563870"}}},{id:"184193",name:"Организации этажей",type:"polygon",style:{color:["match",["get","selected"],[!0],"#6EC9F0","#B2E4F7"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"#6EC9F0","#B2E4F7"]},filter:["match",["get","sublayer"],["Organizations_area_ground","Organizations_area_airport_ground","Organizations_area_underground_ground","Organizations_area_airport_underground_ground"],!0,!1],metadata:{group:{id:"563870"}}},{id:"258626",name:"Общепит",type:"polygon",style:{color:["match",["get","selected"],[!0],"#E57A37","#FAB17D"],visibility:"visible"},filter:["match",["get","sublayer"],["Organizations_area_airport_food_underground_ground","Organizations_area_food_anchor_underground_ground","Organizations_area_food_underground_ground","Organizations_area_airport_food_ground","Organizations_area_food_anchor_ground","Organizations_area_food_ground"],!0,!1],metadata:{group:{id:"563870"}}},{id:"316618",name:"Организации этажей островок",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#6EC9F0","#B2E4F7"],sideColor:["match",["get","selected"],[!0],"#64B8DB","#A2D1E2"],visibility:"visible",strokeColor:"rgba(162,209,226,0)"},filter:["match",["get","db_sublayer"],["Organizations_area_island","Organizations_area_airport_island","Organizations_area_underground_island","Organizations_area_airport_underground_island"],!0,!1],metadata:{group:{id:"563870"}}},{id:"846487",name:"Якорные организации этажей островок",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#EBDD83","#FBF9A3"],sideColor:["match",["get","selected"],[!0],"#D7CA78","#E5E395"],visibility:"visible",strokeColor:"rgba(162,209,226,0)"},filter:["match",["get","db_sublayer"],["Organizations_area_anchor_island","Organizations_area_anchor_underground_island"],!0,!1],metadata:{group:{id:"563870"}}},{id:"994949",name:"Якорные организации этажей островок копия",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#E57A37","#FAB17D"],sideColor:["match",["get","selected"],[!0],"#D16F32","#E5A272"],visibility:"visible",strokeColor:"rgba(162,209,226,0)"},filter:["match",["get","db_sublayer"],["Organizations_area_food_island","Organizations_area_food_anchor_island","Organizations_area_airport_food_island","Organizations_area_food_underground_island","Organizations_area_food_anchor_underground_island","Organizations_area_airport_food_underground_island"],!0,!1],metadata:{group:{id:"563870"}}}]},{id:"783289",type:"group",layers:[{id:"576387",name:"Разделители парковок копия",type:"polygon",style:{color:"#CDCDCB",strokeWidth:.1},filter:["match",["get","db_sublayer"],["Parking_line_ground","Parking_line_underground_ground"],!0,!1],metadata:{group:{id:"783289"}}},{id:"67182",name:"Разделители парковок",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#CDCDCB",visibility:"visible",strokeColor:"#F7F7F7",strokeWidth:.1},filter:["match",["get","db_sublayer"],["Parking_line_underground_walls","Parking_line_walls","Parking_red_area_underground_walls","Parking_blue_area_underground_walls","Parking_yellow_area_underground_walls","Parking_green_area_underground_walls","Parking_common_area_underground_walls","Parking_road_area_underground_walls","Parking_red_area_walls","Parking_blue_area_walls","Parking_yellow_area_walls","Parking_green_area_walls","Parking_common_area_walls","Parking_road_area_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"344517",name:"Стены организаций",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:["match",["get","selected"],[!0],"#64B8DB","#A0CDDE"],visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Organizations_area_walls","Organizations_area_airport_walls","Organizations_area_underground_walls","Organizations_area_airport_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"504083",name:"Стены якорных организаций",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:["match",["get","selected"],[!0],"#D7CA78","#DEDC90"],visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Organizations_area_anchor_walls","Organizations_area_anchor_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"164982",name:"Стены общепита",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:["match",["get","selected"],[!0],"#D16F32","#E5A272"],visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Organizations_area_food_walls","Organizations_area_food_anchor_walls","Organizations_area_airport_food_walls","Organizations_area_airport_food_underground_walls","Organizations_area_food_anchor_underground_walls","Organizations_area_food_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"80903",name:"Обводка этажей",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#ECEBE6",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Floor_walls","Floor_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"874728",name:"Стены фудкортов",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#E9D1BF",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Foodcourt_walls","Foodcourt_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"580353",name:"Стены атриумов",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#C7C7C5",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Atrium_walls","Atrium_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"502783",name:"Стены катков",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#A2D4D8",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Ice_rink_walls","Ice_rink_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"943606",name:"Стены технических помещений",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#B0B1B3",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Technical_area_walls","Technical_area_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"598627",name:"Стены зоны незарегистрированных пассажиров",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#E2E4E5",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Notcheck_in_area_walls","Notcheck_in_area_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"784820",name:"Стены зоны зарегистрированных пассажиров",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#D5D5D5",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Check_in_area_walls","Check_in_area_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"145987",name:"Стены пассажирских зон",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#D5D5D5",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Passenger_area_walls","Passenger_area_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"794852",name:"Стены административных помещений",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#E3D5D5",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Admistrative_area_underground_walls","Admistrative_area_walls","Admistrative_area_airport_walls","Admistrative_area_airport_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"675127",name:"Стены стоек регитсрации",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#DAC4E4",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Check_in_desk_walls","Check_in_desk_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"301224",name:"Стены Duty Free",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#E5E395",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Duty_free_walls","Duty_free_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"432531",name:"Стены технических помещений аэропорта",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#C5C7C9",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Technical_area_airport_walls","Technical_area_airport_underground_walls","Baggage_line_underground_walls","Baggage_line_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"760684",name:"Стены зон ожидания",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#B7D8AE",visibility:"visible",strokeColor:"rgba(247,247,247,0.99)",strokeWidth:.1},filter:["match",["get","sublayer"],["Waiting_area_underground_walls","Waiting_area_walls"],!0,!1],metadata:{group:{id:"783289"}}},{id:"839856",name:"Стены коридора",type:"polygonExtrusion",style:{topColor:"#F7F7F7",sideColor:"#CDCDCB",visibility:"visible",strokeColor:"#F7F7F7",strokeWidth:.1},filter:["match",["get","sublayer"],["Hall_walls","Hall_underground_walls"],!0,!1],metadata:{group:{id:"783289"}}}]},{id:"996686",type:"group",layers:[{id:"826456",name:"Супермаркет",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_supermarket",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_supermarket"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"175481",name:"Инструменты",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_tools",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_tools"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"871838",name:"Электроника",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_houseelectronics",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_houseelectronics"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"274792",name:"Джинсы",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_jeans",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_jeans"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"127283",name:"Меховые изделия",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_fur",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_fur"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"638438",name:"Женская одежда",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_womensclothes",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_womensclothes"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"577345",name:"Мужская одежда",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_mensclothes",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_mensclothes"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"213360",name:"Детская одежда",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_kidsclothes",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_kidsclothes"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"73182",name:"Спортивные товары",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_sport",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_sport"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"128996",name:"Нижнее бельё",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_lingerie",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_lingerie"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"667621",name:"Обувь",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_man_shoes",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_shoes"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"635215",name:"Сумки",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_bags",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_bags"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"665411",name:"Ювелирные изделия",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_jewelery",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_jewelery"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"690441",name:"Бижутерия",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_fakejewelery",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_fakejewelery"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"910249",name:"Аптеки",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_pharmacy",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_pharmacy"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"765041",name:"Косметика",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_cosmetics",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_cosmetics"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"49051",name:"Ресторан",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_restaurant",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_restaurant"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"266149",name:"Кофейни",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_coffee",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_coffee"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"287066",name:"Фастфуд",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_fastfood",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_fastfood"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"334520",name:"Подарки",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_gift",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_gift"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"334587",name:"Игрушки",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_toys",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_toys"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"317586",name:"Мебель",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_furniture",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_furniture"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"41306",name:"Посуда",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_pot",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_pot"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"285477",name:"Мобильные устройства",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_cellphone",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_cellphone"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"706405",name:"Часы",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_watch",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_watch"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"766160",name:"Банкоматы",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_atm",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_atm"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"944164",name:"Банк",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_bank",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_bank"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"314665",name:"Админестрация аэропорта",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_airport_administration",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_airport_administration"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"623020",name:"Интернет кафе",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_inet_cafe",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_inet_cafe"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"649417",name:"Почтовое отделение",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_mail",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_mail"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"598786",name:"Развлечения",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_entertainment",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_entertainment"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"785640",name:"Кинотеатры",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_movie_theater",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_movie_theater"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"959388",name:"По умолчанию",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_default",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor","Anchor_underground"],!0,!1],["match",["get","objectClass"],["floor_air_company","floor_ticket","floor_default","floors_bicycle","floors_car_accessorize","floors_car_alarm","floors_car_battery","floors_car_insurance","floors_car_paint","floors_car_parts","floors_car_sale","floors_car_sound","floors_chemistry","floors_motorcycles","floors_pillow_blocks","floors_fire","floors_service_center_parts","floors_tires","floors_uniform"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"957233",name:"Такси",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_taxistand",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor_underground","Anchor","Floor_sight"],!0,!1],["match",["get","objectClass"],["floors_taxi","taxi"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"428272",name:"Розетки для зарядки устройств",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_plug",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor_underground","Anchor","Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["floors_plug","power_outlet"],!0,!1]],metadata:{group:{id:"996686"}}},{id:"902643",name:"Аренда авто",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_car_rental",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Anchor_underground","Anchor","Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["floors_car_rental","car_rental"],!0,!1]],metadata:{group:{id:"996686"}}}]},{id:"53095",type:"group",layers:[{id:"879405",name:"Лифт",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_elevator",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["lift"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"392559",name:"Лестница",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_stairs",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["stairs"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"321656",name:"Эскалатор вверх",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_escalatorup",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight_underground","Floor_sight"],!0,!1],["match",["get","objectClass"],["escalator_up"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"302330",name:"Эскалатор вниз",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_escalatordown",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight_underground","Floor_sight"],!0,!1],["match",["get","objectClass"],["escalator_down"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"957283",name:"Эскалатор вверх и вниз",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_escalator",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight_underground","Floor_sight"],!0,!1],["match",["get","objectClass"],["escalator_up_down"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"247668",name:"Стойка информации",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_info",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["information_desk"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"511719",name:"Фудкорт",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_food_court",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["foodcourt"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"537839",name:"Фонтан",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_fountain",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["fountain"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"247702",name:"Сцена",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_stage",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["stage"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"730641",name:"Гардероб",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_cloackroom",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["wardrobe"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"585858",name:"Туалет",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_toilet",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["toilet"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"300494",name:"Туалет для маломобильных людей",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_toilet_special",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["disabled_toilet"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"268948",name:"Каток",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_iceskating",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["ice_rink"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"402141",name:"Парковка",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_parking",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["parking"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"127299",name:"Памятник",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_memorial",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["monument"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"585498",name:"Паркомат",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_parkomat",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["parking_terminal"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"740566",name:"Мечеть",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_islamic",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["mosque"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"608317",name:"Стойка самостоятельной регитрации",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_self_registration",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["self_registration"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"201378",name:"Упаковка багажа",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_baggage_packing",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baggage_packing"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"359629",name:"Камера хранения",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_safe_deposit",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baggage_room"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"525870",name:"Багажные тележки",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_baggage_cart",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baggage_trolley"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"852331",name:"Выдача багажа",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_baggage_claim",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baggage_rack"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"544195",name:"Телефон",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_phone",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["phone"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"907202",name:"Обмен валюты",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_currency_exchange",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["currency_exchange"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"502551",name:"Дацан",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_buddhist",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["buddhist_temple"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"971472",name:"Синагога",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_jewish",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["synanogue"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"822638",name:"Часовня",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_orthodox",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["orthodox_religious_building"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"515690",name:"Живой уголок",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_nature_corner",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["living_area"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"927885",name:"Медицинский кабинет",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_medical_facility",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["medical_center"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"454868",name:"Полиция",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_police",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["police"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"634128",name:"Комната матери и ребёнка",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_mothers_and_child",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baby_room"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"578352",name:"Парковка для тележек",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_baggage_cart",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["trolley_parking"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"926141",name:"Аренда колясок",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_kinder_cart_rent",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["buggy_rentals"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"553933",name:"Игровая площадка",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_playground",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["playground"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"294460",name:"Место для курения",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_smoking_room",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["smoking_area"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"893077",name:"Оплата багажа",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_baggage_payment",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baggage_payment"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"386857",name:"Розыск багажа",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_lost_baggage",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["baggage_lost"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"366709",name:"Досмотр багажа",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_baggage_control",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["customs"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"760719",name:"Паспортный контроль",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_passport_control",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["passport_control"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"631353",name:"Бизнес зал",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_business_lounge",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["business_lounge"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"330297",name:"VIP зал",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_vip_lounge",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["vip_lounge"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"289601",name:"Транзитный зал",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_transit_hall",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["transit_hall"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"4919",name:"Ветеринарный контроль",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_veterenary_control",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["veterinary_control"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"402110",name:"Выходы на посадку",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_gate",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["gate"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"261252",name:"Зона для маломобильных людей",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_disabilities_places",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["invalid_place"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"267905",name:"Рамка досмотра",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_inspection_frame",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["security_frame"],!0,!1]],metadata:{group:{id:"53095"}}},{id:"970977",name:"Зал ожидания",type:"point",style:{textFont:"Noto_Sans",iconImage:"z_waiting_room",iconWidth:["interpolate",["linear"],["zoom"],18,20,19,28],textColor:"#535558",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1},filter:["all",["match",["get","sublayer"],["Floor_sight","Floor_sight_underground"],!0,!1],["match",["get","objectClass"],["waiting_place"],!0,!1]],metadata:{group:{id:"53095"}}}]},{id:"405141",type:"group",layers:[{id:"759262",name:"Подписи стоек регистрации",type:"point",style:{textFont:"Noto_Sans",textColor:"#595959",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1},filter:["match",["get","sublayer"],["Check_in_desk_caption","Check_in_desk_caption_underground"],!0,!1],minzoom:18,metadata:{group:{id:"405141"}}},{id:"398841",name:"Подписи помещений",type:"point",style:{textFont:"Noto_Sans",textColor:"#595959",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1},filter:["match",["get","sublayer"],["Area_caption","Area_caption_underground"],!0,!1],minzoom:18,metadata:{group:{id:"405141"}}},{id:"497600",name:"Подписи комнат",type:"point",style:{textFont:"Noto_Sans",textColor:"#595959",visibility:"visible",textFontSize:13,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1},filter:["match",["get","sublayer"],["Cabinet_caption","Cabinet_caption_underground"],!0,!1],minzoom:19,metadata:{group:{id:"405141"}}},{id:"989544",name:"Подписи терминалов",type:"point",style:{textFont:"Noto_Sans_Semibold",textColor:"#595959",visibility:"visible",textFontSize:13,textPriority:150,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:1},filter:["match",["get","sublayer"],["Terminal_caption","Terminal_caption_underground"],!0,!1],maxzoom:19,minzoom:17,metadata:{group:{id:"405141"}}}]},{id:"587197",type:"group",layers:[{id:"191231",name:"Пешеходные мосты контур копия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.2)"],width:["interpolate",["linear"],["zoom"],16,2.5,18,8.5],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_overground"],!0,!1],minzoom:16,metadata:{group:{id:"587197"}}},{id:"503507",name:"Пешеходные мосты линия копия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(255,255,255,0)",16.2,"#FFFFFF"],width:["interpolate",["linear"],["zoom"],16,1,18,7],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_overground"],!0,!1],minzoom:16,metadata:{group:{id:"587197"}}},{id:"613720",name:"Пешеходные мосты пунктир копия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.3)",18,"rgba(0,0,0,0.4)"],width:["interpolate",["linear"],["zoom"],16,0,17,.4],gapLength:["interpolate",["linear"],["zoom"],16,2,19,2.5],dashLength:["interpolate",["linear"],["zoom"],16,2,17,3,19,3.5],visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_overground"],!0,!1],minzoom:16,metadata:{group:{id:"587197"}}}]},{id:"5946",type:"group",layers:[{id:"265909",name:"Парковки",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_i","poi_parking_new"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,11,17,12],["interpolate",["linear"],["zoom"],16.5,9,17,10]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking"],!0,!1]],minzoom:16.5,metadata:{group:{id:"5946"}}},{id:"62231",name:"Парковки платные",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_paid_i","poi_parking_paid"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,15,17,16],["interpolate",["linear"],["zoom"],16.5,13,17,14]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking"],!0,!1],["match",["get","db_parking_type"],["paid"],!0,!1]],minzoom:16.5,metadata:{group:{id:"5946"},filterInputMode:"json"}},{id:"27914",name:"Парковки для инвалидов",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_dis_i","poi_parking_dis"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,15,17,16],["interpolate",["linear"],["zoom"],16.5,13,17,14]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking"],!0,!1],["match",["get","db_parking_type"],["invalid"],!0,!1]],minzoom:16.5,metadata:{group:{id:"5946"},filterInputMode:"json"}},{id:"512445",name:"Парковки для резидентов",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_res_i","poi_parking_res"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,15,17,16],["interpolate",["linear"],["zoom"],16.5,13,17,14]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking"],!0,!1],["match",["get","db_parking_type"],["resident"],!0,!1]],minzoom:16.5,metadata:{group:{id:"5946"},filterInputMode:"json"}},{id:"547862",name:"Парковки для такси",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_taxi_i","poi_parking_taxi"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,15,17,16],["interpolate",["linear"],["zoom"],16.5,13,17,14]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking"],!0,!1],["match",["get","db_parking_type"],["taxi"],!0,!1]],minzoom:16.5,metadata:{group:{id:"5946"},filterInputMode:"json"}},{id:"487697",name:"Парковки голубые",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_color_i","poi_parking_blue"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],17,12,18,14],["interpolate",["linear"],["zoom"],0,0,16.5,10,17,12]],visibility:"visible"},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_blue","Parking_blue_roof"],!0,!1]],minzoom:15,metadata:{group:{id:"5946"}}},{id:"397758",name:"Парковки зелёные",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_color_i","poi_parking_green"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],17,12,18,14],["interpolate",["linear"],["zoom"],0,0,16.5,10,18,11]],visibility:"visible"},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_green","Parking_green_roof"],!0,!1]],minzoom:15,metadata:{group:{id:"5946"}}},{id:"638505",name:"Парковки оранжевые",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_color_i","poi_parking_orange"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],17,12,18,14],["interpolate",["linear"],["zoom"],0,0,16.5,10,18,11]],visibility:"visible"},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_orange","Parking_orange_roof"],!0,!1]],minzoom:15,metadata:{group:{id:"5946"}}},{id:"2993",name:"Парковки фиолетовые",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_color_i","poi_parking_violet"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],17,12,18,14],["interpolate",["linear"],["zoom"],0,0,16.5,10,18,11]],visibility:"visible"},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_violet_roof","Parking_violet"],!0,!1]],minzoom:15,metadata:{group:{id:"5946"}}},{id:"356931",name:"Парковки смешанные оранжевые",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_color_i","poi_parking_mix_orange"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],17,12,18,14],["interpolate",["linear"],["zoom"],0,0,16.5,10,18,11]],visibility:"visible"},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_orange_mix_roof","Parking_orange_mix"],!0,!1]],minzoom:15,metadata:{group:{id:"5946"}}},{id:"930603",name:"Парковки смешанные зелёные",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_color_i","poi_parking_mix_green"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],17,12,18,14],["interpolate",["linear"],["zoom"],0,0,16.5,10,18,11]],visibility:"visible"},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_green_mix_roof","Parking_green_mix"],!0,!1]],minzoom:15,metadata:{group:{id:"5946"}}},{id:"299529",name:"Парковки для самокатов",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_kick_i","poi_parking_kick"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,15,17,16],["interpolate",["linear"],["zoom"],16.5,13,17,14]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["match",["get","sublayer"],["Parking_kick"],!0,!1],minzoom:16.5,metadata:{group:{id:"5946"},filterInputMode:"json"}},{id:"310304",name:"Парковки для велосипедов",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_bike_i","poi_parking_bike"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],0,0,18,16]],visibility:"visible"},filter:["match",["get","sublayer"],["Parking_bike","Parking_bike_roof"],!0,!1],minzoom:15,metadata:{group:{id:"5946"}}},{id:"114266",name:"Парковки для мотоциклов",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_moto_i","poi_parking_moto"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],0,0,18,16]],visibility:"visible"},filter:["match",["get","sublayer"],["Parking_moto_roof","Parking_moto"],!0,!1],minzoom:15,metadata:{group:{id:"5946"}}}]},{id:"traffic light",name:"Светофоры",type:"point",style:{textFont:"Noto_Sans",iconImage:"poi_traffic_light",iconWidth:["interpolate",["linear"],["zoom"],16,14,17,18],textOffset:0,visibility:"visible",textPlacement:"centerCenter"},filter:["all",["match",["get","sublayer"],["Traffic_light"],!0,!1],["match",["get","objectClass"],["traffic_light"],!0,!1]],minzoom:16},{id:"294692",name:"Заборы. 3D",type:"lineExtrusion",style:{height:400,sideColor:["interpolate",["linear"],["zoom"],16.5,"rgba(196,192,188,0.5)",19,"rgba(199,194,181,0.85)"],visibility:"visible",strokeColor:["interpolate",["linear"],["zoom"],16.5,"rgba(196,192,188,0.6)",19,"rgba(199,194,181,0.3)"],strokeWidth:["interpolate",["linear"],["zoom"],16.5,1,19,2]},filter:["match",["get","sublayer"],["Fence","Temporary_fence","Low_fence"],!0,!1],minzoom:16.5,metadata:{filterInputMode:"json"}},{id:"206498",type:"group",layers:[{id:"kiosk",name:"Киоски",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#DDD9C7"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(204,200,183,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#C5C0AF"],strokeWidth:.5},filter:["match",["get","sublayer"],["Kiosk"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"house private",name:"Частные дома",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#fff4d9"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(221,212,190,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#D7CEB7"],strokeWidth:.5},filter:["match",["get","sublayer"],["Private_house"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"school",name:"Школы",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#dae1f2"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(192,198,211,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#B6BCCB"],strokeWidth:.5},filter:["match",["get","sublayer"],["School_house"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"preschool",name:"Сады",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#ead8eb"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(213,197,214,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#CBB9CC"],strokeWidth:.5},filter:["match",["get","sublayer"],["Preschool_house"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"house new",name:"Новостройки",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","rgba(237,223,187,0.82)"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(209,196,165,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","rgba(202,189,157,0.82)"],strokeWidth:.5},filter:["match",["get","sublayer"],["New_house"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"house known type",name:"Промышленные дома",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#d4d4d4"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(193,193,193,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#B9B9B9"],strokeWidth:.5},filter:["match",["get","sublayer"],["Technical_house"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"house dwelling",name:"Жилые дома",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#FCFBED"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(209,203,190,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#C9C3B4"],strokeWidth:.5},filter:["match",["get","sublayer"],["Dwelling_house"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"house adm",name:"Административные дома",type:"polygonExtrusion",style:{topColor:["match",["get","selected"],[!0],"#FF9387","#E4E0D3"],sideColor:["match",["get","selected"],[!0],"rgba(234,133,124,0.82)","rgba(208,204,190,0.82)"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"rgba(178,101,94,0.56)","#CAC6B5"],strokeWidth:.5},filter:["match",["get","sublayer"],["Administrative_house","Floor_plan_house","Kiosk"],!0,!1],minzoom:16,metadata:{group:{id:"206498"}}},{id:"173792",name:"Ховер зданий",type:"polygonExtrusion",style:{topColor:"rgba(255,255,255,0.45)",sideColor:"rgba(255,255,255,0.45)",visibility:"visible",strokeColor:"#E0E0E0",strokeWidth:.5},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["Dwelling_house","Administrative_house","Preschool_house","Floor_plan_house","Technical_house","Private_house","Underground_house","School_house","New_house","Kiosk"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"206498"},filterInputMode:"json"}}]},{id:"843132",name:"3D модели",type:"buildingModel",style:{color:["match",["get","selected"],[!0],"#FF9387","#FFFFF5"],visibility:"visible",strokeColor:["match",["get","selected"],[!0],"#B2655E","#CCC9C3"],strokeWidth:.1},filter:["match",["get","sublayer"],["Building_model"],!0,!1],minzoom:16},{id:"3475",name:"Парковки крытые",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_parking_roof_i","poi_parking_roof_new"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],16,15,17,16],["interpolate",["linear"],["zoom"],15,13,17,14]],visibility:"visible",iconLabelingMargin:{leftRight:2,topBottom:2}},filter:["all",["match",["global","parkingOn"],[!1],!0,!1],["match",["get","sublayer"],["Parking_roof"],!0,!1]],minzoom:15,metadata:{}},{id:"112612",name:"Канатная дорога линия",type:"line",style:{color:["interpolate",["linear"],["zoom"],12.7,"rgba(96,139,233,0)",12.9,"rgba(96,139,233,0.5)"],width:["interpolate",["linear"],["zoom"],12.7,.5,12.9,1]},filter:["match",["get","sublayer"],["Ropeway_line"],!0,!1],minzoom:12.7,metadata:{}},{id:"kanat",name:"Канатная дорога пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],12.7,"rgba(96,139,233,0)",12.9,"rgba(96,139,233,0.5)"],width:["interpolate",["linear"],["zoom"],12.7,.2,12.9,1.5,18,5],gapColor:"rgba(96,139,233,0)",gapLength:["interpolate",["linear"],["zoom"],12.7,40,18,160],dashLength:["interpolate",["linear"],["zoom"],12.7,2,12.9,3,18,8]},filter:["match",["get","sublayer"],["Ropeway_line"],!0,!1],minzoom:12.7,metadata:{}},{id:"566836",type:"group",layers:[{id:"973940",name:"Пешеходные мосты контур",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.2)"],width:["interpolate",["linear"],["zoom"],16,1,17,9,19,13.5],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_bridge"],!0,!1],minzoom:16,metadata:{group:{id:"566836"}}},{id:"63869",name:"Пешеходные мосты линия",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(255,255,255,0)",16.2,"#FFFFFF"],width:["interpolate",["linear"],["zoom"],16,1,17,8,19,12],gapLength:0,dashLength:0,visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_bridge"],!0,!1],minzoom:16,metadata:{group:{id:"566836"}}},{id:"394212",name:"Пешеходные мосты пунктир",type:"dashedLine",style:{color:["interpolate",["linear"],["zoom"],16,"rgba(0,0,0,0)",16.2,"rgba(0,0,0,0.3)",18,"rgba(0,0,0,0.4)"],width:["interpolate",["linear"],["zoom"],16,0,17,.4],gapLength:["interpolate",["linear"],["zoom"],16,2,19,2.5],dashLength:["interpolate",["linear"],["zoom"],16,2,17,3,19,3.5],visibility:"visible"},filter:["match",["get","sublayer"],["Pedestrian_road_bridge"],!0,!1],minzoom:16,metadata:{group:{id:"566836"}}}]},{id:"porch",name:"Подъезды над домами",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"ent_i","ent"],iconWidth:12,textColor:"#353a3d",textOffset:0,visibility:"visible",iconPriority:21,textFontSize:10,textPriority:20,textPlacement:"bottomCenter"},filter:["match",["get","sublayer"],["Porch"],!0,!1],minzoom:19},{id:"444318",type:"group",layers:[{id:"934236",name:"Смотровая площадка",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_photo_7_i","poi_photo_light"],iconWidth:["interpolate",["linear"],["zoom"],14,11,15,13,16,14],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["viewing_point"],!0,!1]],minzoom:14,metadata:{group:{id:"444318"}}},{id:"820830",name:"Памятник природы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"forest_i","forest"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["natural_monument"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"448652",name:"Памятник природы при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"forest_i","forest_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#535558",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["natural_monument"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:14,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"290726",name:"Ховер Памятник природы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"forest_i","forest_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_sight"],!0,!1],["match",["get","db_object_class"],["natural_monument"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"474939",name:"Места для дайвинга",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_diving_i","poi_diving_light"],iconWidth:14,textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["dive_site"],!0,!1]],minzoom:14,metadata:{group:{id:"444318"}}},{id:"900811",name:"Водопад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"waterfall_i","waterfall"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#1482BD",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:5,topBottom:5},textLabelingMargin:{leftRight:23,topBottom:23},textMaxLengthPerLine:19},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["waterfall"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:13,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"624405",name:"Водопад при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"waterfall_i","waterfall_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#535558",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:5,topBottom:5},textLabelingMargin:{leftRight:23,topBottom:23},textMaxLengthPerLine:19},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["waterfall"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:13,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"302042",name:"Ховер Водопад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"waterfall_i","waterfall_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#1482BD",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:5,topBottom:5},textLabelingMargin:{leftRight:23,topBottom:23},textMaxLengthPerLine:19},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_sight"],!0,!1],["match",["get","db_object_class"],["waterfall"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:13,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"679413",name:"Вертолетная площадка",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_helipad_i","poi_helipad_light"],iconWidth:["interpolate",["linear"],["zoom"],14,12,15,14,16,16],visibility:"visible",iconPriority:30,textPriority:25},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["helicopter_landing_pad"],!0,!1]],minzoom:14,metadata:{group:{id:"444318"}}},{id:"501649",name:"Парк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["park"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:12.5,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"603252",name:"Парк при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#535558",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["park"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:12.5,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"40458",name:"Ховер Парк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_sight"],!0,!1],["match",["get","db_object_class"],["park"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:12.5,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"955204",name:"Пляж",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"beach_i","beach"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#CA6602",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:1,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["beach"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:13,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"439096",name:"Пляж при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"beach_i","beach_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#535558",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:1,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["High_zoom_sight"],!0,!1],["match",["get","objectClass"],["beach"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:13,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"849095",name:"Ховер Пляж",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"beach_i","beach_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,16,16,20,18,24]],textColor:"#CA6602",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:1,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_sight"],!0,!1],["match",["get","db_object_class"],["beach"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:13,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"746277",name:"Лыжная база",type:"point",style:{textFont:["step",["zoom"],"",17,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_skiing_7_i","poi_skiing_light"],iconWidth:["interpolate",["linear"],["zoom"],14,14,16,16],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["skiing_lodge"],!0,!1]],minzoom:14,metadata:{group:{id:"444318"}}},{id:"589802",name:"Информация",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_info_7_i","poi_info_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:30},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["information"],!0,!1]],minzoom:17,metadata:{group:{id:"444318"}}},{id:"693992",name:"Сад",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_flower_i","poi_flower_light"],iconWidth:["interpolate",["linear"],["zoom"],14,12,16,16],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textPriority:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:19},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["garden"],!0,!1]],minzoom:14.5,metadata:{group:{id:"444318"}}},{id:"783274",name:"Мост",type:"point",style:{textFont:["step",["zoom"],"",17,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_bridge_7_i","poi_bridge_light"],iconWidth:["interpolate",["linear"],["zoom"],14,12,16,15],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["bridge"],!0,!1]],minzoom:15,metadata:{group:{id:"444318"}}},{id:"749538",name:"Лодочная станция",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_boats_7_i","poi_boats_light"],iconWidth:["interpolate",["linear"],["zoom"],14,14,16,16],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["boat_station"],!0,!1]],minzoom:15,metadata:{group:{id:"444318"}}},{id:"517626",name:"Кемпинг",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_camping_i","poi_camping_light"],iconWidth:["interpolate",["linear"],["zoom"],14,14,16,16,18,18],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:18},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["camping"],!0,!1]],minzoom:14,metadata:{group:{id:"444318"}}},{id:"498513",name:"Авиатехника",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_airplane_i","poi_airplane_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["aircraft"],!0,!1]],minzoom:15,metadata:{group:{id:"444318"}}},{id:"312212",name:"Затопленные объекты",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_underwater_i","poi_underwater_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],textColor:"#474747",visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:2,topBottom:2},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","objectClass"],["flooded_object"],!0,!1]],minzoom:12,metadata:{group:{id:"444318"}}},{id:"623781",name:"Скейтпарк",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_skate_i","poi_skate_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["skate_park"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"896976",name:"Спасатель",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_lifeguard_7_i","poi_lifeguard_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["baywatch"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"140233",name:"Раздевалка",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_beach_cabin_7_i","poi_beach_cabin_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["dressing_room"],!0,!1]],minzoom:16.5,metadata:{group:{id:"444318"}}},{id:"899142",name:"Душевая кабинка",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_shower_i","poi_shower_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["shower_room"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"910754",name:"Вода",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_water_7_i","poi_water_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["drinking_water","springs"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"908397",name:"Каток",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_rink_7_i","poi_rink_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["ice_rink"],!0,!1]],minzoom:17,metadata:{group:{id:"444318"}}},{id:"713746",name:"Прокат",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_skiing_7_i","poi_skiing_light"],iconWidth:["interpolate",["linear"],["zoom"],14,14,16,16],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["winter_equipment_rental"],!0,!1]],minzoom:17,metadata:{group:{id:"444318"}}},{id:"197264",name:"Зимние аттракционы",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_winact_i","poi_winact_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["winter_attraction"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"570664",name:"Ёлочный базар",type:"point",style:{textFont:["step",["zoom"],"",18,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_christmas_bazaar_7_i","poi_christmas_bazaar_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["christmas_trees"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"819693",name:"Новогодние ёлки",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_christmas_bazaar_7_i","poi_christmas_bazaar_light"],iconWidth:20,textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:11,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["main_christmas_tree"],!0,!1]],minzoom:15,metadata:{group:{id:"444318"},filterInputMode:"ui"}},{id:"611544",name:"Памятные деревья",type:"point",style:{textFont:["step",["zoom"],"",18,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_forest_7_i","poi_forest_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["significant_trees","memorable_trees"],!0,!1]],minzoom:17,metadata:{group:{id:"444318"}}},{id:"255752",name:"Аттракционы",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_atractions_i","poi_atractions_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],visibility:"visible",iconPriority:19,iconLabelingMargin:{leftRight:5,topBottom:5}},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["attractions"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"41774",name:"Руины",type:"point",style:{textFont:["step",["zoom"],"",17.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_ruins_7_i","poi_ruins_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["ruins"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"435520",name:"Пейнтбол",type:"point",style:{textFont:"",iconImage:["match",["get","selected"],[!0],"poi_painball_7_i","poi_painball_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["paintball"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"923939",name:"Сцена",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_music_7_i","poi_music_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["stage"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"643194",name:"Вольер",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_cage_i","poi_cage_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,18],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["aviary"],!0,!1]],minzoom:17.5,metadata:{group:{id:"444318"}}},{id:"46255",name:"Усадьба",type:"point",style:{textFont:"",iconImage:["match",["get","selected"],[!0],"poi_bower_i","poi_bower_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:18},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["country_estate"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"877835",name:"Переезд",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_railroadcrossing_7_i","poi_railroadcrossing_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["railway_crossing"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"662834",name:"Памятник",type:"point",style:{textFont:"",iconImage:["match",["get","selected"],[!0],"poi_monument_i","poi_monument_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,15],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:18},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["monument"],!0,!1]],minzoom:16.5,metadata:{group:{id:"444318"}}},{id:"24354",name:"Памятная доска",type:"point",style:{textFont:"",iconImage:["match",["get","selected"],[!0],"poi_memorial_plaque_i","poi_memorial_plaque_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,15],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:18},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["commemorative_plaque"],!0,!1]],minzoom:18,metadata:{group:{id:"444318"}}},{id:"972328",name:"Интересные здания",type:"point",style:{textFont:"",iconImage:["match",["get","selected"],[!0],"landmark_i","landmark_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,15],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:18},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["landmark"],!0,!1]],minzoom:17.5,metadata:{group:{id:"444318"}}},{id:"649155",name:"Места захоронения",type:"point",style:{textFont:["step",["zoom"],"",18.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_tumb_i","poi_tumb_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,15],textColor:"#262626",visibility:"visible",iconPriority:19,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["grave"],!0,!1]],minzoom:17,metadata:{group:{id:"444318"}}},{id:"740819",name:"Полиция",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_police_i","poi_police_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["police_station"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"245916",name:"Декоративное сооружение",type:"point",style:{textFont:"",iconImage:["match",["get","selected"],[!0],"poi_decorative_i","poi_decorative_light"],iconWidth:["interpolate",["linear"],["zoom"],14,11,16,14,18,15],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textPriority:0,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:8,topBottom:15},textMaxLengthPerLine:24},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["decorative_building"],!0,!1]],minzoom:17,metadata:{group:{id:"444318"}}},{id:"494131",name:"Беседка",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_bench_7_i","poi_bench_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["pavilion"],!0,!1]],minzoom:17.5,metadata:{group:{id:"444318"}}},{id:"440726",name:"Буккроссинг",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_bookcrossing_7_i","poi_bookcrossing_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["bookcrossing"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"554915",name:"Граффити",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_street_art_i","poi_street_art_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,18],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["street_art"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"298418",name:"Фонтан",type:"point",style:{textFont:["step",["zoom"],"",18.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_fountain_i","poi_fountain_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["fountain"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"89334",name:"Место для выгула собак",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_dog_7_i","poi_dog_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,15],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["place_to_walk_dogs"],!0,!1]],minzoom:17.5,metadata:{group:{id:"444318"}}},{id:"805521",name:"Тир",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_shootingrange_7_i","poi_shootingrange_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["shooting_range"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"320465",name:"Прокат",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_bicycle_i","poi_bicycle_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["equipment_rental"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"108500",name:"Детская площадка",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_playground_7_i","poi_playground_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["playground"],!0,!1]],minzoom:18,metadata:{group:{id:"444318"}}},{id:"572027",name:"Картинг",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_carting_7_i","poi_carting_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["karting"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"}}},{id:"241351",name:"Автотехника",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_carting_7_i","poi_carting_light"],iconWidth:["interpolate",["linear"],["zoom"],16,14,18,18],textColor:"#474747",visibility:"visible",iconPriority:19,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["auto"],!0,!1]],minzoom:16,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"152335",name:"Туалет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_toilet_i","poi_toilet"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["toilet","disabled_toilet"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:17.5,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"353477",name:"Туалет при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_toilet_i","poi_toilet_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["toilet","disabled_toilet"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:17.5,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"122402",name:"Ховер Туалет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_toilet_i","poi_toilet_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","db_object_class"],["toilet","disabled_toilet"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:17.5,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"810304",name:"Зона барбекю",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bbq_i","poi_bbq"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["bbq_area"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"842534",name:"Зона барбекю при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bbq_i","poi_bbq_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["bbq_area"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:15,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"303288",name:"Ховер Зона барбекю",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bbq_i","poi_bbq_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["bbq_area"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"769731",name:"Первая помощь",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_first_aid_i","poi_first_aid"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["first_aid"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"426734",name:"Первая помощь при поиске",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_first_aid_i","poi_first_aid_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["first_aid"],!0,!1],["match",["global","searchOn"],[!0],!0,!1]],minzoom:16,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"552070",name:"Ховер Первая помощь",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_first_aid_i","poi_first_aid_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_sight"],!0,!1],["match",["get","db_object_class"],["first_aid"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"46720",name:"Спортивный инвентарь",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_gym_7_i","poi_gym_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,14],visibility:"visible",iconPriority:19,iconLabelingMargin:{leftRight:5,topBottom:5}},filter:["all",["match",["get","sublayer"],["Low_zoom_sight"],!0,!1],["match",["get","objectClass"],["sport_equipment","workout_place"],!0,!1]],minzoom:18,metadata:{group:{id:"444318"}}},{id:"258312",name:"Контейнеры для мусора",type:"point",style:{iconImage:["match",["get","selected"],[!0],"poi_trashbin_1_i","poi_trashbin_1_light"],iconWidth:["interpolate",["linear"],["zoom"],14,10,16,16],visibility:"visible",iconPriority:19,iconLabelingMargin:{leftRight:0,topBottom:0}},filter:["all",["match",["get","sublayer"],["Poi_trash"],!0,!1],["match",["get","objectClass"],["poi_trash"],!0,!1]],minzoom:18,metadata:{group:{id:"444318"}}},{id:"180883",name:"Отметка высоты",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_peak_i","poi_peak_light"],iconWidth:["interpolate",["linear"],["zoom"],12,16,14,18],textColor:"#474747",textOffset:0,visibility:"visible",iconPriority:41,textFontSize:10,textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:50,topBottom:50},textLabelingMargin:{leftRight:5,topBottom:5},textMaxLengthPerLine:16},filter:["all",["match",["get","db_sublayer"],["High_zoom_sight"],!0,!1],["match",["get","db_object_class"],["mountain_peak"],!0,!1],["==",["get","db_icon_priority"],30]],minzoom:12,metadata:{group:{id:"444318"},filterInputMode:"json"}},{id:"987730",name:"Отметка высоты популярные",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_peak_i","poi_peak_light"],iconWidth:["interpolate",["linear"],["zoom"],12,16,14,18],textColor:"#474747",textOffset:0,visibility:"visible",iconPriority:43,textFontSize:10,textPriority:41,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textLabelingMargin:{leftRight:5,topBottom:5},textMaxLengthPerLine:16},filter:["all",["match",["get","db_sublayer"],["High_zoom_sight"],!0,!1],["match",["get","db_object_class"],["mountain_peak"],!0,!1],["!=",["get","db_icon_priority"],30]],maxzoom:20,minzoom:10,metadata:{group:{id:"444318"},filterInputMode:"json"}}]},{id:"853413",name:"Крупные достопримечательности",type:"point",style:{textFont:"Noto_Sans",iconImage:"poi_city_dot",iconWidth:["interpolate",["linear"],["zoom"],10,21,10.5,32,12,36,13,40,14,44,15,48],textColor:"#535558",visibility:"visible",allowOverlap:!1,iconPriority:94,textFontSize:["interpolate",["linear"],["zoom"],10,9,10.5,10,16,12],textPriority:85,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Landmark_poi"],!0,!1],["match",["get","db_region"],[99,27],!1,!0]],maxzoom:20,minzoom:10,metadata:{filterInputMode:"json"}},{id:"246968",name:"Крупные достопримечательности UAE",type:"point",style:{textFont:"Noto_Sans",iconImage:"poi_city_dot",iconWidth:["interpolate",["linear"],["zoom"],9,20,11,32,12,36,13,40,14,44,15,48],textColor:"#535558",visibility:"visible",allowOverlap:!1,iconPriority:94,textFontSize:["interpolate",["linear"],["zoom"],11,10,16,12],textPriority:85,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:1,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Landmark_poi"],!0,!1],["match",["get","db_region"],[99,27],!0,!1]],maxzoom:20,minzoom:9,metadata:{filterInputMode:"json"}},{id:"346254",type:"group",layers:[{id:"739801",name:"Подписи площадей",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"#737373",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],12,10,20,14],textPriority:41,textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:.7,textLabelingMargin:{leftRight:10,topBottom:10}},filter:["match",["get","sublayer"],["Square_caption"],!0,!1],metadata:{group:{id:"346254"}}},{id:"565840",name:"Прочие подписи",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"#424242",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:.7,textLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["Other_caption_point"],!0,!1],metadata:{group:{id:"346254"}}},{id:"290185",name:"Специальные подписи",type:"point",style:{textFont:"Noto_Sans",textColor:"#424242",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:.7,textLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["Special_caption_point"],!0,!1],metadata:{group:{id:"346254"}}},{id:"564286",name:"Подписи секторов",type:"point",style:{textFont:"Noto_Sans",textColor:"#424242",visibility:"visible",textFontSize:10,textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:.7,textLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["Sector_caption_point"],!0,!1],minzoom:17,metadata:{group:{id:"346254"}}},{id:"189931",name:"Подписи островов",type:"point",style:{textFont:"Noto_Sans",textColor:"#3F4873",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],11,10,16,14],textPriority:0,textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:1,textLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["Island_caption","Big_island_caption"],!0,!1],metadata:{group:{id:"346254"}}},{id:"212900",name:"Подписи мелких рек в точке",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"#5980BF",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,11,18,14],textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:0,textLabelingMargin:{leftRight:5,topBottom:5},textMaxLengthPerLine:18},filter:["match",["get","sublayer"],["Small_river_caption_point"],!0,!1],minzoom:14,metadata:{group:{id:"346254"}}},{id:"24333",name:"Подписи водных объектов в точке",type:"point",style:{textFont:"Noto_Sans_Italic",textColor:"#5980BF",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,11,18,14],textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:0,textLabelingMargin:{leftRight:5,topBottom:5}},filter:["match",["get","sublayer"],["River_caption_point","Lake_caption_point","Sea_caption"],!0,!1],minzoom:9,metadata:{group:{id:"346254"}}},{id:"434939",name:"Прочие подписи вдоль линии",type:"labelLine",style:{textFont:"Noto_Sans_Italic",textColor:"#424242",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.34)",lineEndingOffsets:5,textDuplicationSpacing:1e3,textLabelingSideMargin:5},filter:["match",["get","sublayer"],["Other_caption_line"],!0,!1],metadata:{group:{id:"346254"}}},{id:"72705",name:"Подписи синих горнолыжных трасс",type:"labelLine",style:{textFont:"Noto_Sans",textColor:"#056CCC",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:5,textDuplicationSpacing:1e3,textLabelingSideMargin:0},filter:["match",["get","db_sublayer"],["Skiing_trail_blue_caption"],!0,!1],minzoom:14,metadata:{group:{id:"346254"}}},{id:"205265",name:"Подписи красных горнолыжных трасс",type:"labelLine",style:{textFont:"Noto_Sans",textColor:"#B80000",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:5,textDuplicationSpacing:1e3,textLabelingSideMargin:0},filter:["match",["get","db_sublayer"],["Skiing_trail_red_caption"],!0,!1],minzoom:14,metadata:{group:{id:"346254"}}},{id:"571382",name:"Подписи синих горнолыжных трасс копия копия",type:"labelLine",style:{textFont:"Noto_Sans",textColor:"#177A07",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:5,textDuplicationSpacing:1e3,textLabelingSideMargin:0},filter:["match",["get","db_sublayer"],["Skiing_trail_green_caption"],!0,!1],minzoom:14,metadata:{group:{id:"346254"}}},{id:"857983",name:"Подписи синих горнолыжных трасс копия копия копия",type:"labelLine",style:{textFont:"Noto_Sans",textColor:"#333333",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],15.5,10,18,14],textPriority:40,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:5,textDuplicationSpacing:1e3,textLabelingSideMargin:0},filter:["match",["get","db_sublayer"],["Skiing_trail_black_caption"],!0,!1],minzoom:14,metadata:{group:{id:"346254"}}},{id:"360241",name:"Специальные подписи вдоль линии",type:"labelLine",style:{textColor:"#3F3F3F",visibility:"visible",textFontSize:10,textPriority:40,textHaloColor:"rgba(255,255,255,0.34)",textHaloWidth:.7,lineEndingOffsets:5,textDuplicationSpacing:200,textLabelingSideMargin:10},filter:["match",["get","sublayer"],["Special_caption_line"],!0,!1],metadata:{group:{id:"346254"}}},{id:"982721",name:"Подписи рек",type:"labelLine",style:{textFont:"Noto_Sans_Italic",textColor:"#FFFFFF",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],12,12,18,15],textDuplicationSpacing:["interpolate",["linear"],["zoom"],12,500,18,1e3]},filter:["match",["get","sublayer"],["River_caption_line"],!0,!1],metadata:{group:{id:"346254"}}},{id:"137910",name:"Подписи мелких рек",type:"labelLine",style:{textFont:"Noto_Sans_Italic",textColor:"#5980BF",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],12,12,18,15],textDuplicationSpacing:["interpolate",["linear"],["zoom"],12,500,18,1e3]},filter:["match",["get","sublayer"],["Canal_caption","Small_river_caption_line"],!0,!1],minzoom:16,metadata:{group:{id:"346254"}}},{id:"153515",name:"Подписи платформ",type:"labelLine",style:{textColor:"#3F3F3F",visibility:"visible",textFontSize:10,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1,textDuplicationSpacing:200,textLabelingSideMargin:10},filter:["match",["get","sublayer"],["Railroad_platform_caption"],!0,!1],metadata:{group:{id:"346254"}}},{id:"353046",name:"Подписи горных хребтов",type:"labelLine",style:{textFont:"Noto_Sans_Italic",textColor:"#2C1803",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],16,12,18,14],textPriority:42,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1,textDuplicationSpacing:500,textLabelingSideMargin:10},filter:["match",["get","sublayer"],["Mountain_caption"],!0,!1],metadata:{group:{id:"346254"}}}]},{id:"gate",name:"Калитки",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_gate_i","poi_gate"],iconWidth:["interpolate",["linear"],["zoom"],19,12,19.1,16],textColor:"#353a3d",textOffset:0,visibility:"visible",textFontSize:10,textPlacement:"bottomCenter"},filter:["match",["get","sublayer"],["Gate"],!0,!1],minzoom:18},{id:"barrier",name:"Шлагбаумы",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_barrier_i","poi_barrier"],iconWidth:16,textColor:"#353a3d",textOffset:0,visibility:"visible",textFontSize:10,textPlacement:"bottomCenter"},filter:["match",["get","sublayer"],["Barrier"],!0,!1],minzoom:18},{id:"832861",name:"Номера домов частного сектора",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],16,"#89847A",20,"#6D6962"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],16,10,20,15],textPriority:23,allowElevation:!0,textLabelingMargin:{leftRight:10,topBottom:10}},filter:["match",["get","sublayer"],["House_number_private"],!0,!1],minzoom:17},{id:"169879",name:"Адресные точки",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],16,"#89847A",20,"#6D6962"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],16,10,20,15],textPriority:19,allowElevation:!0,textLabelingMargin:{leftRight:10,topBottom:10}},filter:["match",["get","sublayer"],["Address_point"],!0,!1],minzoom:17},{id:"615525",name:"Номера домов",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],16,"#89847A",20,"#6D6962"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],16,10,20,15],textPriority:24,allowElevation:!0,textLabelingMargin:{leftRight:10,topBottom:10}},filter:["match",["get","sublayer"],["House_number"],!0,!1],minzoom:15.3},{id:"444276",name:"Названия зданий",type:"point",style:{textFont:"Noto_Sans",textColor:"#6D6962",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],16,10,20,15],textPriority:25,allowElevation:!0,textLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["match",["get","sublayer"],["Building_caption"],!0,!1],minzoom:15},{id:"723280",type:"group",layers:[{id:"732697",name:"Красные иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_red_i","poi_red"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_yellow"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"723280"},filterInputMode:"json"}},{id:"348491",name:"Оранжевые иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_orange_i","poi_orange"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_orange"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"723280"},filterInputMode:"json"}},{id:"161912",name:"Жёлтые иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_yellow_i","poi_yellow"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_yellow"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"723280"},filterInputMode:"json"}},{id:"512737",name:"Зелёные иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_green_i","poi_green"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4C8A0A",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_green"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"723280"},filterInputMode:"json"}},{id:"707056",name:"Синие иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_blue_i","poi_blue"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_blue"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"723280"},filterInputMode:"json"}}]},{id:"202559",type:"group",layers:[{id:"644570",name:"Бытовая техника обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_laundry_services_i","poi_laundry_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_laundry_services"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"665856",name:"Фото обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_photo_services_i","poi_photo_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_photo_services"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"784478",name:"Принтеры обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_printer_services_i","poi_printer_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_printer_services"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"168244",name:"Компьютеры обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_computer_services_i","poi_computer_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_computer_services"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"567208",name:"Мобильные телефоны обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cellphone_services_i","poi_cellphone_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_cellphone_services"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"658832",name:"Бытовая техника продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_laundry_sale_i","poi_laundry_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_laundry_sale"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"819019",name:"Фото продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_photo_sale_i","poi_photo_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_photo_sale"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"265337",name:"Принтеры продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_printer_sale_i","poi_printer_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_printer_sale"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"698586",name:"Компьютеры продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_computer_sale_i","poi_computer_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_computer_sale"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"464570",name:"Мобильные телефоны продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cellphone_sale_i","poi_cellphone_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_cellphone_sale"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"308397",name:"Туалет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_toilet_i","poi_toilet"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_toilet"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"846576",name:"Ботанический сад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_arboretum"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"45505",name:"Магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_grocery_i","poi_grocery"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_shop"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"785675",name:"Домашние животные",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_pets_i","poi_pets"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_pets"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"208337",name:"Ритуальные услуги",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_funeral_i","poi_funeral"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_funeral"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"858439",name:"Крематории и кладбища",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_funeral_i","poi_funeral"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_crematory"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"241688",name:"Цветы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_flowers_i","poi_flowers"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_flowers"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"714110",name:"Растения",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_plants_i","poi_plants"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_garden"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"300981",name:"Строительный магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_market"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"630198",name:"Банк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bank_i","poi_bank"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_bank"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"626773",name:"Банкомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_atm_i","poi_atm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Low_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_atm"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"824416",name:"Паркомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_parking_meter_i","poi_parking_meter"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#1482BD",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_parking_meter"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"931310",name:"Благотворительные боксы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_charity_box_i","poi_charity_box"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_charity_box"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:17.5,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"930316",name:"Магазин одежды",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_close_i","poi_close"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_clothes"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"583953",name:"Обувной магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_shoes_i","poi_shoes"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator","Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_shoe_store"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"119256",name:"Красота",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_beauty_i","poi_beauty"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_beauty"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"85846",name:"Кофейня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cafe_i","poi_cafe"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_coffee_shop"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"791812",name:"Картинг",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_carting_i","poi_carting_firm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_karting"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"383724",name:"Финтес-клуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_gym_i","poi_gym_firm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_gym"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"626284",name:"Общепит",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_restaurant_i","poi_restaurant"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_food_service"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"229565",name:"Ресторан",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_restaurant_i","poi_restaurant"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_food_restaurant"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"809039",name:"Бар",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bar_i","poi_bar"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_bar"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"357521",name:"Сауна",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_sauna_i","poi_sauna"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_sauna"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"651183",name:"SPA",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_spa_i","poi_spa"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_spa"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"818481",name:"Часовня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_chapel"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"613179",name:"Авиаклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_airclub_i","poi_airclub"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_aviaclub"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"90470",name:"Документы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_documents_i","poi_documents"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_documents"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"130700",name:"Автосервис",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_carservice_i","poi_carservice"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_service_station"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"159777",name:"Автомобили",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cars_i","poi_cars"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_cars"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"929390",name:"Супермаркеты",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_shop_i","poi_shop"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_mart"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"755203",name:"Рынки",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_market_i","poi_market"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:12},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_market"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"342593",name:"Администрация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cityhall_i","poi_cityhall"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_government"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"298312",name:"Аптека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pharmacy_i","poi_pharmacy"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,31],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_pharmacy"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"152848",name:"Детский сад",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_kindergarten_i","poi_kindergarten"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#1482bd",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_kindergarten"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"740184",name:"Билетная касса",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_lift_tickets_i","poi_lift_tickets"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_ticket"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"33212",name:"Теннисный клуб",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_tennis_i","poi_tennis"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_tennis"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"473943",name:"Бассейн",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pool_i","poi_pool"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_pool"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"478683",name:"Каток",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_icerink_i","poi_icerink"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_ice_skating"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"732589",name:"Почта",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_post_i","poi_post"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_post"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"509252",name:"Образование",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_school_i","poi_school"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_education"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"397534",name:"НИИ",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_science_i","poi_science"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_science"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"407941",name:"Библиотека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_library_i","poi_library"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_library"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"178359",name:"Церковь",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_church"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"882243",name:"Синагога",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_judaism_i","poi_judaism"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_synagogue"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"893860",name:"Дацан",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buddhism_i","poi_buddhism"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_datsan"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"491993",name:"Мечеть",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_islamic_i","poi_islamic"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_mosque"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"287883",name:"Медицинское учреждение",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ba4836",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_health"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"638173",name:"Больницы и госпитали",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ba4836",textOffset:0,visibility:"visible",iconPriority:26,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_hospital"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"107512",name:"Полиция",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_police_i","poi_police_firm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(8, 55%, 47%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_police"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"506100",name:"Санаторий",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_sanatorium_i","poi_sanatorium"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_rest"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"153611",name:"Гостиница",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hotel_i","poi_hotel"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_hotel"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"465427",name:"Базы отдыха",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_sanatorium_i","poi_sanatorium"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_hotel_rest"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"422851",name:"Театр",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_theater_i","poi_theater"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_theater"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"263726",name:"Музей",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_museum_i","poi_museum"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_museum"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"835066",name:"Лучшие достопримечательности",type:"point",style:{textFont:["step",["zoom"],"",14,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_attraction_i","poi_attraction"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ca6602",textOffset:0,visibility:"visible",iconPriority:35,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_attraction"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"384846",name:"Кинотеатр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cinema_i","poi_cinema"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_cinema"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"226888",name:"Гольфклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_golf_i","poi_golf"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_golf"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"404306",name:"Ипподром",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hippodrome_i","poi_hippodrome"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_racecourse"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"169618",name:"Стадион",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_stadium_i","poi_stadium"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_stadium"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"64635",name:"Горнолыжка",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_skiing_resort_i","poi_skiing_resort"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_skiing"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"834411",name:"ТРЦ",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_mall_i","poi_mall"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4c8a0a",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator","Poi_mall_floor_plan"],!0,!1],["match",["get","objectClass"],["poi_mall","poi_mall_floor"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"64237",name:"Строительный гипермаркет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4c8a0a",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_hypermarket"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"30210",name:"Зоопарк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_zoo_i","poi_zoo"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_zoo"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"692176",name:"Цирк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_circus_i","poi_circus"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_circus"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"357669",name:"Заправочная снация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_gas_station_i","poi_gas_station"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:35,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_gas_station"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14.5,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"490688",name:"Зарядная станция",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_electro_station_i","poi_electro_station"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_electro_station"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14.5,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"731229",name:"Бизнес-центр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buisness_center_i","poi_buisness_center"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:30,topBottom:30},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_business_center"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:14.5,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"535817",name:"Новостройки",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_new_building_i","poi_new_building"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:0,topBottom:0},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_new_building"],!0,!1],["match",["global","searchOn"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"poi-airport",name:"Аэропорт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_airport_i","poi_airport"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:115,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_poi"],!0,!1],["match",["get","objectClass"],["poi_airport"],!0,!1]],minzoom:15,metadata:{group:{id:"202559"}}},{id:"poi-railway",name:"Ж/Д вокзал",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_railwaystation_i","poi_railwaystation"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,20,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_poi"],!0,!1],["match",["get","objectClass"],["poi_railway_station"],!0,!1]],minzoom:15,metadata:{group:{id:"202559"}}},{id:"poi-bus",name:"Автовокзал",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_busstation_i","poi_busstation"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,20,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_poi"],!0,!1],["match",["get","objectClass"],["poi_bus_station"],!0,!1]],minzoom:15,metadata:{group:{id:"202559"}}},{id:"poi-port",name:"Порт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_port_i","poi_port"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_poi"],!0,!1],["match",["get","objectClass"],["poi_river_station"],!0,!1]],minzoom:15,metadata:{group:{id:"202559"}}},{id:"761398",name:"Коммерческие POI",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],15,22,17.8,30],textColor:"#3A3A3A",visibility:"visible",iconPriority:50,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default"],!0,!1],["match",["get","db_region"],[99],!1,!0],["match",["global","searchOn"],[!0],!1,!0],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],minzoom:15.1,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"191708",name:"Коммерческие POI на масштабе города z10",type:"point",style:{textFont:["",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:18,textColor:"#3A3A3A",visibility:"visible",iconPriority:200,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_city"],!0,!1],["match",["global","searchOn"],[!0],!1,!0],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],maxzoom:12,minzoom:10,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"961357",name:"Коммерческие POI на масштабе города z12",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],10,18,15,22,17.8,30],textColor:"#3A3A3A",visibility:"visible",iconPriority:82,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_city"],!0,!1],["match",["global","searchOn"],[!0],!1,!0],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],minzoom:12,metadata:{group:{id:"202559"},filterInputMode:"json"}},{id:"762741",name:"Коммерческие POI UAE",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],15,22,17.8,30],textColor:"#3A3A3A",visibility:"visible",iconPriority:50,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default"],!0,!1],["match",["get","db_region"],[99],!0,!1],["match",["global","searchOn"],[!0],!1,!0],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],minzoom:14.1,metadata:{group:{id:"202559"},filterInputMode:"json"}}]},{id:"567772",type:"group",layers:[{id:"935736",name:"Ботанический сад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_arboretum"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"arboretum"]]],minzoom:15,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"317095",name:"НИИ",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_science_i","poi_science_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_science"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"science"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"945947",name:"Горнолыжка",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_skiing_resort_i","poi_skiing_resort_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_skiing"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"skiing"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"933300",name:"Рынки",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_market_i","poi_market_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:12},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_market"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"market"]]],minzoom:15.8,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"258962",name:"Администрация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cityhall_i","poi_cityhall_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_government"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"government"]]],minzoom:15.8,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"753880",name:"Бассейн",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pool_i","poi_pool_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_pool"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"pool"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"865541",name:"Каток",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_icerink_i","poi_icerink_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_ice_skating"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"ice_skating"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"829451",name:"Почта",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_post_i","poi_post_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_post"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"post"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"767160",name:"Библиотека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_library_i","poi_library_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_library"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"library"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"827430",name:"Церковь",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_church"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"church"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"713863",name:"Синагога",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_judaism_i","poi_judaism_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_synagogue"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"synagogue"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"508393",name:"Дацан",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buddhism_i","poi_buddhism_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_datsan"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"datsan"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"708232",name:"Мечеть",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_islamic_i","poi_islamic_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_mosque"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"mosque"]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"320390",name:"Больницы",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:26,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_hospital"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"hospital"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"290133",name:"Театр",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_theater_i","poi_theater_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_theater"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"theater"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"977257",name:"Музей",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_museum_i","poi_museum_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_museum"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"museum"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"574740",name:"Лучшие достопримечательности",type:"point",style:{textFont:["step",["zoom"],"",14,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_attraction_i","poi_attraction_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,19,16,21,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_attraction"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"attraction"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"810092",name:"Кинотеатр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cinema_i","poi_cinema_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_cinema"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"cinema"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"545158",name:"Ипподром",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hippodrome_i","poi_hippodrome_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_racecourse"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"racecourse"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"898213",name:"Стадион",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_stadium_i","poi_stadium_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_stadium"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"stadium"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"356954",name:"ТРЦ",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_mall_i","poi_mall_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator","Poi_mall_floor_plan"],!0,!1],["match",["get","objectClass"],["poi_mall","poi_mall_floor"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"mall","mall_floor"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"904714",name:"Строительный гипермаркет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_hypermarket"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"construction_hypermarket"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"154035",name:"Зоопарк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_zoo_i","poi_zoo_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_zoo"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"zoo"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"117955",name:"Цирк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_circus_i","poi_circus_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_circus"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"circus"]]],minzoom:14,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"301282",name:"Бизнес-центр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buisness_center_i","poi_buisness_center_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:30,topBottom:30},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_business_center"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"business_center"]]],minzoom:14.5,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"462378",name:"Новостройки",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_new_building_i","poi_new_building_grey"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#535558",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:0,topBottom:0},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_new_building"],!0,!1],["all",["global","searchOn"],["!=",["global","poiCategory"],"new_building"]]],minzoom:15,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"299108",name:"Коммерческие POI",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],15,16,17.8,24],textColor:"#3A3A3A",visibility:"visible",iconPriority:50,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:16,topBottom:16}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default"],!0,!1],["match",["get","db_region"],[99],!1,!0],["all",["global","searchOn"],["any",["!=",["global","poiCategory"],["get","poi_category"]],["==",["get","poi_category"],null]]],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],minzoom:15.1,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"765065",name:"Коммерческие POI на масштабе города z10",type:"point",style:{textFont:["",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:16,textColor:"#3A3A3A",visibility:"visible",iconPriority:200,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:16,topBottom:16}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_city"],!0,!1],["match",["get","db_region"],[99],!1,!0],["all",["global","searchOn"],["any",["!=",["global","poiCategory"],["get","poi_category"]],["==",["get","poi_category"],null]]],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],maxzoom:12,minzoom:10,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"466036",name:"Коммерческие POI на масштабе города z12",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],15,16,17.8,24],textColor:"#3A3A3A",visibility:"visible",iconPriority:86,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:16,topBottom:16}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_city"],!0,!1],["match",["get","db_region"],[99],!1,!0],["all",["global","searchOn"],["any",["!=",["global","poiCategory"],["get","poi_category"]],["==",["get","poi_category"],null]]],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],minzoom:12,metadata:{group:{id:"567772"},filterInputMode:"json"}},{id:"528075",name:"Коммерческие POI UAE",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],15,16,17.8,24],textColor:"#3A3A3A",visibility:"visible",iconPriority:50,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:30,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:16,topBottom:16}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default"],!0,!1],["match",["get","db_region"],[99],!0,!1],["all",["global","searchOn"],["any",["!=",["global","poiCategory"],["get","poi_category"]],["==",["get","poi_category"],null]]],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]],minzoom:14.1,metadata:{group:{id:"567772"},filterInputMode:"json"}}]},{id:"627375",type:"group",layers:[{id:"636859",name:"Бытовая техника обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_laundry_services_i","poi_laundry_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_laundry_services"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["laundry_services"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"545501",name:"Фото обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_photo_services_i","poi_photo_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_photo_services"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["photo_services"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"934737",name:"Принтеры обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_printer_services_i","poi_printer_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_printer_services"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["printer_services"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"131775",name:"Компьютеры обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_computer_services_i","poi_computer_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_computer_services"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["computer_services"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"203126",name:"Мобильные телефоны обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cellphone_services_i","poi_cellphone_services"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_cellphone_services"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["cellphone_services"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"329273",name:"Бытовая техника продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_laundry_sale_i","poi_laundry_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_laundry_sale"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["laundry_sale"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"652844",name:"Фото продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_photo_sale_i","poi_photo_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_photo_sale"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["photo_sale"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"694804",name:"Принтеры продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_printer_sale_i","poi_printer_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_printer_sale"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["printer_sale"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"135034",name:"Компьютеры продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_computer_sale_i","poi_computer_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_computer_sale"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["computer_sale"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"823362",name:"Мобильные телефоны продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cellphone_sale_i","poi_cellphone_sale"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_cellphone_sale"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["cellphone_sale"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"677651",name:"Туалет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_toilet_i","poi_toilet"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_toilet"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["toilet"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"725471",name:"Ботанический сад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_arboretum"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["arboretum"],!0,!1]],minzoom:15,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"820073",name:"Магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_grocery_i","poi_grocery"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_shop"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["shop"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"496141",name:"Домашние животные",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_pets_i","poi_pets"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_pets"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["pets"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"743016",name:"Ритуальные услуги",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_funeral_i","poi_funeral"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_funeral"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["funeral"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"54987",name:"Крематории и кладбища",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_funeral_i","poi_funeral"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_crematory"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["funeral"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"51170",name:"Цветы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_flowers_i","poi_flowers"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_flowers"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["flowers"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"328216",name:"Растения",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_plants_i","poi_plants"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_garden"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["garden"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"840560",name:"Строительный магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_market"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["construction_market"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"350495",name:"Банк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bank_i","poi_bank"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_bank"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["bank"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"79947",name:"Банкомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_atm_i","poi_atm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Low_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_atm"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["atm"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"898490",name:"Паркомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_parking_meter_i","poi_parking_meter"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#1482BD",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_parking_meter"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["parking_meter"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"624307",name:"Благотворительные боксы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_charity_box_i","poi_charity_box"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_charity_box"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["charity_box"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"16166",name:"Магазин одежды",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_close_i","poi_close"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_clothes"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["clothes"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"92786",name:"Обувной магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_shoes_i","poi_shoes"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator","Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_shoe_store"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["shoe_store"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"258225",name:"Красота",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_beauty_i","poi_beauty"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_beauty"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["beauty"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"349287",name:"Кофейня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cafe_i","poi_cafe"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_coffee_shop"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["coffee_shop"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"764131",name:"Картинг",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_carting_i","poi_carting_firm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_karting"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["karting"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"176163",name:"Финтес-клуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_gym_i","poi_gym_firm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_gym"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["gym"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"345645",name:"Общепит",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_restaurant_i","poi_restaurant"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_food_service"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["food_service"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"486280",name:"Ресторан",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_restaurant_i","poi_restaurant"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_food_restaurant"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["food_restaurant"],!0,!1]],minzoom:15,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"273440",name:"Бар",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bar_i","poi_bar"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_bar"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["bar"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"981224",name:"Сауна",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_sauna_i","poi_sauna"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_sauna"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["sauna"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"680417",name:"SPA",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_spa_i","poi_spa"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_spa"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["spa"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"170635",name:"Часовня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_chapel"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["chapel"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"485233",name:"Авиаклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_airclub_i","poi_airclub"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_aviaclub"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["aviaclub"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"389864",name:"Документы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_documents_i","poi_documents"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_documents"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["documents"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"549876",name:"Автосервис",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_carservice_i","poi_carservice"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_service_station"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["service_station"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"677562",name:"Автомобили",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cars_i","poi_cars"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_cars"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["cars"],!0,!1]],minzoom:16,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"153511",name:"Супермаркеты",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_shop_i","poi_shop"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_mart"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["mart"],!0,!1]],minzoom:15.8,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"776159",name:"Рынки",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_market_i","poi_market"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:12},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_market"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["market"],!0,!1]],minzoom:15.8,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"908113",name:"Администрация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cityhall_i","poi_cityhall"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_government"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["government"],!0,!1]],minzoom:15.8,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"271307",name:"Аптека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pharmacy_i","poi_pharmacy"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,31],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_pharmacy"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["pharmacy"],!0,!1]],minzoom:15.8,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"414146",name:"Детский сад",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_kindergarten_i","poi_kindergarten"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#1482bd",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_kindergarten"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["kindergarten"],!0,!1]],minzoom:15.8,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"787213",name:"Билетная касса",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_lift_tickets_i","poi_lift_tickets"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_ticket"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["ticket"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"244472",name:"Теннисный клуб",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_tennis_i","poi_tennis"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_tennis"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["tennis"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"969718",name:"Бассейн",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pool_i","poi_pool"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_pool"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["pool"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"314701",name:"Каток",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_icerink_i","poi_icerink"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_ice_skating"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["ice_skating"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"701491",name:"Почта",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_post_i","poi_post"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_post"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["post"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"219131",name:"Образование",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_school_i","poi_school"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_education"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["education"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"107572",name:"НИИ",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_science_i","poi_science"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_science"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["science"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"757957",name:"Библиотека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_library_i","poi_library"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_library"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["library"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"678451",name:"Церковь",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_church"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["church"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"111737",name:"Синагога",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_judaism_i","poi_judaism"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_synagogue"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["synagogue"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"412446",name:"Дацан",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buddhism_i","poi_buddhism"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_datsan"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["datsan"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"518718",name:"Мечеть",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_islamic_i","poi_islamic"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_mosque"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["mosque"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"551614",name:"Медицинское учреждение",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ba4836",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_health"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["health"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"594765",name:"Больницы и госпитали",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ba4836",textOffset:0,visibility:"visible",iconPriority:26,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_hospital"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["health"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"143756",name:"Полиция",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_police_i","poi_police_firm"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(8, 55%, 47%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_police"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["police"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"45049",name:"Санаторий",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_sanatorium_i","poi_sanatorium"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_rest"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["rest"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"731920",name:"Гостиница",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hotel_i","poi_hotel"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_hotel"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["hotel"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"226607",name:"Базы отдыха",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_sanatorium_i","poi_sanatorium"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_hotel_rest"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["hotel_rest"],!0,!1]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"324109",name:"Театр",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_theater_i","poi_theater"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_theater"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["theater"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"463780",name:"Музей",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_museum_i","poi_museum"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_museum"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["museum"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"871853",name:"Лучшие достопримечательности",type:"point",style:{textFont:["step",["zoom"],"",14,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_attraction_i","poi_attraction"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ca6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_attraction"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["attraction"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"845071",name:"Кинотеатр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cinema_i","poi_cinema"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_cinema"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["cinema"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"607630",name:"Гольфклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_golf_i","poi_golf"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_golf"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["golf"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"635775",name:"Ипподром",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hippodrome_i","poi_hippodrome"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_racecourse"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["racecourse"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"940059",name:"Стадион",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_stadium_i","poi_stadium"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_stadium"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["stadium"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"102541",name:"Горнолыжка",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_skiing_resort_i","poi_skiing_resort"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_skiing"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["skiing"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"954566",name:"ТРЦ",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_mall_i","poi_mall"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4c8a0a",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator","Poi_mall_floor_plan"],!0,!1],["match",["get","objectClass"],["poi_mall","poi_mall_floor"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["mall_floor","mall"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"403157",name:"Строительный гипермаркет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4c8a0a",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_hypermarket"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["construction_hypermarket"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"296546",name:"Зоопарк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_zoo_i","poi_zoo"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_zoo"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["zoo"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"129064",name:"Цирк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_circus_i","poi_circus"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_circus"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["circus"],!0,!1]],minzoom:14,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"776543",name:"Заправочная снация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_gas_station_i","poi_gas_station"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:35,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_gas_station"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["gas_station"],!0,!1]],minzoom:14.5,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"426131",name:"Зарядная станция",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_electro_station_i","poi_electro_station"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","objectClass"],["poi_electro_station"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["electro_station"],!0,!1]],minzoom:14.5,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"513759",name:"Бизнес-центр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buisness_center_i","poi_buisness_center"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:30,topBottom:30},textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["High_zoom_poi"],!0,!1],["match",["get","objectClass"],["poi_business_center"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["business_center"],!0,!1]],minzoom:14.5,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"980848",name:"Новостройки",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_new_building_i","poi_new_building"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:0,topBottom:0},textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_new_building"],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["match",["global","poiCategory"],["new_building"],!0,!1]],minzoom:15,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"4030",name:"Коммерческие POI",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:30,textColor:"#3A3A3A",visibility:"visible",iconPriority:51,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:31,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default"],!0,!1],["match",["get","db_region"],[99],!1,!0],["match",["global","searchOn"],[!0],!0,!1],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]],["==",["global","poiCategory"],["get","poi_category"]],["!=",["get","poi_category"],null]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"884200",name:"Коммерческие POI на масштабе города",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:30,textColor:"#3A3A3A",visibility:"visible",iconPriority:51,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:31,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_city"],!0,!1],["match",["get","db_region"],[99],!1,!0],["match",["global","searchOn"],[!0],!0,!1],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]],["==",["global","poiCategory"],["get","poi_category"]],["!=",["get","poi_category"],null]],minzoom:15.1,metadata:{group:{id:"627375"},filterInputMode:"json"}},{id:"508473",name:"Коммерческие POI UAE",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"",16,"Noto_Sans"]],iconImage:"peak",iconWidth:30,textColor:"#3A3A3A",visibility:"visible",iconPriority:51,textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,20,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textPriority:31,textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default"],!0,!1],["match",["get","db_region"],[99],!0,!1],["match",["global","searchOn"],[!0],!0,!1],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]],["==",["global","poiCategory"],["get","poi_category"]],["!=",["get","poi_category"],null]],minzoom:14.1,metadata:{group:{id:"627375"},filterInputMode:"json"}}]},{id:"392425",type:"group",layers:[{id:"378593",name:"Красные иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_red_i","poi_red_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_yellow"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"786498",name:"Оранжевые иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_orange_i","poi_orange_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_orange"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"730653",name:"Жёлтые иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_yellow_i","poi_yellow_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_yellow"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"936061",name:"Зелёные иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_green_i","poi_green_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4C8A0A",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_green"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"911474",name:"Синие иконки",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_blue_i","poi_blue_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:18,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:17,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["L1_Poi_category"],!0,!1],["match",["get","objectClass"],["poi_blue"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"45523",name:"Бытовая техника обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_laundry_services_i","poi_laundry_services_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_laundry_services"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"612195",name:"Фото обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_photo_services_i","poi_photo_services_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_photo_services"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"578476",name:"Принтеры обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_printer_services_i","poi_printer_services_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_printer_services"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"49032",name:"Компьютеры обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_computer_services_i","poi_computer_services_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_computer_services"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"594033",name:"Мобильные телефоны обслуживание",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cellphone_services_i","poi_cellphone_services_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","sublayer"],["New_categories_poi"],!0,!1],["match",["get","objectClass"],["poi_cellphone_services"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"980080",name:"Бытовая техника продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_laundry_sale_i","poi_laundry_sale_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_laundry_sale"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"351911",name:"Фото продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_photo_sale_i","poi_photo_sale_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_photo_sale"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"605062",name:"Принтеры продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_printer_sale_i","poi_printer_sale_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_printer_sale"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"569075",name:"Компьютеры продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_computer_sale_i","poi_computer_sale_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_computer_sale"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"159246",name:"Мобильные телефоны продажа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cellphone_sale_i","poi_cellphone_sale_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_cellphone_sale"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"942684",name:"Туалет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_toilet_i","poi_toilet_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_toilet"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"589027",name:"Ритуальные услуги",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_funeral_i","poi_funeral_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_funeral"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"225270",name:"Крематории и кладбища",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_funeral_i","poi_funeral_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_crematory"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"479045",name:"Сауна",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_sauna_i","poi_sauna_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_sauna"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"170904",name:"SPA",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_spa_i","poi_spa_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_spa"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"381047",name:"Документы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_documents_i","poi_documents_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_documents"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"726526",name:"НИИ",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_science_i","poi_science_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_science"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"715508",name:"Горнолыжка",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_skiing_resort_i","poi_skiing_resort_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_skiing"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"473732",name:"Ботанический сад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_park_i","poi_park_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4C8A0A",visibility:"visible",iconPriority:45,textFontSize:["interpolate",["linear"],["zoom"],15,10,18,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.8)",textHaloWidth:.8,iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_arboretum"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"207969",name:"Магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_grocery_i","poi_grocery_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_shop"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"89262",name:"Домашние животные",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_pets_i","poi_pets_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_pets"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"189437",name:"Цветы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_flowers_i","poi_flowers_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_flowers"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"361878",name:"Растения",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_plants_i","poi_plants_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_garden"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"627",name:"Строительный магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_market"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"924953",name:"Банк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bank_i","poi_bank_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_bank"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"611412",name:"Банкомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_atm_i","poi_atm_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_atm"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"347902",name:"Паркомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_parking_meter_i","poi_parking_meter_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#1482BD",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_parking_meter"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"176233",name:"Благотворительные боксы",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_charity_box_i","poi_charity_box_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#BA4836",textOffset:0,visibility:"visible",iconOpacity:1,iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_charity_box"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"990471",name:"Магазин одежды",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_close_i","poi_close_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_clothes"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"508590",name:"Обувной магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_shoes_i","poi_shoes_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_shoe_store"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"607903",name:"Красота",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_beauty_i","poi_beauty_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_beauty"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"786192",name:"Кофейня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cafe_i","poi_cafe_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_coffee_shop"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"438887",name:"Картинг",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_carting_i","poi_carting_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_karting"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"922858",name:"Финтес-клуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_gym_i","poi_gym_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_gym"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"329162",name:"Общепит",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_restaurant_i","poi_restaurant_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_food_service"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"11939",name:"Ресторан",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_restaurant_i","poi_restaurant_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_food_restaurant"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"872546",name:"Бар",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_bar_i","poi_bar_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(30, 98%, 40%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_bar"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"854007",name:"Часовня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_chapel"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"3555",name:"Авиаклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_airclub_i","poi_airclub_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_aviaclub"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"41909",name:"Автосервис",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_carservice_i","poi_carservice_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Low_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_service_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"330239",name:"Автомобили",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_cars_i","poi_cars_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_cars"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:16,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"305869",name:"Супермаркеты",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_shop_i","poi_shop_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_mart"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"551248",name:"Рынки",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_market_i","poi_market_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:12},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_market"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"950562",name:"Администрация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cityhall_i","poi_cityhall_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_government"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"151081",name:"Аптека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pharmacy_i","poi_pharmacy_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,31],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_pharmacy"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"76923",name:"Детский сад",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_kindergarten_i","poi_kindergarten_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#1482bd",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_kindergarten"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.8,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"255780",name:"Билетная касса",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_lift_tickets_i","poi_lift_tickets_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:25,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_ticket"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"450587",name:"Теннисный клуб",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_tennis_i","poi_tennis_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_tennis"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"322256",name:"Бассейн",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_pool_i","poi_pool_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_pool"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"720453",name:"Каток",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_icerink_i","poi_icerink_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_ice_skating"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"6465",name:"Почта",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_post_i","poi_post_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_post"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"610006",name:"Образование",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_school_i","poi_school_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_education"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"854116",name:"Библиотека",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_library_i","poi_library_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_library"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"271651",name:"Церковь",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_catholic_i","poi_catholic_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_church"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"370875",name:"Синагога",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_judaism_i","poi_judaism_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_synagogue"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"436902",name:"Дацан",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buddhism_i","poi_buddhism_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_datsan"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"121127",name:"Мечеть",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_islamic_i","poi_islamic_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(201, 81%, 41%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_mosque"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"73972",name:"Медицинское учреждение",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ba4836",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_health"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"715955",name:"Больницы и госпитали",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hospital_i","poi_hospital_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ba4836",textOffset:0,visibility:"visible",iconPriority:26,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_hospital"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"906293",name:"Полиция",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_police_firm_i","poi_police_firm_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(8, 55%, 47%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_police"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"970557",name:"Санаторий",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_sanatorium_i","poi_sanatorium_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_rest"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"822717",name:"Гостиница",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hotel_i","poi_hotel_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Medium_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_hotel"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"258815",name:"Базы отдыха",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_sanatorium_i","poi_sanatorium_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_hotel_rest"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15.1,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"878770",name:"Театр",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_theater_i","poi_theater_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_theater"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"502418",name:"Музей",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_museum_i","poi_museum_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_museum"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"890136",name:"Лучшие достопримечательности",type:"point",style:{textFont:["step",["zoom"],"",14,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_attraction_i","poi_attraction_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#ca6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:20,topBottom:20},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_attraction"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"547811",name:"Кинотеатр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_cinema_i","poi_cinema_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_cinema"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"456679",name:"Гольфклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_golf_i","poi_golf_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_golf"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"686536",name:"Ипподром",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_hippodrome_i","poi_hippodrome_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_racecourse"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"601970",name:"Стадион",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_stadium_i","poi_stadium_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#DE9400",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_stadium"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"97879",name:"ТРЦ",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_mall_i","poi_mall_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4c8a0a",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator","Poi_mall_floor_plan"],!0,!1],["match",["get","db_object_class"],["poi_mall","poi_mall_floor"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"591754",name:"Строительный гипермаркет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_construction_i","poi_construction_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#4c8a0a",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_construction_hypermarket"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"939405",name:"Зоопарк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_zoo_i","poi_zoo_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_zoo"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"300398",name:"Цирк",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"poi_circus_i","poi_circus_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"#CA6602",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_circus"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"55889",name:"Заправочная снация",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_gas_station_i","poi_gas_station_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:35,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_gas_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14.5,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"183075",name:"Зарядная станция",type:"point",style:{textFont:["step",["zoom"],"",16,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_electro_station_i","poi_electro_station_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi_navigator"],!0,!1],["match",["get","db_object_class"],["poi_electro_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14.5,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"966316",name:"Бизнес-центр",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_buisness_center_i","poi_buisness_center_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:30,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:30,topBottom:30},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["High_zoom_poi"],!0,!1],["match",["get","db_object_class"],["poi_business_center"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:14.5,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"546045",name:"Новостройки",type:"point",style:{textFont:["step",["zoom"],"",15,"Noto_Sans_Semibold"],iconImage:["match",["get","selected"],[!0],"poi_new_building_i","poi_new_building_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,18,24]],textColor:"hsl(89, 86%, 29%)",textOffset:0,visibility:"visible",iconPriority:20,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:19,textHaloColor:"#FFFFFF",textHaloWidth:.85,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:0,topBottom:0},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["New_categories_poi"],!0,!1],["match",["get","db_object_class"],["poi_new_building"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"84859",name:"Аэропорт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_airport_i","poi_airport_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:115,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_poi"],!0,!1],["match",["get","db_object_class"],["poi_airport"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"25844",name:"Ж/Д вокзал",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_railwaystation_i","poi_railwaystation_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,20,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_poi"],!0,!1],["match",["get","db_object_class"],["poi_railway_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"328803",name:"Автовокзал",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_busstation_i","poi_busstation_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,20,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_poi"],!0,!1],["match",["get","db_object_class"],["poi_bus_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}},{id:"278037",name:"Порт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_port_i","poi_port_i"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,22,16,26,18,30],["interpolate",["linear"],["zoom"],14,18,16,20,17.5,22,18,24]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],15,11,16,12],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textMaxLengthPerLine:20},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_poi"],!0,!1],["match",["get","db_object_class"],["poi_river_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:15,metadata:{group:{id:"392425"},filterInputMode:"json"}}]},{id:"261953",type:"group",layers:[{id:"664502",name:"Молл",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_mall_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.9},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_mall"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"400824",name:"По умолчанию",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_personal",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_default"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"712213",name:"Супермаркет",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_shop_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_mart"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"109931",name:"Бизнес-центр",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_buisness_center_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_business_center"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"953239",name:"Гостиница",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_hotel_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_hotel"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"117298",name:"Санаторий",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_sanatorium_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_rest"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"903288",name:"Заправочная станция",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_gas_station_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_gas_station"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"538611",name:"Магазин",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_grocery_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_shop"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"742043",name:"Одежда",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_close_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_clothes"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"980637",name:"Обувь",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_shoes_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_shoe_store"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"601158",name:"Аптека",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_pharmacy_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_pharmacy"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"172999",name:"Красота",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_beauty_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_beauty"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"633806",name:"Банкомат",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_bank_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_atm"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"666383",name:"Станция зарядки автомобиля",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_electro_station_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#4C8A0A",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_electro_station"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"189619",name:"Театр",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_theater_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_theater"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"168075",name:"Кинотеатр",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_cinema_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_cinema"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"110624",name:"Музей",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_museum_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_museum"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"391196",name:"Стадион",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_stadium_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_stadium"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"578",name:"Каток",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_icerink_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_ice_skating"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"22965",name:"Бассейн",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_pool_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_pool"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"550119",name:"Ипподром",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_hippodrome_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_racecourse"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"179097",name:"Картинг",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_carting_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_karting"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"753965",name:"Гольфклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_golf_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_golf"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"440260",name:"Теннисный клуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_tennis_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_tennis"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"145311",name:"Тренажерный зал",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_gym_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_gym"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"978605",name:"Билетная касса",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_lift_tickets_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_ticket"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"671364",name:"Общепит",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_restaurant_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_food_service"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"434244",name:"Кофейня",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_cafe_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_coffee_shop"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"993141",name:"Бар",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_bar_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CA6602",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_bar"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"276950",name:"Мечеть",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_islamic_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_mosque"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"187713",name:"Дацан",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_buddhism_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_datsan"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"34618",name:"Синагога",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_judaism_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_synagogue"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"415304",name:"Церковь",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_catholic_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_church","personal_poi_chapel"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"735834",name:"Правительство",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_cityhall_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_government"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"622998",name:"Библиотека",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_library_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_library"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"677586",name:"Образование",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_school_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_education"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"607125",name:"Авиаклуб",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_airclub_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_aviaclub"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"332443",name:"Сервисная станция",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_carservice_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_service_station"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"578822",name:"Почта",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_post_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_post"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"70904",name:"Детский сад",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_kindergarten_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#1482BD",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_kindergarten"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"123390",name:"Полиция",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_police_firm_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#BA4836",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_police"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"317548",name:"Медицина",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:"poi_hospital_i",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#BA4836",iconPriority:80,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_health"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"401236",name:"Дом",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"home_hover","home"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CC4D04",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_home"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}},{id:"891091",name:"Работа",type:"point",style:{textFont:"Noto_Sans_Semibold",iconImage:["match",["get","selected"],[!0],"job_hover","job"],iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],14,26,16,30,18,34],["interpolate",["linear"],["zoom"],14,20,16,24,18,28]],textColor:"#CC4D04",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],14.5,10,17,12],textPriority:20,textHaloColor:"rgba(255,255,255,0.9)",textHaloWidth:.8},filter:["all",["match",["get","sublayer"],["s_personal_poi"],!0,!1],["match",["get","objectClass"],["personal_poi_work"],!0,!1]],minzoom:10,metadata:{group:{id:"261953"},filterInputMode:"json"}}]},{id:"673396",type:"group",layers:[{id:"39747",name:"Подписи улиц частного сектора копия",type:"labelLine",style:{textFont:"Noto_Sans",textColor:"#514C47",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],12,10,19,12],textPriority:30,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:70,textDuplicationSpacing:["interpolate",["linear"],["zoom"],15,500,17,1e3]},filter:["match",["get","db_sublayer"],["Small_street_caption"],!0,!1],metadata:{group:{id:"673396"}}},{id:"422868",name:"Подписи основных улиц",type:"labelLine",style:{textFont:"Noto_Sans",textColor:"#3F3F3F",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],10,9,12,10,19,14],textPriority:31,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:30,textDuplicationSpacing:["interpolate",["linear"],["zoom"],13,150,18,500],textLabelingSideMargin:10},filter:["match",["get","db_sublayer"],["Main_street_caption"],!0,!1],metadata:{group:{id:"673396"}}},{id:"296600",name:"Подписи магистральных улиц",type:"labelLine",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],9,"#323230",13,"#383838",15,"#383838"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],10,9,12,10,19,15],textPriority:40,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:30,textLetterSpacing:0,textDuplicationSpacing:["interpolate",["linear"],["zoom"],13,150,18,500],textLabelingSideMargin:0},filter:["match",["get","db_sublayer"],["Magistral_street_caption"],!0,!1],minzoom:12,metadata:{group:{id:"673396"}}},{id:"558155",name:"Подписи междугородних улиц",type:"labelLine",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],9,"#2C1803",13,"#323230",15,"#383838"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],10,9,12,10,19,15],textPriority:50,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:10,textLetterSpacing:0,textDuplicationSpacing:["interpolate",["linear"],["zoom"],13,150,18,500],textLabelingSideMargin:10},filter:["match",["get","db_sublayer"],["Intercity_street_caption"],!0,!1],minzoom:11,metadata:{group:{id:"673396"}}},{id:"342227",name:"Подписи федеральных трасс",type:"labelLine",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],9,"#2C1803",13,"#323230",15,"#383838"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],10,9,12,10,19,17],textPriority:81,textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,lineEndingOffsets:5,textLetterSpacing:0,textDuplicationSpacing:["interpolate",["linear"],["zoom"],10,150,18,500],textLabelingSideMargin:5},filter:["match",["get","db_sublayer"],["Federal_street_caption"],!0,!1],metadata:{group:{id:"673396"}}}]},{id:"805874",type:"group",layers:[{id:"606392",name:"Аэропорт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_airport_i","poi_airport"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:115,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Transport_sight"],!0,!1],["match",["get","objectClass"],["airport"],!0,!1]],metadata:{group:{id:"805874"}}},{id:"321557",name:"Порт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_port_i","poi_port"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:30,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,18,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Transport_sight"],!0,!1],["match",["get","objectClass"],["sea_port"],!0,!1]],minzoom:10.5,metadata:{group:{id:"805874"}}},{id:"506563",name:"Автовокзал",type:"point",style:{textFont:["step",["zoom"],"",11,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_busstation_i","poi_busstation"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:86,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Transport_sight"],!0,!1],["match",["get","objectClass"],["bus_station"],!0,!1]],minzoom:10.5,metadata:{group:{id:"805874"}}},{id:"835102",name:"Автостанция",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_busstation_i","poi_busstation"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:30,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Transport_sight"],!0,!1],["match",["get","objectClass"],["autostation"],!0,!1]],minzoom:13,metadata:{group:{id:"805874"}}},{id:"32388",name:"Ж/Д вокзал",type:"point",style:{textFont:["step",["zoom"],"",11,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_railwaystation_i","poi_railwaystation"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:12},filter:["all",["match",["get","sublayer"],["Transport_sight"],!0,!1],["match",["get","objectClass"],["railway_station"],!0,!1]],metadata:{group:{id:"805874"}}}]},{id:"386558",type:"group",layers:[{id:"73754",name:"Аэропорт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_airport_i","poi_airport_i"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:115,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_sight"],!0,!1],["match",["get","db_object_class"],["airport"],!0,!1],["match",["get","selected"],[!0],!1,!0]],metadata:{group:{id:"386558"},filterInputMode:"json"}},{id:"275347",name:"Порт",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_port_i","poi_port_i"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:30,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,18,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_sight"],!0,!1],["match",["get","db_object_class"],["sea_port"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:10.5,metadata:{group:{id:"386558"},filterInputMode:"json"}},{id:"271206",name:"Автовокзал",type:"point",style:{textFont:["step",["zoom"],"",11,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_busstation_i","poi_busstation_i"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:30,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_sight"],!0,!1],["match",["get","db_object_class"],["bus_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:10.5,metadata:{group:{id:"386558"},filterInputMode:"json"}},{id:"358627",name:"Автостанция",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"poi_busstation_i","poi_busstation_i"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:30,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:16},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_sight"],!0,!1],["match",["get","db_object_class"],["autostation"],!0,!1],["match",["get","selected"],[!0],!1,!0]],minzoom:13,metadata:{group:{id:"386558"},filterInputMode:"json"}},{id:"828106",name:"Ж/Д вокзал",type:"point",style:{textFont:["step",["zoom"],"",11,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"poi_railwaystation_i","poi_railwaystation_i"],iconWidth:["match",["get","selected"],[!0],22,18],textColor:"#174A67",visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,11,16,12]],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textMaxLengthPerLine:12},filter:["all",["match",["get","hovered"],[!0],!0,!1],["match",["get","db_sublayer"],["Transport_sight"],!0,!1],["match",["get","db_object_class"],["railway_station"],!0,!1],["match",["get","selected"],[!0],!1,!0]],metadata:{group:{id:"386558"},filterInputMode:"json"}}]},{id:"403292",type:"group",layers:[{id:"288275",name:"Цена известна",type:"point",style:{textFont:["step",["zoom"],"",16.5,"Noto_Sans"],iconImage:"poi_parking_price",iconWidth:["interpolate",["linear"],["zoom"],15,18,16,19,17,20,18,21],textColor:"#313130",visibility:"visible",iconPriority:30,iconTextFont:"Noto_Sans_Semibold",textFontSize:11,iconTextColor:"#FFFFFF",iconTextField:["get","db_label2"],textHaloColor:"rgba(255,255,255,0.7)",textHaloWidth:1,iconTextPadding:[3,5,3,5],iconTextFontSize:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,14,16,15,17,16,18,17],["interpolate",["linear"],["zoom"],15,11,16,12,17,13,18,14]],iconLabelingMargin:{leftRight:15,topBottom:15},textMaxLengthPerLine:16},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["paid"],!0,!1],["match",["get","db_parking_rank"],[1,2,3,4,5,6,7,8,9,10],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"904992",name:"Цена не известна",type:"point",style:{iconImage:"poi_parking_layer_paid",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,25,17,26,18,27],["interpolate",["linear"],["zoom"],15,18,16,19,17,20,18,21]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:15,topBottom:15}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["paid"],!0,!1],["match",["get","db_parking_rank"],[1,2,3,4,5,6,7,8,9,10],!1,!0]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"745800",name:"Для резидентов",type:"point",style:{iconImage:"poi_parking_layer_res",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,25,17,26,18,27],["interpolate",["linear"],["zoom"],15,18,16,19,17,20,18,21]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:15,topBottom:15}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["resident"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"86263",name:"Для инвалидов",type:"point",style:{iconImage:"poi_parking_layer_dis",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,25,17,26,18,27],["interpolate",["linear"],["zoom"],15,18,16,19,17,20,18,21]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:15,topBottom:15}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["invalid"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"514614",name:"Для такси",type:"point",style:{iconImage:"poi_parking_layer_taxi",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,25,17,26,18,27],["interpolate",["linear"],["zoom"],15,18,16,19,17,20,18,21]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:15,topBottom:15}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["taxi"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"847324",name:"Бесплатные",type:"point",style:{iconImage:"poi_parking_layer_free",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,25,17,26,18,27],["interpolate",["linear"],["zoom"],15,18,16,19,17,20,18,21]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:20,topBottom:20}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["unknown","free","client"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"615030",name:"Стоянка запрещена",type:"point",style:{iconImage:"poi_noparking",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,26,17,28,18,30],["interpolate",["linear"],["zoom"],15,18,16,20,17,22,18,24]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:10,topBottom:10}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["forbidden"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"503120",name:"Остановка запрещена",type:"point",style:{iconImage:"poi_noparking_stop",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,26,17,28,18,30],["interpolate",["linear"],["zoom"],15,18,16,20,17,22,18,24]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:10,topBottom:10}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["forbidden_stop"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"856202",name:"Стоянка запрещена по четным дням",type:"point",style:{iconImage:"poi_noparking_even",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,26,17,28,18,30],["interpolate",["linear"],["zoom"],15,18,16,20,17,22,18,24]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:10,topBottom:10}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["forbidden_even"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}},{id:"308548",name:"Стоянка запрещена по нечетным дням",type:"point",style:{iconImage:"poi_noparking_odd",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],15,24,16,26,17,28,18,30],["interpolate",["linear"],["zoom"],15,18,16,20,17,22,18,24]],visibility:"visible",iconPriority:30,textFontSize:10,iconTextColor:"#FFFFFF",iconTextPadding:[0,0,0,0],iconLabelingMargin:{leftRight:10,topBottom:10}},filter:["all",["match",["global","parkingOn"],[!0],!0,!1],["match",["get","sublayer"],["Parking_bubble"],!0,!1],["match",["get","db_parking_type"],["forbidden_odd"],!0,!1]],minzoom:15,metadata:{group:{id:"403292"},filterInputMode:"json"}}]},{id:"872376",type:"group",layers:[{id:"98366",name:"Километровые столбы",type:"point",style:{iconImage:"km_pillar",iconWidth:16,iconTextFont:"Noto_Sans_Semibold",endingOffsets:0,iconTextColor:"#FFFFFF",iconTextField:["get","db_label"],iconTextPadding:[2,5,2,5],iconTextFontSize:9,duplicationSpacing:1},filter:["all",["match",["get","db_sublayer"],["KM_pillar"],!0,!1],["match",["get","db_region"],[220],!0,!1]],minzoom:13,metadata:{group:{id:"872376"},filterInputMode:"json"}},{id:"981227",name:"Номера федеральных трасс",type:"point",style:{iconImage:"highway_number_uae_federal",iconWidth:16,iconPriority:30,iconTextFont:"Noto_Sans_Semibold",endingOffsets:100,iconTextColor:"#FFFFFF",iconTextField:["get","db_label"],iconTextPadding:[3,6,3,6],iconTextFontSize:["interpolate",["linear"],["zoom"],10,9,20,11],duplicationSpacing:2e3},filter:["all",["match",["get","db_sublayer"],["Highway_number_federal"],!0,!1],["match",["get","db_region"],[220],!0,!1]],minzoom:9,metadata:{group:{id:"872376"},filterInputMode:"json"}},{id:"328360",name:"Номера муниципальных трасс",type:"point",style:{iconImage:"highway_number_uae_magistral",iconWidth:16,iconTextFont:"Noto_Sans_Semibold",endingOffsets:200,iconTextColor:"#2A5693",iconTextField:["get","db_label"],iconTextPadding:[3,6,3,6],iconTextFontSize:["interpolate",["linear"],["zoom"],10,9,20,11],duplicationSpacing:2e3},filter:["all",["match",["get","db_sublayer"],["Highway_number_municipal"],!0,!1],["match",["get","db_region"],[220],!0,!1]],minzoom:9,metadata:{group:{id:"872376"},filterInputMode:"json"}},{id:"659073",name:"Номера прочих трасс",type:"point",style:{iconImage:"highway_number",iconWidth:16,iconTextFont:"Noto_Sans_Semibold",endingOffsets:200,iconTextColor:"#383838",iconTextField:["get","db_label"],iconTextPadding:[3,6,3,6],iconTextFontSize:["interpolate",["linear"],["zoom"],10,9,20,11],duplicationSpacing:2e3},filter:["all",["match",["get","db_sublayer"],["Highway_number_local","Highway_number_private","Highway_number_regional"],!0,!1],["match",["get","db_region"],[220],!0,!1]],minzoom:11,metadata:{group:{id:"872376"},filterInputMode:"json"}}]},{id:"758882",type:"group",layers:[{id:"railstation gen",name:"Ж/Д станции точка",type:"point",style:{textFont:["step",["zoom"],"",13,"Noto_Sans"],iconImage:"poi_station_dot",iconWidth:["interpolate",["linear"],["zoom"],11,7,12,8],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:16},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_railroad"],!0,!1]],maxzoom:14.5,minzoom:11,metadata:{group:{id:"758882"}}},{id:"transport gen",name:"Остановки точка",type:"point",style:{iconImage:"poi_bus_station_dot",iconWidth:6,textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:30,textFontSize:11,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter"},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_bus","transport_water","transport_metrotram","transport_mono","transport_speedtram","transport_tram","transport_funicular"],!0,!1]],maxzoom:15.5,minzoom:14.7,metadata:{group:{id:"758882"}}},{id:"railstation",name:"Ж/Д станция",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"electrichka_i_72","electrichka"],iconWidth:["interpolate",["linear"],["zoom"],17.4,14,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:94,textFontSize:11,textPriority:80,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter"},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_railroad"],!0,!1]],minzoom:14.5,metadata:{group:{id:"758882"}}},{id:"bus",name:"Автобус",type:"point",style:{textFont:["step",["zoom"],"",17.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"avtobus_i_72","avtobus"],iconWidth:["interpolate",["linear"],["zoom"],17.4,12,17.5,16],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_bus"],!0,!1]],minzoom:15.5,metadata:{group:{id:"758882"}}},{id:"water",name:"Водный транспорт",type:"point",style:{textFont:["step",["zoom"],"",17.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"sea_i_72","sea"],iconWidth:["interpolate",["linear"],["zoom"],17.4,14,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter"},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_water"],!0,!1]],minzoom:15.5,metadata:{group:{id:"758882"}}},{id:"tramway",name:"Трамвай",type:"point",style:{textFont:["step",["zoom"],"",17.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"tramvay_i_72","tramvay"],iconWidth:["interpolate",["linear"],["zoom"],17.4,12,17.5,16],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metrotram","transport_speedtram","transport_tram"],!0,!1]],minzoom:15.5,metadata:{group:{id:"758882"}}},{id:"mono",name:"Монорельс",type:"point",style:{textFont:["step",["zoom"],"",17.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"monorels_i_72","monorels"],iconWidth:["interpolate",["linear"],["zoom"],17.4,14,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_mono"],!0,!1],["match",["get","db_region"],[196,32],!1,!0]],minzoom:15.5,metadata:{group:{id:"758882"},filterInputMode:"json"}},{id:"funroad",name:"Фуникулёр",type:"point",style:{textFont:["step",["zoom"],"",17.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"funroad_i_72","funroad"],iconWidth:["interpolate",["linear"],["zoom"],17.4,14,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_funicular"],!0,!1]],minzoom:15.5,metadata:{group:{id:"758882"}}},{id:"647747",name:"Канатная дорога",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"kanat_i_72","kanat"],iconWidth:["interpolate",["linear"],["zoom"],14.5,12,16,16,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_gondola"],!0,!1]],minzoom:13.5,metadata:{group:{id:"758882"}}},{id:"924188",name:"Кресельный подъемник",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"chairlift_i_72","chairlift"],iconWidth:["interpolate",["linear"],["zoom"],14.5,12,16,16,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:20,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_chairlift"],!0,!1]],minzoom:13.5,metadata:{group:{id:"758882"}}},{id:"193645",name:"Бугельный подъемник",type:"point",style:{textFont:["step",["zoom"],"",14.5,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"bugel_i_72","bugel"],iconWidth:["interpolate",["linear"],["zoom"],14.5,12,16,16,17.5,18],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:40,textFontSize:11,textPriority:2,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textLetterSpacing:0,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_bugel"],!0,!1]],minzoom:13.5,metadata:{group:{id:"758882"}}}]},{id:"711817",type:"group",layers:[{id:"metro mm",name:"Метро генерализация",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_mm"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,11],textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_turquoise","transport_metro_cyan","transport_metro_yellow","transport_metro_green","transport_metro_brown","transport_metro_red","transport_metro_orange","transport_metro_lime","transport_metro_grey","transport_metro_blue","transport_metro_grass","transport_metro_purple","transport_metro_steel"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:13.5,minzoom:12,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro turquoise",name:"Бирюзовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_turquoise"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_turquoise"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro cyan",name:"Голубая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_cyan"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_cyan"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro yellow",name:"Жёлтая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_yellow"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_yellow"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro green",name:"Зелёная",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_green"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro brown",name:"Коричневая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_brown"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_brown"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro red",name:"Красная",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red",iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro orange",name:"Оранжевая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_orange"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_orange"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro lime",name:"Салатовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_lime"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_lime"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro grey",name:"Серая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_grey"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_grey"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro blue",name:"Синяя",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_blue"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_blue"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro grass",name:"Тёмно-зелёная",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_green"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_grass"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro steel",name:"Серо-голубая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_steel"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_steel"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}},{id:"metro purple",name:"Фиолетовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_purple"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_purple"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"711817"},filterInputMode:"json"}}]},{id:"272603",type:"group",layers:[{id:"621269",name:"Метро генерализация UAE",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_uae","metro_mm_uae"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,11],textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green","transport_metro_red"],!0,!1],["match",["get","db_region"],[99],!0,!1]],maxzoom:13.5,minzoom:12,metadata:{group:{id:"272603"},filterInputMode:"json"}},{id:"868052",name:"Зелёная UAE",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_uae","metro_green_uae"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green"],!0,!1],["match",["get","db_region"],[99],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"272603"},filterInputMode:"json"}},{id:"612188",name:"Красная UAE",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_uae",iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[99],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"272603"},filterInputMode:"json"}}]},{id:"682782",type:"group",layers:[{id:"47738",name:"Метро генерализация СПб",type:"point",style:{textFont:["step",["zoom"],"",13,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_mm_spb"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,11],textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green","transport_metro_red","transport_metro_orange","transport_metro_blue","transport_metro_purple"],!0,!1],["match",["get","db_region"],[38],!0,!1]],maxzoom:13.5,minzoom:12,metadata:{group:{id:"682782"},filterInputMode:"json"}},{id:"499180",name:"Зелёная СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_green_spb"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green"],!0,!1],["match",["get","db_region"],[38],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"682782"},filterInputMode:"json"}},{id:"55549",name:"Красная СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_spb",iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[38],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"682782"},filterInputMode:"json"}},{id:"350912",name:"Оранжевая СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_orange_spb"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_orange"],!0,!1],["match",["get","db_region"],[38],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"682782"},filterInputMode:"json"}},{id:"203099",name:"Синяя СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_blue_spb"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_blue"],!0,!1],["match",["get","db_region"],[38],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"682782"},filterInputMode:"json"}},{id:"745868",name:"Фиолетовая СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_purple_spb"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_purple"],!0,!1],["match",["get","db_region"],[38],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"682782"},filterInputMode:"json"}}]},{id:"740815",type:"group",layers:[{id:"769095",name:"Метро генерализация Прага",type:"point",style:{textFont:["step",["zoom"],"",13,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"metro_red_praha","metro_mm_praha"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,11],textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_yellow","transport_metro_green","transport_metro_red"],!0,!1],["match",["get","db_region"],[92],!0,!1]],maxzoom:13.5,minzoom:12,metadata:{group:{id:"740815"},filterInputMode:"json"}},{id:"147579",name:"Жёлтая Прага",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_praha","metro_yellow_praha"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_yellow"],!0,!1],["match",["get","db_region"],[92],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"740815"},filterInputMode:"json"}},{id:"91078",name:"Красная Прага",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_praha",iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[92],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"740815"},filterInputMode:"json"}},{id:"388412",name:"Зелёная Прага",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_praha","metro_green_praha"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green"],!0,!1],["match",["get","db_region"],[92],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"740815"},filterInputMode:"json"}}]},{id:"159784",type:"group",layers:[{id:"356828",name:"Метро генерализация Сантьяго",type:"point",style:{textFont:["step",["zoom"],"",13,"Noto_Sans"],iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_mm_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,11],textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_cyan","transport_metro_green","transport_metro_brown","transport_metro_red","transport_metro_orange","transport_metro_blue","transport_metro_pink"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:13.5,minzoom:12,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"41045",name:"Голубая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_cyan_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_cyan"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"88038",name:"Коричневая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_brown_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_brown"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"690347",name:"Красная Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_santiago",iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"128877",name:"Оранжевая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_orange_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_orange"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"880817",name:"Синяя Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_blue_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_blue"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"599241",name:"Зелёная Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_green_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}},{id:"586494",name:"Фиолетовая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_purple_santiago"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_purple"],!0,!1],["match",["get","db_region"],[101],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"159784"},filterInputMode:"json"}}]},{id:"632416",type:"group",layers:[{id:"843243",name:"Метро генерализация Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_kharkiv","metro_mm_kharkiv"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,11],textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green","transport_metro_red","transport_metro_blue"],!0,!1],["match",["get","db_region"],[110],!0,!1]],maxzoom:13.5,minzoom:12,metadata:{group:{id:"632416"},filterInputMode:"json"}},{id:"266079",name:"Зелёная Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_kharkiv","metro_green_kharkiv"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_green"],!0,!1],["match",["get","db_region"],[110],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"632416"},filterInputMode:"json"}},{id:"222294",name:"Красная Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_kharkiv",iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[110],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"632416"},filterInputMode:"json"}},{id:"795935",name:"Синяя Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_kharkiv","metro_blue_kharkiv"],iconWidth:["match",["get","selected"],[!0],16,13],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_blue"],!0,!1],["match",["get","db_region"],[110],!0,!1]],maxzoom:16,minzoom:13.5,metadata:{group:{id:"632416"},filterInputMode:"json"}}]},{id:"43556",type:"group",layers:[{id:"572757",name:"Метро генерализация МСК ",type:"point",style:{textFont:["step",["zoom"],"",12,"Noto_Sans"],iconImage:"metro_16",iconWidth:["interpolate",["linear"],["zoom"],12,16,12.5,18],textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["match",["get","selected"],[!0],12,10],textPriority:25,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_turquoise","transport_metro_cyan","transport_metro_yellow","transport_metro_green","transport_metro_brown","transport_metro_red","transport_metro_orange","transport_metro_lime","transport_metro_grey","transport_metro_blue","transport_metro_grass","transport_metro_steel","transport_metro_pink","transport_metro_purple","transport_metro_mkgd","transport_mono"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:13,minzoom:12,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"704030",name:"Красная МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line1_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",allowOverlap:!1,iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_red"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"107304",name:"Тёмно-зелёная МСК  ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line2_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_grass"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"949007",name:"Синяя МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line3_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_blue"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"819304",name:"Голубая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line4_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_cyan"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"928593",name:"Коричневая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line5_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_brown"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"947687",name:"Оранжевая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line6_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_orange"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"532552",name:"Фиолетовая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line7_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_purple"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"586708",name:"Жёлтая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line8_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_yellow"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"941631",name:"Серая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line9_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_grey"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"385536",name:"Салатовая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line10_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_lime"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"459787",name:"Бирюзовая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line11_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_turquoise"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"191049",name:"Серо-голубая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line12_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_steel"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"663561",name:"Монорельс МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line13_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_mono"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:20,minzoom:13,metadata:{group:{id:"43556"},filterInputMode:"json"}},{id:"metro mck",name:"МЦК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line14_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mkgd"],!0,!1]],maxzoom:20,minzoom:13,metadata:{group:{id:"43556"}}},{id:"metro pink",name:"Розовая МСК ",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line15_33",iconWidth:["interpolate",["linear"],["zoom"],13,33,15,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_pink"],!0,!1]],maxzoom:16,minzoom:13,metadata:{group:{id:"43556"}}},{id:"646167",name:"МЦД 1 11-12",type:"point",style:{textFont:"",iconImage:"poi_station_dot",iconWidth:["match",["get","selected"],[!0],21,7],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:94,textFontSize:10,textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mcd1"],!0,!1]],maxzoom:12,minzoom:11,metadata:{group:{id:"43556"}}},{id:"680531",name:"МЦД 1 12-16",type:"point",style:{textFont:"Noto_Sans",iconImage:"mcd1_18",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],12,24,12.5,26,14,28,16,32],["interpolate",["linear"],["zoom"],12,20,12.5,22,14,24,16,28]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],12,10,12.9,10,13,11],textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mcd1"],!0,!1]],maxzoom:16,minzoom:12,metadata:{group:{id:"43556"}}},{id:"191477",name:"МЦД 1 16-20",type:"point",style:{textFont:"Noto_Sans",iconImage:"mcd1",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],12,24,12.5,26,14,28,16,32],["interpolate",["linear"],["zoom"],12,20,12.5,22,14,24,16,28]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:95,textFontSize:["interpolate",["linear"],["zoom"],12,10,12.9,10,13,11],textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mcd1"],!0,!1]],maxzoom:20,minzoom:16,metadata:{group:{id:"43556"}}},{id:"441980",name:"МЦД 2 11-12",type:"point",style:{textFont:"",iconImage:"poi_station_dot",iconWidth:["match",["get","selected"],[!0],21,7],textColor:"#353a3d",textOffset:0,visibility:"visible",iconPriority:94,textFontSize:10,textPriority:25,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mcd2"],!0,!1]],maxzoom:12,minzoom:11,metadata:{group:{id:"43556"}}},{id:"963403",name:"МЦД 2 12-16",type:"point",style:{textFont:"Noto_Sans",iconImage:"mcd2_18",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],12,24,12.5,26,14,28,16,32],["interpolate",["linear"],["zoom"],12,20,12.5,22,14,24,16,28]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:94,textFontSize:["interpolate",["linear"],["zoom"],12,10,12.9,10,13,11],textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mcd2"],!0,!1]],maxzoom:16,minzoom:12,metadata:{group:{id:"43556"}}},{id:"332030",name:"МЦД 2 16-20",type:"point",style:{textFont:"Noto_Sans",iconImage:"mcd2",iconWidth:["match",["get","selected"],[!0],["interpolate",["linear"],["zoom"],12,24,12.5,26,14,28,16,32],["interpolate",["linear"],["zoom"],12,20,12.5,22,14,24,16,28]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:94,textFontSize:["interpolate",["linear"],["zoom"],12,10,12.9,10,13,11],textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Transport_stop"],!0,!1],["match",["get","objectClass"],["transport_metro_mcd2"],!0,!1]],maxzoom:20,minzoom:16,metadata:{group:{id:"43556"}}}]},{id:"77098",type:"group",layers:[{id:"metro exit turquoise",name:"Бирюзовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_turquoise"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#353a3d",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_turquoise"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit cyan",name:"Голубая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_cyan"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_cyan"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit yellow",name:"Жёлтая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_yellow"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_yellow"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit green",name:"Зелёная",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_green"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit brown",name:"Коричневая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_brown"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_brown"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit red",name:"Красная",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit orange",name:"Оранжевая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_orange"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_orange"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit lime",name:"Салатовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_lime"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_lime"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit grey",name:"Серая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_grey"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_grey"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit blue",name:"Синяя",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_blue"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_blue"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit grass",name:"Тёмно-зелёная",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_green"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_grass"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit purple",name:"Фиолетовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_purple"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_purple"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}},{id:"metro exit steel",name:"Серо-голубая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_steel"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_steel"],!0,!1],["match",["get","db_region"],[1,9,18,19,21,67,75,105,107,208,209,217],!0,!1]],minzoom:16,metadata:{group:{id:"77098"},filterInputMode:"json"}}]},{id:"763765",type:"group",layers:[{id:"794570",name:"Зелёная копия",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red","metro_green"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,3,17,3,17.5,2],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[1],!0,!1]],minzoom:16,metadata:{group:{id:"763765"},filterInputMode:"json"}},{id:"897174",name:"Красная копия",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,3,17,3,17.5,2],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[1],!0,!1]],minzoom:16,metadata:{group:{id:"763765"},filterInputMode:"json"}},{id:"805271",name:"Номерные выходы Нск",type:"point",style:{textFont:"",iconImage:"exit",textOffset:0,visibility:"visible",iconPriority:229,iconTextFont:"Noto_Sans_Semibold",textPriority:85,iconTextColor:"#FFFFFF",iconTextField:["get","db_label"],iconTextOffset:[19,0],iconTextPadding:[1,4,1,4],iconTextFontSize:10,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit_number"],!0,!1],["match",["get","db_region"],[1],!0,!1]],minzoom:16.5,metadata:{group:{id:"763765"},filterInputMode:"json"}}]},{id:"501891",type:"group",layers:[{id:"558460",name:"Зелёная UAE",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_uae","metro_green_uae"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,15,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,4,17,4,17.5,1.5],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[99],!0,!1]],minzoom:16,metadata:{group:{id:"501891"},filterInputMode:"json"}},{id:"962654",name:"Красная UAE",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_uae",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,15,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,4,17,4,17.5,1.5],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[99],!0,!1]],minzoom:16,metadata:{group:{id:"501891"},filterInputMode:"json"}},{id:"82946",name:"Номерные выходы UAE",type:"point",style:{textFont:"",iconImage:"exit",textOffset:0,visibility:"visible",iconPriority:229,iconTextFont:"Noto_Sans_Semibold",textPriority:85,iconTextColor:"#FFFFFF",iconTextField:["get","db_label"],iconTextOffset:[19,0],iconTextPadding:[1,4,1,4],iconTextFontSize:10,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit_number"],!0,!1],["match",["get","db_region"],[99],!0,!1]],minzoom:16.5,metadata:{group:{id:"501891"},filterInputMode:"json"}}]},{id:"924721",type:"group",layers:[{id:"987296",name:"Зелёная СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_green_spb"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,2.5,17,2.5,17.5,1.5],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[38],!0,!1]],minzoom:16,metadata:{group:{id:"924721"},filterInputMode:"json"}},{id:"928580",name:"Красная СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_spb",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,2.5,17,2.5,17.5,1.5],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[38],!0,!1]],minzoom:16,metadata:{group:{id:"924721"},filterInputMode:"json"}},{id:"837239",name:"Оранжевая СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_orange_spb"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],11,0,16,3,16.5,3,17,2],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_orange"],!0,!1],["match",["get","db_region"],[38],!0,!1]],minzoom:16,metadata:{group:{id:"924721"},filterInputMode:"json"}},{id:"427080",name:"Синяя СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_blue_spb"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,3,17,3,17.5,2],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_blue"],!0,!1],["match",["get","db_region"],[38],!0,!1]],minzoom:16,metadata:{group:{id:"924721"},filterInputMode:"json"}},{id:"545863",name:"Фиолетовая СПб",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_spb","metro_purple_spb"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,13,17.4,15]],textColor:"#174A67",textOffset:["interpolate",["linear"],["zoom"],16,0,16.5,2,17,2,17.5,2],visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_purple"],!0,!1],["match",["get","db_region"],[38],!0,!1]],minzoom:16,metadata:{group:{id:"924721"},filterInputMode:"json"}},{id:"21903",name:"Номерные выходы Спб",type:"point",style:{textFont:"",iconImage:"exit",textOffset:0,visibility:"visible",iconPriority:229,iconTextFont:"Noto_Sans_Semibold",textPriority:85,iconTextColor:"#FFFFFF",iconTextField:["get","db_label"],iconTextOffset:[20,0],iconTextPadding:[1,4,1,4],iconTextFontSize:10,textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit_number"],!0,!1],["match",["get","db_region"],[38],!0,!1]],minzoom:16.5,metadata:{group:{id:"924721"},filterInputMode:"json"}}]},{id:"135503",type:"group",layers:[{id:"132410",name:"Жёлтая Прага",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_praha","metro_yellow_praha"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_yellow"],!0,!1],["match",["get","db_region"],[92],!0,!1]],minzoom:16,metadata:{group:{id:"135503"},filterInputMode:"json"}},{id:"398337",name:"Зелёная Прага",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_green_praha",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[92],!0,!1]],minzoom:16,metadata:{group:{id:"135503"},filterInputMode:"json"}},{id:"436887",name:"Красная Прага",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_praha",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[92],!0,!1]],minzoom:16,metadata:{group:{id:"135503"},filterInputMode:"json"}}]},{id:"227",type:"group",layers:[{id:"369799",name:"Голубая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_cyan_santiago"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_cyan"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}},{id:"617570",name:"Зелёная Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_green_santiago"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}},{id:"595478",name:"Коричневая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_brown_santiago"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_brown"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}},{id:"561000",name:"Красная Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_santiago",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}},{id:"876730",name:"Оранжевая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_orange_santiago"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_orange"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}},{id:"343376",name:"Синяя Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_blue_santiago"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_blue"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}},{id:"471758",name:"Фиолетовая Сантьяго",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_santiago","metro_purple_santiago"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_purple"],!0,!1],["match",["get","db_region"],[101],!0,!1]],minzoom:16,metadata:{group:{id:"227"},filterInputMode:"json"}}]},{id:"73948",type:"group",layers:[{id:"49282",name:"Зелёная Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_kharkiv","metro_green_kharkiv"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_green"],!0,!1],["match",["get","db_region"],[110],!0,!1]],minzoom:16,metadata:{group:{id:"73948"},filterInputMode:"json"}},{id:"511195",name:"Красная Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_red_kharkiv",iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[110],!0,!1]],minzoom:16,metadata:{group:{id:"73948"},filterInputMode:"json"}},{id:"323913",name:"Синяя Харьков",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_red_kharkiv","metro_blue_kharkiv"],iconWidth:["match",["get","selected"],[!0],16,["interpolate",["linear"],["zoom"],17.3,12,17.4,15]],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:229,textFontSize:11,textPriority:85,textHaloColor:"hsla(0, 0%, 100%, 0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_blue"],!0,!1],["match",["get","db_region"],[110],!0,!1]],minzoom:16,metadata:{group:{id:"73948"},filterInputMode:"json"}}]},{id:"44814",type:"group",layers:[{id:"976843",name:"Бирюзовая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line11_33","metro_line11_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_turquoise"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"666018",name:"Голубая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line4_33","metro_line4_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_cyan"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"347522",name:"Жёлтая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line8_33","metro_line8_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_yellow"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"251879",name:"Коричневая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line5_33","metro_line5_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_brown"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"465173",name:"Красная МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:"metro_line1_33",iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_red"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"96731",name:"Оранжевая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line6_33","metro_line6_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_orange"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"972567",name:"Салатовая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line10_33","metro_line10_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_lime"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"202186",name:"Серая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line9_33","metro_line9_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_grey"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"397340",name:"Синяя МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line3_33","metro_line3_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_blue"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"846210",name:"Тёмно-зелёная МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line2_33","metro_line2_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_grass"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"942904",name:"Фиолетовая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line7_33","metro_line7_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_purple"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"221794",name:"Серо-голубая МСК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line12_33","metro_line12_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_steel"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"metro exit mck",name:"МЦК",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line14_33","metro_line14_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_mkgd"],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"}}},{id:"metro exit pink",name:"Розовая",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"metro_line15_33","metro_line15_33"],iconWidth:["match",["get","selected"],[!0],39,35],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_pink"],!0,!1]],maxzoom:16.5,minzoom:16,metadata:{group:{id:"44814"}}},{id:"metro exit mcd1",name:"МЦД 1",type:"point",style:{textFont:"Noto_Sans",iconImage:"mcd1",iconWidth:["match",["get","selected"],[!0],28,24],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_mcd1"],!0,!1]],maxzoom:20,minzoom:16,metadata:{group:{id:"44814"}}},{id:"metro exit mcd2",name:"МЦД 2",type:"point",style:{textFont:"Noto_Sans",iconImage:"mcd2",iconWidth:["match",["get","selected"],[!0],28,24],textColor:"#174A67",textOffset:0,visibility:"visible",iconPriority:230,textFontSize:12,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","sublayer"],["Subway_exit"],!0,!1],["match",["get","objectClass"],["metro_exit_mcd2"],!0,!1]],maxzoom:20,minzoom:16,metadata:{group:{id:"44814"}}},{id:"530783",name:"МЦД 3 4 5 ",type:"point",style:{textFont:"Noto_Sans",iconImage:["match",["get","selected"],[!0],"electrichka_i_72","electrichka"],iconWidth:["interpolate",["linear"],["zoom"],17.4,14,17.5,18],textColor:"#174A67",iconOffset:[0,2],textOffset:2,visibility:"visible",iconPriority:230,textFontSize:11,textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Subway_exit"],!0,!1],["match",["get","db_object_class"],["metro_exit_mcd3","metro_exit_mcd4","metro_exit_mcd5"],!0,!1]],maxzoom:20,minzoom:16,metadata:{group:{id:"44814"}}},{id:"809754",name:"Метро выходы Мск",type:"point",style:{textFont:["step",["zoom"],"",12,"Noto_Sans"],iconImage:"metro_16",iconWidth:21,textColor:["match",["get","selected"],[!0],"#D10000","#174A67"],textOffset:.5,visibility:"visible",iconPriority:230,textFontSize:["match",["get","selected"],[!0],12,12],textPriority:85,textHaloColor:"rgba(255,255,255,0.6)",textHaloWidth:1.2,textPlacement:"bottomCenter",textMaxLengthPerLine:20},filter:["all",["match",["get","db_sublayer"],["Subway_exit"],!0,!1],["match",["get","db_object_class"],["metro_exit_turquoise","metro_exit_cyan","metro_exit_yellow","metro_exit_green","metro_exit_brown","metro_exit_red","metro_exit_orange","metro_exit_lime","metro_exit_grey","metro_exit_blue","metro_exit_grass","metro_exit_purple","metro_exit_steel","metro_exit_mkgd","metro_exit_pink","metro_exit_mono"],!0,!1],["match",["get","db_region"],[32],!0,!1]],maxzoom:20,minzoom:16.5,metadata:{group:{id:"44814"},filterInputMode:"json"}},{id:"697235",name:"Номерные выходы Мск",type:"point",style:{textFont:"",iconImage:"exit",visibility:"visible",iconPriority:229,iconTextFont:"Noto_Sans_Semibold",textPriority:85,iconTextColor:"#FBD87F",iconTextField:["get","db_label"],iconTextOffset:[22,2],iconTextPadding:[2,4.5,2,4.5],iconTextFontSize:10},filter:["all",["match",["get","sublayer"],["Subway_exit_number"],!0,!1],["match",["get","db_region"],[32],!0,!1]],minzoom:16.5,metadata:{group:{id:"44814"},filterInputMode:"json"}}]},{id:"city caption",name:"Подписи городов с точками",type:"point",style:{textFont:"Noto_Sans",iconImage:"poi_city_dot",iconWidth:["interpolate",["linear"],["zoom"],7,8,15,16],textColor:"#1a1a1a",textOffset:0,visibility:"visible",iconPriority:110,textFontSize:["interpolate",["linear"],["zoom"],9,12,15,24],textPriority:80,textHaloColor:"hsla(0, 0%, 100%, 0.5)",textHaloWidth:1,textPlacement:"bottomCenter",iconLabelingMargin:{leftRight:10,topBottom:10},textLabelingMargin:{leftRight:10,topBottom:0}},filter:["all",["match",["get","sublayer"],["City_caption"],!0,!1],["match",["get","objectClass"],["city_caption","np_caption"],!0,!1]],maxzoom:15,minzoom:9},{id:"949217",name:"Подпись населенного пункта",type:"point",style:{textFont:"Noto_Sans",textColor:"#262626",visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],8,10,16,18],textPriority:80,textHaloColor:"rgba(255,255,255,0.71)",textHaloWidth:1,textLabelingMargin:{leftRight:20,topBottom:20}},filter:["all",["match",["get","sublayer"],["Locality_caption"],!0,!1],["match",["get","objectClass"],["np_caption"],!0,!1]]},{id:"776122",name:"Подпись сельского поселения",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],11,"#4F3A17",16,"#AF9974"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],9,12,12,14],textPriority:81,textHaloColor:"rgba(255,255,255,0.71)",textHaloWidth:1,textLabelingMargin:{leftRight:20,topBottom:20}},filter:["match",["get","sublayer"],["Village_caption"],!0,!1]},{id:"657681",name:"Подпись района",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],11,"rgba(79,58,23,0.5)",13,"rgba(79,58,23,0.55)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],11,12,16,18],textPriority:80,textHaloColor:["interpolate",["linear"],["zoom"],11,"rgba(255,255,255,0.5)",13,"rgba(255,255,255,0.4)"],textHaloWidth:1,iconLabelingMargin:{leftRight:0,topBottom:0},textLabelingMargin:{leftRight:5,topBottom:5}},filter:["all",["match",["get","sublayer"],["Administrative_district_caption"],!0,!1],["match",["get","db_region"],[196,32,38],!1,!0]],maxzoom:16,minzoom:11,metadata:{filterInputMode:"json"}},{id:"410145",name:"Подпись района Мск Спб",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],11,"rgba(79,58,23,0.65)",13,"rgba(79,58,23,0.65)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],11,12,16,18],textPriority:80,textHaloColor:["interpolate",["linear"],["zoom"],11,"rgba(255,255,255,0.5)",13,"rgba(255,255,255,0.4)"],textHaloWidth:1,iconLabelingMargin:{leftRight:0,topBottom:0},textLabelingMargin:{leftRight:5,topBottom:5}},filter:["all",["match",["get","sublayer"],["Administrative_district_caption"],!0,!1],["match",["get","db_region"],[32,38],!0,!1]],maxzoom:16,minzoom:10.5,metadata:{filterInputMode:"json"}},{id:"22694",name:"Подпись района Актау",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],11,"#4F3A17",16,"rgba(175,153,116,0.4)"],visibility:"visible",textFontSize:["interpolate",["linear"],["zoom"],11,12,16,18],textHaloColor:["interpolate",["linear"],["zoom"],11,"rgba(255,255,255,0.7)",16,"rgba(255,255,255,0.4)"],textHaloWidth:1,textLabelingMargin:{leftRight:10,topBottom:10}},filter:["all",["match",["get","sublayer"],["Administrative_district_caption"],!0,!1],["match",["get","db_region"],[196],!0,!1]],minzoom:12,metadata:{filterInputMode:"json"}},{id:"533740",name:"Подпись главного города",type:"point",style:{textFont:"Noto_Sans",textColor:["interpolate",["linear"],["zoom"],10.9,"#1A1A1A",11,"rgba(26,26,26,0.5)"],visibility:"visible",iconPriority:0,textFontSize:["interpolate",["linear"],["zoom"],0,10,11,22,11.9,22,12,24],textPriority:221,textHaloColor:["interpolate",["linear"],["zoom"],10.9,"#FFFFFF",11,"rgba(255,255,255,0.5)"],textLabelingMargin:{leftRight:0,topBottom:0}},filter:["all",["match",["get","sublayer"],["Main_city_caption"],!0,!1],["match",["get","objectClass"],["main_city_caption"],!0,!1]],maxzoom:12}],version:1,metadata:{defaultMapView:{lat:55.75346600000001,lon:37.62017,zoom:10}},background:{color:"#F5F2E0"}};var Ng;const Dg=yt({center:[82.920412,55.030111],zoom:11,minZoom:2,key:"4970330e-7f1c-4921-808c-0eb7c4e63001",disableRotationByUserInteraction:!1,disablePitchByUserInteraction:!1,touchRotationThreshold:10,styleState:{},keepCenterWhileUserZoomRotate:!1}),Ug={"Красная поляна":{center:[40.2363,43.67305],zoom:13},Шерегеш:{center:[87.96426,52.95719],zoom:13},Москва:{center:[37.63541,55.7476],zoom:13},ОАЭ:{center:[56.154,24.7974],zoom:13}};let Zg;const Gg={region:"Новосибирск",scale:null!==(Ng=Dg.reliefScale)&&void 0!==Ng?Ng:1.2,maxPitch:45};let Vg,qg,Xg,$g,Yg,Jg;const Kg={name:"Демо снимков мапбокс",version:1,background:{color:"#fff"},icons:{},layers:[{id:"sattelite",type:"raster",filter:["match",["sourceAttr","name"],["sattelite"],!0,!1],minzoom:10,maxzoom:20,style:{opacity:1}}],terrain:{}};var Qg=o(291);var t_=o(8281),e_=o.n(t_),o_=o(3587);function i_(t){return void 0!==t.name_ex&&void 0!==t.name_ex.primary?t.name_ex.primary:t.name}function n_(t){return void 0!==t.point?[t.point.lon,t.point.lat]:(0,o_.parse)(t.geometry.centroid).coordinates}const a_=["tree1","tree2","treepine","bush1","bush2","palm","pine1","pine2","pine3"],r_=.7,l_=[{name:"Томск",center:[84.98739710077643,56.49761567298738],zoom:17.9},{name:"Новосибирск",center:[82.771633,55.12001],zoom:16.9},{name:"Шерегеш",center:[87.954179,52.952365],zoom:20}],s_=l_.map((t=>t.name));s_.unshift("-");const c_=["mock","tile server"],d_={place:s_[0],source:c_[0]};function m_(t,e){const o=t.northEast[0],i=t.northEast[1],n=t.southWest[0],a=t.southWest[1],r=[];for(let t=0;t<e;t++){const e=n+Math.random()*(o-n),l=a+Math.random()*(i-a);r.push({type:"Feature",properties:{db_id:String(t),scale:Math.random()},geometry:{type:"Point",coordinates:[e,l]}})}return{type:"FeatureCollection",features:r}}const h_=["Model_tree_coniferous_point","Model_tree_deciduous_point","Model_tree_mixed_point","Model_tree_palms_point","Model_tree_shrubs_point"];function p_(t,e,o){for(const i of h_){const n=i.replace("Model_tree_","").replace("_point",""),a="tree-layer-"+n;t.removeLayer(a);const r=Object.assign(Object.assign({modelSrc:n,useThreeJs:!1},e),{color:`rgba(255, 255, 255, ${o})`});t.addLayer({id:a,filter:["==",["get","db_sublayer"],i],type:"model",style:r})}}let u_;function g_(t,e,o){const i=t.bounds,n=(0,Le.x7)(i),a=(0,Le.Bs)(n);for(let t=0;t<e;t++){const e=we.Ue(),i=we.al(Math.random()*No.Bq,Math.random()*No.Bq,0);(0,Le.Z$)(e,i,a);const[n,r]=(0,zt.PA)(e);o.push({type:"Feature",properties:{db_id:String(t),scale:Math.random()},geometry:{type:"Point",coordinates:[n,r]}})}}const __=new pt({width:280});__.useLocalStorage=!0,__.domElement.parentElement&&(__.domElement.parentElement.style.zIndex="10",__.domElement.style.float="left",__.domElement.style.marginLeft="15px");const f_=_t(),y_=yt({center:[82.920412,55.030111],zoom:11,autoHideOSMCopyright:!0,key:"4970330e-7f1c-4921-808c-0eb7c4e63001",trafficControl:!0,scaleControl:!0,floorControl:!0,viewport:{top:10,bottom:15,right:15,left:10},disableIconCache:"disableIconCache"in f_,disableHoverStyles:!("enableHover"in f_),disableRotationByUserInteraction:"disableRotation"in f_,disablePitchByUserInteraction:"disablePitch"in f_,keepCenterWhileUserZoomRotate:"keepCenterWhileUserZoomRotate"in f_,preserveDrawingBuffer:"preserveDrawingBuffer"in f_,tileServer:f_.tileServer,disableBssStatistics:!0,useThreeJs:"useThreeJs"in f_,enableTrackResize:!0,showDefaultTileBounds:"showDefaultTileBounds"in f_,scaleControl:"bottomCenter",webglVersion:1,styleOptions:{modelsPath:`${self.origin}`}}),b_=new mapgl.Map("map",y_);b_._impl.on("metrics",(t=>console.log("metrics",t)));let x_,v_=[];function w_(t){return new Promise((e=>setTimeout(e,t)))}b_.on("click",(t=>(0,i.mG)(void 0,void 0,void 0,(function*(){console.log("Map click:",t);const e=t.target&&t.target.id;if(e!==x_&&(b_._impl.setSelectedIds(),v_.forEach((t=>t.destroy())),v_=[],x_=e,b_._impl.setSelectedIds(void 0!==e?[e]:void 0),void 0!==e)){const t=yield function(t){return fetch(`https://catalog.api.2gis.ru/3.0/items/byid?${[`id=${t}`,"key=webmaps","fields=items.links"].join("&")}`).then((t=>t.json()))}(e);if(200===t.meta.code&&t.result.total>0&&void 0!==t.result.items[0].links&&void 0!==t.result.items[0].links.entrances){const e=t.result.items[0].links.entrances.map((t=>t.geometry.vectors)).filter((t=>void 0!==t)).reduce(((t,e)=>t.concat(e)),[]).map((t=>(0,o_.parse)(t).coordinates));if(0===e.length)return;if(0===mapgl._J.config.entranceAnimation.stagger)v_.push(new Es(b_._impl,{coordinates:e,animate:!0,minZoom:16}));else{const t=e.reduce(((t,e)=>(t[0]+=e[e.length-1][0],t[1]+=e[e.length-1][1],t)),[0,0]);t[0]/=e.length,t[1]/=e.length,e.sort(((e,o)=>Math.atan2(t[1]-o[0][1],t[0]-o[0][0])-Math.atan2(t[1]-e[0][1],t[0]-e[0][0])));for(let t=0;t<e.length;t++){const o=e[t];v_.push(new Es(b_._impl,{coordinates:[o],minZoom:16,animate:t%2==1})),yield w_(mapgl._J.config.entranceAnimation.stagger/e.length)}}for(const t of v_)t.on("click",(e=>{console.log(e,t)}))}}})))),b_.on("moveend",(()=>{history.replaceState({},document.title,ft(b_,y_))})),b_.on("copyrightclick",(t=>{console.log("Copyright click:",t.type,t.href),t.originalEvent.preventDefault()})),b_.on("floorlevelchange",(t=>{console.log("Floor level change: ",t.floorPlanId,t.floorLevelIndex,t.floorLevelName)})),window.map=b_;const z_=__.addFolder("Map");z_.add(mapgl._J.config.render,"alwaysRerender"),z_.add(y_,"disableIconCache",!!y_.disableIconCache).onChange((()=>document.location.assign(ft(b_,y_)))),z_.add(y_,"disableHoverStyles",!!y_.disableHoverStyles).onChange((()=>document.location.assign(ft(b_,y_)))),z_.add(y_,"disableRotationByUserInteraction",!!y_.disableRotationByUserInteraction).onChange((()=>document.location.assign(ft(b_,y_)))),z_.add(y_,"disablePitchByUserInteraction",!!y_.disableRotationByUserInteraction).onChange((()=>document.location.assign(ft(b_,y_)))),z_.add(y_,"keepCenterWhileUserZoomRotate",!!y_.keepCenterWhileUserZoomRotate).onChange((()=>document.location.assign(ft(b_,y_)))),z_.add(y_,"preserveDrawingBuffer",!!y_.preserveDrawingBuffer).onChange((()=>document.location.assign(ft(b_,y_)))),z_.add(y_,"webglVersion",[1,2]).onChange((()=>document.location.assign(ft(b_,y_))));const F_={language:b_.getLanguage()};z_.add(F_,"language",["ru","en"]).onChange((t=>{b_.setLanguage(t),y_.lang=t,document.location.assign(ft(b_,y_))}));const S_={getCanvas:()=>console.log(b_.getCanvas()),getWebGLContext:()=>{const t=b_.getWebGLContext(),e=b_.getSize(),o=new Uint8Array(e[0]*e[1]*4);t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,o),console.log("\n// Выполни этот кусок кода в консоли или в своем приложении и в буфере u8 будут пиксели карты.\n// ВАЖНО! Передай preserveDrawingBuffer=true при инициализации карты, иначе в буфере будут одни нули.\nconst gl = map.getWebGLContext();\nconst size = map.getSize();\nconst u8 = new Uint8Array(size[0] * size[1] * 4);\ngl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.UNSIGNED_BYTE, u8);\n        "),console.log({context:t,mapSize:e,mapPixelsBuffer:o})}},C_=__.addFolder("Labeling"),M_={dead:!1,alive:!1,unused:!1,commercialDead:!1,commercialAlive:!1};Object.keys(M_).forEach((t=>C_.add(M_,t).onChange((()=>b_.showLabelsDebug(M_)))));const P_={commercialPoiRandomSeed:void 0!==y_.commercialPoiRandomSeed?y_.commercialPoiRandomSeed:0};C_.add(P_,"commercialPoiRandomSeed",0,1e5,.1).onChange((()=>{y_.commercialPoiRandomSeed=P_.commercialPoiRandomSeed,document.location.assign(ft(b_,y_))}));const I_=C_.addFolder("Commercial Margins"),L_=I_.addFolder("Default"),k_=I_.addFolder("City");L_.add(mapgl._J.config.labeling.commercialMargins.default,"leftRight",0,1e3,1).onChange((()=>b_._impl.refresh())),L_.add(mapgl._J.config.labeling.commercialMargins.default,"topBottom",0,1e3,1).onChange((()=>b_._impl.refresh())),k_.add(mapgl._J.config.labeling.commercialMargins.city,"leftRight",0,1e3,1).onChange((()=>b_._impl.refresh())),k_.add(mapgl._J.config.labeling.commercialMargins.city,"topBottom",0,1e3,1).onChange((()=>b_._impl.refresh()));const A_=Object.keys(Qg),j_=__.addFolder("Animation"),T_=j_.addFolder("Tiles");T_.add(mapgl._J.config.tileAnimation,"time",1,2e3),T_.add(mapgl._J.config.tileAnimation,"type",A_);const E_=j_.addFolder("Building");E_.add(mapgl._J.config.buildingAnimation,"duration",1,2e3),E_.add(mapgl._J.config.buildingAnimation,"easing",A_);const O_=j_.addFolder("Entrance");O_.add(mapgl._J.config.entranceAnimation,"bounceTime",1,2e3),O_.add(mapgl._J.config.entranceAnimation,"bounceType",A_),O_.add(mapgl._J.config.entranceAnimation,"growTime",1,2e3),O_.add(mapgl._J.config.entranceAnimation,"growType",A_),O_.add(mapgl._J.config.entranceAnimation,"stagger",0,2e3);const H_=j_.addFolder("Labeling");H_.add(mapgl._J.config.labeling,"animationTime",100,700),H_.add(mapgl._J.config.labeling,"animationType",A_),H_.add(kt.n5,"interval",100,700).onChange((()=>b_._impl.modules.labeler.setLabelingInterval(mapgl._J.config.labeling.interval))),z_.add(S_,"getCanvas"),z_.add(S_,"getWebGLContext"),z_.add({showPersonalPoi:!1},"showPersonalPoi").onChange((t=>{t?function(t){fetch("https://catalog.api.2gis.ru/3.0/profile/data?key=rurbbn3446&locale=ru_RU&user_id=V2:018d4ab2-bc6a-4890-bb06-b8c01e8a3379&auth_id=22026").then((t=>t.json())).then((t=>t.result.last_objects.filter((t=>void 0!==t.point||void 0!==t.geometry)))).then((e=>{const o=e.map((t=>({id:t.id,classId:void 0!==t.class_id?t.class_id:0,humanReadableClassId:t.human_readable_class_id,name:i_(t),point:n_(t)})));o.push({id:"14126577041721",classId:5,humanReadableClassId:"personal_poi_mall",name:"Перс. POI возле Меги",point:[82.93830550946373,54.9628577751673]}),o.push({id:"70000001006742023",classId:5,humanReadableClassId:"personal_poi_beauty",name:"Перс. POI INESSA",point:[52.27301046284046,54.90010162718265]}),t._impl.setPersonalPoi(o)}))}(b_):b_._impl.setPersonalPoi([])}));const W_=z_.addFolder("Light"),R_={direction:0};W_.add(R_,"direction",0,360,2).onChange((()=>{const t=b_._impl.modules.styleManager.getStyle(b_._impl.state.handyStyleId);t&&(t.light.direction[0]=1,t.light.direction[1]=0,t.light.direction[2]=0,xt.hk(t.light.direction,R_.direction*(Math.PI/180)),b_._impl.state.needRerender=!0)}));const B_=__.addFolder("Map objects"),N_=__.addFolder("Map controls"),D_=__.addFolder("Relief"),U_=__.addFolder("Gltf models"),Z_=__.addFolder("Debug"),G_=new(e_());G_.domElement.style.position="absolute",G_.domElement.style.top="",G_.domElement.style.left="0",G_.domElement.style.bottom="0",document.body.appendChild(G_.domElement),b_._impl.on("framestart",(()=>G_.begin())),b_._impl.on("frameend",(()=>G_.end()));const V_=G_.addPanel(e_().Panel("tiles","#7fc97f","#000")),q_=G_.addPanel(e_().Panel("dynTiles","#c9b756","#000")),X_=G_.addPanel(e_().Panel("draws","#beaed4","#000")),$_=G_.addPanel(e_().Panel("vtcs","#fdc086","#000"));let Y_=40,J_=50,K_=1e3,Q_=1e6;b_._impl.state.collectStats=!0,b_._impl.on("stats",(t=>{const{tileCount:e,dynamicTileCount:o,drawCount:i,vertexCount:n}=t;Y_=e>Y_?1.5*Y_:Y_,J_=o>J_?1.5*J_:J_,K_=i>K_?1.5*K_:K_,Q_=n>Q_?1.5*Q_:Q_,V_.update(e,Y_),q_.update(o,J_),X_.update(i,K_),$_.update(n,Q_)}));const tf=new mapgl.Control(b_,"",{position:"topRight"});function ef(){tf.getContainer().innerHTML=` <div style="text-align: center">\n        style zoom<br />${b_.getStyleZoom().toFixed(2)}\n    </div>`}b_.on("move",ef),ef(),((t,e)=>{let o=[];function i(){o.forEach((t=>t.destroy())),o=[]}const n={addDefault:()=>{i(),o.push(new mapgl.Marker(t,{coordinates:t.getCenter()}))},addCustom:()=>{i(),o.push(new mapgl.Marker(t,{coordinates:t.getCenter(),anchor:[15,43],zIndex:0,minZoom:3,maxZoom:10,interactive:!0,icon:"https://docs.2gis.com/img/mapgl/marker.svg",size:[48,48],hoverSize:[68,68],hoverAnchor:[25,63],hoverIcon:"https://docs.2gis.com/img/mapgl/marker.svg",label:{text:"Custom marker",color:"#000000",fontSize:24,haloRadius:0,haloColor:"#ffffff",letterSpacing:0,lineHeight:1.2,zIndex:0,offset:[0,0],anchor:[.5,.5]}}))},addSuite:()=>{i(),o.push(new mapgl.Marker(t,{coordinates:t.getCenter()})),o.push(new mapgl.Marker(t,{coordinates:t.getCenter().map((t=>t+.02)),label:{text:"With label"}})),o.push(new mapgl.Marker(t,{coordinates:t.getCenter().map((t=>t-.02)),label:{text:"Label with background",color:"#000000",fontSize:32,offset:[0,40],image:{url:"/assets/tooltip-top-symmetric.svg",size:[100,50],stretchX:[[10,40],[60,90]],stretchY:[[20,40]],padding:[20,10,10,10]}}})),o.forEach((t=>{t.on("click",(t=>console.log("Marker click:",t.lngLat)))}))},changeIcon(){o.forEach((t=>t.setIcon({icon:"/assets/marker_another_icon.svg"})))},changeHoverIcon(){o.forEach((t=>t.setHoverIcon({icon:"/assets/marker_hover.svg"})))},removeHoverIcon(){o.forEach((t=>t.setHoverIcon()))},changeLabel(){o.forEach((t=>t.setLabel({text:`Я новая №${Math.round(100*Math.random())} подпись маркера!`,fontSize:20,color:"#00ff00",haloColor:"#ff0000",haloRadius:1})))},removeLabel(){o.forEach((t=>t.setLabel()))},addAndChangeLabel(){i();const e=new mapgl.Marker(t,{coordinates:t.getCenter().map((t=>t+.02)),label:{text:"With label",color:"#ff0000"}});e.setLabel({text:"newnewnew",color:"#0000ff"}),o.push(e)},hide:()=>o.forEach((t=>t.hide())),show:()=>o.forEach((t=>t.show())),move:()=>o.forEach(((t,e)=>t.setCoordinates(t.getCoordinates().map((t=>t+.005*(e%2==0?1:-1)))))),destroy:()=>{i()}},a=e.addFolder("Markers");Object.keys(n).forEach((t=>a.add(n,t)))})(b_,B_),((t,e)=>{let o=[];function i(){o.forEach((t=>t.destroy())),o=[]}const n={addDefault:()=>{i(),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"Default label\nЛейбл с параметрами по умолчанию"}))},addCustom:()=>{i(),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"Custom label\nЛейбл с кастомными параметрами",minZoom:1,maxZoom:20,color:"#100000",fontSize:24,haloRadius:2,haloColor:"#1fffff",letterSpacing:2,lineHeight:1.2,zIndex:1,offset:[0,0],relativeAnchor:[.5,.5],anchor:[0,0]}))},addCustomWithImage:()=>{i(),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"Custom label with image\nЛейбл с кастомными параметрами\nИ картинкой",minZoom:1,maxZoom:20,color:"#100000",fontSize:12,haloRadius:1,haloColor:"#1fffff",letterSpacing:1,lineHeight:1.2,zIndex:1,offset:[0,0],relativeAnchor:[.5,.5],anchor:[0,0],image:{url:"/assets/stretchable-image-debug.svg",size:[500,250],stretchX:[[50,150],[250,450]],stretchY:[[50,150]],padding:[50,50,100,50]}}))},addSuite:()=>{i(),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"Hello\nTime to wake up\nПо-русски тоже можно писать",haloRadius:2,haloColor:"#00ff0055"})),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"Anchor is used",offset:[150,150]})),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"Small red text",color:"#ff000099",fontSize:14,offset:[-200,-200]})),o.push(new mapgl.Label(t,{coordinates:t.getCenter(),text:"With background",color:"#000000",fontSize:32,offset:[150,-200],image:{url:"assets/stretchable-image-debug.svg",size:[500,250],stretchX:[[50,150],[250,450]],stretchY:[[50,150]],padding:[50,50,100,50]}}))},hide:()=>o.forEach((t=>t.hide())),show:()=>o.forEach((t=>t.show())),move:()=>o.forEach(((t,e)=>t.setCoordinates(t.getCoordinates().map((t=>t+.01*(e%2==0?1:-1)))))),destroy:()=>{i()}},a=e.addFolder("Labels");a.add(n,"addDefault"),a.add(n,"addCustom"),a.add(n,"addCustomWithImage"),a.add(n,"addSuite"),a.add(n,"show"),a.add(n,"hide"),a.add(n,"move"),a.add(n,"destroy")})(b_,B_),((t,e)=>{let o;const i={add:()=>{if(!o){const e="\n                    <button>\n                        Custom control\n                    </button>\n                ";o=new mapgl.Control(t,e,{position:"topLeft"})}},setTopLeftPosition:()=>{o&&o.setPosition("topLeft")},setTopCenterPosition:()=>{o&&o.setPosition("topCenter")},setTopRightPosition:()=>{o&&o.setPosition("topRight")},setCenterLeftPosition:()=>{o&&o.setPosition("centerLeft")},setCenterRightPosition:()=>{o&&o.setPosition("centerRight")},setBottomRightPosition:()=>{o&&o.setPosition("bottomRight")},setBottomCenterPosition:()=>{o&&o.setPosition("bottomCenter")},setBottomLeftPosition:()=>{o&&o.setPosition("bottomLeft")},destroy:()=>{o&&(o.destroy(),o=void 0)}},n=e.addFolder("Custom control");n.add(i,"add"),n.add(i,"setTopLeftPosition"),n.add(i,"setTopCenterPosition"),n.add(i,"setTopRightPosition"),n.add(i,"setCenterLeftPosition"),n.add(i,"setCenterRightPosition"),n.add(i,"setBottomRightPosition"),n.add(i,"setBottomCenterPosition"),n.add(i,"setBottomLeftPosition"),n.add(i,"destroy")})(b_,N_),((t,e)=>{let o=new Array;const i=t.getControlsLayoutPadding();function n(){t.setControlsLayoutPadding({});const o=t.getControlsLayoutPadding();Object.keys(o).forEach((t=>i[t]=o[t])),e.updateDisplay()}function a(){t.setControlsLayoutPadding(i)}const r={"add controls":()=>{o.length||(n(),i.left=e.domElement.clientWidth+30,e.updateDisplay(),a(),o=new Array("topLeft","topCenter","topRight","centerLeft","centerRight","bottomLeft","bottomCenter","bottomRight").map((e=>{const o=`\n                        <button style="border: 3px solid red;">\n                            ${e}\n                        </button>\n                    `;return new mapgl.Control(t,o,{position:e})})))},"remove controls":()=>{for(var t;o.length;)null===(t=o.pop())||void 0===t||t.destroy()},"set default":n},l=e.addFolder("Controls Layout Padding");l.add(r,"add controls"),l.add(r,"remove controls"),l.add(r,"set default"),l.add(i,"top",0,t.getSize()[1]).onChange(a),l.add(i,"bottom",0,t.getSize()[1]).onChange(a),l.add(i,"right",0,t.getSize()[0]).onChange(a),l.add(i,"left",0,t.getSize()[0]).onChange(a),n()})(b_,N_),((t,e)=>{let o=[];function i(){o.forEach((t=>t.destroy())),o=[]}const n={addDefault:()=>{i(),o.push(new mapgl.Circle(t,{coordinates:t.getCenter(),radius:4e3}))},addCustomInteractive:()=>{i(),o.push(new mapgl.Circle(t,{coordinates:t.getCenter(),radius:4e3,zIndex:1,minZoom:2,maxZoom:20,color:"#ffffff",strokeColor:"#000000",strokeWidth:7}))},addCustomNonInteractive:()=>{i(),o.push(new mapgl.Circle(t,{coordinates:t.getCenter(),radius:4e3,zIndex:1,minZoom:2,maxZoom:20,color:"#ff0000",strokeColor:"#000000",strokeWidth:7,interactive:!1}))},addSuite:()=>{i(),0===o.length&&(o.push(new mapgl.Circle(t,{coordinates:t.getCenter(),radius:200,color:"#ff000055",strokeWidth:10,strokeColor:"#00ff00"})),o.push(new mapgl.Circle(t,{coordinates:t.getCenter(),radius:400,color:"#00ff0022"})),o.push(new mapgl.Circle(t,{coordinates:t.getCenter(),radius:4e3,color:"#0000ff11"})))},destroy:()=>{i()}},a=e.addFolder("Circles");a.add(n,"addSuite"),a.add(n,"addDefault"),a.add(n,"addCustomInteractive"),a.add(n,"addCustomNonInteractive"),a.add(n,"destroy")})(b_,B_),((t,e)=>{let o=[];function i(){o.forEach((t=>t.destroy())),o=[]}const n={addDefault:()=>{i(),o.push(new mapgl.CircleMarker(t,{coordinates:t.getCenter(),diameter:40}))},addCustomInteractive:()=>{i(),o.push(new mapgl.CircleMarker(t,{coordinates:t.getCenter(),diameter:40,zIndex:1,minZoom:2,maxZoom:20,color:"#14f00055",strokeWidth:10,strokeColor:"#14f00055",stroke2Width:10,stroke2Color:"#14f00055"}))},addCustomNonInteractive:()=>{i(),o.push(new mapgl.CircleMarker(t,{coordinates:t.getCenter(),diameter:40,zIndex:1,minZoom:2,maxZoom:20,color:"#ff000055",strokeWidth:10,strokeColor:"#ff000055",stroke2Width:10,stroke2Color:"#ff000055",interactive:!1}))},destroy:()=>{i()}},a=e.addFolder("CircleMarkers");a.add(n,"addDefault"),a.add(n,"addCustomInteractive"),a.add(n,"addCustomNonInteractive"),a.add(n,"destroy")})(b_,B_),((t,e)=>{let o=[];const i=t.getCenter(),n=[i[0]+.01,i[1]+.01],a=[i[0]+.01,i[1]-.01],r=[i[0]-.01,i[1]-.01];function l(){o.forEach((t=>t.destroy())),o=[]}const s={addDefault:()=>{l(),o.push(new mapgl.Polyline(t,{coordinates:[i,n,a]}))},addDefaultDashed:()=>{l(),o.push(new mapgl.Polyline(t,{dashLength:10,coordinates:[i,n,a]}))},addDashed:()=>{l(),o.push(new mapgl.Polyline(t,{dashLength:10,gapLength:30,gapColor:"#ffffff",coordinates:[i,n,a]}))},addInterpolateGapped:()=>{l(),o.push(new mapgl.Polyline(t,{gapLength:["interpolate",["linear"],["zoom"],12,2,16,40],dashLength:10,gapColor:"#ffffff",coordinates:[i,n,a]}))},addCustomInteractive:()=>{l(),o.push(new mapgl.Polyline(t,{coordinates:[i,n,a],zIndex:1,zIndex2:-1,zIndex3:-2,minZoom:2,maxZoom:15,color:"#ffffff",color2:"#ff0000",color3:"#3388ff",width:3,width2:0,width3:0}))},addCustomNonInteractive:()=>{l(),o.push(new mapgl.Polyline(t,{coordinates:[i,n,a],zIndex:1,zIndex2:2,zIndex3:3,minZoom:2,maxZoom:15,color:"#ff0000",color2:"#000000",color3:"#3388ff",width:0,width2:3,width3:5,interactive:!1}))},addSuite:()=>{l();const e=new mapgl.Polyline(t,{coordinates:[i,n,a],width:10,color:"#00ff0055"});e.on("click",(t=>{console.log("first",t)}));const s=new mapgl.Polyline(t,{coordinates:[a,i,r],width:10,color:"#00ff00",width2:14,color2:"#ff0000",width3:18,color3:"#0000ff"});s.on("click",(t=>{console.log("second",t)})),o.push(e),o.push(s)},destroy:()=>{l()}},c=e.addFolder("Polylines");c.add(s,"addDefault"),c.add(s,"addDefaultDashed"),c.add(s,"addDashed"),c.add(s,"addInterpolateGapped"),c.add(s,"addCustomInteractive"),c.add(s,"addCustomNonInteractive"),c.add(s,"addSuite"),c.add(s,"destroy")})(b_,B_),((t,e)=>{let o=[];const i=t.getCenter(),n=[i[0]+.01,i[1]+.01],a=[i[0]+.01,i[1]-.01],r=[i[0]-.01,i[1]-.01];function l(){o.forEach((t=>t.destroy())),o=[]}const s={addDefault:()=>{l(),o.push(new mapgl.Polygon(t,{coordinates:[[i,n,a,i]]}))},addCustomInteractive:()=>{l(),o.push(new mapgl.Polygon(t,{coordinates:[[i,n,a,i]],zIndex:1,minZoom:2,maxZoom:20,color:"#ffffff",strokeColor:"#000000",strokeWidth:7}))},addCustomNonInteractive:()=>{l(),o.push(new mapgl.Polygon(t,{coordinates:[[i,n,a,i]],zIndex:1,minZoom:2,maxZoom:20,color:"#ff0000",strokeColor:"#000000",strokeWidth:7,interactive:!1}))},addSuite:()=>{l(),o.push(new mapgl.Polygon(t,{coordinates:[[i,n,a,i]],color:"#99000055",strokeColor:"#bb0000"})),o.push(new mapgl.Polygon(t,{coordinates:[[a,i,r,a]],color:"#00990055",strokeColor:"#00bb00"}))},destroy:()=>{l()}},c=e.addFolder("Polygons");c.add(s,"addDefault"),c.add(s,"addCustomInteractive"),c.add(s,"addCustomNonInteractive"),c.add(s,"addSuite"),c.add(s,"destroy")})(b_,B_),((t,e)=>{let o;function i(){o&&(o.destroy(),o=void 0)}const n={addDefault:()=>{i(),o=new mapgl.HtmlMarker(t,{coordinates:t.getCenter(),html:"Html Маркер с параметрами по умолчанию"})},addCustom:()=>{i(),o=new mapgl.HtmlMarker(t,{coordinates:t.getCenter(),html:"Html Маркер с параметрами по умолчанию",anchor:[1,1],minZoom:3,maxZoom:10,zIndex:1})},addSuite:()=>{if(i(),o)return;const e=document.createElement("div");e.innerText="Я попап, кликни в меня!",e.style.padding="10px",e.style.border="1px solid",e.style.background="#fff",e.addEventListener("click",(()=>alert("Зря! Зря, зря, зряя..."))),o=new mapgl.HtmlMarker(t,{coordinates:t.getCenter(),html:e})},suiteChangeContent:()=>{o&&o.setContent("А я просто строчка!")},destroy:()=>{i()}},a={makeOnClick:!1},r=[];function l(e){const o=e.lngLat.slice(0,2);if(!0===t.getStyleState().terrainEnabled){const i=t.getGroundPoint(e.point);if(!i)return;o[0]=i[0],o[1]=i[1]}const i=new mapgl.HtmlMarker(t,{coordinates:o,html:'<img src="/assets/images/marker.png">',anchor:[11,34]}),n=r.push(i)-1;i.getContent().addEventListener("click",(()=>{i.destroy(),r[n]=void 0}))}const s=e.addFolder("HtmlMarkers");s.add(a,"makeOnClick").onChange((()=>{if(a.makeOnClick)t.on("click",l);else{t.off("click",l);for(const t of r)t&&t.destroy()}})),s.add(n,"addDefault"),s.add(n,"addCustom"),s.add(n,"addSuite"),s.add(n,"suiteChangeContent"),s.add(n,"destroy")})(b_,B_),((t,e,o)=>{const i=e.addFolder("CustomStyles");function n(t,e){let o=!1;const i={};for(const n of Object.keys(t))t[n]===e?(i[n+" (from URL)"]=e,o=!0):i[n]=t[n];return!o&&e&&(i["from URL"]=e),i}function a(e,o){"default"===e?t._impl.useOldStyles(o):t._impl.setStyle(e,o)}const r=n({Default:"default","2GIS Day":"c080bb6a-8134-4993-93a1-5b4d8c36a59b","2GIS Night":"e05ac437-fcc2-4845-ad74-b1de9ce07555","2GIS Grayscale":"b2b8046f-9bb0-469a-9860-9847032935cc","2GIS Snow":"1db52c6e-66b6-4c99-9c83-5538fa962d43","2GIS 2009":"9e75a94c-36f7-4254-8101-90139ead38ad","Online Day":"eb10e2c3-3c28-4b81-b74b-859c9c4cf47e"},o.style),l=n({production:"https://styles.api.2gis.com/styles/{id}",staging:"https://gosharubchinskii.web-staging.2gis.ru/styles/{id}"},o.styleServer),s={style:o.style||"default",styleServer:o.styleServer||l.production};i.add(s,"style",r).onChange((()=>{a(s.style,{stylePath:s.styleServer})})),i.add(s,"styleServer",l).onChange((t=>{a(s.style,{stylePath:t,iconsPath:"https://disk.2gis.com/styles-staging/"})}))})(b_,__,y_),((t,e)=>{const o=e.addFolder("lngLatBounds"),i={showBounds:function(){n();const e=new mapgl.LngLatBoundsClass({northEast:[...r.northEast],southWest:[...r.southWest]});a=new mapgl.Polygon(t,{coordinates:[[[e.southWest[0],e.northEast[1]],[e.southWest[0],e.southWest[1]],[e.northEast[0],e.southWest[1]],[e.northEast[0],e.northEast[1]],[e.southWest[0],e.northEast[1]]]]}),t.fitBounds(e,{padding:{top:100,right:100,bottom:100,left:100},considerRotation:!0})},extendBounds:function(){n();const e=new mapgl.LngLatBoundsClass({northEast:[...r.northEast],southWest:[...r.southWest]});e.extend([83.2381307,55.2313278]),e.extend([81.8050339,54.8416712]),a=new mapgl.Polygon(t,{coordinates:[[[e.southWest[0],e.northEast[1]],[e.southWest[0],e.southWest[1]],[e.northEast[0],e.southWest[1]],[e.northEast[0],e.northEast[1]],[e.southWest[0],e.northEast[1]]]]}),t.fitBounds(e,{padding:{top:100,right:100,bottom:100,left:100},considerRotation:!0})},clearMap:n};function n(){a&&(a.destroy(),a=void 0)}let a;o.add(i,"showBounds"),o.add(i,"extendBounds"),o.add(i,"clearMap");const r={northEast:[83.1381307,55.0313278],southWest:[82.8250339,54.9416712]}})(b_,z_),((t,e)=>{const o=e.addFolder("Sources & Layers");((t,e)=>{function o(){It&&(It.destroy(),It=void 0,t._impl.useOldStyles())}const i={addWithStyle:()=>{o(),t.setStyle(Lt,{iconsPath:"https://disk.2gis.com/styles/{id}",fontsPath:"https://mapgl.2gis.com/api/fonts",modelsPath:gt}),It=new mapgl.GeoJsonSource(t,{data:wt(t.getCenter())})},remove:o},n=e.addFolder("GeoJSON");n.add(i,"addWithStyle"),n.add(i,"remove")})(t,o),((t,e)=>{const o={addGeoJsonLayer:()=>{Ft||(Ft=new mapgl.GeoJsonSource(t,{data:wt(t.getCenter()),attributes:{demoCase:"point"}})),t.addLayer({type:"polygon",id:"ADDED_LAYER",filter:["match",["sourceAttr","demoCase"],["point"],!0,!1],style:{strokeColor:"#ff0000",strokeWidth:2,color:["interpolate",["linear"],["zoom"],9,"#0000ff40",12,"#0000ff30",14,"#0000ff20",16,"#0000ff10"]}},"house known type 2d")},addRasterTileLayer:()=>{Ft||(Ft=new mapgl.RasterTileSource(t,{url:(t,e,o)=>"https://placekitten.com/g/400/400",attributes:{foo:"asd"},attribution:"&copy; <b>PLACEKITTEN.COM</b>"})),St||(St=new mapgl.RasterTileSource(t,{url:(t,e,o)=>"https://picsum.photos/200",attributes:{foo:"asd"},attribution:"&copy; <b>PICSUM.PHOTOS API</b>"})),t.addLayer({type:"raster",id:"ADDED_LAYER",filter:["match",["sourceAttr","foo"],["asd"],!0,!1],style:{opacity:.5}})},addMeshLayer:()=>{Ft&&Ft.destroy(),Ft=new mapgl.GeoJsonSource(t,{dimensions:3,data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:Ct}}]},attributes:{demoCase:"MESH_LAYER"}}),t.removeLayer("MESH_LAYER"),t.addLayer({type:"mesh",id:"MESH_LAYER",filter:["match",["sourceAttr","demoCase"],["MESH_LAYER"],!0,!1],style:{strokeColor:"#ff0000",strokeWidth:2,color:"#888888"}})},removeLayer:()=>{Ft&&(Ft.destroy(),Ft=void 0),St&&(St.destroy(),St=void 0),t._impl.useOldStyles(),t.removeLayer("ADDED_LAYER")}},i=e.addFolder("Layers");Object.keys(o).forEach((t=>i.add(o,t)))})(t,o),function(t,e){const o=[82.91970216542019,55.02542312904931];let n,a,r,l=!1;function s(){return(0,i.mG)(this,void 0,void 0,(function*(){if(console.log("add custom layer"),l)return;l=!0,yield new Promise((t=>{if(window.THREE)return void t();const e=document.createElement("script");e.src="https://unpkg.com/three@0.126.0/build/three.min.js",e.onload=()=>{t()},document.body.appendChild(e)})),t.setCenter(o),t.setZoom(18),r=new THREE.Camera,r.updateMatrixWorld=()=>{},n=new THREE.WebGLRenderer({canvas:t.getCanvas(),context:t.getWebGLContext(),antialias:window.devicePixelRatio<2}),n.autoClear=!1;const e=new THREE.AmbientLight(4210752),i=new THREE.DirectionalLight(16777215,.8);i.position.set(0,0,1),a=new THREE.Scene,a.add(e,i);const s=new THREE.BoxGeometry(1,1,1),c=new THREE.MeshBasicMaterial({color:65280}),d=new THREE.Mesh(s,c),m=mapgl._J.utils.projectGeoToMap(o),h=4e3;d.scale.set(h,h,h),d.position.set(m[0],m[1],h/2),a.add(d)}))}function c(){r&&(r.matrixWorldInverse.fromArray(t.getProjectionMatrix()),n.resetState(),n.render(a,r))}const d={"добавить слой поверх всего":()=>{try{t.removeLayer("my")}catch(t){}t.addLayer({id:"my",type:"custom",render:c,onAdd:()=>s(),onRemove:()=>console.log("remove custom layer external callback")})},"добавить под лейблингом":()=>{try{t.removeLayer("my")}catch(t){}t.addLayer({id:"my",type:"custom",render:c,onAdd:()=>s(),onRemove:()=>console.log("remove custom layer external callback")},"porch")},удалить:()=>{try{t.removeLayer("my")}catch(t){}}},m=e.addFolder("Кастомный WebGL слой");Object.keys(d).forEach((t=>m.add(d,t)))}(t,o),function(t,e){const o=[82.980667,55.043583];function i(){At&&(At.destroy(),At=void 0,t._impl.useOldStyles())}const n={create:()=>{i(),At=new mapgl.ZenithSource(t,{appId:t._impl.state.appId,tileServer:"tile{subdomain}.maps.2gis.com",tileSet:t._impl.state.tileSet,tileProtocol:t._impl.state.tileProtocol,tileKey:t._impl.state.tileKey,subdomains:t._impl.state.subdomains,sourceAttributes:{sourceName:"zenith-custom-source"}}),t.setStyle({name:"Демо стиль для двух источников зенита",version:1,background:{color:"#fff"},icons:{},layers:[{type:"polygon",id:"kvar_green",filter:["all",["match",["sourceAttr","sourceName"],["zenith"],!0,!1],["match",["get","sublayer"],["Forest_quarter","Forest_quarter_z09","Forest_quarter_z11","Forest_quarter_z13"],!0,!1]],style:{color:["interpolate",["linear"],["zoom"],10,"hsl(80, 56%, 74%)",12,"hsl(81, 57%, 72%)",15,"hsl(81, 55%, 69%)",17,"hsl(83, 56%, 68%)"]}},{id:"house",type:"polygon",filter:["all",["match",["sourceAttr","sourceName"],["zenith-custom-source"],!0,!1],["match",["get","sublayer"],["Private_house"],!0,!1]],style:{color:"rgba(0, 0, 0, 0.5)",strokeColor:"rgba(0, 0, 0, 5)",strokeWidth:3}},{type:"line",id:"other roads background",filter:["all",["match",["sourceAttr","sourceName"],["zenith"],!0,!1],["match",["get","sublayer"],["Other_road","Uncovered_road","Other_road_pay","Uncovered_road_pay","Oneway_other_road","Oneway_uncovered_road","Other_road_z13","Other_road_bridge","Uncovered_road_bridge","Other_road_pay_bridge","Uncovered_road_pay_bridge"],!0,!1]],minzoom:13,style:{color:["interpolate",["linear"],["zoom"],12,"hsla(0, 0%, 78%, 0)",13,"#c6c6c6",16.5,"#cccccc"],width:["interpolate",["exponential",1.99],["zoom"],13,1.9,14,2,15,3.8,19,16]}}]},{iconsPath:"/assets/images",fontsPath:kt.Rq.defaultUrl,modelsPath:gt}),t.setCenter(o),t.setZoom(16)},almetievskTrees:()=>{i(),At=new mapgl.ZenithSource(t,{appId:t._impl.state.appId,tileServer:"tiles-test-trees.web-staging.2gis.ru",tileProtocol:"http",tileSet:t._impl.state.tileSet,tileKey:t._impl.state.tileKey,subdomains:t._impl.state.subdomains});const e=["Model_tree_coniferous_point","Model_tree_deciduous_point","Model_tree_mixed_point","Model_tree_palms_point","Model_tree_shrubs_point"];for(const o of e){const e=o.replace("Model_tree_","").replace("_point",""),i="tree-layer-"+e;t.removeLayer(i),t.addLayer({id:i,filter:["==",["get","db_sublayer"],o],type:"point",style:{textField:e.slice(0,2),textFont:"Noto_Sans",textFontSize:14}})}t.setCenter([52.300588,54.898886]),t.setZoom(18.32),t.setRotation(27),t.setPitch(25)},remove:i},a=e.addFolder("Zenith Source");a.add(n,"create"),a.add(n,"almetievskTrees"),a.add(n,"remove")}(t,o)})(b_,__),((t,e,o)=>{(0,i.mG)(void 0,void 0,void 0,(function*(){const i=e.addFolder("Regions"),n=(yield fetch("https://catalog.api.2gis.ru/2.0/region/list?fields=items.default_pos&key=webmaps").then((t=>t.json()))).result.items.reduce(((t,e)=>{const{name:o,id:i}=e,{lon:n,lat:a,zoom:r}=e.default_pos;return t[o]={center:[n,a],zoom:r,id:i},t}),{});i.add({region:"Новосибирск"},"region",Object.keys(n)).onChange((e=>{const{center:o,zoom:i}=n[e];t.setCenter(o,{animate:!1}),t.setZoom(i,{animate:!1})}));const a="65536",r="Universe",l=document.getElementById("stats"),s=document.getElementById("mods"),c=new Set,d={[a]:r};Object.entries(n).forEach((([t,{id:e}])=>{d[e]=t}));const m={statsVisible:o.showRegionStats};function h(e){e?(l.style.display="block",t.on("idle",p),t.on("movestart",g),s.addEventListener("click",u)):(l.style.display="none",t.off("idle",p),t.off("movestart",g),s.removeEventListener("click",u))}function p(){const e={},o=t._impl.modules.tileManager.getViewportTiles().filter((t=>"terrain"===t.type));let i=0;o.forEach((t=>{var o,n;i+=(null===(o=t.serverMetadata)||void 0===o?void 0:o.length)||0,null===(n=t.serverMetadata)||void 0===n||n.forEach((t=>{void 0===e[t.regionId]?e[t.regionId]=1:e[t.regionId]++}))}));let n=0;n=t.getZoom()>=kt.Sv.maxUniverseZoom+1?t._impl.modules.defaultSource.regionalTileLayer.getViewportTiles().length:t._impl.modules.defaultSource.universeTileLayer.getViewportTiles().length,c.forEach((t=>{e[t]=0}));const a=Object.keys(e).sort(((t,e)=>Number(t)-Number(e))).map((t=>({id:t,name:d[t]?d[t]:"",qty:e[t],disabled:c.has(Number(t))})));!function({regions:t,totalModQty:e,gridModQty:o}){const i=t.reduce(((t,e)=>t.concat(`\n            <tr>\n                <td>${e.id}</td>\n                <td>${e.name}</td>\n                <td>${e.qty}</td>\n                <td><input type="checkbox" ${e.disabled?"":"checked"}\n                    data-region="${e.id}"></td>\n            </tr>\n            `)),""),n=`\n        <tr>\n            <td></td>\n            <td>Всего</td>\n            <td>${e}</td>\n        </tr>\n        <tr>\n            <td></td>\n            <td>Сетка</td>\n            <td>${o}</td>\n        </tr>\n        `;g(),s.insertAdjacentHTML("beforeend",i.concat(n))}({regions:a,gridModQty:n,totalModQty:i})}function u(e){const o=e.target,i=o.getAttribute("data-region");i&&(o.checked?c.delete(Number(i)):c.add(Number(i)),t._impl.modules.defaultSource.setDisabledRegionsId(Array.from(c)),t._impl.useOldStyles())}function g(){s.innerHTML=""}h(o.showRegionStats),i.add(m,"statsVisible").onChange(h)}))})(b_,__,{showRegionStats:"regionStats"in f_}),((t,e,o)=>{const n={inspectTiles:!1};const a=document.createElement("div");a.style.position="absolute",a.style.display="none",a.style.border="1px solid #000000",a.style.background="rgba(255, 255, 255, 0.7)",a.style.padding="5px",a.style.pointerEvents="none",document.body.appendChild(a);const r={showTooltip:!1};e.add(r,"showTooltip").onChange((t=>{t||(a.style.display="none")})),e.add(n,"inspectTiles"),e.add(o,"showDefaultTileBounds",!!o.showDefaultTileBounds).onChange((()=>document.location.assign(ft(t,o)))),t.on("mousemove",(t=>{if(!t.target||!r.showTooltip)return;a.style.display="block",a.style.left=`${t.point[0]+5}px`,a.style.top=`${t.point[1]+5}px`;let e="";for(const o in t.target)e+=`<b>${o}</b>: ${t.target[o]}<br>`;a.innerHTML=e})),t.on("mouseout",(()=>{r.showTooltip||(a.style.display="none")}));t.on("click",(e=>(0,i.mG)(void 0,void 0,void 0,(function*(){n.inspectTiles&&function(e){const o=(0,zt.yq)(e),i=Math.min(Math.floor(t.getZoom()),kt.Sv.maxRegionalZoom),n=(0,Le.aq)(i),a=[Math.floor((o[0]+Math.pow(2,31))/n),Math.floor((o[1]+Math.pow(2,31))/n),i,i],r=(0,Le.rL)(Xd,t._impl.state.tileSet,t._impl.state.tileProtocol,t._impl.state.subdomains,a,t._impl.state.tileKey,t._impl.state.appId,t._impl.state.lang,t._impl.state.sessionId);fetch(r).then((t=>t.arrayBuffer())).then((t=>{let e=[];0!==t.byteLength&&(e=(0,Le.CJ)(t));const o=e.length,i=[`Clicked on tile: x=${a[0]}, y=${a[1]}, z=${a[2]}`,`Request URL: ${r}`];0===o?i.push("Server returned 0 tiles."):1===o?i.push("Server returned 1 tile:"):i.push(`Server returned ${o} tiles:`),e.forEach((t=>{const e=(t.data.byteLength/1024).toFixed(2);i.push(`  * Region ID = ${t.regionId}, metatileHash = ${(0,me.GG)(t.metatileHash)}, buffer size = ${e} KiB`)})),console.log(i.join("\n"))}))}(e.lngLat)}))))})(b_,Z_,y_),function(t,e){const o=e.addFolder("Camera");o.add(mapgl._J.config.camera,"fov",1,200).onChange((()=>t._impl.refresh()));const i={maxPitch:(n=t._impl.state.maxPitch,n/Math.PI*180)};var n;let a;function r(){a&&(a.style.top=`${t._impl.modules.camera.getHorizonPixelOffset()}px`)}o.add(i,"maxPitch",0,89,1).onChange((e=>{t.setMaxPitch(e,{animate:!1})})),o.add({showHorizonOffset:!1},"showHorizonOffset").onChange((e=>{e?(null==a||a.remove(),a=document.createElement("div"),a.style.position="absolute",a.style.zIndex="9",a.style.width="100%",a.style.height="5px",a.style.backgroundColor="#f00",a.style.top=`${t._impl.modules.camera.getHorizonPixelOffset()}px`,a.style.left="0",document.body.append(a),t.on("move",r)):(null==a||a.remove(),a=void 0,t.off("move",r))}))}(b_,__),((t,e)=>{function o(){Dg.reliefScale=+Gg.scale.toFixed(2),t.patchStyleState({terrainScale:Dg.reliefScale}),bt(t,Dg)}e.updateDisplay();const i=Object.keys(Ug);e.add(Gg,"region",i).onChange((e=>{const{center:o,zoom:i}=Ug[e];t.setCenter(o,{animate:!1}),t.setZoom(i,{animate:!1})}));const n={enable:()=>{Dg.satellite=!1,Dg.dem=!0,Zg&&Zg&&(Zg.destroy(),Zg=void 0),t._impl.setStyle(Bg,{iconsPath:"https://disk.2gis.com/styles/eb10e2c3-3c28-4b81-b74b-859c9c4cf47e",iconNameTemplate:"{name}",fontsPath:kt.Rq.defaultUrl}),t.once("styleload",(()=>{t._impl.modules.styleManager.setTerrainStyle({verticalScale:["interpolate",["linear"],["zoom"],11,0,12,["global","terrainScale"]],shadingIntensity:["interpolate",["linear"],["zoom"],13,0,14,Dg.shading||.19]}),o(),bt(t,Dg),t._impl.modules.demManager.setMeshMaxZoom(),t.patchStyleState({terrainEnabled:!0})}))},satellite:()=>{Zg||(Dg.dem=!0,Dg.satellite=!0,bt(t,Dg),Zg=new mapgl._J.RasterTileSource(t._impl,{minZoom:2,maxZoom:15,attributes:{name:"sattelite"},url:(t,e,o)=>`https://api.mapbox.com/v4/mapbox.satellite/${o}/${t}/${e}@2x.png?access_token=pk.eyJ1IjoidmxvYm9kYSIsImEiOiJja3M4Z2tva2gwM2JrMnhwNDU4emhubnN3In0.YDkASF0tFoMgVmZW6tZqIg`}),t._impl.setStyle(Kg,{rootUrl:`//${window.location.host}`,iconsPath:"/assets/images",iconNameTemplate:"{name}.svg",fontsPath:"https://mapgl.2gis.com/api/fonts"}),t.once("styleload",(()=>{t._impl.modules.styleManager.setTerrainStyle({verticalScale:["interpolate",["linear"],["zoom"],11,0,12,["global","terrainScale"]]}),o(),t._impl.modules.demManager.setMeshMaxZoom(13)})),t._impl.patchStyleState({terrainEnabled:!0}))},disable:()=>{t._impl.patchStyleState({terrainEnabled:!1})},debugViewport:()=>{qg&&qg.destroy(),Vg&&Vg.destroy(),Xg&&Xg.destroy(),$g&&$g.destroy(),Yg&&Yg.forEach((t=>t.destroy())),Jg&&Jg.forEach((t=>t.destroy())),Vg=new mapgl._J.Polygon(t._impl,{coordinates:[t._impl.state.demTilesBounds.map((t=>(0,zt.PA)(t)))],color:"#ff000044",strokeColor:"#ff0000"}),Jg=t._impl.modules.demManager.getFlatMapTextures().map((e=>new mapgl._J.Polygon(t._impl,{coordinates:[e.viewport.map((t=>(0,zt.PA)(t)))],strokeColor:"#000000",strokeWidth:4}))),qg=new mapgl._J.Polygon(t._impl,{coordinates:[t._impl.state.tilesBounds.map((t=>(0,zt.PA)(t)))],color:"#00000000",strokeColor:"#00ff00"}),Yg=t._impl.modules.demManager.getMeshTiles().map((e=>{const o=[[0,0,0,1],[1,0,0,1],[1,1,0,1],[0,1,0,1]].map((t=>(0,zt.PA)(we.fF([],t,e.modelMatrix))));return new mapgl._J.Polygon(t._impl,{coordinates:[o],strokeWidth:2})})),Xg=new mapgl.Marker(t,{coordinates:(0,zt.PA)(t._impl.state.center)}),$g=new mapgl.Marker(t,{coordinates:(0,zt.PA)(t._impl.modules.camera.position)})}};e.add(n,"enable"),e.add(n,"disable"),e.add(n,"satellite");const a=e.addFolder("Tools");a.add(Gg,"scale",0,5,.1).onChange(o),a.add(Gg,"maxPitch",45,80,1).onChange((()=>{t._impl.state.maxPitch=(0,ut.Id)(Gg.maxPitch),t._impl.state.pitch=(0,ut.Id)(Gg.maxPitch)})),a.add(n,"debugViewport"),t.once("styleload",(()=>{Dg.satellite&&Dg.dem?n.satellite():Dg.dem&&n.enable(),Dg.rampPreset&&l.setPoints(Dg.rampPreset)}));const r=(t,e=.01)=>{const o=[],i=1/t;for(let n=0;n<t;n++){const t=Math.min(n*i,.99);o.push([n*i,t],[(n+1)*i-e,t])}return o},l=new Rg([[0,0],[.5,.3],[.9,1]],{},[{name:"default",value:[[0,0],[.5,.3],[.9,.99]]},{name:"2-step",value:r(2)},{name:"3-step",value:r(3)},{name:"3-step smooth",value:r(3,.1)},{name:"5-step",value:r(5)},{name:"5-step smooth",value:r(5,.1)},{name:"7-step",value:r(7)},{name:"7-step smooth",value:r(7,.1)},{name:"10-step",value:r(10)},{name:"vector-like",value:[[0,0],[.39062,0],[.390625,.2],[.507812,.2],[.5078125,.4],[.6249,.4],[.625,.5],[.6914062,.5],[.69140625,.707],[.7148437,.707],[.71484375,.9],[.8398437,.9],[.83984375,.99],[1,.99]]}]);l.hide(),l.on("change",(0,Po.D)((([e,o])=>{console.log(o),function(t,e){const{imageManager:o,demManager:i}=t._impl.modules,n=t._impl.state;o.updatePreparedTexture(i.getHillshadeRampTextureId(),$n(n,e,256)),n.needRerender=!0,bt(t,Dg)}(t,e),Dg.rampPreset=o,bt(t,Dg)}),150)),document.body.appendChild(l.getContainer());const s=new Rg([[0,.1],[12,.1],[14,0]],{xDomain:[0,20]},[]);s.hide(),s.on("change",(0,Po.D)((([e])=>function(t,e){const o=t._impl.modules.styleManager.getStyle(t._impl.state.handyStyleId),i=null==o?void 0:o.layersById[o.layerIdToInnerId[899558]],n=null==o?void 0:o.layersById[o.layerIdToInnerId[957949]],a=Object.assign(Object.assign({},e),{argument:{type:"zoom"},steps:e.steps.map((t=>({key:t.key,value:{type:"color",value:[255,255,255,255*t.value]}})))});n&&"polygon"===n.type&&(n.maxzoom=20,n.style.color=a);const r=Object.assign(Object.assign({},e),{argument:{type:"zoom"},steps:e.steps.map((t=>({key:t.key,value:{type:"color",value:[0,0,0,255*t.value]}})))});i&&"polygon"===i.type&&(i.maxzoom=20,i.style.color=r);t._impl.state.needRerender=!0}(t,e)),150)),document.body.appendChild(s.getContainer());const c={enable:()=>{t._impl.useOldStyles()},lightingDirection:315,shadingIntensity:Dg.shading||.3,tuneRampTexture:()=>{l.isHidden()?(l.show(),s.hide()):l.hide()},tuneHillshade:()=>{s.isHidden()?(s.show(),l.hide()):s.hide()}},d=e.addFolder("Hillshade");function m(){const e=t._impl.modules.styleManager.getStyle(t._impl.state.handyStyleId),o=null==e?void 0:e.dem.style;o&&(o.shadingIntensity=c.shadingIntensity,o.lightingDirection=c.lightingDirection,Dg.shading=c.shadingIntensity,bt(t,Dg),t._impl.state.needRerender=!0)}d.add(c,"enable"),d.add(c,"lightingDirection",0,360).onChange(m),d.add(c,"shadingIntensity",0,1).onChange(m),d.add(c,"tuneRampTexture"),d.add(c,"tuneHillshade"),m();let h=[];const p={addMarkers:()=>{p.clearMarkers();const e=t._impl.modules.map.state.size;for(let t=0;t<=e[0];t+=64)for(let o=0;o<e[1];o+=64)u({point:[t,o]})},clearMarkers:()=>{h.forEach((t=>t.destroy())),h=[]},makeOnClick:!1},u=e=>{const o=t.getGroundPoint(e.point);o&&h.push(new mapgl.Marker(t,{coordinates:[o[0],o[1]]}))},g=e.addFolder("Ground");g.add(p,"makeOnClick").onChange((()=>{p.makeOnClick?t.on("click",u):(t.off("click",u),p.clearMarkers())})),g.add(p,"addMarkers"),g.add(p,"clearMarkers")})(b_,D_),((t,e,o)=>{e.add(o,"useThreeJs",!!o.useThreeJs).onChange((()=>document.location.assign(ft(t,o)))),t.on("styleload",(()=>{t.addLayer({id:"immersive-model-point",type:"model",style:{modelSrc:["get","model_src"],color:["match",["get","selected"],[!0],"#ff9387","#fff"],useThreeJs:o.useThreeJs,linkedIds:["get","building_id"]},filter:["match",["get","db_sublayer"],["Commercial_model"],!0,!1],minzoom:16,interactive:!0},"843132")})),e.add(d_,"place",s_).onChange((()=>function(){const{center:e,zoom:o}=l_.filter((t=>t.name===d_.place))[0];if(!e||!o)return;t.setCenter(e,{animate:!1}),t.setZoom(o,{animate:!1})}()));let i=d_.source,n=a();function a(){return new mapgl._J.GeoJsonTileSource(t._impl,{maxZoom:14,url:`${window.location.protocol}//${window.location.host}/assets/tiles/commercial/{z}/{x}/{y}.json`,ignoreMissingTiles:!0,identifyAsDefaultSource:!0})}e.add(d_,"source",c_).onChange((e=>{if(i!==e)switch(n.destroy(),i=e,e){case"mock":n=a();break;case"tile server":n=new mapgl._J.GeoJsonTileSource(t._impl,{maxZoom:14,url:"https://tileserver.web-staging.2gis.ru/v2/ald?ts=com_poi_web_int&x={x}&y={y}&z={z}&lang=ru",flipY:!0,ignoreMissingTiles:!0})}}));const r=[];let l=null;!function(t){t.on("styleload",(()=>{for(const e of a_)t.addLayer({id:`gltf-${e}`,type:"model",style:{modelSrc:e,scale:200,useThreeJs:!1},filter:["match",["sourceAttr","name"],[`gltf_${e}`],!0,!1],minzoom:14}),t.addModel(e,{url:`/assets/models/${e}.glb`})}))}(t);e.addFolder("Multi Tiles").add({count:10},"count",0,100,1).onFinishChange((e=>{const o=t._impl.modules.tileManager.getTileObjects();l={};for(let t=0;t<o.length;++t){const i=o[t],n=a_[Math.floor(Math.random()*a_.length)];l[n]||(l[n]={type:"FeatureCollection",features:[]}),g_(i,e,l[n].features)}!function(){if(r.forEach((t=>t.destroy())),r.length=0,!l)return;for(const e in l)r.push(new Gd(t,{attributes:{name:`gltf_${e}`},data:l[e]}))}()}));const s=e.addFolder("instancing");!function(t){t.on("styleload",(()=>{t.addLayer({id:"gltf-model",type:"model",style:{modelSrc:"test",useThreeJs:!1},filter:["match",["sourceAttr","name"],["gltfModels"],!0,!1],minzoom:14}),t.addLayer({id:"offsets-test",type:"model",style:{modelSrc:"test",offset:["literal",[["*",30,["+",-1,["get","x"]]],["*",30,["+",-1,["get","y"]]],["*",30,["get","z"]]]],useThreeJs:!1},filter:["match",["sourceAttr","test"],["xyz"],!0,!1],minzoom:14}),t.addModel("test",{url:"/assets/models/tree1.glb"})}))}(t);let c=null,d=null;const m={count:100,putOnClick:!1,remove:()=>{d=null,_()},offsetsTest:()=>{!function(t,e){const o={type:"FeatureCollection",features:[]};for(let t=0;t<3;t++)for(let i=0;i<3;i++)o.features.push({type:"Feature",geometry:{type:"Point",coordinates:e},properties:{x:t,y:i,z:0}});for(let t=1;t<3;t++)o.features.push({type:"Feature",geometry:{type:"Point",coordinates:e},properties:{x:0,y:0,z:t}});u_&&u_.destroy();u_=new Gd(t,{data:o,attributes:{test:"xyz"}})}(t,t.getCenter())}};e.add(m,"offsetsTest"),s.add(m,"count",0,1e3,1).onChange((()=>{d=m_(t.getBounds(),m.count),_()})),s.add(m,"putOnClick").onChange((e=>{e?t.on("click",f):t.off("click",f)})),s.add(m,"remove");const h=e.addFolder("trees"),p={scale:r_,opacity:1};!function(t,e,o){t.on("styleload",(()=>{t.addModel("coniferous",{url:"/assets/models/pine_d.glb"}),t.addModel("deciduous",{url:"/assets/models/tree_d.glb"}),t.addModel("mixed",{url:"/assets/models/mixtree_d.glb"}),t.addModel("palms",{url:"/assets/models/palm_d.glb"}),t.addModel("shrubs",{url:"/assets/models/bush_d.glb"}),p_(t,{scale:e},o)}))}(t,p.scale,p.opacity),h.add(p,"scale",0,5,.05).onChange((()=>{p_(t,{scale:p.scale},p.opacity)})),h.add(p,"opacity",0,1,.05).onChange((()=>{p_(t,{scale:p.scale},p.opacity)}));const u=e.addFolder("random trees"),g={navigateToTrees:()=>{window.location.href="/?zoom=20.000&lng=52.3004776&lat=54.8984498&rotation=30&pitch=69&tileServer=tiles-test-trees.web-staging.2gis.ru&maxPitch=89.00000000000001"},scaleMin:.6,scaleMax:.7999999999999999,rotationZMin:0,rotationZMax:360,offsetXYMin:-1,offsetXYMax:1,randomCase:()=>{p_(t,{scale:["random",g.scaleMin,g.scaleMax],rotation:["literal",[0,0,["random",g.rotationZMin,g.rotationZMax]]],offset:["literal",[["random",g.offsetXYMin,g.offsetXYMax],["random",g.offsetXYMin,g.offsetXYMax],0]]},1)},noRandomCase:()=>{p_(t,{scale:r_},1)}};function _(){d?c?c.setData(d):c=new Gd(t,{attributes:{name:"gltfModels"},data:d}):c&&(c.destroy(),c=null)}function f(e){d||(d=m_(t.getBounds(),0)),d.features.push({type:"Feature",properties:{},geometry:{type:"Point",coordinates:e.lngLat}}),_()}u.add(g,"navigateToTrees"),u.add(g,"scaleMin",0,1.4,.02).onChange((()=>{g.randomCase()})),u.add(g,"scaleMax",0,1.4,.02).onChange((()=>{g.randomCase()})),u.add(g,"rotationZMin",0,360,1).onChange((()=>{g.randomCase()})),u.add(g,"rotationZMax",0,360,1).onChange((()=>{g.randomCase()})),u.add(g,"offsetXYMin",-5,5,1).onChange((()=>{g.randomCase()})),u.add(g,"offsetXYMax",-5,5,1).onChange((()=>{g.randomCase()})),u.add(g,"randomCase"),u.add(g,"noRandomCase")})(b_,U_,y_),((t,e)=>{const o=e.addFolder("Textured polygons"),i="#46C7A1";function n(e){"default"!==e?t._impl.setStyle(JSON.parse(e)):t._impl.useOldStyles()}const a={version:1,name:"2gis_textured_polygons",background:{color:"#f6f2de"},icons:{"graph-paper":{url:"assets/images/graph-paper.svg"},wave:{url:"assets/images/wave.svg"},"wave-transparent":{url:"assets/images/wave-transparent.svg"}},layers:[]},r={default:"default","graph-paper":JSON.stringify(Object.assign(Object.assign({},a),{layers:[{type:"polygon",style:{color:i,textureImage:"graph-paper",textureSize:[140,80],textureOpacity:1},filter:["match",["get","db_sublayer"],["Forest_quarter"],!0,!1]}]})),waves:JSON.stringify(Object.assign(Object.assign({},a),{layers:[{type:"polygon",style:{color:i,textureImage:["step",["zoom"],"wave-transparent",13.5,"",15,"wave"],textureSize:[256,256],textureOpacity:1},filter:["match",["get","sublayer"],["Water_area"],!0,!1]}]}))},l={style:"default",textureOpacity:1,color:i},s=o.add(l,"style",Object.keys(r)).onChange((t=>{n(r[t])}));function c(t){Object.keys(r).forEach((e=>{if("default"===e)return;const o=JSON.parse(r[e]);o.layers[0].style[this.property]=t,r[e]=JSON.stringify(o)})),n(r[s.getValue()])}o.addColor(l,"color").onChange(c),o.add(l,"textureOpacity",0,1,.01).onChange(c)})(b_,__),function(t,e){const o=e.addFolder("Jakarta cases"),i=o.addFolder("Dynamic objects"),n=o.addFolder("Sources & Layers");!function(t,e){const o=e.addFolder("Test");let i;const n={addMarker(){this.removeMarker(),i=new mapgl._J.Marker(t,{coordinates:t.getCenter()})},removeMarker(){i&&(i.destroy(),i=void 0)}};Object.keys(n).forEach((t=>o.add(n,t)))}(t,o),jt(t,i),((t,e)=>{const o={addMarkers:()=>Ot(t),setContent(){Tt.length||Ot(t),Tt.forEach(((t,e)=>{const o=document.createElement("div");o.innerHTML=`\n                    <div style="\n                        box-sizing: border-box;\n                        box-shadow: 1px 1px 2px rgba(0, 0, 0, .3);\n                        background: lightgrey;\n                        border-radius: 2px;\n                        padding: 12px;\n                        font-family: SuisseIntl, Helvetica, Arial, sans-serif;\n                        font-size: 12px;\n                        line-height: 1.2;\n                        width: 180px;\n                        height: 80px;\n                        color: #5d5d5d;\n                        user-select: none;\n                        display: flex;\n                        align-items: center;\n                    ">\n                        Маркер №:${e}\n                    </div>\n                `,t.setContent(o),t.getHtmlElement().addEventListener("click",(e=>console.log("Only new click handler on HtmlMarker",{originalEvent:e,m:t})))}))},remove:()=>Et()},i=e.addFolder("HtmlMarkers");i.add(o,"addMarkers"),i.add(o,"setContent"),i.add(o,"remove")})(t,i),((t,e)=>{const o={pinMarker:()=>Rt(t),showText(){Wt.length||Rt(t),Wt.forEach((t=>{const e=document.createElement("div");e.innerHTML='\n                    <div class="wrapper">\n                        <div class="marker">\n                            <div class="substrate"><div class="substrateInner"></div></div>\n                            <div class="inner"><div class="icon">\n                                <svg width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Слой_1" x="0px" y="0px" viewBox="0 0 400 400" style="enable-background:new 0 0 400 400;" xml:space="preserve">\n                                    <path fill="#BC0F0F" d="M64.8,145.4H24.3c-5.1,0-9.3,4.2-9.3,9.3s4.2,9.3,9.3,9.3h3.1v74.8h-3.1c-5.1,0-9.3,4.2-9.3,9.3   c0,5.1,4.2,9.3,9.3,9.3h40.5c31,0,56.1-25,56.1-56.1S95.9,145.4,64.8,145.4z M91.2,227.9c-7,7-16.4,11-26.4,11H46.1v-74.8h18.7   c20.7,0,37.4,16.7,37.4,37.4C102.2,211.5,98.2,220.9,91.2,227.9z"/>\n                                    <path fill="#BC0F0F" d="M376.3,241.6c3.6,3.6,3.6,9.6,0,13.2c-1.7,1.7-4.1,2.7-6.6,2.7h-34.3c-5.1,0-9.3-4.2-9.3-9.3   c0-5.1,4.2-9.3,9.3-9.3l0,0h12.5v-56.1l-23.7,46.7h-15l-23.7-46.7v56.1H298c5.1,0,9.3,4.2,9.3,9.3c0,5.1-4.2,9.3-9.3,9.3h-34.3   c-5.1,0-9.3-4.2-9.3-9.3c0-5.1,4.2-9.3,9.3-9.3l0,0h3.1v-74.8h-3.1c-5.1,0-9.3-4.2-9.3-9.3c0-5.1,4.2-9.3,9.3-9.3l0,0h23.8   l14.7,28.9l14.5,28.5l14.5-28.5l14.7-28.9h23.8c5.1,0,9.3,4.2,9.3,9.3s-4.2,9.3-9.3,9.3h-3.1v74.8h3.1   C372.1,238.9,374.5,239.9,376.3,241.6z"/>\n                                    <path fill="#BC0F0F" d="M162.6,172.5c-0.1,6.9-1.7,13.6-4.5,19.8c-2.1,5-4.4,9.8-6.2,14.8c-2.4,5.7-3.6,11.7-3.6,17.8   c0,3.1,0.7,6.1,2.1,9c2.7,5,6.6,6.9,12.2,7.4c7.8,0.6,14.3-3.7,16.9-11.3c1.2-3.1,1.5-6.5,0.9-9.7c-0.1-0.7-0.4-1.5-0.7-2.1   c-1.1-2.1-3.6-3.1-5.9-2.2c-1,0.5-1.7,1.4-2,2.5c-0.4,1.4-0.4,2.9-0.1,4.4c0.2,1.6,0.4,3.4,0.2,5c-0.4,2.6-2,5-4.4,6.1   c-4.5,2.5-10.1,0.9-12.6-3.6c-0.5-1-0.9-2-1-3.1c-0.7-5.2-0.1-10.5,1.9-15.3c1.7-4.9,5.1-9,9.6-11.7c7.6-4.2,17.1-3.5,23.8,2   c5.1,4,8.5,9.8,9.5,16.3c2.1,14.1-2.6,25.5-13.5,34.6c-3.6,2.9-7.8,4.9-12.5,5.7c-12.8,2.7-24.2-0.2-33.6-9.5   c-5.4-5.2-8.6-12.3-9.1-19.8c-0.7-10.2,0.9-20.3,4.7-29.8c1.9-4.9,4.1-9.6,6.1-14.3c1.5-3.2,2.5-6.7,3-10.3   c0.5-5.6-0.7-11.2-3.5-16.2c-2-3.5-1.6-7.8,1-11c3.4-3.9,9.2-4.2,13.1-0.7c0.7,0.6,1.4,1.5,1.9,2.4c3.4,5.7,5.4,12.2,5.9,18.8   C162.3,169.5,162.4,171,162.6,172.5z"/>\n                                    <path fill="#BC0F0F" d="M203.2,154.5c2.4-4.2,5.4-8.1,8.8-11.5c3.5-3.5,9.1-3.4,12.5,0.1c1.1,1.1,2,2.6,2.4,4.1c0.9,3,0,6.2-2.4,8.3   c-2.9,2.9-5.2,6.1-7,9.6c-0.9,1.6-1.4,3.2-1.7,5c-0.5,3.2,1.9,6.4,5.1,6.7c0.1,0,0.2,0,0.2,0c3.5,0.2,6.5-2.2,6.7-5.6   c0.1-0.7,0-1.6-0.2-2.4c-1.6-4.4,1.6-8.6,4.9-10c4.4-1.9,9.3,0,11.5,4.2c1.7,3.7,2.1,8.1,1,12.1c-2.4,10-10.6,17.3-20.8,18.7   c-8.7,1.1-15.8-2-21.2-8.8C194.3,173.1,200.4,159.4,203.2,154.5z"/>\n                                    <path fill="#BC0F0F" d="M212.5,232.3c0.2-7.1,2-14.2,5.1-20.6c1.2-2.6,2.6-5.2,4.2-7.7c2.7-4.2,8.3-5.6,12.7-2.9s5.6,8.3,2.9,12.7   c0,0.1-0.1,0.1-0.1,0.2c-2.7,4.4-4.7,9.1-5.7,14.1c-0.4,2-0.5,4-0.4,6.1c0.2,2.7,1.6,5.4,3.9,7.1c3.9,3.4,4.2,9.2,0.9,13   c-3.2,3.7-8.8,4.2-12.7,1.1c-5.7-4.7-9.5-11.5-10.2-18.8C212.8,235.1,212.6,233.8,212.5,232.3z"/>\n                                </svg>\n                            </div>\n                            <div class="text">Тут рекламный текст</div></div>\n                        </div>\n                    </div>\n                    <style>\n                        .wrapper {\n                            display: flex;\n                            justify-content: center;\n                            align-items: center;\n                            width: 146px;\n                        }\n                        .marker {\n                            position: relative;\n                            width: 26px;\n                            height: 26px;\n                            border-radius: 2px;\n                            transition: width 0.3s ease-in-out;\n                            background: rgba(255, 255, 255, .8);\n                        }\n                        .active .marker {\n                            width: 146px;\n                        }\n                        .substrate {\n                            position: absolute;\n                            border-radius: 2px;\n                            width: 100%;\n                            height: 100%;\n                            z-index: 0;\n                            opacity: .8;\n                            box-shadow: 0 2px 4px rgba(0,0,0,.2);\n                        }\n                        .substrateInner {\n                            position: absolute;\n                            border-radius: 2px;\n                            width: 100%;\n                            height: 100%;\n                            background: rgb(255, 255, 255);\n                        }\n                        .substrateInner:after {\n                            position: absolute;\n                            bottom: -3px;\n                            left: 50%;\n                            transform: translateX(-50%) rotate(45deg);\n                            content: "";\n                            display: block;\n                            border: 4px solid transparent;\n                            border-right-color: rgb(255, 255, 255);\n                            border-bottom-color: rgb(255, 255, 255);\n                            box-shadow: 2px 2px 1px rgba(0,0,0,.1);\n                            width: 0;\n                            height: 0;\n                        }\n\n                        .inner {\n                            padding: 2px;\n                            box-sizing: border-box;\n                            position: relative;\n                            display: flex;\n                            align-items:center;\n                            justify-content: space-between;\n                            z-index: 2;\n                            width: 100%;\n                            height: 100%;\n                            border-radius: 2px;\n\n                        }\n                        .icon{\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            transition: margin-left 0.3s ease-in-out;\n                            margin-left: 0;\n                        }\n                        .active .icon {\n                            margin-left: 4px;\n                        }\n                        .text {\n                            box-sizing: border-box;\n                            padding: 0 8px;\n                            color: #3866ed;\n                            font: 10px/10px Helvetica;\n                            width: 0;\n                            opacity: 0;\n                            transition: width 0s ease-in-out 0.3s,\n                                        opacity .3s ease-in-out .3s;\n                            white-space: nowrap;\n                        }\n                        .active .text {\n                            width: auto;\n                            opacity: 1;\n                        }\n\n                    </style>\n                        ',t.setContent(e),t.setLabelingSize(146,26),t.setOffset([-73,-43]),t.getHtmlElement().addEventListener("click",(e=>console.log("Only new click handler on HtmlMarker",{originalEvent:e,m:t}))),setTimeout((()=>{t.getHtmlElement().classList.add("active")}),10)}))},remove:()=>Bt()},i=e.addFolder("HtmlMarkersPinnedToPoi");i.add(o,"pinMarker"),i.add(o,"showText"),i.add(o,"remove")})(t,i),ce(t,n),((t,e)=>{let o;const i={add(){a(),o=new mapgl._J.Rect(t,{center:t.getCenter(),color:"#000000aa",height:1e3,width:2e3,interactive:!0,maxZoom:20}),o.on("click",(t=>console.log(t,o)))},remove:a},n=e.addFolder("Rect");function a(){o&&(o.destroy(),o=void 0)}n.add(i,"add"),n.add(i,"remove")})(t,i),((t,e)=>{const o=e.addFolder("PointLabel");Vt(t,o),qt(t,o)})(t,i),((t,e)=>{const o=Math.random,i=[],n=e.addFolder("DashedPolylines"),a={add(){const e=t.getCenter(),n=1+Math.ceil(5*o()),a=[];for(let t=0;t<n;t++)a.push([e[0]+.4*(o()-.5),e[1]+.2*(o()-.5)]);const r=new mapgl._J.DashedPolyline(t,{coordinates:a,dashLength:14,dash2Length:56,gapLength:28,dashColor:"#0000ff",dash2Color:"#ffffff",width:["interpolate",["linear"],["zoom"],8,4,14,12,16,36],width2:["interpolate",["linear"],["zoom"],8,6,14,20,16,40],showAnimation:{easing:"linear",duration:1e3,durationRange:{start:.5,end:.9}}});r.on("click",(t=>{console.log(t,r)})),r.on("mouseover",(()=>{r.setStyle({dashColor:"#ff0000",dash2Color:"#00ff00"})})),r.on("mouseout",(()=>{r.setStyle({dashColor:"#0000ff",dash2Color:"#ffffff"})})),i.push(r)},remove(){const t=i.shift();t&&t.remove()}};n.add(a,"add"),n.add(a,"remove")})(t,i),((t,e)=>{const o={add(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),icon:"assets/images/marker.png",hoverIcon:"assets/images/markerHover.png",anchor:[11,32],hoverAnchor:[11,32]}),Nt.on("click",(t=>{console.log(t,Nt)}))},changeIcon(){Nt?Nt.setIcon({icon:"assets/images/airport_30_30.png"}):alert("Вначале создай маркер, а потом меняй ему иконку")},changeHoverIcon(){Nt?Nt.setHoverIcon({icon:"assets/images/markerHoverReverted.png",anchor:[11,0]}):alert("Вначале создай маркер, а потом меняй ему иконку")},removeHoverIcon(){Nt?Nt.setHoverIcon():alert("Вначале создай маркер, а потом меняй ему иконку")},addLabeled(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),icon:"assets/images/marker.png",hoverIcon:"assets/images/markerHover.png",anchor:[11,32],hoverAnchor:[11,32],label:{text:"The marker's label.\nSecond Line",fontSize:16}}),Nt.on("click",(t=>{console.log(t,Nt)}))},addArabic(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),icon:"assets/images/marker.png",hoverIcon:"assets/images/markerHover.png",anchor:[11,32],hoverAnchor:[11,32],label:{text:"Привет\nلا\nраз الله أكبر два",fontSize:16}}),Nt.on("click",(t=>{console.log(t,Nt)}))},addLabeledTooltip(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),icon:"assets/images/marker.png",hoverIcon:"assets/images/markerHover.png",anchor:[11,32],hoverAnchor:[11,32],label:{text:"The marker's label.\nSecond Line",fontSize:16,anchor:[.5,0],offset:[0,20],image:{url:"assets/images/tooltip-top-symmetric.svg",size:[100,50],stretchX:[[10,40],[60,90]],stretchY:[[20,40]],padding:[20,10,10,10]}}}),Nt.on("click",(t=>{console.log(t,Nt)}))},changeLabel(){Nt?Nt.setLabel({text:`Я новая №${Math.round(100*Math.random())} подпись маркера!`,fontSize:20,color:"#00ff00",haloColor:"#ff0000",haloRadius:1}):alert("Вначале создай маркер, а потом меняй ему подпись")},removeLabel(){Nt?Nt.setLabel():alert("Вначале создай маркер, а потом меняй ему подпись")},addAndChangeLabel(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),label:{text:"With label",color:"#ff0000"}}),Nt.setLabel({text:"newnewnew",color:"#0000ff"})},addDraggable(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),icon:"assets/images/marker.png",hoverIcon:"assets/images/markerHover.png",anchor:[11,32],hoverAnchor:[11,32],draggable:!0}),Nt.on("click",(t=>{console.log(t,Nt)}))},addSpinner(){i(),Nt=new mapgl._J.Marker(t,{coordinates:t.getCenter(),icon:"assets/images/marker.png",hoverIcon:"assets/images/markerHover.png",anchor:[11,32],hoverAnchor:[11,32],draggable:!0});let e=0,o=0;const n=t=>{if(!Nt)return;const i=t-o;o=t,e+=.7*i,Nt.setRotation(e),Dt=requestAnimationFrame(n)};Dt=requestAnimationFrame(n)},remove:i};function i(){Nt&&(cancelAnimationFrame(Dt),Nt.destroy(),Nt=void 0)}Object.keys(o).forEach((t=>e.add(o,t)))})(t,i.addFolder("Markers")),((t,e)=>{let o;e.add({add:function(){o=new mapgl._J.OnlineMarker(t,{coordinates:t.getCenter(),icon:{url:"assets/images/marker.png",anchor:[11,32],size:[22,34]},zIndex:0}),o.on("click",(t=>{console.log(t,o)})),o.on("mouseover",(()=>{o&&o.setIcon({url:"assets/images/markerHover.png",anchor:[11,32],size:[22,34]})})),o.on("mouseout",(()=>{o&&o.setIcon({url:"assets/images/marker.png",anchor:[11,32],size:[22,34]})}))}},"add"),e.add({changeIcon:function(){o&&o.setIcon({url:"assets/images/markerActive.png",anchor:[11,32],size:[22,34]})}},"changeIcon"),e.add({remove:function(){o&&o.destroy()}},"remove")})(t,i.addFolder("OnlineMarkers")),((t,e)=>{const o="roadPolygon",i={add:()=>{i.remove(),t.addLayer({id:o,type:"roadPolygon",filter:["match",["get","sublayer"],["Bike_road_real_width","Federal_road_real_width","Forest_road_real_width","Intercity_road_real_width","Internal_road_real_width","Magistral_road_real_width","Main_road_real_width","Other_road_real_width","Pedestrian_road_real_width","Uncovered_road_real_width"],!0,!1],style:{color:"#ff00009f",strokeColor:"#b0004660",laneWidth:3.75}})},remove:()=>{t.removeLayer(o)}};e.add(i,"add"),e.add(i,"remove")})(t,o.addFolder("WideRoads"))}(b_._impl,__)},6385:(t,e,o)=>{o.d(e,{Z:()=>n});var i=o(2397);function n(t,e,o,n,l,c,d,m){const h=(void 0===m.dimensions?2:m.dimensions)+1;if(n/=e,c>=(o/=e)&&d<n)return t;if(d<o||c>=n)return null;const p=[];for(const e of t){const t=e.geometry;let c=e.type;const d=0===l?e.minX:e.minY,u=0===l?e.maxX:e.maxY;if(d>=o&&u<n){p.push(e);continue}if(u<o||d>=n)continue;let g=[];if("Point"===c||"MultiPoint"===c)a(t,g,o,n,l,h);else if("LineString"===c)r(t,g,o,n,l,!1,m.lineMetrics,h);else if("MultiLineString"===c)s(t,g,o,n,l,!1,h);else if("Polygon"===c)s(t,g,o,n,l,!0,h);else if("MultiPolygon"===c)for(const e of t){const t=[];s(e,t,o,n,l,!0,h),t.length&&g.push(t)}if(g.length){if(m.lineMetrics&&"LineString"===c){for(const t of g)p.push((0,i.Z)(e.id,c,t,e.tags,e.index,h));continue}"LineString"!==c&&"MultiLineString"!==c||(1===g.length?(c="LineString",g=g[0]):c="MultiLineString"),"Point"!==c&&"MultiPoint"!==c||(c=g.length===h?"Point":"MultiPoint"),p.push((0,i.Z)(e.id,c,g,e.tags,e.index,h))}}return p.length?p:null}function a(t,e,o,i,n,a=3){for(let r=0;r<t.length;r+=a){const l=t[r+n];if(l>=o&&l<=i){c(e,t[r],t[r+1],t[r+2]);for(let o=3;o<a;o++)e.push(t[r+o])}}}function r(t,e,o,i,n,a,r,s=3){let h=l(t);const p=0===n?d:m;let u,g,_=t.start;for(let d=0;d<t.length-s;d+=s){const m=t[d],f=t[d+1],y=t[d+2],b=t[d+s],x=t[d+s+1],v=0===n?m:f,w=0===n?b:x;let z=!1;if(r&&(u=Math.sqrt(Math.pow(m-b,2)+Math.pow(f-x,2))),v<o){if(w>o){g=p(h,m,f,b,x,o);for(let e=3;e<s;e++){const o=t[d+e];h.push((t[d+s+e]-o)*g+o)}r&&(h.start=_+u*g)}}else if(v>i){if(w<i){g=p(h,m,f,b,x,i);for(let e=3;e<s;e++){const o=t[d+e];h.push((t[d+s+e]-o)*g+o)}r&&(h.start=_+u*g)}}else{c(h,m,f,y);for(let e=3;e<s;e++)h.push(t[d+e])}if(w<o&&v>=o){g=p(h,m,f,b,x,o);for(let e=3;e<s;e++){const o=t[d+e];h.push((t[d+s+e]-o)*g+o)}z=!0}if(w>i&&v<=i){g=p(h,m,f,b,x,i);for(let e=3;e<s;e++){const o=t[d+e];h.push((t[d+s+e]-o)*g+o)}z=!0}!a&&z&&(r&&(h.end=_+u*g),e.push(h),h=l(t)),r&&(_+=u)}let f=t.length-s;const y=t[f],b=t[f+1],x=t[f+2],v=0===n?y:b;if(v>=o&&v<=i){c(h,y,b,x);for(let e=3;e<s;e++)h.push(t[f+e])}if(f=h.length-s,a&&f>=3&&(h[f]!==h[0]||h[f+1]!==h[1])){c(h,h[0],h[1],h[2]);for(let t=3;t<s;t++)h.push(h[t])}h.length&&e.push(h)}function l(t){const e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function s(t,e,o,i,n,a,l){for(const s of t)r(s,e,o,i,n,a,!1,l)}function c(t,e,o,i){t.push(e,o,i)}function d(t,e,o,i,n,a){const r=(a-e)/(i-e);return c(t,a,o+(n-o)*r,1),r}function m(t,e,o,i,n,a){const r=(a-o)/(n-o);return c(t,e+(i-e)*r,a,1),r}},1209:(t,e,o)=>{o.d(e,{Z:()=>a});var i=o(866),n=o(2397);function a(t,e){const o=[];if("FeatureCollection"===t.type)for(let i=0;i<t.features.length;i++)r(o,t.features[i],e,i);else"Feature"===t.type?r(o,t,e,0):r(o,{geometry:t},e,0);return o}function r(t,e,o,i){if(!e.geometry)return;const a=e.geometry.coordinates,d=e.geometry.type,m=Math.pow(o.tolerance/((1<<o.maxZoom)*o.extent),2);let h=[],p=e.id;if(o.promoteId?p=e.properties[o.promoteId]:o.generateId&&(p=i||0),"Point"===d)l(a,h,o.dimensions);else if("MultiPoint"===d)for(const t of a)l(t,h,o.dimensions);else if("LineString"===d)s(a,h,m,!1,o.dimensions);else if("MultiLineString"===d){if(o.lineMetrics){for(const r of a)h=[],s(r,h,m,!1,o.dimensions),t.push((0,n.Z)(p,"LineString",h,e.properties,i,o.dimensions+1));return}c(a,h,m,!1,o.dimensions)}else if("Polygon"===d)c(a,h,m,!0,o.dimensions);else{if("MultiPolygon"!==d){if("GeometryCollection"===d){for(const n of e.geometry.geometries)r(t,{id:p,geometry:n,properties:e.properties},o,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const t of a){const e=[];c(t,e,m,!0,o.dimensions),h.push(e)}}t.push((0,n.Z)(p,d,h,e.properties,i,o.dimensions+1))}function l(t,e,o=2){e.push(d(t[0]),m(t[1]),0);for(let i=2;i<o;i++)e.push(t[i])}function s(t,e,o,n,a=2){let r,l,s=0;for(let o=0;o<t.length;o++){const i=d(t[o][0]),c=m(t[o][1]);e.push(i,c,0);for(let i=2;i<a;i++)e.push(t[o][i]);o>0&&(s+=n?(r*c-i*l)/2:Math.sqrt(Math.pow(i-r,2)+Math.pow(c-l,2))),r=i,l=c}const c=e.length-(a+1);e[2]=1,(0,i.Z)(e,0,c,o,a),e[c+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function c(t,e,o,i,n=2){for(let a=0;a<t.length;a++){const r=[];s(t[a],r,o,i,n),e.push(r)}}function d(t){return t/360+.5}function m(t){const e=Math.sin(t*Math.PI/180),o=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return o<0?0:o>1?1:o}},2397:(t,e,o)=>{function i(t,e,o,i,a,r=3){const l={id:null==t?null:t,index:a,type:e,geometry:o,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===e||"MultiPoint"===e||"LineString"===e)n(l,o,r);else if("Polygon"===e)n(l,o[0],r);else if("MultiLineString"===e)for(const t of o)n(l,t,r);else if("MultiPolygon"===e)for(const t of o)n(l,t[0],r);return l}function n(t,e,o=3){for(let i=0;i<e.length;i+=o)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}o.d(e,{Z:()=>i})},5378:(t,e,o)=>{o.d(e,{Z:()=>h,h:()=>s});var i=o(1209),n=o(6385),a=o(4534),r=o(6530),l=o(4887);const s={Points:1,Lines:2,Polygons:3},c={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,generateIndex:!1,debug:0,dimensions:2};class d{constructor(t,e){const o=(e=this.options=function(t,e){for(const o in e)t[o]=e[o];return t}(Object.create(c),e)).debug;if(o&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");let n=(0,i.Z)(t,e);this.tiles={},this.tileCoords=[],o&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=(0,a.Z)(n,e),n.length&&this.splitTile(n,0,0,0),o&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(t,e,o,i,a,r,s){const c=[t,e,o,i],d=this.options,h=d.debug;for(;c.length;){i=c.pop(),o=c.pop(),e=c.pop(),t=c.pop();const p=1<<e,u=m(e,o,i);let g=this.tiles[u];if(!g&&(h>1&&console.time("creation"),g=this.tiles[u]=(0,l.Z)(t,e,o,i,d),this.tileCoords.push({z:e,x:o,y:i}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,o,i,g.numFeatures,g.numPoints,g.numSimplified),console.timeEnd("creation"));const t=`z${e}`;this.stats[t]=(this.stats[t]||0)+1,this.total++}if(g.source=t,null==a){if(e===d.indexMaxZoom||g.numPoints<=d.indexMaxPoints)continue}else{if(e===d.maxZoom||e===a)continue;if(null!=a){const t=a-e;if(o!==r>>t||i!==s>>t)continue}}if(g.source=null,0===t.length)continue;h>1&&console.time("clipping");const _=.5*d.buffer/d.extent,f=.5-_,y=.5+_,b=1+_;let x=null,v=null,w=null,z=null,F=(0,n.Z)(t,p,o-_,o+y,0,g.minX,g.maxX,d),S=(0,n.Z)(t,p,o+f,o+b,0,g.minX,g.maxX,d);t=null,F&&(x=(0,n.Z)(F,p,i-_,i+y,1,g.minY,g.maxY,d),v=(0,n.Z)(F,p,i+f,i+b,1,g.minY,g.maxY,d),F=null),S&&(w=(0,n.Z)(S,p,i-_,i+y,1,g.minY,g.maxY,d),z=(0,n.Z)(S,p,i+f,i+b,1,g.minY,g.maxY,d),S=null),h>1&&console.timeEnd("clipping"),c.push(x||[],e+1,2*o,2*i),c.push(v||[],e+1,2*o,2*i+1),c.push(w||[],e+1,2*o+1,2*i),c.push(z||[],e+1,2*o+1,2*i+1)}}getTile(t,e,o){t=+t,e=+e,o=+o;const i=this.options,{extent:n,debug:a}=i;if(t<0||t>24)return null;const l=1<<t,s=m(t,e=e+l&l-1,o);if(this.tiles[s])return(0,r.Z)(this.tiles[s],n,i.dimensions);a>1&&console.log("drilling down to z%d-%d-%d",t,e,o);let c,d=t,h=e,p=o;for(;!c&&d>0;)d--,h>>=1,p>>=1,c=this.tiles[m(d,h,p)];return c&&c.source?(a>1&&(console.log("found parent tile z%d-%d-%d",d,h,p),console.time("drilling down")),this.splitTile(c.source,d,h,p,t,e,o),a>1&&console.timeEnd("drilling down"),this.tiles[s]?(0,r.Z)(this.tiles[s],n,i.dimensions):null):null}}function m(t,e,o){return 32*((1<<t)*o+e)+t}function h(t,e){return new d(t,e)}},866:(t,e,o)=>{function i(t,e,o,a,r=2){const l=r+1;let s=a;const c=o-e>>1;let d,m=o-e;const h=t[e],p=t[e+1],u=t[o],g=t[o+1];for(let i=e+l;i<o;i+=l){const e=n(t[i],t[i+1],h,p,u,g);if(e>s)d=i,s=e;else if(e===s){const t=Math.abs(i-c);t<m&&(d=i,m=t)}}s>a&&(d-e>l&&i(t,e,d,a,r),t[d+2]=s,o-d>l&&i(t,d,o,a,r))}function n(t,e,o,i,n,a){let r=n-o,l=a-i;if(0!==r||0!==l){const s=((t-o)*r+(e-i)*l)/(r*r+l*l);s>1?(o=n,i=a):s>0&&(o+=r*s,i+=l*s)}return r=t-o,l=e-i,r*r+l*l}o.d(e,{Z:()=>i})},4887:(t,e,o)=>{function i(t,e,o,i,a){const r=e===a.maxZoom?0:a.tolerance/((1<<e)*a.extent),l={features:[],numPoints:0,numSimplified:0,numFeatures:t.length,source:null,x:o,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const e of t)n(l,e,r,a);return l}function n(t,e,o,i){const n=e.geometry,r=e.type,l=i.dimensions+1;let s=[];if(t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),"Point"===r||"MultiPoint"===r)for(let e=0;e<n.length;e+=l){s.push(n[e],n[e+1]);for(let t=3;t<l;t++)s.push(n[e+t]);t.numPoints++,t.numSimplified++}else if("LineString"===r)a(s,n,t,o,!1,!1,l);else if("MultiLineString"===r||"Polygon"===r){for(let e=0;e<n.length;e++)a(s,n[e],t,o,"Polygon"===r,0===e,l);"Polygon"===r&&s.length&&(s=[s])}else if("MultiPolygon"===r)for(let e=0;e<n.length;e++){const i=n[e],r=[];for(let e=0;e<i.length;e++)a(r,i[e],t,o,!0,0===e,l);r.length&&s.push(r)}if(s.length){let o=e.tags||null;if("LineString"===r&&i.lineMetrics){o={};for(const t in e.tags)o[t]=e.tags[t];o.mapbox_clip_start=n.start/n.size,o.mapbox_clip_end=n.end/n.size}const a={geometry:s,type:"Polygon"===r||"MultiPolygon"===r?3:"LineString"===r||"MultiLineString"===r?2:1,tags:o};null!==e.id&&(a.id=e.id),i.generateIndex&&(a.index=e.index),t.features.push(a)}}function a(t,e,o,i,n,a,r=3){const l=i*i;if(i>0&&e.size<(n?l:i))return void(o.numPoints+=e.length/r);const s=[];for(let t=0;t<e.length;t+=r){if(0===i||e[t+2]>l){o.numSimplified++,s.push(e[t],e[t+1]);for(let o=3;o<r;o++)s.push(e[t+o])}o.numPoints++}n&&function(t,e,o=2){let i=0;for(let e=0,n=t.length,a=n-o;e<n;a=e,e+=o)i+=(t[e]-t[a])*(t[e+1]+t[a+1]);if(i>0===e)for(let e=0,i=t.length;e<i/2;e+=o)for(let n=0;n<o;n++){const a=t[e+n],r=i-e-(o-n);t[e+n]=t[r],t[r]=a}}(s,a,r-1),t.push(s)}o.d(e,{Z:()=>i})},6530:(t,e,o)=>{function i(t,e,o=2){if(t.transformed)return t;const i=1<<t.z,r=t.x,l=t.y;for(const s of t.features){const t=s.geometry,c=s.type;if(s.geometry=[],1===c)for(let n=0;n<t.length;n+=o)s.geometry.push(a(t,n,o,e,i,r,l));else if(2===c)s.geometry=n(t,e,i,r,l,o);else for(let a=0;a<t.length;a++)s.geometry.push(n(t[a],e,i,r,l,o))}return t.transformed=!0,t}function n(t,e,o,i,n,r=2){const l=[];for(let s=0;s<t.length;s++){const c=[];for(let l=0;l<t[s].length;l+=r)c.push(a(t[s],l,r,e,o,i,n));l.push(c)}return l}function a(t,e,o,i,n,a,r){const l=[Math.round(i*(t[e]*n-a)),Math.round(i*(t[e+1]*n-r))];for(let i=2;i<o;i++)l.push(t[e+i]);return l}o.d(e,{Z:()=>i})},4534:(t,e,o)=>{o.d(e,{Z:()=>a});var i=o(6385),n=o(2397);function a(t,e){const o=e.buffer/e.extent,n=e.dimensions+1;let a=t;const l=(0,i.Z)(t,1,-1-o,o,0,-1,2,e),s=(0,i.Z)(t,1,1-o,2+o,0,-1,2,e);return(l||s)&&(a=(0,i.Z)(t,1,-o,1+o,0,-1,2,e)||[],l&&(a=r(l,1,n).concat(a)),s&&(a=a.concat(r(s,-1,n)))),a}function r(t,e,o=3){const i=[];for(let a=0;a<t.length;a++){const r=t[a],s=r.type;let c;if("Point"===s||"MultiPoint"===s||"LineString"===s)c=l(r.geometry,e,o);else if("MultiLineString"===s||"Polygon"===s){c=[];for(const t of r.geometry)c.push(l(t,e,o))}else if("MultiPolygon"===s){c=[];for(const t of r.geometry){const i=[];for(const n of t)i.push(l(n,e,o));c.push(i)}}i.push((0,n.Z)(r.id,s,c,r.tags,r.index,o))}return i}function l(t,e,o=3){const i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(let n=0;n<t.length;n+=o){i.push(t[n]+e,t[n+1],t[n+2]);for(let e=3;e<o;e++)i.push(t[n+e])}return i}},3287:(t,e,o)=>{o.d(e,{Ib:()=>i,WT:()=>n});const i=1e-6;let n="undefined"!=typeof Float64Array?Float64Array:Array;Math.random;Math.PI},351:(t,e,o)=>{o.d(e,{Ue:()=>n});var i=o(3287);function n(){let t=new i.WT(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},127:(t,e,o)=>{o.d(e,{I6:()=>g,Iu:()=>d,Iw:()=>p,JG:()=>r,Jp:()=>c,U_:()=>s,Ue:()=>n,al:()=>l,bA:()=>m,d9:()=>a,dC:()=>_,wA:()=>f,xJ:()=>h,zB:()=>u});var i=o(3287);function n(){let t=new i.WT(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t){let e=new i.WT(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l(t,e,o,n,a,r,l,s,c,d,m,h,p,u,g,_){let f=new i.WT(16);return f[0]=t,f[1]=e,f[2]=o,f[3]=n,f[4]=a,f[5]=r,f[6]=l,f[7]=s,f[8]=c,f[9]=d,f[10]=m,f[11]=h,f[12]=p,f[13]=u,f[14]=g,f[15]=_,f}function s(t,e){let o=e[0],i=e[1],n=e[2],a=e[3],r=e[4],l=e[5],s=e[6],c=e[7],d=e[8],m=e[9],h=e[10],p=e[11],u=e[12],g=e[13],_=e[14],f=e[15],y=o*l-i*r,b=o*s-n*r,x=o*c-a*r,v=i*s-n*l,w=i*c-a*l,z=n*c-a*s,F=d*g-m*u,S=d*_-h*u,C=d*f-p*u,M=m*_-h*g,P=m*f-p*g,I=h*f-p*_,L=y*I-b*P+x*M+v*C-w*S+z*F;return L?(L=1/L,t[0]=(l*I-s*P+c*M)*L,t[1]=(n*P-i*I-a*M)*L,t[2]=(g*z-_*w+f*v)*L,t[3]=(h*w-m*z-p*v)*L,t[4]=(s*C-r*I-c*S)*L,t[5]=(o*I-n*C+a*S)*L,t[6]=(_*x-u*z-f*b)*L,t[7]=(d*z-h*x+p*b)*L,t[8]=(r*P-l*C+c*F)*L,t[9]=(i*C-o*P-a*F)*L,t[10]=(u*w-g*x+f*y)*L,t[11]=(m*x-d*w-p*y)*L,t[12]=(l*S-r*M-s*F)*L,t[13]=(o*M-i*S+n*F)*L,t[14]=(g*b-u*v-_*y)*L,t[15]=(d*v-m*b+h*y)*L,t):null}function c(t,e,o){let i=e[0],n=e[1],a=e[2],r=e[3],l=e[4],s=e[5],c=e[6],d=e[7],m=e[8],h=e[9],p=e[10],u=e[11],g=e[12],_=e[13],f=e[14],y=e[15],b=o[0],x=o[1],v=o[2],w=o[3];return t[0]=b*i+x*l+v*m+w*g,t[1]=b*n+x*s+v*h+w*_,t[2]=b*a+x*c+v*p+w*f,t[3]=b*r+x*d+v*u+w*y,b=o[4],x=o[5],v=o[6],w=o[7],t[4]=b*i+x*l+v*m+w*g,t[5]=b*n+x*s+v*h+w*_,t[6]=b*a+x*c+v*p+w*f,t[7]=b*r+x*d+v*u+w*y,b=o[8],x=o[9],v=o[10],w=o[11],t[8]=b*i+x*l+v*m+w*g,t[9]=b*n+x*s+v*h+w*_,t[10]=b*a+x*c+v*p+w*f,t[11]=b*r+x*d+v*u+w*y,b=o[12],x=o[13],v=o[14],w=o[15],t[12]=b*i+x*l+v*m+w*g,t[13]=b*n+x*s+v*h+w*_,t[14]=b*a+x*c+v*p+w*f,t[15]=b*r+x*d+v*u+w*y,t}function d(t,e,o){let i,n,a,r,l,s,c,d,m,h,p,u,g=o[0],_=o[1],f=o[2];return e===t?(t[12]=e[0]*g+e[4]*_+e[8]*f+e[12],t[13]=e[1]*g+e[5]*_+e[9]*f+e[13],t[14]=e[2]*g+e[6]*_+e[10]*f+e[14],t[15]=e[3]*g+e[7]*_+e[11]*f+e[15]):(i=e[0],n=e[1],a=e[2],r=e[3],l=e[4],s=e[5],c=e[6],d=e[7],m=e[8],h=e[9],p=e[10],u=e[11],t[0]=i,t[1]=n,t[2]=a,t[3]=r,t[4]=l,t[5]=s,t[6]=c,t[7]=d,t[8]=m,t[9]=h,t[10]=p,t[11]=u,t[12]=i*g+l*_+m*f+e[12],t[13]=n*g+s*_+h*f+e[13],t[14]=a*g+c*_+p*f+e[14],t[15]=r*g+d*_+u*f+e[15]),t}function m(t,e,o){let i=o[0],n=o[1],a=o[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p(t,e,o,i){let n=e[0],a=e[1],r=e[2],l=e[3],s=n+n,c=a+a,d=r+r,m=n*s,h=n*c,p=n*d,u=a*c,g=a*d,_=r*d,f=l*s,y=l*c,b=l*d,x=i[0],v=i[1],w=i[2];return t[0]=(1-(u+_))*x,t[1]=(h+b)*x,t[2]=(p-y)*x,t[3]=0,t[4]=(h-b)*v,t[5]=(1-(m+_))*v,t[6]=(g+f)*v,t[7]=0,t[8]=(p+y)*w,t[9]=(g-f)*w,t[10]=(1-(m+u))*w,t[11]=0,t[12]=o[0],t[13]=o[1],t[14]=o[2],t[15]=1,t}function u(t,e,o,n){let a,r,l,s,c,d,m,h,p,u,g=e[0],_=e[1],f=e[2],y=n[0],b=n[1],x=n[2],v=o[0],w=o[1],z=o[2];return Math.abs(g-v)<i.Ib&&Math.abs(_-w)<i.Ib&&Math.abs(f-z)<i.Ib?mat4.identity(t):(m=g-v,h=_-w,p=f-z,u=1/Math.sqrt(m*m+h*h+p*p),m*=u,h*=u,p*=u,a=b*p-x*h,r=x*m-y*p,l=y*h-b*m,u=Math.sqrt(a*a+r*r+l*l),u?(u=1/u,a*=u,r*=u,l*=u):(a=0,r=0,l=0),s=h*l-p*r,c=p*a-m*l,d=m*r-h*a,u=Math.sqrt(s*s+c*c+d*d),u?(u=1/u,s*=u,c*=u,d*=u):(s=0,c=0,d=0),t[0]=a,t[1]=s,t[2]=m,t[3]=0,t[4]=r,t[5]=c,t[6]=h,t[7]=0,t[8]=l,t[9]=d,t[10]=p,t[11]=0,t[12]=-(a*g+r*_+l*f),t[13]=-(s*g+c*_+d*f),t[14]=-(m*g+h*_+p*f),t[15]=1,t)}function g(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}const _=c;function f(t,e,o){return t[0]=o[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=o[2],t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},7063:(t,e,o)=>{o.d(e,{Jp:()=>s,Ue:()=>l,jI:()=>m,lM:()=>c,uD:()=>d});var i=o(3287),n=o(351),a=o(9450),r=o(1245);function l(){let t=new i.WT(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,o){let i=e[0],n=e[1],a=e[2],r=e[3],l=o[0],s=o[1],c=o[2],d=o[3];return t[0]=i*d+r*l+n*c-a*s,t[1]=n*d+r*s+a*l-i*c,t[2]=a*d+r*c+i*s-n*l,t[3]=r*d-i*l-n*s-a*c,t}function c(t,e,o){o*=.5;let i=e[0],n=e[1],a=e[2],r=e[3],l=Math.sin(o),s=Math.cos(o);return t[0]=i*s+r*l,t[1]=n*s+a*l,t[2]=a*s-n*l,t[3]=r*s-i*l,t}function d(t,e,o){o*=.5;let i=e[0],n=e[1],a=e[2],r=e[3],l=Math.sin(o),s=Math.cos(o);return t[0]=i*s-a*l,t[1]=n*s+r*l,t[2]=a*s+i*l,t[3]=r*s-n*l,t}function m(t,e,o){o*=.5;let i=e[0],n=e[1],a=e[2],r=e[3],l=Math.sin(o),s=Math.cos(o);return t[0]=i*s+n*l,t[1]=n*s-i*l,t[2]=a*s+r*l,t[3]=r*s-a*l,t}function h(t,e,o,i){let n,a,r,l,s,c=e[0],d=e[1],m=e[2],h=e[3],p=o[0],u=o[1],g=o[2],_=o[3];return a=c*p+d*u+m*g+h*_,a<0&&(a=-a,p=-p,u=-u,g=-g,_=-_),1-a>1e-6?(n=Math.acos(a),r=Math.sin(n),l=Math.sin((1-i)*n)/r,s=Math.sin(i*n)/r):(l=1-i,s=i),t[0]=l*c+s*p,t[1]=l*d+s*u,t[2]=l*m+s*g,t[3]=l*h+s*_,t}r.d9,r.al,r.JG,r.t8,r.IH,r.bA,r.AK,r.t7,r.kE,r.we;const p=r.Fv;r.I6,r.fS,function(){let t=a.Ue(),e=a.al(1,0,0),o=a.al(0,1,0)}(),function(){let t=l(),e=l()}(),function(){let t=n.Ue()}()},378:(t,e,o)=>{o.d(e,{$X:()=>d,AK:()=>f,Fp:()=>h,Fv:()=>_,I6:()=>b,IH:()=>c,JG:()=>l,TE:()=>u,TK:()=>w,Ue:()=>n,VV:()=>m,al:()=>r,bA:()=>p,d9:()=>a,fS:()=>x,kE:()=>g,lu:()=>v,t7:()=>y,t8:()=>s});var i=o(3287);function n(){let t=new i.WT(2);return t[0]=0,t[1]=0,t}function a(t){let e=new i.WT(2);return e[0]=t[0],e[1]=t[1],e}function r(t,e){let o=new i.WT(2);return o[0]=t,o[1]=e,o}function l(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,o){return t[0]=e,t[1]=o,t}function c(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t}function d(t,e,o){return t[0]=e[0]-o[0],t[1]=e[1]-o[1],t}function m(t,e,o){return t[0]=Math.min(e[0],o[0]),t[1]=Math.min(e[1],o[1]),t}function h(t,e,o){return t[0]=Math.max(e[0],o[0]),t[1]=Math.max(e[1],o[1]),t}function p(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t}function u(t,e){var o=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(o*o+i*i)}function g(t){var e=t[0],o=t[1];return Math.sqrt(e*e+o*o)}function _(t,e){var o=e[0],i=e[1],n=o*o+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function f(t,e){return t[0]*e[0]+t[1]*e[1]}function y(t,e,o,i){var n=e[0],a=e[1];return t[0]=n+i*(o[0]-n),t[1]=a+i*(o[1]-a),t}function b(t,e){return t[0]===e[0]&&t[1]===e[1]}function x(t,e){let o=t[0],n=t[1],a=e[0],r=e[1];return Math.abs(o-a)<=i.Ib*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(n-r)<=i.Ib*Math.max(1,Math.abs(n),Math.abs(r))}const v=d,w=u;!function(){let t=n()}()},9450:(t,e,o)=>{o.d(e,{AK:()=>u,Fv:()=>p,I6:()=>b,IH:()=>d,JG:()=>s,TE:()=>h,Ue:()=>n,Zh:()=>w,al:()=>l,bA:()=>m,d9:()=>a,fF:()=>f,fS:()=>x,jI:()=>y,kC:()=>g,kE:()=>r,lu:()=>v,t7:()=>_,t8:()=>c});var i=o(3287);function n(){let t=new i.WT(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=new i.WT(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function r(t){let e=t[0],o=t[1],i=t[2];return Math.sqrt(e*e+o*o+i*i)}function l(t,e,o){let n=new i.WT(3);return n[0]=t,n[1]=e,n[2]=o,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,o,i){return t[0]=e,t[1]=o,t[2]=i,t}function d(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2],t}function m(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function h(t,e){let o=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(o*o+i*i+n*n)}function p(t,e){let o=e[0],i=e[1],n=e[2],a=o*o+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function u(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function g(t,e,o){let i=e[0],n=e[1],a=e[2],r=o[0],l=o[1],s=o[2];return t[0]=n*s-a*l,t[1]=a*r-i*s,t[2]=i*l-n*r,t}function _(t,e,o,i){let n=e[0],a=e[1],r=e[2];return t[0]=n+i*(o[0]-n),t[1]=a+i*(o[1]-a),t[2]=r+i*(o[2]-r),t}function f(t,e,o){let i=e[0],n=e[1],a=e[2],r=o[3]*i+o[7]*n+o[11]*a+o[15];return r=r||1,t[0]=(o[0]*i+o[4]*n+o[8]*a+o[12])/r,t[1]=(o[1]*i+o[5]*n+o[9]*a+o[13])/r,t[2]=(o[2]*i+o[6]*n+o[10]*a+o[14])/r,t}function y(t,e,o,i){let n=[],a=[];return n[0]=e[0]-o[0],n[1]=e[1]-o[1],n[2]=e[2]-o[2],a[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),a[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),a[2]=n[2],t[0]=a[0]+o[0],t[1]=a[1]+o[1],t[2]=a[2]+o[2],t}function b(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function x(t,e){let o=t[0],n=t[1],a=t[2],r=e[0],l=e[1],s=e[2];return Math.abs(o-r)<=i.Ib*Math.max(1,Math.abs(o),Math.abs(r))&&Math.abs(n-l)<=i.Ib*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-s)<=i.Ib*Math.max(1,Math.abs(a),Math.abs(s))}const v=function(t,e,o){return t[0]=e[0]-o[0],t[1]=e[1]-o[1],t[2]=e[2]-o[2],t},w=r;!function(){let t=n()}()},1245:(t,e,o)=>{o.d(e,{AK:()=>p,Fv:()=>h,I6:()=>_,IH:()=>s,JG:()=>r,al:()=>a,bA:()=>c,d9:()=>n,fF:()=>g,fS:()=>f,kE:()=>d,t7:()=>u,t8:()=>l,we:()=>m});var i=o(3287);function n(t){let e=new i.WT(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,o,n){let a=new i.WT(4);return a[0]=t,a[1]=e,a[2]=o,a[3]=n,a}function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function l(t,e,o,i,n){return t[0]=e,t[1]=o,t[2]=i,t[3]=n,t}function s(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t[2]=e[2]+o[2],t[3]=e[3]+o[3],t}function c(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t}function d(t){let e=t[0],o=t[1],i=t[2],n=t[3];return Math.sqrt(e*e+o*o+i*i+n*n)}function m(t){let e=t[0],o=t[1],i=t[2],n=t[3];return e*e+o*o+i*i+n*n}function h(t,e){let o=e[0],i=e[1],n=e[2],a=e[3],r=o*o+i*i+n*n+a*a;return r>0&&(r=1/Math.sqrt(r),t[0]=o*r,t[1]=i*r,t[2]=n*r,t[3]=a*r),t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function u(t,e,o,i){let n=e[0],a=e[1],r=e[2],l=e[3];return t[0]=n+i*(o[0]-n),t[1]=a+i*(o[1]-a),t[2]=r+i*(o[2]-r),t[3]=l+i*(o[3]-l),t}function g(t,e,o){let i=e[0],n=e[1],a=e[2],r=e[3];return t[0]=o[0]*i+o[4]*n+o[8]*a+o[12]*r,t[1]=o[1]*i+o[5]*n+o[9]*a+o[13]*r,t[2]=o[2]*i+o[6]*n+o[10]*a+o[14]*r,t[3]=o[3]*i+o[7]*n+o[11]*a+o[15]*r,t}function _(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function f(t,e){let o=t[0],n=t[1],a=t[2],r=t[3],l=e[0],s=e[1],c=e[2],d=e[3];return Math.abs(o-l)<=i.Ib*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-s)<=i.Ib*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-c)<=i.Ib*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(r-d)<=i.Ib*Math.max(1,Math.abs(r),Math.abs(d))}!function(){let t=function(){let t=new i.WT(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}()}()},4716:(t,e)=>{!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),i=0;i<t.length;i++)o[t.charCodeAt(i)]=i;e.c=function(e){var o,i=new Uint8Array(e),n=i.length,a="";for(o=0;o<n;o+=3)a+=t[i[o]>>2],a+=t[(3&i[o])<<4|i[o+1]>>4],a+=t[(15&i[o+1])<<2|i[o+2]>>6],a+=t[63&i[o+2]];return n%3==2?a=a.substring(0,a.length-1)+"=":n%3==1&&(a=a.substring(0,a.length-2)+"=="),a},function(t){var e,i,n,a,r,l=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(l--,"="===t[t.length-2]&&l--);var d=new ArrayBuffer(l),m=new Uint8Array(d);for(e=0;e<s;e+=4)i=o[t.charCodeAt(e)],n=o[t.charCodeAt(e+1)],a=o[t.charCodeAt(e+2)],r=o[t.charCodeAt(e+3)],m[c++]=i<<2|n>>4,m[c++]=(15&n)<<4|a>>2,m[c++]=(3&a)<<6|63&r;return d}}()},6636:t=>{var e=.1,o="function"==typeof Float32Array;function i(t,e){return 1-3*e+3*t}function n(t,e){return 3*e-6*t}function a(t){return 3*t}function r(t,e,o){return((i(e,o)*t+n(e,o))*t+a(e))*t}function l(t,e,o){return 3*i(e,o)*t*t+2*n(e,o)*t+a(e)}function s(t){return t}t.exports=function(t,i,n,a){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&n===a)return s;for(var c=o?new Float32Array(11):new Array(11),d=0;d<11;++d)c[d]=r(d*e,t,n);function m(o){for(var i=0,a=1;10!==a&&c[a]<=o;++a)i+=e;--a;var s=i+(o-c[a])/(c[a+1]-c[a])*e,d=l(s,t,n);return d>=.001?function(t,e,o,i){for(var n=0;n<4;++n){var a=l(e,o,i);if(0===a)return e;e-=(r(e,o,i)-t)/a}return e}(o,s,t,n):0===d?s:function(t,e,o,i,n){var a,l,s=0;do{(a=r(l=e+(o-e)/2,i,n)-t)>0?o=l:e=l}while(Math.abs(a)>1e-7&&++s<10);return l}(o,i,i+e,t,n)}return function(t){return 0===t?0:1===t?1:r(m(t),i,a)}}},5368:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o="",i=void 0!==e[5];return e[4]&&(o+="@supports (".concat(e[4],") {")),e[2]&&(o+="@media ".concat(e[2]," {")),i&&(o+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),o+=t(e),i&&(o+="}"),e[2]&&(o+="}"),e[4]&&(o+="}"),o})).join("")},e.i=function(t,o,i,n,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(r[s]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);i&&r[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),e.push(d))}},e}},8276:t=>{t.exports=function(t){return t[1]}},7084:t=>{function e(t,e,i){i=i||2;var a,r,l,s,m,h,u,g=e&&e.length,_=g?e[0]*i:t.length,f=o(t,0,_,i,!0),y=[];if(!f||f.next===f.prev)return y;if(g&&(f=function(t,e,i,n){var a,r,l,s=[];for(a=0,r=e.length;a<r;a++)(l=o(t,e[a]*n,a<r-1?e[a+1]*n:t.length,n,!1))===l.next&&(l.steiner=!0),s.push(p(l));for(s.sort(c),a=0;a<s.length;a++)i=d(s[a],i);return i}(t,e,f,i)),t.length>80*i){a=l=t[0],r=s=t[1];for(var b=i;b<_;b+=i)(m=t[b])<a&&(a=m),(h=t[b+1])<r&&(r=h),m>l&&(l=m),h>s&&(s=h);u=0!==(u=Math.max(l-a,s-r))?32767/u:0}return n(f,y,i,a,r,u,0),y}function o(t,e,o,i,n){var a,r;if(n===C(t,e,o,i)>0)for(a=e;a<o;a+=i)r=z(a,t[a],t[a+1],r);else for(a=o-i;a>=e;a-=i)r=z(a,t[a],t[a+1],r);return r&&f(r,r.next)&&(F(r),r=r.next),r}function i(t,e){if(!t)return t;e||(e=t);var o,i=t;do{if(o=!1,i.steiner||!f(i,i.next)&&0!==_(i.prev,i,i.next))i=i.next;else{if(F(i),(i=e=i.prev)===i.next)break;o=!0}}while(o||i!==e);return e}function n(t,e,o,c,d,m,p){if(t){!p&&m&&function(t,e,o,i){var n=t;do{0===n.z&&(n.z=h(n.x,n.y,e,o,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,o,i,n,a,r,l,s,c=1;do{for(o=t,t=null,a=null,r=0;o;){for(r++,i=o,l=0,e=0;e<c&&(l++,i=i.nextZ);e++);for(s=c;l>0||s>0&&i;)0!==l&&(0===s||!i||o.z<=i.z)?(n=o,o=o.nextZ,l--):(n=i,i=i.nextZ,s--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;o=i}a.nextZ=null,c*=2}while(r>1)}(n)}(t,c,d,m);for(var u,g,_=t;t.prev!==t.next;)if(u=t.prev,g=t.next,m?r(t,c,d,m):a(t))e.push(u.i/o|0),e.push(t.i/o|0),e.push(g.i/o|0),F(t),t=g.next,_=g.next;else if((t=g)===_){p?1===p?n(t=l(i(t),e,o),e,o,c,d,m,2):2===p&&s(t,e,o,c,d,m):n(i(t),e,o,c,d,m,1);break}}}function a(t){var e=t.prev,o=t,i=t.next;if(_(e,o,i)>=0)return!1;for(var n=e.x,a=o.x,r=i.x,l=e.y,s=o.y,c=i.y,d=n<a?n<r?n:r:a<r?a:r,m=l<s?l<c?l:c:s<c?s:c,h=n>a?n>r?n:r:a>r?a:r,p=l>s?l>c?l:c:s>c?s:c,g=i.next;g!==e;){if(g.x>=d&&g.x<=h&&g.y>=m&&g.y<=p&&u(n,l,a,s,r,c,g.x,g.y)&&_(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function r(t,e,o,i){var n=t.prev,a=t,r=t.next;if(_(n,a,r)>=0)return!1;for(var l=n.x,s=a.x,c=r.x,d=n.y,m=a.y,p=r.y,g=l<s?l<c?l:c:s<c?s:c,f=d<m?d<p?d:p:m<p?m:p,y=l>s?l>c?l:c:s>c?s:c,b=d>m?d>p?d:p:m>p?m:p,x=h(g,f,e,o,i),v=h(y,b,e,o,i),w=t.prevZ,z=t.nextZ;w&&w.z>=x&&z&&z.z<=v;){if(w.x>=g&&w.x<=y&&w.y>=f&&w.y<=b&&w!==n&&w!==r&&u(l,d,s,m,c,p,w.x,w.y)&&_(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,z.x>=g&&z.x<=y&&z.y>=f&&z.y<=b&&z!==n&&z!==r&&u(l,d,s,m,c,p,z.x,z.y)&&_(z.prev,z,z.next)>=0)return!1;z=z.nextZ}for(;w&&w.z>=x;){if(w.x>=g&&w.x<=y&&w.y>=f&&w.y<=b&&w!==n&&w!==r&&u(l,d,s,m,c,p,w.x,w.y)&&_(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;z&&z.z<=v;){if(z.x>=g&&z.x<=y&&z.y>=f&&z.y<=b&&z!==n&&z!==r&&u(l,d,s,m,c,p,z.x,z.y)&&_(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function l(t,e,o){var n=t;do{var a=n.prev,r=n.next.next;!f(a,r)&&y(a,n,n.next,r)&&v(a,r)&&v(r,a)&&(e.push(a.i/o|0),e.push(n.i/o|0),e.push(r.i/o|0),F(n),F(n.next),n=t=r),n=n.next}while(n!==t);return i(n)}function s(t,e,o,a,r,l){var s=t;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&g(s,c)){var d=w(s,c);return s=i(s,s.next),d=i(d,d.next),n(s,e,o,a,r,l,0),void n(d,e,o,a,r,l,0)}c=c.next}s=s.next}while(s!==t)}function c(t,e){return t.x-e.x}function d(t,e){var o=function(t,e){var o,i=e,n=t.x,a=t.y,r=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var l=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=n&&l>r&&(r=l,o=i.x<i.next.x?i:i.next,l===n))return o}i=i.next}while(i!==e);if(!o)return null;var s,c=o,d=o.x,h=o.y,p=1/0;i=o;do{n>=i.x&&i.x>=d&&n!==i.x&&u(a<h?n:r,a,d,h,a<h?r:n,a,i.x,i.y)&&(s=Math.abs(a-i.y)/(n-i.x),v(i,t)&&(s<p||s===p&&(i.x>o.x||i.x===o.x&&m(o,i)))&&(o=i,p=s)),i=i.next}while(i!==c);return o}(t,e);if(!o)return e;var n=w(o,t);return i(n,n.next),i(o,o.next)}function m(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function h(t,e,o,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-o)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,o=t;do{(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next}while(e!==t);return o}function u(t,e,o,i,n,a,r,l){return(n-r)*(e-l)>=(t-r)*(a-l)&&(t-r)*(i-l)>=(o-r)*(e-l)&&(o-r)*(a-l)>=(n-r)*(i-l)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var o=t;do{if(o.i!==t.i&&o.next.i!==t.i&&o.i!==e.i&&o.next.i!==e.i&&y(o,o.next,t,e))return!0;o=o.next}while(o!==t);return!1}(t,e)&&(v(t,e)&&v(e,t)&&function(t,e){var o=t,i=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;do{o.y>a!=o.next.y>a&&o.next.y!==o.y&&n<(o.next.x-o.x)*(a-o.y)/(o.next.y-o.y)+o.x&&(i=!i),o=o.next}while(o!==t);return i}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||f(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,o){return(e.y-t.y)*(o.x-e.x)-(e.x-t.x)*(o.y-e.y)}function f(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,o,i){var n=x(_(t,e,o)),a=x(_(t,e,i)),r=x(_(o,i,t)),l=x(_(o,i,e));return n!==a&&r!==l||(!(0!==n||!b(t,o,e))||(!(0!==a||!b(t,i,e))||(!(0!==r||!b(o,t,i))||!(0!==l||!b(o,e,i)))))}function b(t,e,o){return e.x<=Math.max(t.x,o.x)&&e.x>=Math.min(t.x,o.x)&&e.y<=Math.max(t.y,o.y)&&e.y>=Math.min(t.y,o.y)}function x(t){return t>0?1:t<0?-1:0}function v(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function w(t,e){var o=new S(t.i,t.x,t.y),i=new S(e.i,e.x,e.y),n=t.next,a=e.prev;return t.next=e,e.prev=t,o.next=n,n.prev=o,i.next=o,o.prev=i,a.next=i,i.prev=a,i}function z(t,e,o,i){var n=new S(t,e,o);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function F(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,o){this.i=t,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,o,i){for(var n=0,a=e,r=o-i;a<o;a+=i)n+=(t[r]-t[a])*(t[a+1]+t[r+1]),r=a;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,o,i){var n=e&&e.length,a=n?e[0]*o:t.length,r=Math.abs(C(t,0,a,o));if(n)for(var l=0,s=e.length;l<s;l++){var c=e[l]*o,d=l<s-1?e[l+1]*o:t.length;r-=Math.abs(C(t,c,d,o))}var m=0;for(l=0;l<i.length;l+=3){var h=i[l]*o,p=i[l+1]*o,u=i[l+2]*o;m+=Math.abs((t[h]-t[u])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[u+1]-t[h+1]))}return 0===r&&0===m?0:Math.abs((m-r)/r)},e.flatten=function(t){for(var e=t[0][0].length,o={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var r=0;r<e;r++)o.vertices.push(t[n][a][r]);n>0&&(i+=t[n-1].length,o.holes.push(i))}return o}},6001:(t,e)=>{e.read=function(t,e,o,i,n){var a,r,l=8*n-i-1,s=(1<<l)-1,c=s>>1,d=-7,m=o?n-1:0,h=o?-1:1,p=t[e+m];for(m+=h,a=p&(1<<-d)-1,p>>=-d,d+=l;d>0;a=256*a+t[e+m],m+=h,d-=8);for(r=a&(1<<-d)-1,a>>=-d,d+=i;d>0;r=256*r+t[e+m],m+=h,d-=8);if(0===a)a=1-c;else{if(a===s)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,i),a-=c}return(p?-1:1)*r*Math.pow(2,a-i)},e.write=function(t,e,o,i,n,a){var r,l,s,c=8*a-n-1,d=(1<<c)-1,m=d>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,u=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,r=d):(r=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-r))<1&&(r--,s*=2),(e+=r+m>=1?h/s:h*Math.pow(2,1-m))*s>=2&&(r++,s/=2),r+m>=d?(l=0,r=d):r+m>=1?(l=(e*s-1)*Math.pow(2,n),r+=m):(l=e*Math.pow(2,m-1)*Math.pow(2,n),r=0));n>=8;t[o+p]=255&l,p+=u,l/=256,n-=8);for(r=r<<n|l,c+=n;c>0;t[o+p]=255&r,p+=u,r/=256,c-=8);t[o+p-u]|=128*g}},6208:(t,e,o)=>{t.exports=n;var i=o(6001);function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var a=4294967296,r=1/a,l="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function s(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function c(t,e,o){return o?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function d(t,e,o){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(i);for(var n=o.pos-1;n>=t;n--)o.buf[n+i]=o.buf[n]}function m(t,e){for(var o=0;o<t.length;o++)e.writeVarint(t[o])}function h(t,e){for(var o=0;o<t.length;o++)e.writeSVarint(t[o])}function p(t,e){for(var o=0;o<t.length;o++)e.writeFloat(t[o])}function u(t,e){for(var o=0;o<t.length;o++)e.writeDouble(t[o])}function g(t,e){for(var o=0;o<t.length;o++)e.writeBoolean(t[o])}function _(t,e){for(var o=0;o<t.length;o++)e.writeFixed32(t[o])}function f(t,e){for(var o=0;o<t.length;o++)e.writeSFixed32(t[o])}function y(t,e){for(var o=0;o<t.length;o++)e.writeFixed64(t[o])}function b(t,e){for(var o=0;o<t.length;o++)e.writeSFixed64(t[o])}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function v(t,e,o){t[o]=e,t[o+1]=e>>>8,t[o+2]=e>>>16,t[o+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,o){for(o=o||this.length;this.pos<o;){var i=this.readVarint(),n=i>>3,a=this.pos;this.type=7&i,t(n,e,this),this.pos===a&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=x(this.buf,this.pos)+x(this.buf,this.pos+4)*a;return this.pos+=8,t},readSFixed64:function(){var t=x(this.buf,this.pos)+w(this.buf,this.pos+4)*a;return this.pos+=8,t},readFloat:function(){var t=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,o,i=this.buf;return e=127&(o=i[this.pos++]),o<128?e:(e|=(127&(o=i[this.pos++]))<<7,o<128?e:(e|=(127&(o=i[this.pos++]))<<14,o<128?e:(e|=(127&(o=i[this.pos++]))<<21,o<128?e:function(t,e,o){var i,n,a=o.buf;if(n=a[o.pos++],i=(112&n)>>4,n<128)return c(t,i,e);if(n=a[o.pos++],i|=(127&n)<<3,n<128)return c(t,i,e);if(n=a[o.pos++],i|=(127&n)<<10,n<128)return c(t,i,e);if(n=a[o.pos++],i|=(127&n)<<17,n<128)return c(t,i,e);if(n=a[o.pos++],i|=(127&n)<<24,n<128)return c(t,i,e);if(n=a[o.pos++],i|=(1&n)<<31,n<128)return c(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&l?function(t,e,o){return l.decode(t.subarray(e,o))}(this.buf,e,t):function(t,e,o){var i="",n=e;for(;n<o;){var a,r,l,s=t[n],c=null,d=s>239?4:s>223?3:s>191?2:1;if(n+d>o)break;1===d?s<128&&(c=s):2===d?128==(192&(a=t[n+1]))&&(c=(31&s)<<6|63&a)<=127&&(c=null):3===d?(a=t[n+1],r=t[n+2],128==(192&a)&&128==(192&r)&&((c=(15&s)<<12|(63&a)<<6|63&r)<=2047||c>=55296&&c<=57343)&&(c=null)):4===d&&(a=t[n+1],r=t[n+2],l=t[n+3],128==(192&a)&&128==(192&r)&&128==(192&l)&&((c=(15&s)<<18|(63&a)<<12|(63&r)<<6|63&l)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,d=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),n+=d}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==n.Bytes)return t.push(this.readVarint(e));var o=s(this);for(t=t||[];this.pos<o;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==n.Bytes)return t.push(this.readSVarint());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==n.Bytes)return t.push(this.readBoolean());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==n.Bytes)return t.push(this.readFloat());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==n.Bytes)return t.push(this.readDouble());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed32());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed32());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed64());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed64());var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),v(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),v(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),v(this.buf,-1&t,this.pos),v(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),v(this.buf,-1&t,this.pos),v(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var o,i;t>=0?(o=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(o=~(-t%4294967296))?o=o+1|0:(o=0,i=i+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,o){o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos]=127&t}(o,0,e),function(t,e){var o=(7&t)<<4;if(e.buf[e.pos++]|=o|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,o){for(var i,n,a=0;a<e.length;a++){if((i=e.charCodeAt(a))>55295&&i<57344){if(!n){i>56319||a+1===e.length?(t[o++]=239,t[o++]=191,t[o++]=189):n=i;continue}if(i<56320){t[o++]=239,t[o++]=191,t[o++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[o++]=239,t[o++]=191,t[o++]=189,n=null);i<128?t[o++]=i:(i<2048?t[o++]=i>>6|192:(i<65536?t[o++]=i>>12|224:(t[o++]=i>>18|240,t[o++]=i>>12&63|128),t[o++]=i>>6&63|128),t[o++]=63&i|128)}return o}(this.buf,t,this.pos);var o=this.pos-e;o>=128&&d(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(t){this.realloc(4),i.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),i.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=t[o]},writeRawMessage:function(t,e){this.pos++;var o=this.pos;t(e,this);var i=this.pos-o;i>=128&&d(o,i,this),this.pos=o-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,o){this.writeTag(t,n.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},5398:function(t){t.exports=function(){function t(t,o,n,a,r){e(t,o,n||0,a||t.length-1,r||i)}function e(t,i,n,a,r){for(;a>n;){if(a-n>600){var l=a-n+1,s=i-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),m=.5*Math.sqrt(c*d*(l-d)/l)*(s-l/2<0?-1:1);e(t,i,Math.max(n,Math.floor(i-s*d/l+m)),Math.min(a,Math.floor(i+(l-s)*d/l+m)),r)}var h=t[i],p=n,u=a;for(o(t,n,i),r(t[a],h)>0&&o(t,n,a);p<u;){for(o(t,p,u),p++,u--;r(t[p],h)<0;)p++;for(;r(t[u],h)>0;)u--}0===r(t[n],h)?o(t,n,u):o(t,++u,a),u<=i&&(n=u+1),i<=u&&(a=u-1)}}function o(t,e,o){var i=t[e];t[e]=t[o],t[o]=i}function i(t,e){return t<e?-1:t>e?1:0}return t}()},7123:(t,e,o)=>{t.exports=n,t.exports.default=n;var i=o(5398);function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function a(t,e,o){if(!o)return e.indexOf(t);for(var i=0;i<e.length;i++)if(o(t,e[i]))return i;return-1}function r(t,e){l(t,0,t.children.length,e,t)}function l(t,e,o,i,n){n||(n=g(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var a,r=e;r<o;r++)a=t.children[r],s(n,t.leaf?i(a):a);return n}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function u(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,o,n,a){for(var r,l=[e,o];l.length;)(o=l.pop())-(e=l.pop())<=n||(r=e+Math.ceil((o-e)/n/2)*n,i(t,r,e,o,a),l.push(e,r,r,o))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,o=[],i=this.toBBox;if(!u(t,e))return o;for(var n,a,r,l,s=[];e;){for(n=0,a=e.children.length;n<a;n++)r=e.children[n],u(t,l=e.leaf?i(r):r)&&(e.leaf?o.push(r):p(t,l)?this._all(r,o):s.push(r));e=s.pop()}return o},collides:function(t){var e=this.data,o=this.toBBox;if(!u(t,e))return!1;for(var i,n,a,r,l=[];e;){for(i=0,n=e.children.length;i<n;i++)if(a=e.children[i],u(t,r=e.leaf?o(a):a)){if(e.leaf||p(t,r))return!0;l.push(a)}e=l.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,o=t.length;e<o;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var o,i,n,r,l=this.data,s=this.toBBox(t),c=[],d=[];l||c.length;){if(l||(l=c.pop(),i=c[c.length-1],o=d.pop(),r=!0),l.leaf&&-1!==(n=a(t,l.children,e)))return l.children.splice(n,1),c.push(l),this._condense(c),this;r||l.leaf||!p(l,s)?i?(o++,l=i.children[o],r=!1):l=null:(c.push(l),d.push(o),o=0,i=l,l=l.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var o=[];t;)t.leaf?e.push.apply(e,t.children):o.push.apply(o,t.children),t=o.pop();return e},_build:function(t,e,o,i){var n,a=o-e+1,l=this._maxEntries;if(a<=l)return r(n=g(t.slice(e,o+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,i-1))),(n=g([])).leaf=!1,n.height=i;var s,c,d,m,h=Math.ceil(a/l),p=h*Math.ceil(Math.sqrt(l));for(_(t,e,o,p,this.compareMinX),s=e;s<=o;s+=p)for(_(t,s,d=Math.min(s+p-1,o),h,this.compareMinY),c=s;c<=d;c+=h)m=Math.min(c+h-1,d),n.children.push(this._build(t,c,m,i-1));return r(n,this.toBBox),n},_chooseSubtree:function(t,e,o,i){for(var n,a,r,l,s,c,d,h,p,u;i.push(e),!e.leaf&&i.length-1!==o;){for(d=h=1/0,n=0,a=e.children.length;n<a;n++)s=m(r=e.children[n]),p=t,u=r,(c=(Math.max(u.maxX,p.maxX)-Math.min(u.minX,p.minX))*(Math.max(u.maxY,p.maxY)-Math.min(u.minY,p.minY))-s)<h?(h=c,d=s<d?s:d,l=r):c===h&&s<d&&(d=s,l=r);e=l||e.children[0]}return e},_insert:function(t,e,o){var i=this.toBBox,n=o?t:i(t),a=[],r=this._chooseSubtree(n,this.data,e,a);for(r.children.push(t),s(r,n);e>=0&&a[e].children.length>this._maxEntries;)this._split(a,e),e--;this._adjustParentBBoxes(n,a,e)},_split:function(t,e){var o=t[e],i=o.children.length,n=this._minEntries;this._chooseSplitAxis(o,n,i);var a=this._chooseSplitIndex(o,n,i),l=g(o.children.splice(a,o.children.length-a));l.height=o.height,l.leaf=o.leaf,r(o,this.toBBox),r(l,this.toBBox),e?t[e-1].children.push(l):this._splitRoot(o,l)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,o){var i,n,a,r,s,c,d,h,p,u,g,_,f,y;for(c=d=1/0,i=e;i<=o-e;i++)n=l(t,0,i,this.toBBox),a=l(t,i,o,this.toBBox),p=n,u=a,g=void 0,_=void 0,f=void 0,y=void 0,g=Math.max(p.minX,u.minX),_=Math.max(p.minY,u.minY),f=Math.min(p.maxX,u.maxX),y=Math.min(p.maxY,u.maxY),r=Math.max(0,f-g)*Math.max(0,y-_),s=m(n)+m(a),r<c?(c=r,h=i,d=s<d?s:d):r===c&&s<d&&(d=s,h=i);return h},_chooseSplitAxis:function(t,e,o){var i=t.leaf?this.compareMinX:c,n=t.leaf?this.compareMinY:d;this._allDistMargin(t,e,o,i)<this._allDistMargin(t,e,o,n)&&t.children.sort(i)},_allDistMargin:function(t,e,o,i){t.children.sort(i);var n,a,r=this.toBBox,c=l(t,0,e,r),d=l(t,o-e,o,r),m=h(c)+h(d);for(n=e;n<o-e;n++)a=t.children[n],s(c,t.leaf?r(a):a),m+=h(c);for(n=o-e-1;n>=e;n--)a=t.children[n],s(d,t.leaf?r(a):a),m+=h(d);return m},_adjustParentBBoxes:function(t,e,o){for(var i=o;i>=0;i--)s(e[i],t)},_condense:function(t){for(var e,o=t.length-1;o>=0;o--)0===t[o].children.length?o>0?(e=t[o-1].children).splice(e.indexOf(t[o]),1):this.clear():r(t[o],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},8281:function(t){var e;t.exports=(e=function(){function t(t){return n.appendChild(t.dom),t}function o(t){for(var e=0;e<n.children.length;e++)n.children[e].style.display=e===t?"block":"none";i=t}var i=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(t){t.preventDefault(),o(++i%n.children.length)}),!1);var a=(performance||Date).now(),r=a,l=0,s=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=t(new e.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:n,addPanel:t,showPanel:o,begin:function(){a=(performance||Date).now()},end:function(){l++;var t=(performance||Date).now();if(c.update(t-a,200),t>r+1e3&&(s.update(1e3*l/(t-r),100),r=t,l=0,d)){var e=performance.memory;d.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:n,setMode:o}},e.Panel=function(t,e,o){var i=1/0,n=0,a=Math.round,r=a(window.devicePixelRatio||1),l=80*r,s=48*r,c=3*r,d=2*r,m=3*r,h=15*r,p=74*r,u=30*r,g=document.createElement("canvas");g.width=l,g.height=s,g.style.cssText="width:80px;height:48px";var _=g.getContext("2d");return _.font="bold "+9*r+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=o,_.fillRect(0,0,l,s),_.fillStyle=e,_.fillText(t,c,d),_.fillRect(m,h,p,u),_.fillStyle=o,_.globalAlpha=.9,_.fillRect(m,h,p,u),{dom:g,update:function(s,f){i=Math.min(i,s),n=Math.max(n,s),_.fillStyle=o,_.globalAlpha=1,_.fillRect(0,0,l,h),_.fillStyle=e,_.fillText(a(s)+" "+t+" ("+a(i)+"-"+a(n)+")",c,d),_.drawImage(g,m+r,h,p-r,u,m,h,p-r,u),_.fillRect(m+p-r,h,r,u),_.fillStyle=o,_.globalAlpha=.9,_.fillRect(m+p-r,h,r,a((1-s/f)*u))}}},e)},7731:(t,e,o)=>{o.d(e,{_T:()=>i,mG:()=>n});function i(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(o[i[n]]=t[i[n]])}return o}function n(t,e,o,i){return new(o||(o=Promise))((function(n,a){function r(t){try{s(i.next(t))}catch(t){a(t)}}function l(t){try{s(i.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}s((i=i.apply(t,e||[])).next())}))}Object.create;Object.create},3587:t=>{t.exports=i,t.exports.parse=i,t.exports.stringify=function t(e){"Feature"===e.type&&(e=e.geometry);function o(t){return t.join(" ")}function i(t){return t.map(o).join(", ")}function n(t){return t.map(i).map(a).join(", ")}function a(t){return"("+t+")"}switch(e.type){case"Point":return"POINT ("+o(e.coordinates)+")";case"LineString":return"LINESTRING ("+i(e.coordinates)+")";case"Polygon":return"POLYGON ("+n(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+i(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+(e.coordinates.map(n).map(a).join(", ")+")");case"MultiLineString":return"MULTILINESTRING ("+n(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(t).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var e=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,o=new RegExp("^"+e.source+"(\\s"+e.source+"){1,}");function i(t){var e,i=t.split(";"),n=i.pop(),a=(i.shift()||"").split("=").pop(),r=0;function l(t){var e=n.substring(r).match(t);return e?(r+=e[0].length,e[0]):null}function s(){l(/^\s*/)}function c(){s();for(var t,e=0,i=[],n=[i],a=i;t=l(/^(\()/)||l(/^(\))/)||l(/^(,)/)||l(o);){if("("===t)n.push(a),a=[],n[n.length-1].push(a),e++;else if(")"===t){if(0===a.length)return null;if(!(a=n.pop()))return null;if(0===--e)break}else if(","===t)a=[],n[n.length-1].push(a);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(a,t.split(/\s/g).map(parseFloat))}s()}return 0!==e?null:i}function d(){for(var t,e,i=[];e=l(o)||l(/^(,)/);)","===e?(i.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),s();return t?(i.push(t),i.length?i:null):null}function m(){return function(){if(!l(/^(point(\sz)?)/i))return null;if(s(),!l(/^(\()/))return null;var t=d();return t?(s(),l(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!l(/^(linestring(\sz)?)/i))return null;if(s(),!l(/^(\()/))return null;var t=d();return t&&l(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!l(/^(polygon(\sz)?)/i))return null;s();var t=c();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!l(/^(multipoint)/i))return null;s();var t=n.substring(n.indexOf("(")+1,n.length-1).replace(/\(/g,"").replace(/\)/g,"");n="MULTIPOINT ("+t+")";var e=c();return e?(s(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!l(/^(multilinestring)/i))return null;s();var t=c();return t?(s(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!l(/^(multipolygon)/i))return null;s();var t=c();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){var t,e=[];if(!l(/^(geometrycollection)/i))return null;if(s(),!l(/^(\()/))return null;for(;t=m();)e.push(t),s(),l(/^(,)/),s();return l(/^(\))/)?{type:"GeometryCollection",geometries:e}:null}()}return(e=m())&&a.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),e}},4713:(t,e,o)=>{var i;o.d(e,{l:()=>n});class n{constructor(t,e,o=!1){this.elementsType=null,this._glBuffer=null,this._glContext=null,this._initData=t,this.byteLength="number"==typeof t?t:t.byteLength,this.type=o?n.ElementArrayBuffer:n.ArrayBuffer,this.options=Object.assign({},n.defaultOptions,e),this.drawType=this.options.instanceDivisor?n.DynamicDraw:n.StaticDraw;const i=[n.UnsignedByte,n.UnsignedShort,n.UnsignedInt];o&&!i.includes(this.options.dataType)&&(console.warn("Please provide dataType of one of the following values:Buffer.UnsignedByte, Buffer.UnsignedShort, Buffer.UnsignedInt. Defaulting to UnsignedInt"),this.options.dataType=n.UnsignedInt)}bind(t,e,o,i){if(this._glBuffer||this.prepare(t),this.type===n.ArrayBuffer){t.bindBuffer(t.ARRAY_BUFFER,this._glBuffer),e=e||0,o=o||this.options;const n=this._toGlParam(t,o.dataType)||t.FLOAT;t.vertexAttribPointer(e,o.itemSize,n,o.normalized,o.stride,o.offset),this._hasRealWebGLContext()&&o.instanceDivisor&&(t instanceof WebGLRenderingContext?i?i.vertexAttribDivisorANGLE(e,o.instanceDivisor):console.error("Can't set up instanced attribute divisor. Missing ANGLE_instanced_arrays extension"):t.vertexAttribDivisor(e,o.instanceDivisor))}else this.type===n.ElementArrayBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._glBuffer);return this}remove(){return this._unprepare(),this}subData(t,e,o){const i=this._toGlParam(t,this.type)||t.ARRAY_BUFFER;return t.bindBuffer(i,this._glBuffer),t.bufferSubData(i,e,o),this}prepare(t){this._glContext=t,this._glBuffer=t.createBuffer();const e=this._toGlParam(t,this.type)||t.ARRAY_BUFFER,o=this._toGlParam(t,this.drawType)||t.STATIC_DRAW;return t.bindBuffer(e,this._glBuffer),t.bufferData(e,this._initData,o),this._initData=null,this}getGLType(t){return this._toGlParam(t,this.options.dataType)}_unprepare(){this._glBuffer&&this._glContext&&(this._glContext.deleteBuffer(this._glBuffer),this._glBuffer=null,this._glContext=null)}_toGlParam(t,e){return e===n.ArrayBuffer?t.ARRAY_BUFFER:e===n.ElementArrayBuffer?t.ELEMENT_ARRAY_BUFFER:e===n.StaticDraw?t.STATIC_DRAW:e===n.DynamicDraw?t.DYNAMIC_DRAW:e===n.Byte?t.BYTE:e===n.Short?t.SHORT:e===n.Int?t.INT:e===n.Float?t.FLOAT:e===n.UnsignedByte?t.UNSIGNED_BYTE:e===n.UnsignedShort?t.UNSIGNED_SHORT:e===n.UnsignedInt?t.UNSIGNED_INT:null}_hasRealWebGLContext(){return"undefined"!=typeof window&&("WebGLRenderingContext"in window||"WebGL2RenderingContext"in window)}}i=n,n.ArrayBuffer=1,n.ElementArrayBuffer=2,n.StaticDraw=10,n.DynamicDraw=11,n.Float=20,n.UnsignedByte=21,n.UnsignedShort=22,n.UnsignedInt=23,n.Byte=24,n.Short=25,n.Int=26,n.defaultOptions={itemSize:3,dataType:i.Float,stride:0,offset:0,normalized:!1,instanceDivisor:0}},8946:(t,e,o)=>{o.d(e,{j:()=>i});class i{constructor(t,e={},o=null){this._vao=null,this._vaoExt=null,this._gl=null,this._attributes=e,this._shaderProgram=t,this.indicesBuffer=o}bind(t){const e=t.extensions.OES_vertex_array_object,o=t.extensions.ANGLE_instanced_arrays;return this._bind(t.gl,e,o),this}unbind(){return this._glBindVertexArray(null),this}setAttribute(t,e){this._attributes[t]=e}remove(){return this._vao&&(this._glDeleteVertexArray(this._vao),this._vao=null),this}getElementsGLType(t){return this.indicesBuffer?this.indicesBuffer.getGLType(t):null}_bind(t,e,o){this._vao?this._glBindVertexArray(this._vao):this._prepare(t,e,o)}_prepare(t,e,o){this._gl=t,e&&(this._vaoExt=e),this._vao=this._glCreateVertexArray(),this._glBindVertexArray(this._vao);const i=this._shaderProgram.attributes,n=this._attributes;for(const e in n){const a=i[e];!0!==a.index&&t.enableVertexAttribArray(a.location),n[e].bind(t,a.location,void 0,o)}this.indicesBuffer&&this.indicesBuffer.bind(t)}_glCreateVertexArray(){const t=this._gl,e=this._vaoExt;return t&&this._isWebGL2(t)?t.createVertexArray():e?e.createVertexArrayOES():null}_glBindVertexArray(t){const e=this._gl,o=this._vaoExt;e&&this._isWebGL2(e)?e.bindVertexArray(t):o?o.bindVertexArrayOES(t):e&&this._shaderProgram.bind(e,void 0,this._attributes)}_glDeleteVertexArray(t){const e=this._gl,o=this._vaoExt;e&&this._isWebGL2(e)?e.deleteVertexArray(t):o&&o.deleteVertexArrayOES(t)}_isWebGL2(t){return"undefined"!=typeof window&&"WebGL2RenderingContext"in window&&t instanceof WebGL2RenderingContext}}},9218:(t,e,o)=>{o.d(e,{Cl:()=>_,Fj:()=>I,Fp:()=>F,II:()=>C,Jy:()=>y,KL:()=>l,Nv:()=>A,Rq:()=>p,SP:()=>k,Sv:()=>r,Tr:()=>f,U3:()=>u,Uh:()=>c,Vc:()=>L,Wf:()=>b,Xd:()=>a,a5:()=>d,co:()=>g,eX:()=>s,fT:()=>x,gN:()=>j,jk:()=>m,jv:()=>E,n5:()=>w,nM:()=>h,nS:()=>M,o:()=>P,qt:()=>T,sP:()=>S,sY:()=>z,yV:()=>v});var i=o(1e3),n=o(6849);const a={minZoom:2,maxZoom:20},r={protocol:i.X?"%TILES_PROTOCOL%":"https",server:n.X,subdomains:"0123",tileSet:i.X?"%TILESET%":"vector_b",tileKey:"empty",appId:"empty",cacheRatio:2,maxUniverseZoom:8,maxRegionalZoom:15,maxDetailLevel:17},l={minZoom:10,maxZoom:14,tileSet:"com_poi_web",rasterSizes:[96,84,72,60,48,36,24]},s=100,c=13.5,d=[2048,2048],m={tiles:"{protocol}://{host}/vt?r={request}&ts={tileSet}&key={tileKey}&appId={appId}&lang={lang}&default_lang={defaultLang}&s={sessionId}",metatile:"{protocol}://{host}/metafiles/{hash}/metatile.json?ts={tileSet}",modelInfo:"{protocol}://{host}/metafiles/{regionId}/models.json?ts={tileSet}",model:"{protocol}://{host}/metafiles/{regionId}/{name}?ts={tileSet}",convertData:"{protocol}://{host}/metafiles/{hash}/convert.json?ts={tileSet}",dynamicPoi:"{protocol}://{host}/metafiles/{regionId}/poi/{id}_{width}_{height}.png?ts={tileSet}"},h={protocol:i.X?"%TRAFFIC_PROTOCOL%":"https",host:n._A,url:"{protocol}://{host}/tiles?tls={tiles}&reg={regions}&tm={time}&fmt=json&z={z}",timestampUrl:"{protocol}://{host}/meta?reg={regions}&time&score",updateInterval:12e4,minZoom:10,maxZoom:16,maxDetailLevel:17},p={defaultUrl:n.hs,gamma:.08,baseSize:24,baseLineHeight:1.2,bomCharCode:65279},u=(n.R_,n.vx,n.k1,{doubleClickTime:185,dragThreshold:2,pitchWaitingTime:200,pitchThreshold:7}),g={gaCode:"UA-25529177-4",gaName:"mapglEngine"},_=3e3,f={inAnimationTime:180,inAnimationType:"linear",outAnimationTime:800,outAnimationType:"linear"},y={time:300,type:"linear"},b={minStyleZoom:16,duration:500,easing:"easeOutQuint"},x={bounceType:"easeOutElastic",bounceTime:750,growType:"easeInOutQuad",growTime:750,stagger:0},v={pixelDensity:.5,sceneOpacity:0,cacheDebounceTime:400,pickDistance:3},w={interval:220,animationTime:200,animationType:"linear",tileMultiplier:1.5,axisAngleToleranceDeg:45,axisCheckDistancePx:13,commercialMargins:{default:{topBottom:60,leftRight:60},city:{topBottom:500,leftRight:500}},lineLabelsHidePitchDeg:40,maxLabelLength:30},z={alwaysRerender:!1,autoResizeInterval:50},F="en",S={mouseDelta:.65,macTouchDelta:.0018,animDuration:400,throttleDelay:100,mouseRotateDelta:2.5,mousePitchDelta:2.5,mobilePinchDelta:1,mobileTapDelta:10},C={duration:1300,maxSpeed:8,minSpeed:.02,nonLinearity:5},M={fov:60,near:1e3,far:Math.pow(2,34),minCalculationScreenHeight:1e3,viewportLimitRatio:2,perspectiveDistanceLimitRatio:10},P={enabled:!0,url:n.kv,displayStyleZoom:17,wallHeight:800,islandHeight:400,wallMinBrightness:.8265,wallMaxBrightness:.95,viewportPadding:.2},I={lightIntensity:.1},L={fpsCaveat:10},k=["Commercial_poi_city"],A=["Commercial_poi_default","Commercial_poi_custom","Commercial_poi_navi",...k],j=["s_personal_poi"],T=["Landmark_poi","Landmark_point"],E=[105,84,63,42,21]},1e3:(t,e,o)=>{o.d(e,{X:()=>i});const i=!1},6849:(t,e,o)=>{o.d(e,{Dd:()=>u,R_:()=>c,Sl:()=>g,X:()=>n,_A:()=>a,aT:()=>p,hs:()=>s,k0:()=>h,k1:()=>l,kv:()=>r,ns:()=>m,vx:()=>d});var i=o(1e3);const n=i.X?"%TILESERVER%":"tile{subdomain}.maps.2gis.com",a=i.X?"%TRAFFICSERVER%":"jam.api.2gis.com",r=i.X?"%FLOORSSERVER%":"https://floors.api.2gis.ru",l="https://styles.api.2gis.com",s="https://mapgl.2gis.com/api/fonts",c="https://disk.2gis.com/styles/assets/icons",d="https://disk.2gis.com/styles/{id}",m=i.X?"%KEYSERVER%":"https://keys.api.2gis.com/public/v1/keys/{keyID}/services/mapgl-js-api",h=i.X?"%RTLPLUGIN%":"https://mapgl.2gis.com/api/js/plugins/rtl-v1.1.0.js",p=i.X?"%RTLPLUGINHASH%":"sha512-tjMDcrUKh7nDirQujU9fzugiMU5JTlLd/MeeOXm35IK8QVYIt+Fv1lZKEViPQq7wG3nAw6ZcdMVtzas+4mwpGg==",u="https://disk.2gis.com/mapgl-api/threejs",g="https://mapgl.2gis.com/api/js/plugins/draco_decoder_gltf.js"},6273:(t,e,o)=>{o.d(e,{$U:()=>h,Bq:()=>l,CW:()=>x,Cd:()=>z,DL:()=>v,Fg:()=>C,Fv:()=>f,Gt:()=>u,L2:()=>w,LF:()=>m,Rw:()=>g,Uo:()=>b,_9:()=>r,_H:()=>s,ax:()=>p,ed:()=>a,gt:()=>c,jO:()=>d,p7:()=>y,rx:()=>F,sX:()=>n,uC:()=>S,vL:()=>_,y4:()=>i});const i=256,n=Math.pow(2,32),a=n/2,r=Math.pow(2,20),l=Math.pow(2,15),s=Math.pow(2,16)-1,c=l/s,d=16383,m=2.54,h=96,p=n/(i/h*m),u=.7071067811865475,g=4294967295,_=1175494351e-47,f=3402823466e29,y=["Arial","Helvetica","HelveticaNeueCyr","Open_Sans","Open_Sans_Semibold","Open_Sans_Italic","Segoe_UI","PT_Sans_Caption","PT_Sans","Verdana","Verdana_bold","Noto_Sans","Noto_Sans_Semibold","Noto_Sans_Italic","SuisseIntl_Bold"],b="Noto_Sans",x=.5,v=-3,w=-4,z=2147483647,F="eb10e2c3-3c28-4b81-b74b-859c9c4cf47e",S=5,C=4},3249:(t,e,o)=>{o.d(e,{FJ:()=>g,hX:()=>_,jf:()=>d});var i=o(6479),n=o(7188),a=o(6273),r=o(7464),l=o(5308),s=o(8450),c=o(412);const d=0,m={type:i.f.Static,index:-1,key:(0,r.PR)("",.5,.5),isSvg:!1,name:"",fileName:"",rasters:[],anchorX:.5,anchorY:.5},h=["default","marker","markerText","htmlLabel"],p={default:0,marker:1,markerText:2,htmlLabel:3},u={default:{default:!0,marker:!1,markerText:!0,htmlLabel:!0},marker:{default:!1,marker:!1,markerText:!0,htmlLabel:!1},markerText:{default:!0,marker:!0,markerText:!0,htmlLabel:!1},htmlLabel:{default:!0,marker:!1,markerText:!1,htmlLabel:!1}};function g(t){const e=[],o=Object.keys(n.Dz).length;for(let t=0;t<o;t++)e[t]=NaN;for(const o in t){if(void 0===n.Dz[o])throw new Error(`No such tile prop '${o}'`);e[n.Dz[o]]=t[o]}return e}class _{constructor(){this.style={id:d,revision:0,background:{color:(0,c.MV)("f6f2de")},light:{ambientColor:{type:"color",value:[1,1,1]},direction:[1,0,0]},layers:[],layersById:{},layerIdToInnerId:{},groupsById:{},iconBaseUrl:"",legacyIconBaseUrl:"",iconNameTemplate:"",fontUrlTemplate:"",modelsBaseUrl:"",rasterSets:{byIndex:{},byKey:{}},labelingGroups:{indexToGroup:h,groupToIndex:p,table:u},fonts:a.p7,fontNameToIndex:(0,s.PU)(a.p7),icons:{},models:[],modelIndex:{},dem:(0,l.vR)({})},this.needRenderIndexRebuild=!1,this.zIndexById={};const t=(0,l.qw)({type:"line",id:"debug-tile-bounds",minzoom:-1/0,maxzoom:1/0,style:{color:"#ff0000",width:1}});t&&this.addLayer(t,0)}getStyle(){return this.style}appendRasterSet(t,e){this.style.rasterSets.byIndex[t.index]=t,void 0!==e&&(this.style.rasterSets.byKey[e]=t)}removeRasterSet(t){this.style.rasterSets.byIndex[t]=m}getLabelingGroupIndex(t){const{groupToIndex:e}=this.style.labelingGroups;return void 0!==e[t]?e[t]:e.default}addLayer(t,e){this.style.layers.push(t),this.style.layersById[t.innerId]=t,void 0!==e&&(this.zIndexById[t.innerId]=e),this.needRenderIndexRebuild=!0}removeLayer(t){const e=this.style.layersById[t];if(!e)return;const o=this.style.layers.indexOf(e);-1!==o&&this.style.layers.splice(o,1),delete this.style.layersById[t]}update(){this.needRenderIndexRebuild&&(this.rebuildRenderIndex(),this.needRenderIndexRebuild=!1)}updateLayerStyle(t,{style:e,dataKeys:o}){const i=this.style.layersById[t];i&&(i.style=e,i.dataKeys=o)}rebuildRenderIndex(){this.style.layers.sort(((t,e)=>{var o,i;return(null!==(o=this.zIndexById[t.innerId])&&void 0!==o?o:0)-(null!==(i=this.zIndexById[e.innerId])&&void 0!==i?i:0)}));for(let t=0;t<this.style.layers.length;t++)this.style.layers[t].renderIndex=t}}},412:(t,e,o)=>{o.d(e,{MV:()=>s,RY:()=>l,gC:()=>r,iL:()=>a});var i=o(7464);const n=(0,i.lK)([255,0,0,255]);function a(t){return"string"==typeof t&&/(#(?:[0-9a-f]{2}){2,4}|#[0-9a-f]{3}|(?:rgba?|hsla?)\((?:\d+%?(?:,|\s)+){2,3}[\s\/]*[\d\.]+%?\))/i.test(t)}function r(t){return!!t&&"object"==typeof t&&"color"===t.type}function l(t){return!!t&&"object"==typeof t&&"gradient-color"===t.type}function s(t){const e=t.toLowerCase();let o=n;switch(e[0]){case"#":o=function(t){if(!new RegExp(`^#[a-f0-9]{${t.length-1}}$`).test(t)||![4,5,7,9].includes(t.length))return n;const e=function(t){if(t.length<7)return t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(5===t.length?t[4]+t[4]:"ff");if(7===t.length)return t+"ff";return t}(t),o=parseInt(e[1]+e[2],16),a=parseInt(e[3]+e[4],16),r=parseInt(e[5]+e[6],16),l=parseInt(e[7]+e[8],16);return(0,i.lK)([o,a,r,l])}(e);break;case"h":o=function(t){const e=c(t);e[0]/=360,e[1]/=100,e[2]/=100;const[o,n,a]=function(t,e,o){if(0===e)return[255*o,255*o,255*o];const i=o<.5?o*(1+e):o+e-o*e,n=2*o-i;return[255*d(n,i,t+1/3),255*d(n,i,t),255*d(n,i,t-1/3)]}(e[0],e[1],e[2]),r=void 0!==e[3]?255*e[3]:255;return(0,i.lK)([Math.round(o),Math.round(n),Math.round(a),Math.round(r)])}(e);break;case"r":o=function(t){const[e,o,n,a]=c(t),r=void 0!==a?255*a:255;return(0,i.lK)([Math.round(e),Math.round(o),Math.round(n),Math.round(r)])}(e)}return o}function c(t){return t.split("(")[1].split(")")[0].split(",").map((t=>parseFloat(t)))}function d(t,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(e-t)*o:o<.5?e:o<2/3?t+(e-t)*(2/3-o)*6:t}},5308:(t,e,o)=>{o.d(e,{Cp:()=>z,Jn:()=>M,Wy:()=>C,qw:()=>L,vR:()=>k,ys:()=>F,z8:()=>S});var i=o(412),n=o(3754),a=o(7464),r=o(314),l=o(1284),s=o(6273),c=o(6479),d=o(2543),m=o(1757),h=o(8450),p=o(2627),u=o(132),g=o(199),_=o(3671),f=o(6544);class y extends Error{constructor(t){super(`Unknown expression type '${t[0]}' in '${JSON.stringify(t)}'`),this.name="UnknownExpressionTypeError",Object.setPrototypeOf(this,new.target.prototype)}}function b(t,e){if((0,a.aH)(t))return(0,i.iL)(t)?(0,i.MV)(t):t;switch(t[0]){case"all":return function(t,e){return{type:"all",array:t.slice(1).map((t=>b(t,e)))}}(t,e);case"any":return function(t,e){return{type:"any",array:t.slice(1).map((t=>b(t,e)))}}(t,e);case"match":return function(t,e){const o={type:"match",input:b(t[1],e),cases:[],defaultOutput:b(t[t.length-1],e)},i=t.slice(2,-1);for(let t=0;t<i.length;t+=2){const n=i[t].reduce(((t,e)=>("boolean"==typeof e&&t.push(Number(e)),t.push(e),t)),[]),a={values:new Set(n),output:b(i[t+1],e)};o.cases.push(a)}return o}(t,e);case"in":return function(t,e){const o=b(t[1],e),i=t[2][0];if("get"!==i&&"global"!==i&&"sourceAttr"!==i)throw new Error("InExpression supports only get, global or source attr expression as a second argument");const n=b(t[2],e);return{type:"in",element:o,array:n}}(t,e);case"interpolate":return v(t,e);case"step":return function(t,e){const o={type:"step",steps:[],value:b(t[1],e)},i={key:0,value:b(t[2],e)};o.steps.push(i);const n=t.slice(3);for(let t=0;t<n.length;t+=2){const i={key:n[t],value:b(n[t+1],e)};o.steps.push(i)}return o}(t,e);case"featureState":return function(t,e){const o=t[0],i=(0,p.qS)(t[1]);return{type:o,dataIndex:e?e.getUniqueIndex(`${o}:${i}`):NaN,property:i}}(t,e);case"get":case"sourceAttr":case"global":return w(t,e);case"zoom":return{type:"zoom"};case"height":return{type:"height"};case"heatmap-density":return{type:"heatmap-density"};case"shading-intensity":return{type:"shading-intensity"};case"to-boolean":case"to-color":case"!":case"log10":return function(t,e){return{type:t[0],value:b(t[1],e)}}(t,e);case"==":case"!=":case"<":case"<=":case">":case">=":return function(t,e){const o=b(t[1],e),i=b(t[2],e);return{type:t[0],leftValue:o,rightValue:i}}(t,e);case"+":return function(t,e){return{type:"+",array:t.slice(1).map((t=>b(t,e)))}}(t,e);case"*":return function(t,e){return{type:"*",array:t.slice(1).map((t=>b(t,e)))}}(t,e);case"^":return function(t,e){const o=b(t[1],e),i=b(t[2],e);return{type:"^",base:o,exponent:i}}(t);case"random":return function(t,e){const o=b(t[1],e),i=b(t[2],e);return{type:"random",start:o,end:i}}(t,e);case"literal":return Array.isArray(t[1])?function(t,e){return{type:"literalArray",array:t[1].map((t=>b(t,e)))}}(t,e):t[1];default:throw new y(t)}}function x(t,e){return void 0===t?t:b(t,e)}function v(t,e){const o={type:"interpolate",base:1,argument:b(t[2],e),steps:[]};"exponential"===t[1][0]&&void 0!==t[1][1]&&(o.base=t[1][1]);const i=t.slice(3);for(let t=0;t<i.length;t+=2){const n={key:b(i[t],e),value:b(i[t+1],e)};o.steps.push(n)}return o}function w(t,e){const o=t[0],i=(0,p.qS)(t[1]);return{type:o,dataIndex:e?e.getUniqueIndex(`${o}:${i}`):NaN,property:i}}function z(t,e,o,n){var a,r,c;const d=n===s.rx?_.$:{},p=k(null!==(a=t.terrain)&&void 0!==a?a:d),y={id:e,revision:0,background:{color:(0,i.MV)(t.background.color)},light:{ambientColor:{type:"color",value:[1,1,1]},direction:[1,0,0]},layers:[],layersById:{[u.h]:p},layerIdToInnerId:{},groupsById:{},iconBaseUrl:"",legacyIconBaseUrl:"",iconNameTemplate:"",fontUrlTemplate:"",modelsBaseUrl:"",fonts:s.p7,fontNameToIndex:(0,h.PU)(s.p7),rasterSets:{byIndex:{},byKey:{}},icons:t.icons||{},models:Object.values(null!==(r=t.models)&&void 0!==r?r:{}),modelIndex:(0,f.m)(t.models||{}),labelingGroups:(0,m.L)(null!==(c=t.labelingGroups)&&void 0!==c?c:{}),dem:p},b=new l.x;let x=t.layers;o&&(x=function(t,e){let o=0,i=0;function n(t,e){"custom"!==t.type&&((0,h.Kx)(t.filter)&&(o=e),"point"===t.type&&t.style.iconPriority&&t.style.iconPriority>i&&(i=t.style.iconPriority))}return t.forEach(((t,e)=>{"group"===t.type?t.layers.forEach((t=>n(t,e))):n(t,e)})),e.forEach((t=>{"point"===t.type&&(t.style.iconPriority=i)})),[...t.slice(0,o+1),...e,...t.slice(o+1)]}(t.layers,g.T));for(const t of x){const e=F(t);if(!e)continue;"group"===e.type&&(y.groupsById[e.innerId]=e,y.layerIdToInnerId[e.id]=e.innerId);("group"===e.type?e.layers:[e]).forEach((t=>{if(y.layers.push(t),y.layersById[t.innerId]=t,y.layerIdToInnerId[t.id]=t.innerId,"point"===t.type||"polygon"===t.type){S(t,b).forEach((t=>{y.rasterSets.byKey[t.key]||(y.rasterSets.byIndex[t.index]=t,y.rasterSets.byKey[t.key]=t)}))}}))}return y}function F(t){return"group"===t.type?function(t){var e;const o=new l.x,i=null===(e=t.orderBy)||void 0===e?void 0:e.map((t=>w(t,o))),n={id:t.id,innerId:(0,u.U)(),renderIndex:P.getIndex(),type:t.type,layers:[],orderBy:null!=i?i:[]};return t.layers.forEach(((t,e)=>{const o=L(t,i);o&&(o.groupId=n.innerId,o.groupIndex=e,o.renderIndex=n.renderIndex,n.layers.push(o))})),n}(t):L(t)}function S(t,e){const o=[],{image:i,imageType:n,anchor:a}=M(t);return i?((0,d.EG)(i).forEach((t=>{t.length&&o.push(C(t,n,e,a))})),o):o}function C(t,e,o,i){const n="icon"===e?(0,a.PR)(t,i[0],i[1]):(0,a.FD)(t);return{type:c.f.Static,index:o.getUniqueIndex(n),key:n,isSvg:!0,name:t,fileName:t,anchorX:i[0],anchorY:i[1],rasters:[]}}function M(t){return"point"===t.type?{image:t.style.iconImage,imageType:"icon",anchor:t.style.iconAnchor}:{image:t.style.textureImage,imageType:"texture",anchor:[0,0]}}const P=new l.x;function I(t,e){return"appearance"===t.type?{type:t.type,tipMovementAmplitude:b(t.tipMovementAmplitude,e)}:t}function L(t,e){var o;if("custom"===t.type)return{type:"custom",id:t.id,innerId:(0,u.U)(),renderIndex:P.getIndex(),filter:!1,minzoom:-1/0,maxzoom:1/0,dataKeys:[],style:{}};if(!t.style||"none"===t.style.visibility)return;const i=new l.x(e?e.length:0);let s;try{const e={id:t.id,innerId:(0,u.U)(),renderIndex:P.getIndex(),filter:b(t.filter||!1),minzoom:A(t.minzoom,-1/0),maxzoom:A(t.maxzoom,1/0),dataKeys:[],farLimit:t.farLimit,webglState:t.webglState};switch(t.type){case"line":{const o=(0,n.q0)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),width:b(o.width,i)}});break}case"lineExtrusion":{const o=(0,n.l7)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{sideColor:b(o.sideColor,i),strokeWidth:b(o.strokeWidth,i),strokeColor:b(o.strokeColor,i),height:b(o.height,i)}});break}case"polygon":{const o=(0,n.IJ)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),textureImage:b(o.textureImage,i),textureSize:o.textureSize,textureOpacity:b(o.textureOpacity,i),strokeColor:b(o.strokeColor,i),strokeWidth:b(o.strokeWidth,i)}});break}case"roadPolygon":{const o=(0,n.t7)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),strokeColor:b(o.strokeColor,i),strokeWidth:b(o.strokeWidth,i),laneWidth:b(o.laneWidth,i)}});break}case"mesh":{const o=(0,n.w9)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),strokeColor:b(o.strokeColor,i),strokeWidth:b(o.strokeWidth,i)}});break}case"polygonExtrusion":{const o=(0,n.bN)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{topColor:b(o.topColor,i),sideColor:b(o.sideColor,i),strokeColor:b(o.strokeColor,i),strokeWidth:b(o.strokeWidth,i)}});break}case"dashedLine":{const o=(0,n.N5)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),gapColor:b(o.gapColor,i),width:b(o.width,i),gapLength:b(o.gapLength,i),dashLength:b(o.dashLength,i)}});break}case"shiftedLine":{const o=(0,n.sd)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),width:b(o.width,i),shift:b(o.shift,i)}});break}case"oneWayLine":{const o=(0,n.zn)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),lineWidth:b(o.lineWidth,i),lineLength:b(o.lineLength,i),tipWidth:o.tipWidth,tipHeight:o.tipHeight,priority:o.priority,duplicationSpacing:b(o.duplicationSpacing,i),endingOffsets:o.endingOffsets,labelingGroup:o.labelingGroup}});break}case"buildingModel":{const o=(0,n._0)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),strokeColor:b(o.strokeColor,i),strokeWidth:b(o.strokeWidth,i)}});break}case"labelLine":{const o=(0,n.Ym)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{textField:b(o.textField,i),textFont:o.textFont,textColor:b(o.textColor,i),textFontSize:b(o.textFontSize,i),textLetterSpacing:o.textLetterSpacing,textHaloColor:b(o.textHaloColor,i),textHaloWidth:o.textHaloWidth,textPriority:o.textPriority,textLabelingSideMargin:o.textLabelingSideMargin,textDuplicationSpacing:b(o.textDuplicationSpacing,i),labelingGroup:o.labelingGroup,lineEndingOffsets:o.lineEndingOffsets}});break}case"point":{const o=(0,n.TI)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{allowOverlap:o.allowOverlap,allowElevation:o.allowElevation,elevation:b(o.elevation,i),iconImage:b(o.iconImage,i),iconAnchor:o.iconAnchor,iconOffset:o.iconOffset,iconWidth:b(o.iconWidth,i),iconTextField:b(o.iconTextField,i),iconTextFont:x(o.iconTextFont,i),iconTextAnchor:o.iconTextAnchor,iconTextOffset:o.iconTextOffset,iconTextColor:b(o.iconTextColor,i),iconTextFontSize:b(o.iconTextFontSize,i),iconTextLineHeight:o.iconTextLineHeight,iconTextLetterSpacing:o.iconTextLetterSpacing,iconTextPadding:o.iconTextPadding,iconTextHaloWidth:(0,a.Wx)(o.iconTextHaloWidth),iconTextHaloColor:b(o.iconTextHaloColor,i),iconOpacity:b(o.iconOpacity,i),iconPriority:o.iconPriority,iconLabelingMargin:o.iconLabelingMargin,iconLabelingGroup:o.iconLabelingGroup,iconRotation:b(o.iconRotation,i),textField:b((0,a.Wx)(o.textField),i),textFont:b((0,a.Wx)(o.textFont),i),textColor:b((0,a.Wx)(o.textColor),i),textFontSize:b((0,a.Wx)(o.textFontSize),i),textLineHeight:(0,a.Wx)(o.textLineHeight),textLetterSpacing:(0,a.Wx)(o.textLetterSpacing),textField2:x((0,a._e)(o.textField),i),textFont2:x((0,a._e)(o.textFont),i),textColor2:x((0,a._e)(o.textColor),i)||b((0,a.Wx)(o.textColor),i),textFontSize2:x((0,a._e)(o.textFontSize),i)||b((0,a.Wx)(o.textFontSize),i),textMaxLengthPerLine:o.textMaxLengthPerLine,textPlacement:o.textPlacement,textPriority:o.textPriority,textOffset:b((0,a.Wx)(o.textOffset),i),textOffset2:x((0,a._e)(o.textOffset),i),textHaloColor:b((0,a.Wx)(o.textHaloColor),i),textHaloColor2:x((0,a._e)(o.textHaloColor),i)||b((0,a.Wx)(o.textHaloColor),i),textHaloWidth:(0,a.Wx)(o.textHaloWidth),textHaloWidth2:(0,a._e)(o.textHaloWidth)||(0,a.Wx)(o.textHaloWidth),textLabelingMargin:(0,a.Wx)(o.textLabelingMargin),textLabelingMargin2:(0,a._e)(o.textLabelingMargin)||(0,a.Wx)(o.textLabelingMargin),textLabelingGroup:(0,a.Wx)(o.textLabelingGroup),textLabelingGroup2:(0,a._e)(o.textLabelingGroup)||(0,a.Wx)(o.textLabelingGroup),duplicationSpacing:b(o.duplicationSpacing,i),endingOffsets:o.endingOffsets}});break}case"arrow":{const o=(0,n.z4)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),strokeColor:b(o.strokeColor,i),lineWidth:b(o.lineWidth,i),strokeWidth:b(o.strokeWidth,i),tipWidth:b(o.tipWidth,i),tipHeight:b(o.tipHeight,i),animation:I(o.animation,i)}});break}case"raster":{const o=(0,n.tC)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{opacity:b(o.opacity,i)}});break}case"circle":{const o=(0,n.th)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),strokeColor:b(o.strokeColor,i),strokeColor2:b(o.strokeColor2,i),width:b(o.width,i),strokeWidth:b(o.strokeWidth,i),strokeWidth2:b(o.strokeWidth2,i)}});break}case"heatmap":{const o=(0,n.Mk)(t.style);s=Object.assign(Object.assign({},e),{type:t.type,style:{color:b(o.color,i),radius:b(o.radius,i),opacity:b(o.opacity,i),intensity:b(o.intensity,i),weight:b(o.weight,i),downscale:o.downscale},framebufferId:{framebuffer:r.z}});break}case"model":{const a=(0,n.M3)(t.style),r=null===(o=t.interactive)||void 0===o||o;s=Object.assign(Object.assign({},e),{interactive:r,type:"gltfModel",style:{modelSrc:b(a.modelSrc,i),offset:b(a.offset,i),scale:b(a.scale,i),rotation:b(a.rotation,i),color:b(a.color,i),linkedIds:b(a.linkedIds),useThreeJs:a.useThreeJs}});break}}}catch(e){if(e instanceof y)return void console.warn(`Problem with layer #${t.id}: ${e}`);throw e}if(s){s.dataKeys=function(t){const e=[];for(const o in t){const[i,...n]=o.split(":");e[t[o]]={type:i,key:n.join(":")}}return e}(i.getIndexedKeys());for(const t of null!=e?e:[])s.dataKeys[t.dataIndex]={type:t.type,key:t.property};const t=s.dataKeys.findIndex((t=>"selected"===t.key));-1!==t&&(s.selectedIdx=t)}return s}function k(t){const e=(0,n.sy)(t);return{id:"dem",type:"dem",innerId:u.h,filter:!0,dataKeys:[],minzoom:-1/0,maxzoom:1/0,renderIndex:-1/0,style:{lightingDirection:b(e.lightingDirection),shadingIntensity:b(e.shadingIntensity),shadingPalette:v(e.shadingPalette),verticalScale:b(e.verticalScale)},framebufferId:{elevation:r.z,hillshade:r.z,flatBottom:r.z}}}function A(t,e){return"number"!=typeof t||Number.isNaN(t)?e:t}},3754:(t,e,o)=>{o.d(e,{IJ:()=>a,M3:()=>w,Mk:()=>x,N5:()=>u,R_:()=>z,TI:()=>f,T_:()=>S,YW:()=>C,Ym:()=>h,_0:()=>d,bN:()=>s,l7:()=>m,n3:()=>F,q0:()=>c,sd:()=>g,sy:()=>v,t7:()=>r,tC:()=>b,th:()=>_,w9:()=>l,z4:()=>y,zn:()=>p});var i=o(6490);function n(t,e){for(const o in e)void 0!==e[o]&&(t[o]=e[o])}function a(t){const e={color:"#000000",textureImage:"",textureSize:16,textureOpacity:1,strokeColor:"#00000000",strokeWidth:1,visibility:"visible"};return n(e,t),void 0!==t.strokeColor||Boolean(e.textureImage)||(e.strokeColor=e.color),Array.isArray(e.textureSize)?(e.textureSize.length?1===e.textureSize.length&&(e.textureSize=e.textureSize[0]):e.textureSize=16,e):e}function r(t){const e={color:"#000000",strokeColor:"#000000",strokeWidth:1,visibility:"visible",laneWidth:3.75};return n(e,t),void 0===t.strokeColor&&(e.strokeColor=e.color),e}function l(t){const e={color:"#000000",strokeColor:"#000000",strokeWidth:1,visibility:"visible"};return n(e,t),void 0===t.strokeColor&&(e.strokeColor=e.color),e}function s(t){const e={topColor:"#000000",strokeColor:"#000000",strokeWidth:1,sideColor:"#000000",visibility:"visible"};return n(e,t),void 0===t.strokeColor&&(e.strokeColor=e.topColor),void 0===t.sideColor&&(e.sideColor=e.topColor),e}function c(t){const e={color:"#000000",width:1,visibility:"visible"};return n(e,t),e}function d(t){const e={color:"#000000",strokeColor:"#000000",strokeWidth:1,visibility:"visible"};return n(e,t),void 0===t.strokeColor&&(e.strokeColor=e.color),e}function m(t){const e={sideColor:"#000000",strokeColor:"#000000",strokeWidth:1,height:0,visibility:"visible"};return n(e,t),void 0===t.strokeColor&&(e.strokeColor=e.sideColor),e}function h(t){const e={textField:["get","db_label"],textFont:"Noto_Sans",textColor:"#000000",textFontSize:16,textLetterSpacing:0,textHaloColor:"rgba(0, 0, 0, 0)",textHaloWidth:0,textPriority:0,textLabelingSideMargin:0,textDuplicationSpacing:0,lineEndingOffsets:0,visibility:"visible",labelingGroup:S};return n(e,t),e}function p(t){const e={color:"#000000",lineWidth:2,lineLength:10,tipWidth:1.5,tipHeight:2,priority:0,duplicationSpacing:0,endingOffsets:0,visibility:"visible",labelingGroup:S};return n(e,t),e}function u(t){const e={color:"#000000",gapColor:"#00000000",width:1,gapLength:1,dashLength:1,visibility:"visible"};return n(e,t),e}function g(t){const e={color:"#000000",width:1,shift:0,visibility:"visible"};return n(e,t),e}function _(t){const e={color:"#ffffff",strokeColor:"#3388ff",strokeColor2:"#00000000",width:20,strokeWidth:3,strokeWidth2:0,visibility:"visible"};return n(e,t),e}function f(t){const e={allowOverlap:!1,allowElevation:!1,elevation:0,iconOpacity:1,iconImage:"",iconAnchor:[.5,.5],iconOffset:[0,0],iconWidth:16,iconTextField:["get","db_label2"],iconTextFont:"",iconTextAnchor:[.5,.5],iconTextOffset:[0,0],iconTextColor:"#000000",iconTextFontSize:16,iconTextLineHeight:1.2,iconTextLetterSpacing:0,iconTextPadding:[0,0,0,0],iconTextHaloWidth:0,iconTextHaloColor:"rgba(0, 0, 0, 0)",iconPriority:0,iconRotation:0,iconLabelingGroup:S,iconLabelingMargin:{topBottom:0,leftRight:0},textField:[["get","db_label"],["get","db_label2"]],textFont:"",textColor:"#000000",textFontSize:16,textLineHeight:1.2,textLetterSpacing:0,textPlacement:"bottomCenter",textOffset:0,textHaloColor:"rgba(0, 0, 0, 0)",textHaloWidth:0,textLabelingMargin:{topBottom:0,leftRight:0},textPriority:0,textMaxLengthPerLine:30,visibility:"visible",textLabelingGroup:S,duplicationSpacing:100,endingOffsets:0};return n(e,t),e}function y(t){const e={color:"#000000",strokeColor:"#000000",lineWidth:1,strokeWidth:0,tipWidth:1,tipHeight:1,animation:{type:"appearance",tipMovementAmplitude:0},visibility:"visible"};return void 0===t.strokeColor&&(e.strokeColor=e.color),n(e,t),e}function b(t){const e={opacity:1,visibility:"visible"};return n(e,t),e}function x(t){return(0,i.kn)(t,{color:["interpolate",["linear"],["heatmap-density"],0,"rgba(53, 136, 253, 0)",.2,"rgba(53, 136, 253, 0.2)",.4,"rgb(255, 201, 77)",.6,"rgb(255, 202, 20)",.75,"rgb(245, 0, 7)",1,"rgb(255, 0, 0)"],radius:30,opacity:1,intensity:1,weight:1,downscale:1,visibility:"visible"})}function v(t){return(0,i.kn)(t,{lightingDirection:315,shadingIntensity:.15,verticalScale:1.2,shadingPalette:["interpolate",["exponential",2],["shading-intensity"],0,0,1,.95]})}function w(t){return(0,i.kn)(t,{modelSrc:"",offset:0,scale:1,rotation:0,color:"#fff",linkedIds:"",useThreeJs:!1,visibility:"visible"})}const z="__overlapped",F="__commercial",S="default",C={groups:[S,z,F],overlay:[[S,z]],intersect:[[]]}},7464:(t,e,o)=>{function i(t){return"number"==typeof t||"boolean"==typeof t||"string"==typeof t||null===t}function n(t){if(Array.isArray(t)){const e=t;if(!e.length)return!1;if({zoom:!0,height:!0,"heatmap-density":!0,"shading-intensity":!0,step:!0,interpolate:!0,all:!0,get:!0,sourceAttr:!0,featureState:!0,global:!0,match:!0,in:!0,any:!0,"!":!0,"==":!0,"!=":!0,">=":!0,">":!0,"<=":!0,"<":!0,"to-boolean":!0,"to-color":!0,"+":!0,"*":!0,"^":!0,log10:!0,random:!0,literal:!0}[e[0]])return!0}return!1}function a(t){return!Array.isArray(t)&&"object"==typeof t&&null!==t&&void 0!==t.type&&"color"!==t.type}function r(t,e){return!!Array.isArray(t)&&(t.length>0&&t.every((t=>typeof t===e)))}function l(t){return r(t,"number")}function s(t){const e=typeof t;return null===t||"string"===e||"number"===e||"boolean"===e||function(t){return!Array.isArray(t)&&"object"==typeof t&&null!==t&&"color"===t.type}(t)||function(t){return r(t,"string")}(t)||l(t)}function c(t){return a(t)&&"get"===t.type}function d(t){return{type:"color",value:t}}function m(t,e,o){return`${t}_${e}_${o}`}function h(t){return`texture-${t}`}function p(t,e){return`unique-${t}_${e}`}function u(t){return Array.isArray(t)?n(t)?t:t[0]:t}function g(t){if(Array.isArray(t)&&!n(t)&&void 0!==t[1])return t[1]}o.d(e,{FD:()=>h,HW:()=>s,PR:()=>m,Uu:()=>a,Wx:()=>u,_e:()=>g,aH:()=>i,lK:()=>d,nS:()=>l,vB:()=>c,zV:()=>p})},1284:(t,e,o)=>{o.d(e,{x:()=>i});class i{constructor(t=0){this.index=t,this.keysMap={}}getIndex(){const t=this.index;return this.index+=1,t}getUniqueIndex(t){return void 0===this.keysMap[t]&&(this.keysMap[t]=this.index,this.index+=1),this.keysMap[t]}getIndexedKeys(){return this.keysMap}}},1757:(t,e,o)=>{o.d(e,{L:()=>n});var i=o(3754);function n(t){const e=function(t){const e=(t.groups||[]).concat(i.YW.groups).reduce(((t,e)=>(t.includes(e)||t.push(e),t)),[]),o=(t.overlay||[]).concat(i.YW.overlay).concat(e.reduce(((t,e)=>(e===i.T_||e===i.R_||e===i.n3||t.push([e,i.R_]),t)),[])).reduce(((t,o)=>{const i=[];for(const t of o)e.includes(t)&&i.push(t);return i.length>1&&t.push(i),1===o.length&&1===i.length&&t.push(i),t}),[]);return{groups:e,overlay:o,intersect:i.YW.intersect}}(t),{groups:o,table:n}=function(t){const{groups:e,overlay:o,intersect:i}=t,n=e.reduce(((t,e,o)=>(t[e]=o,t)),{}),a=[];for(let t=0;t<e.length;t++){const t=[];for(let o=0;o<e.length;o++)t.push(!0);a.push(t)}for(let t=0;t<o.length;t++){const e=o[t];for(let t=0;t<e.length;t++)for(let o=t+1;o<e.length;o++){const i=n[e[t]],r=n[e[o]];a[i][r]=!1,a[r][i]=!1}}for(let t=0;t<i.length;t++){const e=i[t];for(let t=0;t<e.length;t++)for(let o=t+1;o<e.length;o++){const i=n[e[t]],r=n[e[o]];a[i][r]=!0,a[r][i]=!0}}return{groups:e,table:a}}(e),a={};for(let t=0;t<n.length;t++){const e=n[t],i=o[t];a[i]={};for(let r=0;r<e.length;r++){const e=o[r];a[i][e]=n[t][r]}}const r=o.reduce(((t,e,o)=>(t[e]=o,t)),{});return{indexToGroup:o,groupToIndex:r,table:a}}},132:(t,e,o)=>{o.d(e,{U:()=>n,h:()=>a});let i=0;function n(){return i++}const a=n()},7490:(t,e,o)=>{o.d(e,{P:()=>a});var i=o(3513),n=o(3672);class a{constructor(){this.layers=[],this.keyStat={},this.orderedKeys=[],this.tree=null,this.treeNodesCount=0,this.traverseCount=0,this.traverseIterations=0}addLayers(t){for(const e of t)"custom"!==e.type&&e.filter&&(this.layers.push(e),this.statLayerKeys(e));this.buildTree()}getLayers(t,e){const o=[],i=(a,r)=>{if(this.traverseIterations+=1,!a)return;for(const t of a.leafs)o.push(t);const l=this.orderedKeys[r];if(!l)return;const s=e[t[l]],c=(0,n.nI)(s)?(0,n.Ak)(s):s;void 0!==c?(i(a.children[c],r+1),i(a.novalue,r+1)):i(a.novalue,r+1)};return this.traverseCount+=1,i(this.tree,0),o}stat(){const t=this.traverseIterations/this.traverseCount||0;return{tree:this.tree,treeNodes:this.treeNodesCount,layers:this.layers.length,keyStat:this.keyStat,itersPerTraverse:t}}statLayerKeys(t){const e=(0,i.zL)(t.filter).filter((t=>(0,i.VH)(t)))[0];if(e&&(0,i.VH)(e))for(const t in e.attrs)void 0===this.keyStat[t]&&(this.keyStat[t]=0),this.keyStat[t]+=1}getOrderedKeys(){return Object.entries(this.keyStat).sort((([t,e],[o,i])=>i-e)).map((([t,e])=>t))}buildTree(){this.orderedKeys=this.getOrderedKeys();const t=[];for(const e of this.layers){const o=(0,i.zL)(e.filter).filter(i.VH);0===o.length&&t.push(e);for(const t of o){const o=new Set(Object.keys(t.attrs));let i=0;const n=t.attrs;let a=this.tree;for(let t=0;t<=this.orderedKeys.length;t++){if(i===o.size){null==a||a.leafs.push(e);break}const r=this.orderedKeys[t],l=this.orderedKeys[t+1]||"";if(a||(a=this.makeTreeNode(r),null===this.tree&&(this.tree=a)),o.has(r)){const t=n[r];a.children[t]||(a.children[t]=this.makeTreeNode(l)),a=a.children[t],i+=1}else a.novalue||(a.novalue=this.makeTreeNode(l)),a=a.novalue}}}t.length>0&&(this.tree||(this.tree=this.makeTreeNode("")),this.tree.leafs=t)}makeTreeNode(t){return this.treeNodesCount+=1,{key:t,children:{},novalue:null,leafs:[]}}}},2543:(t,e,o)=>{o.d(e,{EG:()=>z,FR:()=>c,Q9:()=>g,UP:()=>m,Yi:()=>b,bs:()=>y,jJ:()=>f,m2:()=>w,o4:()=>_,qv:()=>p,vn:()=>u,zn:()=>h});var i=o(412),n=o(7464),a=o(309),r=o(3672),l=o(173);const s=null;function c(t,e){if(!(0,n.Uu)(t))return t;if(e.allowedExpressions&&!e.allowedExpressions.has(t.type))return(0,a.cM)(`Expression of type ${t.type} is not allowed here`),s;switch(t.type){case"all":return function(t,e){return t.array.every((t=>!0===c(t,e)))}(t,e);case"any":return function(t,e){return t.array.some((t=>!0===c(t,e)))}(t,e);case"featureState":return function(t,e){var o,i;if("binder"===e.type||"labeling"===e.type)return null!==(o=d(e.tileData[t.dataIndex]))&&void 0!==o?o:null;{const o=null!==(i=e.featureAttrs[e.tileProps[t.property]])&&void 0!==i?i:null;return Number.isNaN(o)?null:d(o)}}(t,e);case"get":return function(t,e){var o,i,n;if("binder"===e.type||"labeling"===e.type)return null!==(o=d(e.tileData[t.dataIndex]))&&void 0!==o?o:null;{const o=null!==(n=null===(i=e.tileAttrs)||void 0===i?void 0:i[e.tileProps[t.property]])&&void 0!==n?n:null;return Number.isNaN(o)?null:d(o)}}(t,e);case"global":return function(t,e){var o;return null!==(o=e.styleState[t.property])&&void 0!==o?o:null}(t,e);case"sourceAttr":return function(t,e){var o,i;if("generator"===e.type)return null!==(o=e.sourceAttrs[t.property])&&void 0!==o?o:null;if("binder"===e.type||"labeling"===e.type)return null!==(i=d(e.tileData[t.dataIndex]))&&void 0!==i?i:null;return null}(t,e);case"in":return function(t,e){const o=c(t.element,e),i=c(t.array,e);if(null===i)return!1;if(!Array.isArray(i))return(0,a.cM)(`InExpression second argument resolved to non-array value: ${i}`),null;return i.some((t=>t===o))}(t,e);case"interpolate":return function(t,e){if(0===t.steps.length)return(0,a.cM)("Interpolate expression contains 0 steps, cannot interpolate"),s;const o=c(t.steps[0].value,e),r=c(t.argument,e);if("number"!=typeof r)return(0,a.cM)(`Interpolate value resolved to non-number value: ${r} ${t.argument}`),0;if((0,i.gC)(o)){if((0,n.Uu)(t.argument)&&"height"===t.argument.type){const o={type:"gradient-color",values:[],steps:[]};return t.steps.forEach((t=>{const n=u(t.key,e),a=c(t.value,e);(0,i.gC)(a)&&!Number.isNaN(n)&&(o.values.push({type:"color",value:a.value}),o.steps.push(n))})),2!==o.steps.length?((0,a.cM)("Gradient expression must resolve 2 steps"),s):o}return _(t,r,e)}return m(t,r,e)}(t,e);case"match":return function(t,e){var o;const i=c(t.input,e),n=t.cases.find((t=>t.values.has(i)));return c(null!==(o=null==n?void 0:n.output)&&void 0!==o?o:t.defaultOutput,e)}(t,e);case"step":return function(t,e){const o=Number(c(t.value,e)),i=x(t,o,e)-1;return c(t.steps[i].value,e)}(t,e);case"to-boolean":return function(t,e){return Boolean(c(t.value,e))}(t,e);case"to-color":return function(t,e){const o=c(t.value,e);if((0,i.iL)(o))return(0,i.MV)(o);if((0,i.gC)(o))return o;return console.warn(`Can't resolve expression. Must be color, but got ${o}`),(0,n.lK)([0,0,0,0])}(t,e);case"!":return function(t,e){return!c(t.value,e)}(t,e);case"==":case"!=":return function(t,e){const o=c(t.leftValue,e),i=c(t.rightValue,e);switch(t.type){case"==":return o===i;case"!=":return o!==i}}(t,e);case">":case"<":case">=":case"<=":return function(t,e){const o=c(t.leftValue,e);if(null===o)return null;const i=c(t.rightValue,e);if(null===i)return null;switch(t.type){case"<":return o<i;case">":return o>i;case"<=":return o<=i;case">=":return o>=i}}(t,e);case"zoom":return"binder"===e.type||"labeling"===e.type?e.styleZoom:((0,a.cM)("Zoom expression cannot be used in filter context"),s);case"height":return 1;case"+":return function(t,e){const o=t.array.map((t=>c(t,e)));if(!(0,n.nS)(o))return(0,a.cM)(`Resolve AdditionExpression: arguments are not resolved as an array of numbers: ${o}`),null;return o.reduce(((t,e)=>t+e),0)}(t,e);case"*":return function(t,e){const o=t.array.map((t=>c(t,e)));if(!(0,n.nS)(o))return(0,a.cM)(`Resolve MultiplicationExpression: arguments are not resolved as an array of numbers: ${o}`),null;return o.reduce(((t,e)=>t*e),1)}(t,e);case"^":return function(t,e){const o=c(t.base,e);if("number"!=typeof o)return(0,a.cM)(`Resolve PowExpression: base resolved as non-number value: ${o}`),null;const i=c(t.exponent,e);if("number"!=typeof i)return(0,a.cM)(`Resolve PowExpression: exponent resolved as non-number value: ${i}`),null;return Math.pow(o,i)}(t,e);case"log10":return function(t,e){const o=c(t.value,e);if("number"!=typeof o)return(0,a.cM)(`Resolve Log10Expression: value resolved as non-number value: ${o}`),null;return Math.log10(o)}(t,e);case"random":return function(t,e){const o=c(t.start,e);if("number"!=typeof o)return(0,a.cM)(`Resolve RandomizationExpression: start resolved as non-number value: ${o}`),null;const i=c(t.end,e);if("number"!=typeof i)return(0,a.cM)(`Resolve RandomizationExpression: end resolved as non-number value: ${i}`),null;if(i<o)return(0,a.cM)("Resolve RandomizationExpression: end cannot be less than start."),null;let n;"generator"===e.type&&e.getSeededRandomValue&&(n=e.getSeededRandomValue);void 0===n&&(0,a.cM)("Resolve RandomizationExpression: the random function is not present, the mean value between start and end will be used.");return(0,l.f)(n,o,i)}(t,e);case"literalArray":return function(t,e){return t.array.map((t=>c(t,e)))}(t,e);default:return(0,a.cM)(`Not supported expression type <<${t.type}>> in ${JSON.stringify(t)}`),s}}function d(t){return(0,r.nI)(t)?(0,r.Ak)(t):t}function m(t,e,o){const i=x(t,e,o);if(0===i)return Number(c(t.steps[0].value,o));if(i===t.steps.length)return function(t,e,o){const i=t.steps[t.steps.length-1],n=t.base;if(1===n)return u(i.value,e);return u(i.value,e)*Math.pow(n,o-u(i.key,e))}(t,o,e);const n=Number(c(t.steps[i-1].value,o));if("labeling"===o.type&&o.interpolateExpressionAsStep)return n;const a=v(t,e,i,o);return(1-a)*n+a*Number(c(t.steps[i].value,o))}function h(t,e){const o=c(t,e);return(0,i.gC)(o)?o:(0,i.RY)(o)?o.values[1]:(console.warn(`Can't resolve expression. Must be color, but got ${o}`),(0,n.lK)([0,0,0,0]))}function p(t,e){const o=c(t,e);return(0,i.RY)(o)?o:null}function u(t,e,o=NaN){const i=c(t,e);return"number"==typeof i?i:o}function g(t,e,o=""){const i=c(t,e);return"string"==typeof i?i:o}function _(t,e,o){const i=x(t,e,o);if(0===i)return h(t.steps[0].value,o);if(i===t.steps.length)return h(t.steps[t.steps.length-1].value,o);const a=v(t,e,i,o),r=h(t.steps[i-1].value,o).value,l=h(t.steps[i].value,o).value;return(0,n.lK)([r[0]*(1-a)+l[0]*a,r[1]*(1-a)+l[1]*a,r[2]*(1-a)+l[2]*a,r[3]*(1-a)+l[3]*a])}function f(t,e,o){return{type:"binder",styleZoom:t,styleState:e,tileData:o}}function y(t,e,o,i){return{type:"labeling",styleZoom:t,styleState:e,interpolateExpressionAsStep:o,tileData:i}}function b(t,e,o,i,n,a){return{type:"generator",styleState:t,tileProps:o,tileAttrs:i,featureAttrs:n,sourceAttrs:e,getSeededRandomValue:a}}function x(t,e,o){let i=0;for(;i<t.steps.length&&!(e<u(t.steps[i].key,o));)i++;return i}function v(t,e,o,i){const n=t.base,a=u(t.steps[o].key,i)-u(t.steps[o-1].key,i),r=e-u(t.steps[o-1].key,i);return 1===n?r/a:(Math.pow(n,r)-1)/(Math.pow(n,a)-1)}function w(t){const[e,o,i,n]=t.value;return[((e*n+127)/255>>>0)/255,((o*n+127)/255>>>0)/255,((i*n+127)/255>>>0)/255,n/255]}function z(t){const e=new Set;return F(e,t),Array.from(e)}function F(t,e){if((0,n.Uu)(e))switch(e.type){case"all":return function(t,e){e.array.forEach((e=>F(t,e)))}(t,e);case"match":return function(t,e){F(t,e.defaultOutput),e.cases.forEach((e=>F(t,e.output)))}(t,e);case"step":case"interpolate":return function(t,e){e.steps.forEach((e=>F(t,e.value)))}(t,e)}else t.add(e)}},314:(t,e,o)=>{o.d(e,{z:()=>i});const i=-1},3513:(t,e,o)=>{o.d(e,{VH:()=>n,zL:()=>r});var i=o(7464);function n(t){return"boolean"!=typeof t&&"attrs"===t.type}function a(t){return"boolean"!=typeof t&&"unextractable"===t.type}function r(t){if(!(0,i.Uu)(t))return[Boolean(t)];let e=[];const o=[];switch(t.type){case"all":const s=t.array.map(r);for(const t of s){const i=[];for(const e of t){if(!1===e)return[!1];n(e)?i.push(e):a(e)&&o.push(e)}i.length>0&&(e=0===e.length?i:l(e,i))}break;case"match":if(!(0,i.vB)(t.input))return[{type:"unextractable",exp:t}];const c=t.input.property,d=t.defaultOutput;for(const i of t.cases){const t=r(i.output),s=[];i.values.forEach((t=>{s.push({type:"attrs",attrs:{[c]:t}})}));for(const i of t)if(n(i))for(const t of l([i],s))e.push(t);else if(a(i)){o.push(i);for(const t of s)e.push(t)}else if(!0===i&&!d)for(const t of s)e.push(t)}break;case"==":{let o,n;if((0,i.vB)(t.leftValue)&&(0,i.HW)(t.rightValue))o=t.leftValue.property,n=t.rightValue;else{if(!(0,i.vB)(t.rightValue)||!(0,i.HW)(t.leftValue))return[{type:"unextractable",exp:t}];o=t.rightValue.property,n=t.leftValue}e.push({type:"attrs",attrs:{[o]:n}});break}default:return[{type:"unextractable",exp:t}]}return e.concat(o)}function l(t,e){const o=[];for(const i of t)for(const t of e)o.push({type:"attrs",attrs:Object.assign(Object.assign({},i.attrs),t.attrs)});return o}},8450:(t,e,o)=>{function i(t){return!!t&&"polygon"===t.type}function n(t){return!!t&&"line"===t.type}function a(t){return t.reduce(((t,e,o)=>(t[e]=o,t)),{})}function r(t){if(void 0===t||"boolean"==typeof t)return Boolean(t);const e=JSON.stringify(t);return Boolean(e.match(/\["get","(db_)?sublayer"]/))}o.d(e,{Kx:()=>r,PU:()=>a,nc:()=>i,ot:()=>n})},6703:(t,e,o)=>{o(9073),o(7636)},7411:(t,e,o)=>{o.d(e,{PA:()=>i.PA,yq:()=>i.yq});o(6490);var i=o(9073);o(4874),o(6703)},4874:(t,e,o)=>{o.d(e,{V:()=>m});var i=o(9450),n=o(127),a=o(9218),r=o(6490),l=o(9073);const s=[0,0,1],c=i.Ue(),d=i.Ue();class m{constructor(t){this.state=t,this.position=[0,0,0],this.projectionMatrix=[],this.viewMatrix=[],this.viewProjectionMatrix=[],this.viewProjectionMatrixInverse=[],this.horizonPixelOffset=0,this.horizonPixelOffset=0,this.update()}setState(t){this.state=t,this.update()}update(){this.updatePosition(),this.updateProjectionMatrix(),this.updateViewMatrix(),n.Jp(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),n.U_(this.viewProjectionMatrixInverse,this.viewProjectionMatrix),this.updateHorizonPixelOffset()}putProject(t,e){const{size:o,viewport:i}=this.state,n=this.viewProjectionMatrix,a=e[0],r=e[1],l=e[2],s=o[0]/2,c=o[1]/2,d=n[3]*a+n[7]*r+n[11]*l+n[15];t[0]=s+i.left+(n[0]*a+n[4]*r+n[12])*s/d,t[1]=c+i.top-(n[1]*a+n[5]*r+n[9]*l+n[13])*c/d}project(t){const e=[0,0,0];return this.putProject(e,t),e}unproject(t){const{size:e,viewport:o}=this.state,n=[(t[0]-o.left)/e[0]*2-1,-(Math.max(this.horizonPixelOffset,t[1])-o.top)/e[1]*2+1,0];i.fF(n,n,this.viewProjectionMatrixInverse),n[0]-=this.position[0],n[1]-=this.position[1],n[2]-=this.position[2],i.Fv(n,n);const a=-this.position[2]/n[2];return n[0]=this.position[0]+n[0]*a,n[1]=this.position[1]+n[1]*a,n[2]=this.position[2]+n[2]*a,n}getViewportVertices(){const{size:t,viewport:e}=this.state;return[this.unproject([e.left,t[1]+e.top,0]),this.unproject([t[0]+e.left,t[1]+e.top,0]),this.unproject([t[0]+e.left,e.top,0]),this.unproject([e.left,e.top,0])]}getHorizonPixelOffset(){return this.horizonPixelOffset}updatePosition(){const{center:t,rotation:e,zoom:o,pitch:i,size:n}=this.state,a=(0,l.r9)(o,n),r=Math.max(a*Math.sin(i),1);this.position[0]=t[0]+Math.sin(e)*r,this.position[1]=t[1]-Math.cos(e)*r,this.position[2]=a*Math.cos(i)}updateViewMatrix(){n.zB(this.viewMatrix,this.position,this.state.center,s)}updateProjectionMatrix(){const{fov:t,near:e,far:o}=a.nS,{size:i,view:n}=this.correctViewAndSize(),l=i[0]/i[1];let s=e*Math.tan((0,r.Id)(t)/2),c=2*s,d=l*c,m=-d/2;n&&(m+=n.x*d/i[0],s-=n.y*c/i[1],d*=n.width/i[0],c*=n.height/i[1]);const h=m+d,p=s-c,u=this.projectionMatrix;u[0]=2*e/(h-m),u[5]=2*e/(s-p),u[8]=(h+m)/(h-m),u[9]=(s+p)/(s-p),u[10]=-(o+e)/(o-e),u[11]=-1,u[14]=-2*o*e/(o-e),u[1]=u[2]=u[3]=u[4]=u[6]=u[7]=u[12]=u[13]=u[15]=0}correctViewAndSize(){const{size:t,pitch:e,padding:o}=this.state,i=Math.max(0,o.top-o.bottom)*Math.tan(e),n=(0,l.pc)(t[1])+i,a={x:(o.right-o.left)/2,y:(o.bottom-o.top)/2,width:t[0],height:t[1]};a.y+=(n-t[1])/2;return{view:a,size:[t[0],n]}}updateHorizonPixelOffset(){const{viewport:t,size:e,zoom:o}=this.state,n=this.unproject([t.left,e[1]+t.top,0]),s=this.unproject([t.left+e[0]/2,e[1]+t.top,0]),m=this.unproject([e[0]+t.left,e[1]+t.top,0]);i.lu(d,m,n),i.jI(d,d,c,(0,r.Id)(90)),i.Fv(d,d);const h=(0,l.h0)(e[1]*a.nS.perspectiveDistanceLimitRatio,o);i.bA(d,d,h),i.IH(d,s,d),this.putProject(d,d),this.horizonPixelOffset=Math.max(0,Math.ceil(d[1]))}}},7231:(t,e,o)=>{o.d(e,{n:()=>n});var i=o(7731);class n{constructor(t,e,o){this.id=t,this.modules=e,this.options=o,this.type="geojson",this.worker=new this.modules.workers.parser.GeoJsonSource(this.options,this.id),this.attributes=o.attributes||{}}fetchTile(t){return this.worker.fetchTile(t).then((()=>[{regionId:0,metatileHash:-2}]))}generateTile(t,e,o,i,n){const a=this.options.modelsPath;return this.worker.generateTile(t,e,o,i,n,a)}getObjectAttributes(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){return this.worker.getObjectAttributes(t,e)}))}abortTileFetch(t){this.worker.abortTileFetch(t)}deleteTile(t){this.worker.deleteTile(t)}setAttributes(t){this.worker.setSourceAttrs(t),this.attributes=t}getAttributes(){return this.attributes}destroy(){this.worker.destroy()}setData(t){return(0,i.mG)(this,void 0,void 0,(function*(){return this.options=this.options="string"==typeof t?Object.assign(Object.assign({},this.options),{url:t}):Object.assign(Object.assign({},this.options),{data:t}),yield this.worker.setData(t)}))}}},3297:(t,e,o)=>{o.d(e,{M:()=>c});var i=o(6392),n=o(3927),a=o(2398),r=o(2435),l=o(9218),s=o(4245);class c{constructor(t){this.tileLoader=new a.U("json",t.ignoreMissingTiles),this.options=t,this.url=t=>{const[e,o,n]=this.options.flipY?t:(0,i._W)(t);return(0,r.IG)(this.options.url,{x:e.toString(),y:o.toString(),z:n.toString(),subdomain:l.Sv.subdomains[Math.abs(e+o)%l.Sv.subdomains.length]})}}fetchTile(t){return this.tileLoader.fetch(t,this.url).then((e=>e.data?(0,n.pQ)(e.data,(0,i.Bs)(t)):{components:[],byId:new s.g}))}abortTile(t){this.tileLoader.abortRequest((0,i.gx)(t))}destroy(){this.tileLoader.destroy()}}},3927:(t,e,o)=>{o.d(e,{pQ:()=>d});var i=o(7084),n=o(9073),a=o(6392),r=o(4619),l=o(6273),s=o(6490),c=o(4245);function d(t,e){const o={components:[],byId:new c.g};return t.features.forEach(((t,i)=>{o.components.push(...m(t.geometry,e).map((e=>Object.assign(Object.assign({},e),{index:i,id:t.id,tags:t.properties||{}}))))})),o}function m(t,e){switch(t.type){case"GeometryCollection":{let o=[];return t.geometries.forEach((t=>{o=o.concat(m(t,e))})),o}case"Point":case"MultiPoint":return function(t,e){if("Point"===t.type)return[h(t.coordinates,e)];return t.coordinates.map((t=>h(t,e)))}(t,e);case"LineString":case"MultiLineString":return function(t,e){if("LineString"===t.type)return[p(t.coordinates,e)];return t.coordinates.map((t=>p(t,e)))}(t,e);case"Polygon":case"MultiPolygon":return function(t,e){if("Polygon"===t.type)return u(t.coordinates,e);return t.coordinates.reduce(((t,o)=>t.concat(u(o,e))),[])}(t,e)}}function h(t,e){const o=[0,0,0];return(0,a.a2)(o,(0,n.yq)(t),e),{type:"point",vertices:[[o[0]],[o[1]]]}}function p(t,e){const o=[[],[]],i=[0,0,0];return t.forEach(((t,r)=>{(0,a.a2)(i,(0,n.yq)(t),e),o[0][r]=i[0],o[1][r]=i[1]})),{type:"line",vertices:o}}function u(t,e){const o=[],c=[],d=[],m=[],h=[];t.forEach((t=>{const o=t.map((t=>((0,a.a2)(h,(0,n.yq)(t),e),[(0,s.uZ)(h[0],0,l.Bq),(0,s.uZ)(h[1],0,l.Bq)])));m.push(o),c.length&&d.push(c.length),c.push(...o)}));const p=[];for(let t=0;t<c.length;t++)p.push(c[t][0]),p.push(c[t][1]);const u=i(p,d);for(let t=0;t<u.length;t+=3){const e=[[],[],[]];for(let o=0;o<3;o++)e[0][o]=c[u[t+o]][0],e[1][o]=c[u[t+o]][1],e[2][o]=0;m.forEach((t=>{const o=[[],[],[]];t.forEach(((t,e)=>{o[0][e]=t[0],o[1][e]=t[1]})),(0,r.fZ)(e,o)})),o.push({type:"polygon",vertices:e})}return o}},4619:(t,e,o)=>{o.d(e,{Sj:()=>r,X4:()=>c,Y0:()=>a,fZ:()=>s});var i=o(7188);const n={point:{point:!0,heatmap:!0,gltfModel:!0},polygon:{polygon:!0,polygonExtrusion:!0,mesh:!0},line:{line:!0,lineExtrusion:!0,labelLine:!0,dashedLine:!0,oneWayLine:!0}};function a(t,e){return!!n[t][e]}function r(t){const e=t.vertices[0],o=t.vertices[1];let i=0;for(let t=0;t<e.length-1;t++)i+=Math.hypot(e[t]-e[t+1],o[t]-o[t+1]);return i}function l(t,e){const o=new Set(e[0].map(((o,i)=>e[0][i]===t[0]&&t[1]===e[1][i]?i:-1)));return Array.from(o)}function s(t,e){const o=l([t[0][0],t[1][0]],e),i=l([t[0][1],t[1][1]],e),n=l([t[0][2],t[1][2]],e);o.forEach((e=>i.forEach((o=>n.forEach((i=>{!function(t,e,o,i){e>=0&&o>=0&&1===Math.abs(e-o)&&(t[2][0]=1),o>=0&&i>=0&&1===Math.abs(o-i)&&(t[2][1]=1),e>=0&&i>=0&&1===Math.abs(e-i)&&(t[2][2]=1)}(t,e,o,i)}))))))}function c(){return(0,i.KP)(["id","db_label","db_label2","selected","hovered","componentDistanceStart","objectLength","beginningIsCut","endingIsCut"],["Commercial_poi_default","Commercial_poi_city"])}},5071:(t,e,o)=>{o.d(e,{f7:()=>s,gs:()=>h,rR:()=>c});var i=o(7731),n=o(174),a=o(7231),r=o(9218),l=o(9600);const s=15,c=17;class d{constructor(t,e,o){var i,d;this.type="geojson",this.id=(0,l.Q)(),this.modules=t.modules,this.mapglApiSource=o,this.identifiedAsDefault=!!e.identifyAsDefaultSource,this.sourceCore=new a.n(this.id,this.modules,e);const m=null!==(i=e.minZoom)&&void 0!==i?i:r.Xd.minZoom,h=Math.min(null!==(d=e.maxZoom)&&void 0!==d?d:s,c);this.layer=new n.I(m,h,m,c,this.modules,t.state,this.sourceCore),this.modules.tileManager.addTileLayer(this.layer)}destroy(){this.modules.tileManager.removeTileLayer(this.layer),this.layer.destroy(),this.modules.sourceStorage.removeSource(this.getId()),this.sourceCore.destroy()}setAttributes(t){this.sourceCore.setAttributes(t),this.layer.redraw()}getAttributes(){return this.sourceCore.getAttributes()}getId(){return this.sourceCore.id}isIdentifiedAsDefault(){return this.identifiedAsDefault}}const m={type:"FeatureCollection",features:[]};class h extends d{constructor(t,e,o){super(t,e,o),this.subtype="internal",this.data=e.data,this.modules.sourceStorage.addSource(this)}getFeatureById(t){return"FeatureCollection"===this.data.type?this.data.features[t.lo]:this.data}destroy(){super.destroy(),this.data=m}setData(t){return(0,i.mG)(this,void 0,void 0,(function*(){(yield this.sourceCore.setData(t))&&(this.data=t,this.layer.onSourceDataChange(),this.modules.identifier.resetCache())}))}}},7671:(t,e,o)=>{o.d(e,{g:()=>d});var i=o(5071),n=o(5378),a=o(2358),r=o(6392),l=o(4245);const s=4096,c={maxZoom:i.f7,tolerance:3,extent:s,buffer:1,debug:0,lineMetrics:!1,promoteId:null,generateId:!1,generateIndex:!0,indexMaxZoom:0,indexMaxPoints:1e5,dimensions:2};class d{constructor(t){this.options=t}get geoJsonVtInstance(){var t,e;return this.geoJsonVT||(this.geoJsonVT=(0,n.Z)(this.options.data,Object.assign(Object.assign({},c),{maxZoom:null!==(t=this.options.maxZoom)&&void 0!==t?t:c.maxZoom,dimensions:null!==(e=this.options.dimensions)&&void 0!==e?e:c.dimensions}))),this.geoJsonVT}fetchTile(t){var e;const[o,i,c]=(0,r._W)(t),d={components:[],byId:new l.g},m=this.geoJsonVtInstance.getTile(c,o,i),h=null!==(e=this.options.dimensions)&&void 0!==e?e:2;if(!m)return Promise.resolve(d);for(const t of m.features)switch(t.type){case n.h.Points:d.components=d.components.concat((0,a.x$)(t,s,h));break;case n.h.Lines:d.components=d.components.concat((0,a.MY)(t,s,h));break;case n.h.Polygons:d.components=d.components.concat((0,a.QB)(t,s,h));break;default:console.warn("unsupported type ",m)}return Promise.resolve(d)}destroy(){this.geoJsonVT=void 0}}},2358:(t,e,o)=>{o.d(e,{MY:()=>d,QB:()=>c,x$:()=>m});var i=o(9450),n=o(7084),a=o(6273),r=o(6490),l=o(4619),s=o(9073);function c(t,e,o){const a=[];return t.geometry.forEach((r=>{const s=[],c=[],d=[];r.forEach((t=>{d.push(...function(t,e){const o=[];let i=[];for(let n=0;n<t.length;n++){const a=t[n];if(i.push(p(a,e)),!u(a,e))continue;const r=t[n+1];if(!r)break;g(a,r,e)&&(i.length>1&&o.push(i),i=[])}i.length>1&&o.push(i);return o}(t,e)),s.length&&c.push(s.length),s.push(...t)}));const m=[];for(let t=0;t<s.length;t++)for(let e=0;e<o;e++)m.push(s[t][e]);const _=n(m,c,o),f=i.Ue();for(let i=0;i<_.length;i+=3){const n=o>2?[[],[],[],[]]:[[],[],[]];for(let t=0;t<3;t++)h(f,s[_[i+2-t]],e),n[0][t]=f[0],n[1][t]=f[1],n[2][t]=0,o>2&&(n[3][t]=f[2]);d.forEach((t=>{const e=[[],[],[]];t.forEach(((t,o)=>{e[0][o]=t[0],e[1][o]=t[1]})),(0,l.fZ)(n,e)})),a.push({tags:t.tags,id:t.id,index:t.index,type:"polygon",vertices:n})}})),a}function d(t,e,o){const n=i.Ue();return t.geometry.map((i=>{const a=o>2?[[],[],[]]:[[],[]];return i.forEach(((t,i)=>{h(n,t,e),a[0][i]=n[0],a[1][i]=n[1],o>2&&(a[2][i]=n[2])})),{tags:t.tags,id:t.id,index:t.index,type:"line",vertices:a}}))}function m(t,e,o){const n=i.Ue();return t.geometry.map((i=>(h(n,i,e),{tags:t.tags,id:t.id,index:t.index,type:"point",vertices:o>2?[[n[0]],[n[1]],[n[2]]]:[[n[0]],[n[1]]]})))}function h(t,e,o){const i=p(e,o);t[0]=i[0],t[1]=i[1],t[2]=void 0===e[2]?0:e[2]*s.C}function p(t,e){return[(0,r.uZ)(t[0]/e*a.Bq,0,a.Bq),(0,r.uZ)((e-t[1])/e*a.Bq,0,a.Bq)]}function u(t,e){return t[0]<0||t[0]>e||t[1]<0||t[1]>e}function g(t,e,o){return t[0]>o&&e[0]>o||t[0]<0&&e[0]<0||t[1]>o&&e[1]>o||t[1]<0&&e[1]<0}},7125:(t,e,o)=>{o.d(e,{T:()=>g});var i=o(3672),n=o(2730),a=o(6392),r=o(7188),l=o(9981),s=o(7204),c=o(4619),d=o(7671),m=o(3297),h=o(2543),p=o(6273),u=o(173);class g{constructor(t,e,o){this.scope=t,this.options=e,this.id=o,t.sources[o]=this,this.tileData={},this.styleManager=t.styleManager,this.collector=t.collector,this.sourceAttrs=this.options.attributes||{},this.metatile=(0,c.X4)(),this.tileServer="url"in e?new m.M(e):new d.g(e)}fetchTile(t){const e=(0,a.gx)(t);return this.tileData[e]?Promise.resolve(this.tileData[e]):this.tileServer.fetchTile(t).then((t=>(this.tileData[e]=t,t)))}abortTileFetch(t){this.tileServer instanceof m.M&&this.tileServer.abortTile(t)}generateTile(t,e,o,d,m,g){const _=(0,a.gx)(e),f=this.tileData[_],y=(0,a.Bs)(e),b=[],x=[],v=this.styleManager.getStyle(o),w=new s.c,z=new s.c(d),F=(0,u.O)(e[0]+e[1]+e[2]+1);if(!v)return Promise.resolve({results:b,transferable:x});f&&f.components.forEach(((e,o)=>{var a;const{tileProps:d}=this.metatile,p=[],u=Object.keys(e.tags);(0,r.Qy)(this.metatile,u);for(const t of u)p[d[t]]=e.tags[t];const _=Object.keys(this.sourceAttrs);(0,r.Qy)(this.metatile,_);for(const t of _)p[d[t]]=this.sourceAttrs[t];const b="url"in this.options&&this.options.preventInteractions,x=this.options.identifyAsDefaultSource,S=b?NaN:x?(0,i.IL)(null!==(a=p[d.db_id])&&void 0!==a?a:""):(0,i.Ru)(e.index,this.id);if("number"!=typeof S){const t=z.has(S);p[d.selected]=t?1:0,w.add(S),f.byId.set(S,o)}const{coords:C}=y,M=C[3],P=(0,l.o1)(m),I=(0,h.Yi)(t.styleState,this.sourceAttrs,d,p,r.wz,F),L=this.styleManager.getLayers(v.id,d,p).filter((t=>(0,c.Y0)(e.type,t.type))).filter((t=>(0,h.FR)(t.filter,I)));p[d.id]=S,"point"!==e.type&&"line"!==e.type||(void 0===p[d.db_label]&&(p[d.db_label]=NaN),void 0===p[d.db_label2]&&(p[d.db_label2]=NaN)),"line"===e.type&&(p[d.componentDistanceStart]=0,p[d.objectLength]=(0,c.Sj)(e),p[d.beginningIsCut]=0,p[d.endingIsCut]=0),(0,n.PA)(this.collector,v,L,I,this.metatile,M,this.id,C,P,e.vertices,new s.c,void 0,g)})),this.collector.setGeoIds(new Uint32Array(w.toFlatArray()));const S=this.collector.getAccumulatedData();return b.push({regionId:0,metatileHash:p.L2,collectorOutput:S,styleId:v.id}),x.push(...S.transferable),this.scope.debouncedResetCollector(),this.scope.syncNewRasterSets(),Promise.resolve({results:b,transferable:x})}getObjectAttributes(t,e){const o=this.tileData[e];if(o){const e=o.byId.get(t);if(void 0===e)return;const i=o.components[e];if(void 0===i)return;return i.tags}}deleteTile(t){delete this.tileData[(0,a.gx)(t)]}setSourceAttrs(t){this.sourceAttrs=t}destroy(){delete this.scope.sources[this.id],this.tileData={},this.sourceAttrs={},this.tileServer.destroy()}setData(t){if("string"==typeof t){if(this.tileServer instanceof m.M)return this.tileServer.destroy(),this.options=Object.assign(Object.assign({},this.options),{url:t}),this.tileServer=new m.M(this.options),this.tileData={},Promise.resolve(!0)}else if(this.tileServer instanceof d.g)return this.tileServer.destroy(),this.options=Object.assign(Object.assign({},this.options),{data:t}),this.tileServer=new d.g(this.options),this.tileData={},Promise.resolve(!0);return Promise.resolve(!1)}}},9600:(t,e,o)=>{o.d(e,{Q:()=>n});let i=1;function n(){return i++}},2627:(t,e,o)=>{o.d(e,{dx:()=>s,lG:()=>h,nt:()=>p,qS:()=>d});var i=o(6392),n=o(7188),a=o(6490),r=o(2435);const l={db_id:"id",tech_db_beginning_is_cut:"beginningIsCut",tech_db_ending_is_cut:"endingIsCut",tech_db_previous_point_x:"previousPointX",tech_db_previous_point_y:"previousPointY",tech_db_next_point_x:"nextPointX",tech_db_next_point_y:"nextPointY",tech_db_object_length:"objectLength",tech_db_component_distance_start:"componentDistanceStart",tech_db_component_distance_end:"componentDistanceEnd"},s=t=>{var e;return null!==(e=l[t])&&void 0!==e?e:t},c={objectClass:"db_object_class",sublayer:"db_sublayer",db_id:"id"};function d(t){var e;return null!==(e=c[t])&&void 0!==e?e:t}const m={Class:"db_class",DisputePosition:"db_dispute_position",ObjectClass:"db_object_class",ParkingType:"db_parking_type",Sublayer:"db_sublayer",Subsublayer:"db_subsublayer"},h=t=>{var e,o,i;t.enumerationValues?t.enumerationValues=Object.keys(t.enumerationValues).reduce(((e,o)=>(e[(t=>{var e;return null!==(e=m[t])&&void 0!==e?e:t})(o)]=t.enumerationValues[o],e)),{}):t.enumerationValues={db_class:null!==(e=t.classes)&&void 0!==e?e:{},db_object_class:null!==(o=t.objectClasses)&&void 0!==o?o:{},db_sublayer:null!==(i=t.sublayers)&&void 0!==i?i:{}}};class p{constructor(t,e,o){var i;this.id=t,this.modules=e,this.options=o,this.type="terrain",this.worker=new e.workers.parser.ZenithSource,this.sourceAttrs=(0,a.kn)(null!==(i=o.sourceAttributes)&&void 0!==i?i:{},n.so)}fetchTile(t,e){const{assetManager:o,map:i}=this.modules;return this.worker.fetchTile({coords:t,tileServer:this.options.tileServer,tileSet:this.options.tileSet,tileProtocol:this.options.tileProtocol,subdomains:this.options.subdomains,tileKey:this.options.tileKey,appId:this.options.appId,lang:e.lang,defaultLang:this.options.defaultLang,sessionId:this.options.sessionId}).catch((()=>Promise.resolve())).then((a=>{if(!a)return;const{metadata:l,invalidTileKey:s}=a;return l.forEach((a=>{const l=(0,r.Gr)("metatile",{host:this.options.tileServer,tileSet:this.options.tileSet,protocol:this.options.tileProtocol,subdomain:this.options.subdomains[0],hash:(0,n.GG)(a.metatileHash)});o.loadMetatile(l,a.metatileHash,a.regionId),i.emit("tileload",{tileCoords:t,regionId:a.regionId}),e.shownRegionIds.add(a.regionId)})),s&&i.emit("invalidtilekey"),l}))}generateTile(t,e,o,n,a,r={},l,s=this.id){const c=this.options.modelsPath;return this.worker.generateTile(Object.assign({styleId:o,tileInfo:(0,i.Bs)(e),pixelRatio:a,selectedIds:n,styleState:t.styleState,floorsEnabled:t.floorsEnabled,sourceAttrs:this.sourceAttrs,hoverId:l,sourceId:s,isDefaultSource:this.options.isDefaultSource,modelsPath:c},r))}generateModel(t){return this.worker.generateModel(t)}abortTileFetch(t){this.worker.abortTileRequest((0,i.gx)(t))}deleteTile(t){this.worker.deleteTile((0,i.gx)(t))}setAttributes(t){this.sourceAttrs=t}getAttributes(){return this.sourceAttrs}destroy(){this.worker.destroy(),this.sourceAttrs={}}setFeatureStateMap(t){this.worker.setFeatureStateMap(t)}setFeatureStateMapBinary(t){this.worker.setFeatureStateMapBinary(t)}appendHiddenObjectIds(t){this.modules.workers.parser.appendHiddenObjectIds(t)}}},6381:(t,e,o)=>{o.d(e,{Z:()=>p});var i=o(7688),n=o(1777),a=o(6392),r=o(3249),l=o(1375),s=o(4575),c=o(3672),d=o(8925),m=o(5095),h=o(4193);class p{constructor(t){this.scope=t,this.tileLoader=new i.Z,this.tileAttrs=[],this.models={},this.featureStateMap=new n.r}fetchTile(t){return this.tileLoader.fetch(t)}abortTileRequest(t){this.tileLoader.abortRequest(t)}generateTile(t){const{styleManager:e,collector:o,hiddenObjectIds:i,metatiles:n}=this.scope,{tileInfo:c}=t,d=(0,a.gx)(c.coords),m=this.tileLoader.get(d),h=[],p=[];return m.forEach((a=>{const{regionId:c,metatileHash:d}=a,m=this.scope.styleManager.getStyle(t.styleId);if(!m)return;if(t.areTileBoundsVisible&&t.isDefaultSource){const i=e.getStyle(r.jf).layers.find((t=>"debug-tile-bounds"===t.id));(0,l.cX)(o,i,t.styleState)}const u=(0,s.V)(m,e,this.featureStateMap,o,t,a,n[d],this.tileAttrs,i);h.push({regionId:c,metatileHash:d,collectorOutput:u,styleId:m.id}),p.push(...u.transferable)})),this.scope.resetCollector(),this.scope.syncRasterSets(),Promise.resolve({results:h,transferable:p})}deleteTile(t){this.tileLoader.delete(t)}setFeatureStateMap(t){this.featureStateMap=this.buildFeatureState(t)}setFeatureStateMapBinary(t){this.featureStateMap=this.buildFeatureStateFromBinary(t)}generateModel(t){const{regionId:e,metatileHash:o,styleId:i,url:n,id:a}=t,r=(0,c.Ak)(a);return new Promise((a=>{const l=this.models[r];(l?Promise.resolve(l):new Promise((t=>{(0,m.n)({url:n},((e,o)=>{if(e||0===o.byteLength){const e=this.models[r]=new ArrayBuffer(0);t(e)}else this.models[r]=o,t(o)}))}))).then((n=>{if(0===n.byteLength)return void a({objects:this.scope.collector.getAccumulatedData(),textures:{isBitmap:!1,data:[]}});const r=this.scope.styleManager.getStyle(i);if(!r)return void a({objects:this.scope.collector.getAccumulatedData(),textures:{isBitmap:!1,data:[]}});const{objects:l,textures:s}=(0,h.$)(r,t.styleState,this.scope.collector,n,t,this.scope.metatiles[o],e,this.featureStateMap);if(this.scope.createImageBitmap){const t=s.map((t=>{const e=new Blob([t],{type:"image/png"});return createImageBitmap(e)}));Promise.all(t).then((t=>{a({objects:l,textures:{isBitmap:!0,data:t},transferable:[...l.transferable,...t]}),this.scope.resetCollector()}))}else a({objects:l,textures:{isBitmap:!1,data:s},transferable:[...l.transferable,n]}),this.scope.resetCollector()}))}))}destroy(){this.tileLoader.destroy(),this.tileAttrs=[],this.models={}}buildFeatureState(t){const e=new n.r;for(const o in t){const i=(0,c.IL)(o);e.set(i.hi,i.lo,t[o])}return e}buildFeatureStateFromBinary(t){return(0,d.L)(t)}}},199:(t,e,o)=>{o.d(e,{T:()=>i});const i=[{id:"__2gis_comm_poi",type:"point",style:{textFont:["Noto_Sans_Semibold",["step",["zoom"],"Noto_Sans",16,"Noto_Sans"]],iconImage:"peak",iconWidth:["interpolate",["linear"],["zoom"],15,22,16.8,30],textColor:"#3A3A3A",visibility:"visible",textFontSize:[["interpolate",["linear"],["zoom"],15.5,11,18,13],["interpolate",["linear"],["zoom"],15.5,10,18,12]],textHaloColor:"rgba(255,255,255,0.5)",textHaloWidth:.9,iconLabelingGroup:o(3754).n3,iconLabelingMargin:{leftRight:6,topBottom:6}},filter:["all",["match",["get","db_sublayer"],["Commercial_poi_default","Commercial_poi_city"],!0,!1],["any",["==",["in",["get","db_building_id"],["global","_activeFloorBuildingIds"]],!1],["in",["get","db_plan_id"],["global","_activeFloorIds"]]]]}]},4653:(t,e,o)=>{o.d(e,{h:()=>n});var i=o(7490);class n{constructor(){this.metaStyles=new Map,this.layerTrees=new Map}proxySyncStyle(t){const e=new i.P;e.addLayers(t.layers),this.layerTrees.set(t.id,e),this.metaStyles.set(t.id,t)}getStyle(t){return this.metaStyles.get(t)}getLayers(t,e,o){const i=this.layerTrees.get(t);return i?i.getLayers(e,o):[]}}},3671:(t,e,o)=>{o.d(e,{$:()=>i});const i={verticalScale:["interpolate",["linear"],["zoom"],11,0,12,1.2],shadingIntensity:["interpolate",["linear"],["zoom"],13,0,14,.19]}},4389:(t,e,o)=>{o.d(e,{l:()=>u});var i=o(6273),n=o(378),a=o(9090),r=o(8352),l=o(5600),s=o(159),c=o(2702);const d=n.Ue(),m=n.Ue(),h={type:s.SP.Entrance,offsetMultiplier:18,cDist:0,oLen:0,px:[],py:[],count:0,localID:0};function p(t,e,o,n){return h.px=t[0],h.py=t[1],h.oLen=o/i.Bq,h.count=e,h.localID=n,h}const u=(0,l.D)({symbol:"arrow",sinks:{stroke:{stride:36,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.segmentEnd=new Uint16Array(e,4),t.views.texExtender=new Int8Array(e,8),t.views.arrowExtender=new Int8Array(e,10),t.views.extender=new Int16Array(e,12),t.views.direction=new Int16Array(e,16),t.views.vertexDistance=new Float32Array(e,20),t.views.objectLength=new Float32Array(e,24),t.views.type=new Float32Array(e,28),t.views.localID=new Uint32Array(e,32)},packObjectAttributes:(t,e,o,i,n)=>(0,c.v$)([t,e,o>2?1:0],i,n),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],isLongArrow:t[2],tileData:t.slice(3)})}},generate:(t,e,o,i,n)=>{const a=n[0],l=n[1],c=n[0].length,d=function(t,e,o){let i=0;for(let n=1;n<o;n++){const o=t[n]-t[n-1],a=e[n]-e[n-1];i+=Math.sqrt(o*o+a*a)}return i}(a,l,c),m=t.getBucket(o.type,"stroke",u.sinks.stroke.packObjectAttributes(e,o.innerId,c,o.dataKeys,i),u.sinks.stroke.binder),h=t.idIndexer.getIndex({id:i.tileAttrs[i.tileProps.id],styleId:e,layer:o,sublayer:i.tileAttrs[i.tileProps.db_sublayer]}),_=p(n,c,d,h);(0,r.W)(n[0],n[1],c,s.CJ.Flat,s.kU.ObjectEnding,s.kU.ObjectEnding,0,0,0,0,_,m);let f=0;g(m,s.gD.StartBorder,a[0],l[0],a[1],l[1],0,0,f,d,h);for(let t=0;t<c-1;t++){if(0!==t){const e=a[t]-a[t-1],o=l[t]-l[t-1];f+=Math.sqrt(e*e+o*o)}g(m,s.gD.Arrow,a[t],l[t],a[t+1],l[t+1],-1,0,f,d,h)}}});function g(t,e,o,i,n,a,r,l,s,c,d){!function(t,e,o,i,n,a,r){const{elements:l,indices:s}=t,{buffer:c,offset:d}=s,m=l.offset;c[d]=m+e,c[d+1]=m+o,c[d+2]=m+i,c[d+3]=m+n,c[d+4]=m+a,c[d+5]=m+r,s.offset=d+6}(t,1,2,0,0,2,3),_(t,e,o,i,n,a,r,l,-1,-1,s,c,!0,d),_(t,e,o,i,n,a,r,l,1,-1,s,c,!1,d),_(t,e,o,i,n,a,r,l,1,1,s,c,!1,d),_(t,e,o,i,n,a,r,l,-1,1,s,c,!0,d)}function _(t,e,o,n,r,l,s,c,h,p,u,g,_,f){const y=t.elements,b=y.stride*y.offset,x=b>>1,v=x>>1;(0,a.uI)(d,o,n,r,l),(0,a.fN)(m,d),t.views.position[x]=i.jO+o,t.views.position[x+1]=i.jO+n,t.views.segmentEnd[x]=i.jO+r,t.views.segmentEnd[x+1]=i.jO+l,t.views.texExtender[b]=(0,a.i7)(m[0]*p*(_?-1:1)*i.Gt),t.views.texExtender[b+1]=(0,a.i7)(m[1]*p*(_?-1:1)*i.Gt),t.views.arrowExtender[b]=(0,a.i7)(h*i.Gt),t.views.arrowExtender[b+1]=(0,a.i7)(p*i.Gt);const w=h+s,z=p+c,F=d[0]*w+m[0]*z,S=d[1]*w+m[1]*z;t.views.extender[x]=Math.round(F*i.Gt*127),t.views.extender[x+1]=Math.round(S*i.Gt*127),t.views.direction[x]=Math.round(127*d[0]),t.views.direction[x+1]=Math.round(127*d[1]),t.views.vertexDistance[v]=u/i._H,t.views.objectLength[v]=g/i._H,t.views.type[v]=e,t.views.localID[v]=f,t.elements.offset++}},1678:(t,e,o)=>{o.d(e,{X:()=>c,d:()=>s});var i=o(5600),n=o(2682),a=o(3672),r=o(2702),l=o(6273);const s=[l._H/2,l._H/2],c=(0,i.D)({symbol:"buildingModel",sinks:{fill:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.texCoords=new Uint16Array(e,8),t.views.localID=new Uint32Array(e,12),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:(t,e,o,i,n,a,l)=>(0,r.v$)([t,e,o,n,i],a,l),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],texture:t[2],id:Number.isNaN(t[3])?void 0:(0,a.Ak)(t[3]),matrix:t[4],tileData:t.slice(5)})},stroke:{stride:16,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.directionDistance=new Int8Array(e,8),t.views.demPosition=new Int16Array(e,12)},packObjectAttributes:(t,e,o,i,n,a)=>(0,r.v$)([t,e,i,o],n,a),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],id:Number.isNaN(t[2])?void 0:(0,a.Ak)(t[2]),matrix:t[3],tileData:t.slice(4)})}},processSubmesh(t,e,o,i,n,a,r,l,s){const{tileProps:m,tileAttrs:h}=o,p=h[m.id],u=i.idIndexer.getIndex({id:p,styleId:t,layer:e,sublayer:h[m.db_sublayer]}),g=i.getBucket(e.type,"fill",c.sinks.fill.packObjectAttributes(t,e.innerId,l,s,p,e.dataKeys,o),c.sinks.fill.binder,r);!function(t,e){const o=t.elements.offset;let i=t.indices.offset;for(let n=0;n<e.length;n++)t.indices.buffer[i++]=o+e[n];t.indices.offset=i}(g,a);for(let t=0;t<n.length;t++)d(g,n,t,u)},processOuterEdge(t,e,o,i,a,r,l){const{tileProps:d,tileAttrs:m}=o,h=m[d.id],p=i.getBucket(e.type,"stroke",c.sinks.stroke.packObjectAttributes(t,e.innerId,l,h,e.dataKeys,o),c.sinks.stroke.binder);for(let t=0;t<r.length;t+=2){const e=5*r[t],o=5*r[t+1];(0,n.n)(p,a[e],a[e+1],a[e+2],a[o],a[o+1],a[o+2],s,!0)}}});function d(t,e,o,i){const n=t.elements.offset,a=c.sinks.fill.stride,r=5*o,l=n*(a/t.views.position.BYTES_PER_ELEMENT),d=n*(a/t.views.localID.BYTES_PER_ELEMENT);t.views.position[l]=e[r],t.views.position[l+1]=e[r+1],t.views.position[l+2]=e[r+2],t.views.texCoords[l]=e[r+3],t.views.texCoords[l+1]=e[r+4],t.views.localID[d]=i,t.views.demPosition[l]=s[0]/8,t.views.demPosition[l+1]=s[1]/8,t.elements.offset++}},871:(t,e,o)=>{o.d(e,{p:()=>r});var i=o(5600),n=o(2702),a=o(6273);const r=(0,i.D)({symbol:"circle",sinks:{fill:{stride:12,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.extender=new Int16Array(e,4),t.views.localID=new Uint32Array(e,8)},packObjectAttributes:(t,e,o,i)=>(0,n.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,i,n){const a=t.getBucket(o.type,"fill",r.sinks.fill.packObjectAttributes(e,o.innerId,o.dataKeys,i),r.sinks.fill.binder),s=t.idIndexer.getIndex({id:i.tileAttrs[i.tileProps.id],styleId:e,layer:o,sublayer:i.tileAttrs[i.tileProps.db_sublayer]}),c=n[0][0],d=n[1][0];!function(t,e,o,i,n,a,r){const{elements:l,indices:s}=t,{buffer:c,offset:d}=s,m=l.offset;c[d]=m+e,c[d+1]=m+o,c[d+2]=m+i,c[d+3]=m+n,c[d+4]=m+a,c[d+5]=m+r,s.offset=d+6}(a,0,2,1,0,3,2),l(a,c,d,-1,-1,s),l(a,c,d,-1,1,s),l(a,c,d,1,1,s),l(a,c,d,1,-1,s)}});function l(t,e,o,i,n,r){const l=t.elements.offset*t.elements.stride>>1,s=l>>1;t.views.position[l]=a.jO+e,t.views.position[l+1]=a.jO+o,t.views.extender[l]=i,t.views.extender[l+1]=n,t.views.localID[s]=r,t.elements.offset++}},3097:(t,e,o)=>{o.d(e,{L:()=>d});var i=o(8352),n=o(159),a=o(5600),r=o(2702),l=o(6273);const s={type:n.SP.Striped,cDist:0,oLen:0,localID:0,offsetMultiplier:14};function c(t,e,o){return s.cDist=t,s.oLen=e,s.localID=o,s}const d=(0,a.D)({symbol:"dashedLine",sinks:{stroke:{stride:28,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.extender=new Int16Array(e,4),t.views.texExtender=new Int8Array(e,8),t.views.vertexDistance=new Float32Array(e,12),t.views.componentDistance=new Float32Array(e,16),t.views.objectLength=new Float32Array(e,20),t.views.localID=new Uint32Array(e,24)},packObjectAttributes:(t,e,o,i)=>(0,r.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,a,r){const{tileAttrs:s,tileProps:m}=a,h=t.getBucket(o.type,"stroke",d.sinks.stroke.packObjectAttributes(e,o.innerId,o.dataKeys,a),d.sinks.stroke.binder),p=t.idIndexer.getIndex({id:s[m.id],styleId:e,layer:o,sublayer:s[m.db_sublayer]}),u=c(s[m.componentDistanceStart]/l.Bq,s[m.objectLength]/l.Bq,p),g=!Number.isNaN(s[m.beginningIsCut])&&0!==s[m.beginningIsCut],_=!Number.isNaN(s[m.endingIsCut])&&0!==s[m.endingIsCut];(0,i.W)(r[0],r[1],r[0].length,n.CJ.Flat,g?n.kU.TileCut:n.kU.ObjectEnding,_?n.kU.TileCut:n.kU.ObjectEnding,s[m.previousPointX],s[m.previousPointY],s[m.nextPointX],s[m.nextPointY],u,h)}})},4922:(t,e,o)=>{o.d(e,{_:()=>s});var i=o(5600),n=o(3698),a=o(6273),r=o(132);const l={stride:4,binder:(t,e)=>{},packObjectAttributes:(t,e)=>[t,e],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(3)})},s=(0,i.D)({symbol:"dem",sinks:{mesh:l,ground:l,elevation:{stride:8,binder:(t,e)=>{},packObjectAttributes:(t,e,o)=>[t,e,o],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],textureIndex:t[2],tileData:t.slice(4)})},hillshade:{stride:8,binder:(t,e)=>{},packObjectAttributes:(t,e)=>[t,e],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})},flatBottom:{stride:12,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.demPosition=new Int16Array(e,4),t.views.extender=new Int8Array(e,8)},packObjectAttributes:(t,e,o)=>o?[t,e,o]:[t,e],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],matrix:t[2]?t[2]:void 0,tileData:t.slice(3)})}},generateElevation(t,e,o,i,r){const l=new Uint16Array(e.reduce(((t,e)=>{const[o,i,r,l]=e;return t.push(a.jO+o*a.Bq,a.jO+i*a.Bq,(0,n.Bb)(r),(0,n.Bb)(l)),t}),[]));return{symbol:s.symbol,sink:"elevation",buffer:l.buffer,generatedObjects:[{attributes:s.sinks.elevation.packObjectAttributes(o,i,r),drawMode:a.Fg,rangeStart:0,rangeEnd:l.buffer.byteLength}]}},generateHillshade(t,e,o,i){const r=new Uint16Array(e.reduce(((t,e)=>{const[o,i,r,l]=e;return t.push(o*a.Bq,i*a.Bq,(0,n.Bb)(r),(0,n.Bb)(l)),t}),[]));return{symbol:s.symbol,sink:"hillshade",buffer:r.buffer,generatedObjects:[{drawMode:a.Fg,attributes:s.sinks.hillshade.packObjectAttributes(o,i),rangeStart:0,rangeEnd:r.buffer.byteLength}]}},generateFloorsBottomFill(t,e,o,i,n,a){const l=o[0],m=o[1],h=o[0].length,p=s.sinks.flatBottom.packObjectAttributes(e,r.h,a);!function(t,e,o,i,n,a,r){let l=t.elements.offset;const s=l;if(e<3)return;c(t,l++,o[0],i[0],a,n[0],r),c(t,l++,o[1],i[1],a,n[1],r);for(let m=2;m<e;m++)d(t,s,m),c(t,l++,o[m],i[m],a,n[m],r);t.elements.offset=l}(t.getBucket("dem","flatBottom",p,s.sinks.flatBottom.binder),h,l,m,i,n,!!a)}});function c(t,e,o,i,n,r,l){const s=e*(t.elements.stride/t.views.position.BYTES_PER_ELEMENT),c=e*(t.elements.stride/t.views.extender.BYTES_PER_ELEMENT);t.views.position[s]=l?o:a.jO+o,t.views.position[s+1]=l?i:a.jO+i,t.views.demPosition[s]=(l?n[0]:a.jO+n[0])/8,t.views.demPosition[s+1]=(l?n[1]:a.jO+n[1])/8,t.views.extender[c]=127*r[0],t.views.extender[c+1]=127*r[1]}function d(t,e,o){const i=t.indices.buffer;let n=t.indices.offset;o%2==0?(i[n++]=e+o-2,i[n++]=e+o-1,i[n++]=e+o):(i[n++]=e+o-1,i[n++]=e+o-2,i[n++]=e+o),t.indices.offset=n}},7407:(t,e,o)=>{o.d(e,{m:()=>u});var i=o(378),n=o(7063),a=o(5600),r=o(2702),l=o(2543),s=o(6273),c=o(6392),d=o(7411),m=o(9073),h=o(2618),p=o(7966);const u=(0,a.D)({symbol:"gltfModel",sinks:{anchor:{stride:8,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.localID=new Uint32Array(e,4)},packObjectAttributes(t,e,o,i,n){const a=n,l=i.tileAttrs[i.tileProps.model_name],s=i.tileAttrs[i.tileProps.model_src],c=i.tileAttrs[i.tileProps.building_id],d=i.tileAttrs[i.tileProps.direction].coordinates;return(0,r.v$)([t,e,l,s,c,a,d],o,i)},unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],name:t[2],modelSrc:t[3],buildingId:t[4],lngLat:t[5],lngLatDirection:t[6],tileData:t.slice(2)})},instances:{stride:52,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.offset=new Float32Array(e,8),t.views.scale=new Float32Array(e,20),t.views.rotate=new Float32Array(e,32),t.views.localID=new Uint32Array(e,48)},packObjectAttributes:(t,e,o,i,n,a)=>(0,r.v$)([t,e,o,i],n,a),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],modelId:t[2],linkedIds:t[3],tileData:t.slice(4)})},fill:{stride:0,binder:(t,e)=>{},packObjectAttributes:(t,e,o,i)=>(0,r.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,i,n,a){const r=n[0][0],l=n[1][0],s=[0,0,0];(0,c.Z$)(s,[n[0][0],n[1][0]],(0,c.Bs)(a));const m=(0,d.PA)([s[0],s[1]]),h=t.getBucket(o.type,"anchor",u.sinks.anchor.packObjectAttributes(e.id,o.innerId,o.dataKeys,i,m),u.sinks.anchor.binder),p=h.elements.offset,g=h.indices.buffer,_=h.indices.offset;g[_]=p,h.indices.offset=_+1;const f=4*p;h.views.position[f]=r,h.views.position[f+1]=l,h.elements.offset=p+1},generateInstanced(t,e,o,a,r,_,f){var y;const b=r[0][0],x=r[1][0],v=(0,l.FR)(o.style.linkedIds,a),w=Array.isArray(v)?v:[v];let z,F=(0,l.Q9)(o.style.modelSrc,a),S=e.modelIndex[F];const{tileProps:C,tileAttrs:M}=a,P=M[a.tileProps.direction];if(P&&"coordinates"in P){const t=[0,0,0];(0,c.Z$)(t,[r[0][0],r[1][0]],(0,c.Bs)(_)),z=[t,(0,d.yq)(P.coordinates)]}void 0===S&&(!(0,p.sD)(F)&&f&&(F=(0,p.pv)(f,F)),S=t.addModelToLoadByUrl(F)),t.addModelToLoad(S);const I=null===(y=o.interactive)||void 0===y||y;let L=h.gl;!M[C.hovered]&&I&&(L=t.idIndexer.getIndex({id:M[C.id],styleId:e.id,layer:o,sublayer:M[C.db_sublayer]}));!function(t,e,o,a,r,h,p,_,f){const y=2,b=4,x=t.elements.offset*u.sinks.instances.stride/b,v=t.elements.offset*u.sinks.instances.stride/y,w=[e,o,a],z=[],F=(0,c.Bs)(f);(0,c.Z$)(z,w,F);const S=(0,d.PA)(z),C=(0,m.Xg)(S[1]),M=g((0,l.FR)(r.style.offset,h),[0,0,0]),P=function(t,e,o,i){const n=o[0]*m.C*e,a=o[1]*m.C*e,r=o[2]*m.C*e,l=[t[0]+n,t[1]+a,t[2]+r],s=[];return(0,c.a2)(s,l,i),s}(z,C,M,F);t.views.position[v]=s.jO+P[0],t.views.position[v+1]=s.jO+P[1],t.views.position[v+2]=P[2];const I=n.Ue(),L=g((0,l.FR)(r.style.scale,h),[1,1,1]);void 0!==p?function(t,e,o,a){const r=a[0]-o[0],l=a[1]-o[1];n.lM(t,t,Math.PI/2),n.uD(t,t,Math.atan2(l,r));const s=i.TE(o,a);e[0]*=s,e[1]*=s,e[2]*=s}(I,L,p[0],p[1]):(k=I,A=L,n.lM(k,k,Math.PI/2),A[0]*=m.C,A[1]*=m.C,A[2]*=m.C);var k,A;t.views.scale[x]=L[0]*C,t.views.scale[x+1]=L[1]*C,t.views.scale[x+2]=L[2]*C;const j=g((0,l.FR)(r.style.rotation,h),[0,0,0]),T=n.Ue();n.lM(T,T,j[0]*Math.PI/180);const E=n.Ue();n.uD(E,E,j[1]*Math.PI/180);const O=n.Ue();n.jI(O,O,j[2]*Math.PI/180);const H=n.Ue();n.Jp(H,T,I),n.Jp(H,E,H),n.Jp(H,O,H),t.views.rotate[x]=H[0],t.views.rotate[x+1]=H[1],t.views.rotate[x+2]=H[2],t.views.rotate[x+3]=H[3],t.views.offset[x]=0,t.views.offset[x+1]=0,t.views.offset[x+2]=0,t.views.localID[x]=_;const W=t.indices;W.buffer[W.offset]=t.elements.offset,W.offset++,t.elements.offset++}(t.getBucket(o.type,"instances",u.sinks.instances.packObjectAttributes(e.id,o.innerId,S,w,o.dataKeys,a),u.sinks.instances.binder),b,x,0,o,a,z,L,_)}});function g(t,e){let o=e;return"number"==typeof t?o=[t,t,t]:t instanceof Array&&"number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]?(o[0]=t[0],o[1]=t[1],o[2]=t[2]):console.warn(`Could not cast ${JSON.stringify(t)} to [number, number, number]`),o}},749:(t,e,o)=>{o.d(e,{B:()=>r});var i=o(5600),n=o(2543),a=o(6273);const r=(0,i.D)({symbol:"heatmap",sinks:{fill:{stride:8,binder:(t,e)=>{t.views.position=new Float32Array(e)},packObjectAttributes:(t,e,o,i)=>[t,e,o,i],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],textureIndex:t[2],rampTextureIndex:t[3],tileData:t.slice(4)})},framebuffer:{stride:12,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.weight=new Float32Array(e,4),t.views.widen=new Int8Array(e,8)},packObjectAttributes:(t,e)=>[t,e],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,i,a){const l=i[0],d=i[1],m=Number((0,n.FR)(o.style.weight,a));if(Number.isNaN(m))return void console.error("Can't resolve style.weight to number");const h=t.getBucket(o.type,"framebuffer",r.sinks.framebuffer.packObjectAttributes(e,o.innerId),r.sinks.framebuffer.binder);for(let t=0;t<l.length;t++)c(h,0,1,2,2,1,3),s(h,l[t],d[t],-1,-1,m),s(h,l[t],d[t],1,-1,m),s(h,l[t],d[t],-1,1,m),s(h,l[t],d[t],1,1,m)},generateTexture(t,e,o,i,n){const a=[-1,1,1,-1],s=[-1,-1,1,1],c=t.getBucket(o.type,"fill",r.sinks.fill.packObjectAttributes(e,o.innerId,i,n),r.sinks.fill.binder);let d=c.elements.offset;!function(t,e,o,i,n,a,r,l){const s=t.buffer,c=t.offset;s[c]=e+o,s[c+1]=e+i,s[c+2]=e+n,s[c+3]=e+a,s[c+4]=e+r,s[c+5]=e+l,t.offset=c+6}(c.indices,d,0,1,2,0,2,3),l(c,d++,a[0],s[0]),l(c,d++,a[1],s[1]),l(c,d++,a[2],s[2]),l(c,d++,a[3],s[3]),c.elements.offset=d}});function l(t,e,o,i){const n=2*e;t.views.position[n]=o,t.views.position[n+1]=i}function s(t,e,o,i,n,r){const l=t.elements.offset*t.elements.stride,s=l>>1,c=s>>1;t.views.position[s]=a.jO+e,t.views.position[s+1]=a.jO+o,t.views.weight[c]=r,t.views.widen[l]=i,t.views.widen[l+1]=n,t.elements.offset++}function c(t,e,o,i,n,a,r){const{elements:l,indices:s}=t,{buffer:c,offset:d}=s,m=l.offset;c[d]=m+e,c[d+1]=m+o,c[d+2]=m+i,c[d+3]=m+n,c[d+4]=m+a,c[d+5]=m+r,s.offset=d+6}},143:(t,e,o)=>{function i(t,e){return 0===t?0:Math.min(2*t-1,2*(e-t))}o.d(e,{X:()=>i})},8183:(t,e,o)=>{o.d(e,{y:()=>r});var i=o(378),n=o(9090),a=o(4091);function r(t){const e=[],o=(0,a.bu)(t),r=i.I6(t[0],t[t.length-1]),l=r?t.length-1:t.length;for(let i=l-1,a=0,r=1;a<l;a++,i=a-1,r=(a+1)%l){const l=[];(0,n.tG)(l,t[i],t[a],t[r],o),e.push(l)}return r&&e.push(e[0]),e}},4999:(t,e,o)=>{o.d(e,{$Y:()=>s,Uu:()=>c,k8:()=>d});var i=o(9218),n=o(9970),a=o(6273),r=o(9090);const l=[0,0];function s(t,e,o,a,r,s){let{textLineHeight:c,textLetterSpacing:d}=r.style;s===n.bR.Icon&&(c=r.style.iconTextLineHeight,d=r.style.iconTextLetterSpacing);const{identifyPoiLabelIndex:h}=e,{lines:p,maxWidth:u}=a,g=c*i.Rq.baseSize;let _=function(t,e,o){let i;switch(t){case 0:i=e/2+e*(o-1);break;case 2:i=-e/2;break;default:i=1&o?e*(o>>1):e/2+e*(o-1>>1)}return i}(1,g,p.length);for(let e=0;e<p.length;e++){const n=p[e].width;let a=0;a=-n/2,l[0]=a,l[1]=_;const r=p[e].glyphs;for(let e=0;e<r.length;e++){const n=r[e];void 0!==n.bitmap&&m(t[n.range],o,l,n,h),l[0]+=n.advance+i.Rq.baseSize*d}_-=g}}function c(t,e,o,i,n,a,r){const l=o[1]+i.top,s=o[0]+i.left,c=l-i.height,d=s+i.width,m=Math.sin(n),h=Math.cos(n),u=s*h-l*m,_=s*m+l*h,f=d*h-l*m,y=d*m+l*h,b=s*h-c*m,x=s*m+c*h,v=d*h-c*m,w=d*m+c*h,z=t.elements.offset;p(t,e,u,_,i.texLeft,i.texTop,a,r),p(t,e,f,y,i.texRight,i.texTop,a,r),p(t,e,b,x,i.texLeft,i.texBottom,a,r),p(t,e,v,w,i.texRight,i.texBottom,a,r),g(t.indices,z,1,0,3,2,3,0)}function d(t,e,o){const i=t.elements.offset,n=(0,r.i7)(Math.cos(o)),a=(0,r.i7)(Math.sin(o));u(t,e,n,a,-1,-1),u(t,e,n,a,1,-1),u(t,e,n,a,1,1),u(t,e,n,a,-1,1),g(t.indices,i,0,1,2,2,3,0)}function m(t,e,o,i,n){const a=o[1]+i.top,r=o[0]+i.left,l=a-i.height,s=r+i.width,c=t.elements.offset;h(t,e,r,a,i.texLeft,i.texTop,n),h(t,e,s,a,i.texRight,i.texTop,n),h(t,e,r,l,i.texLeft,i.texBottom,n),h(t,e,s,l,i.texRight,i.texBottom,n),g(t.indices,c,1,0,3,2,3,0)}function h(t,e,o,i,n,r,l){const s=t.elements,c=s.stride*s.offset>>1,d=c>>1;t.views.position[c]=a.jO+e[0],t.views.position[c+1]=a.jO+e[1],t.views.position[c+2]=e[2],t.views.cornerOffset[c]=o,t.views.cornerOffset[c+1]=i,t.views.texCoords[c]=n,t.views.texCoords[c+1]=r,t.views.localID[d]=l,s.offset++}function p(t,e,o,i,n,r,l,s){const c=t.elements;let d=c.stride*c.offset>>1;t.views.position[d]=a.jO+e[0],t.views.position[d+1]=a.jO+e[1],t.views.position[d+2]=e[2],t.views.texCoords[d]=n,t.views.texCoords[d+1]=r,d>>=1,t.views.cornerOffset[d]=o,t.views.cornerOffset[d+1]=i,t.views.styleZoomLimits[d]=l,t.views.styleZoomLimits[d+1]=s,c.offset++}function u(t,e,o,i,n,r){const l=t.elements.stride*t.elements.offset,s=l/t.views.position.BYTES_PER_ELEMENT,c=l/t.views.direction.BYTES_PER_ELEMENT;t.views.position[s]=a.jO+e[0],t.views.position[s+1]=a.jO+e[1],t.views.direction[c]=o,t.views.direction[c+1]=i,t.views.widenDirection[c]=n,t.views.widenDirection[c+1]=r,t.elements.offset++}function g(t,e,o,i,n,a,r,l){const s=t.buffer,c=t.offset;s[c]=e+o,s[c+1]=e+i,s[c+2]=e+n,s[c+3]=e+a,s[c+4]=e+r,s[c+5]=e+l,t.offset=c+6}},159:(t,e,o)=>{var i,n,a,r;o.d(e,{CJ:()=>r,SP:()=>i,gD:()=>n,kU:()=>a}),function(t){t.Striped="Striped",t.Entrance="Entrance"}(i||(i={})),function(t){t[t.Line=0]="Line",t[t.Arrow=1]="Arrow",t[t.StartBorder=2]="StartBorder",t[t.LineEnding=3]="LineEnding"}(n||(n={})),function(t){t[t.TileCut=0]="TileCut",t[t.ObjectEnding=1]="ObjectEnding"}(a||(a={})),function(t){t[t.Flat=0]="Flat",t[t.Circle=1]="Circle"}(r||(r={}))},8352:(t,e,o)=>{o.d(e,{W:()=>b});var i=o(9090),n=o(159),a=o(6273);const r=[.5,.5],l=[.5,.5],s=[.5,.5],c=[.5,.5],d=[0,0];let m,h,p,u=0,g=0,_=0,f=0;const y={x:0,y:0,xn2:0,yn2:0,xn1:0,yn1:0,noTurn:!0,leftTurn:!1,sharpTurn:!1,reverseTurn:!1,extender:[.5,.5],faExtender:[.5,.5],saExtender:[.5,.5]};function b(t,e,o,l,c,d,y,b,v,M,I,L){let k,A,j,T,E,O,H,W,R,B;if(0!==o)if(p=I,h=L,m=h.indices,g=h.elements.offset,u=0,_=0,f=0,1===o)k=t[0],A=e[0],B=0,P(m,g,0,2,1,1,2,3),C(h,p,0,k,A,1,-1,1,-1,B,!1),C(h,p,0,k,A,-1,-1,-1,-1,B,!1),C(h,p,0,k,A,1,1,1,1,B,!1),C(h,p,0,k,A,-1,1,-1,1,B,!1),u+=4;else{switch(j=t[0],T=e[0],E=t[1],O=e[1],B=0,c){case n.kU.TileCut:(0,i.AE)(r,j,T,y,b),(0,i.AE)(s,E,O,j,T),R=x(E,O,r[0],r[1],s[0],s[1]),R.noTurn?z(j,T,s[0],s[1],B):w(0,j,T,r[0],r[1],s[0],s[1],B);break;case n.kU.ObjectEnding:(0,i.AE)(s,E,O,j,T),l===n.CJ.Flat?z(j,T,s[0],s[1],B):(z(j,T,-s[0],-s[1],B),w(0,j,T,-s[0],-s[1],s[0],s[1],B));break;default:throw new Error("LoftedLine: unknown Ending Type")}const m=o-1;for(let o=1;o<m;o++){j=t[o-1],T=e[o-1],E=t[o],O=e[o],H=t[o+1],W=e[o+1];const n=E-j,l=O-T;B+=Math.sqrt(n*n+l*l)/a.Bq,(0,i.AE)(r,E,O,j,T),(0,i.AE)(s,H,W,E,O),w(o,E,O,r[0],r[1],s[0],s[1],B)}j=t[o-2],T=e[o-2],E=t[m],O=e[m];const h=E-j,p=O-T;switch(B+=Math.sqrt(h*h+p*p)/a.Bq,d){case n.kU.TileCut:(0,i.AE)(r,E,O,j,T),(0,i.AE)(s,v,M,E,O),R=x(E,O,r[0],r[1],s[0],s[1]),R.noTurn?F(m,E,O,s[0],s[1],B):S(m,B,R);break;case n.kU.ObjectEnding:(0,i.AE)(s,E,O,j,T),F(m,E,O,s[0],s[1],B),l===n.CJ.Circle&&w(m,E,O,s[0],s[1],-s[0],-s[1],B);break;default:throw new Error("LoftedLine: unknown Ending Type")}}}function x(t,e,o,n,a,r){const s=function(t,e,o,i,n,a){const r=y;r.x=t,r.y=e,r.xn2=o,r.yn2=i,r.xn1=n,r.yn1=a;const l=o*n+i*a;return r.noTurn=l>.9999,r.leftTurn=o*-a+i*n<0,r.sharpTurn=l<0,r.reverseTurn=l<-.9999,r}(t,e,o,n,a,r);if(s.noTurn||s.reverseTurn)s.extender[0]=0,s.extender[1]=0,s.faExtender[0]=0,s.faExtender[1]=0,s.saExtender[0]=0,s.saExtender[1]=0;else{(0,i.ax)(l,o,n,a,r);const t=l[0],e=l[1];s.extender[0]=t,s.extender[1]=e,s.faExtender[0]=t-2*o,s.faExtender[1]=e-2*n,s.saExtender[0]=t-2*a,s.saExtender[1]=e-2*r}return s}function v(t,e,o,n,a,r,s,c){(0,i.ax)(l,n,a,r,s);n*-s+a*r<0?C(h,p,t,e,o,-l[0],-l[1],-l[0],-l[1],c,!1):C(h,p,t,e,o,l[0],l[1],l[0],l[1],c,!1),u++}function w(t,e,o,n,a,r,l,s){const d=x(e,o,n,a,r,l);S(t,s,d),function(t,e,o){if(o.noTurn)return;const n=o.sharpTurn?2:1;let a,r;o.reverseTurn?(a=f,r=_):o.leftTurn?(a=_,r=u+n):(a=u+n,r=f);const l=u;o.leftTurn,M(m,g,_,f,l);if(o.sharpTurn){const t=u+1;o.leftTurn?P(m,g,l,t,a,a,t,r):P(m,g,l,r,t,t,r,a)}else o.leftTurn,M(m,g,l,r,a);o.sharpTurn?(o.leftTurn?(0,i.AE)(c,o.xn2,o.yn2,o.xn1,o.yn1):(0,i.AE)(c,o.xn1,o.yn1,o.xn2,o.yn2),v(t,o.x,o.y,o.xn2,o.yn2,c[0],c[1],e),v(t,o.x,o.y,c[0],c[1],o.xn1,o.yn1,e)):v(t,o.x,o.y,o.xn2,o.yn2,o.xn1,o.yn1,e);o.reverseTurn||(o.leftTurn?C(h,p,t,o.x,o.y,-o.xn1,-o.yn1,-o.xn1,-o.yn1,e,!1):C(h,p,t,o.x,o.y,o.xn1,o.yn1,o.xn1,o.yn1,e,!1),u++);f=r,_=a}(t,s,d),function(t,e,o){if(o.noTurn||o.reverseTurn)return;const i=u+1,n=u;o.leftTurn?(C(h,p,t,o.x,o.y,-o.xn1,-o.yn1,o.saExtender[0],o.saExtender[1],e,!1),C(h,p,t,o.x,o.y,o.xn1,o.yn1,o.extender[0],o.extender[1],e,!1)):(C(h,p,t,o.x,o.y,-o.xn1,-o.yn1,-o.extender[0],-o.extender[1],e,!1),C(h,p,t,o.x,o.y,o.xn1,o.yn1,-o.saExtender[0],-o.saExtender[1],e,!1));u+=2,o.leftTurn?P(m,g,f,n,_,_,n,i):P(m,g,_,f,i,i,f,n);f=n,_=i}(t,s,d)}function z(t,e,o,i,n){C(h,p,0,t,e,-o,-i,-o,-i,n,!1),C(h,p,0,t,e,o,i,o,i,n,!1),u+=2,_=1,f=0}function F(t,e,o,i,n,a){const r=u+1,l=u;C(h,p,t,e,o,-i,-n,-i,-n,a,!1),C(h,p,t,e,o,i,n,i,n,a,!1),u+=2,P(m,g,f,l,_,_,l,r),_=r,f=l}function S(t,e,o){if(o.noTurn)return;const i=u+1,n=u;if(o.reverseTurn?(C(h,p,t,o.x,o.y,-o.xn2,-o.yn2,-o.xn2,-o.yn2,e,!1),C(h,p,t,o.x,o.y,o.xn2,o.yn2,o.xn2,o.yn2,e,!1)):o.leftTurn?(C(h,p,t,o.x,o.y,-o.xn2,-o.yn2,o.faExtender[0],o.faExtender[1],e,!0),C(h,p,t,o.x,o.y,o.xn2,o.yn2,o.extender[0],o.extender[1],e,!0)):(C(h,p,t,o.x,o.y,-o.xn2,-o.yn2,-o.extender[0],-o.extender[1],e,!0),C(h,p,t,o.x,o.y,o.xn2,o.yn2,-o.faExtender[0],-o.faExtender[1],e,!0)),u+=2,P(m,g,f,n,_,_,n,i),f=n,_=i,!o.reverseTurn){const a=u+1,r=u;o.leftTurn?(C(h,p,t,o.x,o.y,-o.xn2,-o.yn2,-o.xn2,-o.yn2,e,!1),C(h,p,t,o.x,o.y,0,0,0,0,e,!1),P(m,g,i,n,a,a,n,r)):(C(h,p,t,o.x,o.y,0,0,0,0,e,!1),C(h,p,t,o.x,o.y,o.xn2,o.yn2,o.xn2,o.yn2,e,!1),P(m,g,n,r,i,i,r,a)),u+=2,f=r,_=a}}function C(t,e,o,r,l,s,c,m,h,p,u){const g=t.elements.offset*e.offsetMultiplier,_=g>>1,f=g<<1;if(t.views.position[g]=a.jO+r,t.views.position[g+1]=a.jO+l,t.views.extender[g]=Math.floor(m*a.Gt*127+.5),t.views.extender[g+1]=Math.floor(h*a.Gt*127+.5),e.type===n.SP.Striped)t.views.texExtender[f]=(0,i.i7)(s*a.Gt),t.views.texExtender[f+1]=(0,i.i7)(c*a.Gt),"componentDistance"in t.views&&(t.views.componentDistance[_]=e.cDist);else if(e.type===n.SP.Entrance){const{px:r,py:l,count:m}=e,h=0===o,p=o===m-1,y=h?o:o-1,b=h?o+1:o;(0,i.uI)(d,r[y],l[y],r[b],l[b]),"direction"in t.views&&(t.views.direction[g]=Math.round(127*d[0]),t.views.direction[g+1]=Math.round(127*d[1]),t.views.type[_]=p?n.gD.LineEnding:n.gD.Line),t.views.texExtender[f]=(0,i.i7)(s*(u||p?-1:1)*a.Gt),t.views.texExtender[f+1]=(0,i.i7)(c*(u||p?-1:1)*a.Gt)}t.views.vertexDistance[_]=p,t.views.objectLength[_]=e.oLen,t.views.localID[_]=e.localID,t.elements.offset++}function M(t,e,o,i,n){const a=t.buffer,r=t.offset;a[r]=e+o,a[r+1]=e+i,a[r+2]=e+n,t.offset=r+3}function P(t,e,o,i,n,a,r,l){const s=t.buffer,c=t.offset;s[c]=e+o,s[c+1]=e+i,s[c+2]=e+n,s[c+3]=e+a,s[c+4]=e+r,s[c+5]=e+l,t.offset=c+6}},9833:(t,e,o)=>{o.d(e,{f:()=>i});class i{constructor(){this.countX=0,this.countY=0,this.textureX=[],this.textureY=[],this.stretchedX=[],this.stretchedY=[]}reset(){this.countX=0,this.countY=0}set(t,e){this.countX=e[0].length,this.countY=e[1].length,this.textureX=e[0],this.textureY=e[1],this.stretchedX=t[0],this.stretchedY=t[1]}isEmpty(){return 0===this.countX||0===this.countY}}},3610:(t,e,o)=>{o.d(e,{Wv:()=>r,rU:()=>i,t2:()=>s});function i(t,e,o=[],i=[]){return{x:n(o,t),y:n(i,e)}}function n(t,e){const o=t.reduce(((t,e)=>t.concat(e)),[0]).concat(e),i=o.length-1;return{coords:o.slice(o[0]===o[1]?1:0,o[i-1]===o[i]?i:i+1),isOddStretchable:a(t)}}function a(t){var e;return!(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e[0])}function r(t,e,o,i,n){return[l(t.x,e,i[0],n),l(t.y,o,i[1],n)]}function l(t,e,o,i){if(t.coords.length<2)throw new Error("The source coords array must have at least two coordinates");return t.coords.map(((n,a)=>(e+n+i*(0===a?-1:a===t.coords.length-1?1:0))/o))}function s(t,e,o,i,n=0,a=0){return[m(c(t.x,e),i,n),m(c(t.y,o),i,a)]}function c(t,e){const{stretchSize:o,fixSize:i}=d(t),{coords:n,isOddStretchable:a}=t,r=e<i?i:e,l=[n[0]];for(let t=1;t<n.length;t++){const e=n[t-1],s=n[t],c=t%2==(a?1:0),d=l[l.length-1];c?l.push(Math.round((r-i)*(s-e)/o)+d):l.push(d+s-e)}return l}function d({coords:t,isOddStretchable:e}){if(t.length<2)throw new Error("An axis must have at least two coordinates");if(2===t.length)return{stretchSize:t[t.length-1],fixSize:0};let o=0;for(let i=e?0:1;i<t.length-1;i+=2)o+=t[i+1]-t[i];return{stretchSize:o,fixSize:t[t.length-1]-o}}function m(t,e,o=0){const i=t[t.length-1]-t[0],n=t.map((t=>Math.round(t-i/2+o)));return 2===n.length?n[n.length-1]+=2*e:(n[0]-=e,n[n.length-1]+=e),n}},2701:(t,e,o)=>{o.d(e,{N:()=>r,q:()=>l});var i=o(3698),n=o(6273),a=o(3610);function r(t,e,o,i,r,l,s,c,d){const m=(0,a.rU)(o.w,o.h,c,d),h=(0,a.Wv)(m,o.x,o.y,e,n.CW),p=(0,a.t2)(m,i,r,n.CW,l,s);t.set(p,h)}function l(t,e,o,i,a,r,l,d){const{textureX:m,textureY:h,stretchedX:p,stretchedY:u,countX:g,countY:_}=i,f=r!==-1/0?r:n.vL,y=l!==1/0?l:n.Fv;for(let i=0;i<g-1;i++){const n=m[i],r=m[i+1],l=p[i],g=p[i+1];for(let i=0;i<_-1;i++){const m=h[i],p=h[i+1],_=u[i],b=u[i+1];c(a,0,2,1,1,2,3),s(a,t,e,o,l,_,n,m,f,y,d),s(a,t,e,o,g,_,r,m,f,y,d),s(a,t,e,o,l,b,n,p,f,y,d),s(a,t,e,o,g,b,r,p,f,y,d)}}}function s(t,e,o,a,r,l,s,c,d,m,h){let p=12*t.elements.offset;t.views.position[p]=n.jO+e,t.views.position[p+1]=n.jO+o,t.views.position[p+2]=a,t.views.cornerOffset[p]=r,t.views.cornerOffset[p+1]=-l,t.views.texCoords[p]=(0,i.Bb)(s),t.views.texCoords[p+1]=(0,i.Bb)(c),t.views.scales[p]=(0,i.KF)(d),t.views.scales[p+1]=(0,i.wj)(m),p>>=1,t.views.localID[p]=h,t.elements.offset++}function c(t,e,o,i,n,a,r){const{elements:l,indices:s}=t,{buffer:c,offset:d}=s,m=l.offset;c[d]=m+e,c[d+1]=m+o,c[d+2]=m+i,c[d+3]=m+n,c[d+4]=m+a,c[d+5]=m+r,s.offset=d+6}},2682:(t,e,o)=>{o.d(e,{n:()=>s});var i=o(9450),n=o(6273);const a=i.Ue(),r=i.Ue(),l=i.Ue();function s(t,e,o,n,s,d,m,h,p){i.t8(a,e,o,n),i.t8(r,s,d,m),i.lu(l,r,a),i.fS(r,a)||(i.Fv(l,l),i.bA(l,l,127)),function(t,e,o,i,n,a,r){const l=t.indices.buffer,s=t.indices.offset,c=t.elements.offset;l[s]=c+e,l[s+1]=c+o,l[s+2]=c+i,l[s+3]=c+n,l[s+4]=c+a,l[s+5]=c+r,t.indices.offset=s+6}(t,0,1,3,3,1,2),c(t,a,l,1,h,p),c(t,a,l,-1,h,p),c(t,r,l,-1,h,p),c(t,r,l,1,h,p)}function c(t,e,o,i,a,r){const l=t.elements.offset*t.elements.stride,s=l>>1;t.views.position[s]=r?e[0]:n.jO+e[0],t.views.position[s+1]=r?e[1]:n.jO+e[1],t.views.position[s+2]=e[2],t.views.directionDistance[l]=o[0],t.views.directionDistance[l+1]=o[1],t.views.directionDistance[l+2]=o[2],t.views.directionDistance[l+3]=i,"demPosition"in t.views&&(a=null!=a?a:e,t.views.demPosition[s]=(r?a[0]:n.jO+a[0])/8,t.views.demPosition[s+1]=(r?a[1]:n.jO+a[1])/8),t.elements.offset++}},6563:(t,e,o)=>{o.d(e,{e:()=>f});var i=o(6273),n=o(378),a=o(6490),r=o(9090);const l=n.Ue(),s=n.Ue(),c=n.Ue(),d=n.Ue(),m=n.Ue(),h=n.Ue(),p=n.Ue(),u=n.Ue();let g=0,_=0;function f(t,e,o,i,n,a,s,c,d){if(!(i<2)){if((0,r.uI)(l,e[0],o[0],e[1],o[1]),g=0,n){const i=void 0!==c?c[0]:0,n=void 0!==d?d[0]:0;b(t,e[0],o[0],-l[0],-l[1],i,n,s)}for(let n=1;n<i;n++)y(t,e,o,n,i,s,c,d);if(a){const n=void 0!==c?c[i-1]:0,a=void 0!==d?d[i-1]:0;b(t,e[i-1],o[i-1],l[0],l[1],n,a,s)}}}function y(t,e,o,f,y,v,w,z){const F=f===y-1;if(n.t8(m,e[f-1],o[f-1]),n.t8(h,e[f],o[f]),void 0!==w&&void 0!==z?(n.t8(c,w[f-1],z[f-1]),n.t8(d,w[f],z[f])):(n.t8(c,0,0),n.t8(d,0,0)),(0,r.fN)(u,l),F)_=0;else{n.t8(p,e[f+1],o[f+1]),(0,r.uI)(s,h[0],h[1],p[0],p[1]);const i=(0,a.uZ)(n.AK(l,s),-1,1);if(i<=0)_=0,b(t,h[0],h[1],l[0],l[1],d[0],d[1],v);else{const t=Math.sqrt((1-i)/(1+i)),e=(0,a.Xx)(n.AK(u,s));_=t*e}}!function(t,e,o,i,n,a,r){const l=t.indices.buffer,s=t.indices.offset,c=t.elements.offset;l[s]=c+e,l[s+1]=c+o,l[s+2]=c+i,l[s+3]=c+n,l[s+4]=c+a,l[s+5]=c+r,t.indices.offset=s+6}(t,0,1,3,3,1,2);const S=u[0]*i.Gt,C=u[1]*i.Gt;x(t,m[0],m[1],(u[0]+l[0]*g)*i.Gt,(u[1]+l[1]*g)*i.Gt,S,C,c[0],c[1],v),x(t,m[0],m[1],(-u[0]-l[0]*g)*i.Gt,(-u[1]-l[1]*g)*i.Gt,-S,-C,c[0],c[1],v),x(t,h[0],h[1],(-u[0]+l[0]*_)*i.Gt,(-u[1]+l[1]*_)*i.Gt,-S,-C,d[0],d[1],v),x(t,h[0],h[1],(u[0]-l[0]*_)*i.Gt,(u[1]-l[1]*_)*i.Gt,S,C,d[0],d[1],v),F||(n.JG(l,s),g=_)}function b(t,e,o,i,n,a,r,l){!function(t,e,o,i){const n=t.indices.buffer,a=t.indices.offset,r=t.elements.offset;n[a]=r+e,n[a+1]=r+o,n[a+2]=r+i,t.indices.offset=a+3}(t,0,1,2);const s=.01*-i,c=.01*-n;x(t,e,o,i+s,n+c,i,n,a,r,l),x(t,e,o,-n+s,i+c,-n,i,a,r,l),x(t,e,o,n+s,-i+c,n,-i,a,r,l)}function x(t,e,o,n,a,r,l,s,c,d){const m=t.elements.offset*t.elements.stride,h=m>>1,p=m>>2;t.views.position[h]=i.jO+e,t.views.position[h+1]=i.jO+o,t.views.extender[m]=127*n,t.views.extender[m+1]=127*a,t.views.normal[m]=127*r,t.views.normal[m+1]=127*l,"shift"in t.views&&(t.views.shift[p]=s,t.views.shift[p+1]=c),"localID"in t.views&&(t.views.localID[p]=d),t.elements.offset++}},8308:(t,e,o)=>{o.d(e,{C:()=>s,b:()=>c});var i=o(143),n=o(9090),a=o(6273);const r=[.5,.5],l=[.5,.5];function s(t,e,o,a,r,s){let c=t.elements.offset;const d=(0,i.X)(e-1,e);let g=o[d],_=a[d],f=r?r[d]:0;const b=c;for(let d=0;d<e;d++){const x=(0,i.X)(d,e),v=d===e-1,w=o[x],z=a[x],F=r?r[x]:v?0:1;0!==f&&((0,n.uI)(l,g,_,w,z),y(t,c,F,v?b:c+4),h(t,c,g,_,w,z),s?m(t,c,s[0],s[1],s[0],s[1]):m(t,c,g,_,w,z),(0,n.af)(l),p(t,c,l),u(t,c,l),c+=4),g=w,_=z,f=F}t.elements.offset=c}function c(t,e,o,a,s,c,m){let h=t.elements.offset;const p=(0,i.X)(e-2,e),u=(0,i.X)(e-1,e);let b=o[u],x=a[u],v=s?s[p]:1,w=s?s[u]:0;(0,n.AE)(r,o[p],a[p],b,x);let z=r[0],F=r[1];for(let p=0;p<e;p++){const u=(0,i.X)(p,e),S=p===e-1,C=o[u],M=a[u],P=s?s[u]:S?0:1;(0,n.uI)(l,b,x,C,M);const I=l[1],L=-l[0];0!==v&&(0===w?(r[0]=z,r[1]=F):d(r,z,F,I,L),(0,n.m2)(l,z,F,r[0],r[1]),y(t,h,0,0),g(t,h,b,x,c,null!=m?m:[b,x]),_(t,h,(0,n.af)(r),(0,n.af)(l)),f(t,h),h+=4),b=C,x=M,v=w,w=P,z=I,F=L}t.elements.offset=h}function d(t,e,o,i,n){let a,r,l;e*i+o*n>0?(a=e+i,r=o+n,l=1/Math.sqrt(a*a+r*r),t[0]=a*l,t[1]=r*l):(a=n-o,r=e-i,0!==a&&0!==r?(l=1/Math.sqrt(a*a+r*r),t[0]=a*l,t[1]=r*l):(t[0]=0,t[1]=0))}function m(t,e,o,i,n,r){const l=t.views.demPosition,s=t.elements.stride/l.BYTES_PER_ELEMENT;e*=s,o=(o+a.jO)/8,i=(i+a.jO)/8,n=(n+a.jO)/8,r=(r+a.jO)/8,l[e]=o,l[e+1]=i,l[e+=s]=o,l[e+1]=i,l[e+=s]=n,l[e+1]=r,l[e+=s]=n,l[e+1]=r}function h(t,e,o,i,n,r){const{position:l,distance:s}=t.views,c=t.elements.stride/l.BYTES_PER_ELEMENT;l[e*=c]=a.jO+o,l[e+1]=a.jO+i,l[e+2]=0,s[e]=0,l[e+=c]=a.jO+o,l[e+1]=a.jO+i,l[e+2]=0,s[e]=-32767,l[e+=c]=a.jO+n,l[e+1]=a.jO+r,l[e+2]=0,s[e]=-32767,l[e+=c]=a.jO+n,l[e+1]=a.jO+r,l[e+2]=0,s[e]=0}function p(t,e,o){const i=t.elements.stride/t.views.normals.BYTES_PER_ELEMENT;e*=i;for(let n=0;n<4;n++)t.views.normals[e]=o[0],t.views.normals[e+1]=o[1],t.views.normals[e+2]=0,t.views.normals[e+3]=0,e+=i}function u(t,e,o){const i=t.elements.stride/t.views.direction.BYTES_PER_ELEMENT;e*=i;for(let n=0;n<4;n++)t.views.direction[e]=o[0],t.views.direction[e+1]=o[1],t.views.direction[e+2]=0,t.views.direction[e+3]=0,e+=i}function g(t,e,o,i,n,r){const l=t.elements.stride/t.views.position.BYTES_PER_ELEMENT;e*=l,t.views.position[e]=a.jO+o,t.views.position[e+1]=a.jO+i,t.views.position[e+2]=0,t.views.distance[e]=32767,t.views.demPosition[e]=(a.jO+r[0])/8,t.views.demPosition[e+1]=(a.jO+r[1])/8,e+=l,t.views.position[e]=a.jO+o,t.views.position[e+1]=a.jO+i,t.views.position[e+2]=0,t.views.distance[e]=-32767,t.views.demPosition[e]=(a.jO+r[0])/8,t.views.demPosition[e+1]=(a.jO+r[1])/8,e+=l,t.views.position[e]=a.jO+o,t.views.position[e+1]=a.jO+i,t.views.position[e+2]=n,t.views.distance[e]=-32767,t.views.demPosition[e]=(a.jO+r[0])/8,t.views.demPosition[e+1]=(a.jO+r[1])/8,e+=l,t.views.position[e]=a.jO+o,t.views.position[e+1]=a.jO+i,t.views.position[e+2]=n,t.views.distance[e]=32767,t.views.demPosition[e]=(a.jO+r[0])/8,t.views.demPosition[e+1]=(a.jO+r[1])/8}function _(t,e,o,i){const n=t.elements.stride/t.views.normals.BYTES_PER_ELEMENT;e*=n;for(let a=0;a<4;a++)t.views.normals[e]=o[0],t.views.normals[e+1]=o[1],t.views.normals[e+2]=i[0],t.views.normals[e+3]=i[1],e+=n}function f(t,e){const o=t.elements.stride/t.views.direction.BYTES_PER_ELEMENT;e*=o;for(let i=0;i<4;i++)t.views.direction[e]=0,t.views.direction[e+1]=127,e+=o}function y(t,e,o,i){const n=t.indices.buffer;let a=t.indices.offset;n[a++]=e,n[a++]=e+1,n[a++]=e+3,n[a++]=e+3,n[a++]=e+1,n[a++]=e+2,0!==o&&(n[a++]=e+2,n[a++]=i+1,n[a++]=i+0),t.indices.offset=a}},1558:(t,e,o)=>{o.d(e,{y:()=>l});var i=o(9090),n=o(143),a=o(6273);const r=[0,0];function l(t,e,o,a,l,p,u,g){let _=t.elements.offset;for(let f=0;f<e;f++){const y=(0,n.X)(f,e),b=f===e-1;if(l&&1===l[y]||!l&&!b){const l=o[y],b=a[y],x=(f+1)%e,v=(0,n.X)(x,e),w=o[v],z=a[v];h(t,_),s(t,_,l,b,w,z,p),g?c(t,_,g[0],g[1],g[0],g[1]):c(t,_,l,b,w,z),(0,i.AE)(r,l,b,w,z),d(t,_,r),void 0!==u&&"localID"in t.views&&void 0!==t.views.localID&&m(t.views.localID,_,u,t.elements.stride),_+=4}}t.elements.offset=_}function s(t,e,o,i,n,r,l){const s=t.views.position,c=t.elements.stride/s.BYTES_PER_ELEMENT;s[e*=c]=a.jO+o,s[e+1]=a.jO+i,s[e+2]=0,s[e+=c]=a.jO+o,s[e+1]=a.jO+i,s[e+2]=l,s[e+=c]=a.jO+n,s[e+1]=a.jO+r,s[e+2]=0,s[e+=c]=a.jO+n,s[e+1]=a.jO+r,s[e+2]=l}function c(t,e,o,i,n,r){const l=t.views.demPosition,s=t.elements.stride/l.BYTES_PER_ELEMENT;e*=s,o=(o+a.jO)/8,i=(i+a.jO)/8,n=(n+a.jO)/8,r=(r+a.jO)/8,l[e]=o,l[e+1]=i,l[e+=s]=o,l[e+1]=i,l[e+=s]=n,l[e+1]=r,l[e+=s]=n,l[e+1]=r}function d(t,e,o){const n=t.elements.stride/t.views.normal.BYTES_PER_ELEMENT;e*=n;for(let a=0;a<4;a++)t.views.normal[e]=(0,i.i7)(o[0]),t.views.normal[e+1]=(0,i.i7)(o[1]),t.views.normal[e+2]=0,t.views.normal[e+3]=0,e+=n}function m(t,e,o,i){const n=i/t.BYTES_PER_ELEMENT;t[e*=n]=o,t[e+=n]=o,t[e+=n]=o,t[e+=n]=o}function h(t,e){const o=t.indices.buffer;let i=t.indices.offset;o[i++]=e,o[i++]=e+3,o[i++]=e+1,o[i++]=e,o[i++]=e+2,o[i++]=e+3,t.indices.offset=i}},2730:(t,e,o)=>{o.d(e,{PA:()=>I,Pn:()=>k,SV:()=>L,XI:()=>S,kF:()=>C,vP:()=>P});var i=o(8009),n=o(5794),a=o(5970),r=o(3097),l=o(1678),s=o(4389),c=o(871),d=o(6195),m=o(6263),h=o(2097),p=o(5725),u=o(2251),g=o(9970),_=o(749),f=o(4922),y=o(4333),b=o(9218),x=o(6822),v=o(4144),w=o(7407),z=o(8965),F=o(6829);function S({collector:t,generator:e,args:o}){do{e(t,...o)}while(t.isOverloaded())}const C={arrow:s.l,line:i.z,polygon:h.a,roadPolygon:F.t,labelLine:p.h,lineExtrusion:d.Q,polygonExtrusion:a.p,oneWayLine:u.V,dashedLine:r.L,shiftedLine:n.O,circle:c.p,buildingModel:l.X,gltfModel:w.m,point:g.uF,raster:m.h,heatmap:_.B,dem:f._,mesh:z.j},M={labelLine:p.h,oneWayLine:u.V,point:g.uF};function P(t,e){const o=C[t];return o?o.sinks[e].stride:0}function I(t,e,o,l,c,m,p,u,g,f,S,C,M){o.forEach((o=>{if((void 0===m||!(o.maxzoom<=m||o.minzoom>=m+1&&m!==b.Sv.maxDetailLevel))&&(!l.tileProps.hovered||Number.isNaN(l.tileAttrs[l.tileProps.hovered])||1!==l.tileAttrs[l.tileProps.hovered]||"polygon"===o.type||"polygonExtrusion"===o.type||"point"===o.type))do{switch(o.type){case"line":i.z.generate(t,e.id,o,l,f);break;case"dashedLine":r.L.generate(t,e.id,o,l,f);break;case"shiftedLine":n.O.generate(t,e.id,o,l,f);break;case"polygon":h.a.generate(t,e,o,l,f,g,S);break;case"roadPolygon":F.t.generate(t,e,o,l,u,f,g);break;case"mesh":z.j.generate(t,e.id,o,l,f,u);break;case"polygonExtrusion":a.p.generate(t,e.id,o,l,f,!0,S);break;case"labelLine":(0,x.p)(t,e.id,o,u,p,l,f);break;case"oneWayLine":(0,v.Q)(t,e.id,o,u,p,l,f);break;case"point":(0,y.p)(t,e,o,l,c,u,p,f,g,C,void 0);break;case"lineExtrusion":d.Q.generate(t,e.id,o,l,f);break;case"arrow":s.l.generate(t,e.id,o,l,f);break;case"heatmap":_.B.generate(t,e.id,o,f,l);break;case"gltfModel":o.style.useThreeJs?w.m.generate(t,e,o,l,f,u):w.m.generateInstanced(t,e,o,l,f,u,M);break}}while(t.isOverloaded())}))}function L(t,e,o,i,n,a,r,l){const s=M[e.type];if(s)do{s.processElement(t,o,i,n,a,r,l)}while(o.isOverloaded())}function k(t,e,o,i,n,a,r){const l=M[i.type];l&&l.getLabelingInfo(t,e,o,n,a,r)}},5725:(t,e,o)=>{o.d(e,{h:()=>u});var i=o(6392),n=o(9073),a=o(4999),r=o(9218),l=o(6490),s=o(5600),c=o(2543),d=o(6273),m=o(2702);const h=[0,0,0],p=[0,0],u=(0,s.D)({symbol:"labelLine",sinks:{raster:{stride:28,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.texCoords=new Uint16Array(e,8),t.views.cornerOffset=new Float32Array(e,12),t.views.styleZoomLimits=new Float32Array(e,20)},packObjectAttributes:(t,e,o,i)=>(0,m.LY)([t.styleId,t.layer.innerId,e,o,i],t.tileData),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],animDirection:t[2],range:t[3],fontIndex:t[4],tileData:t.slice(5)})}},processElement(t,e,o,s,m,g,_){var f;const{label:y,anchorPosition:b,anchorSegmentIndex:x,halfLabelWidth:v,layer:w}=o;if("labelLine"!==w.type)return;const{axis:z}=y,{center:F,styleZoom:S}=g,C=(0,c.bs)(S,g.styleState,!1,y.tileData),M=(0,c.Q9)(w.style.textFont,C),P=null!==(f=t.fontNameToIndex[M])&&void 0!==f?f:t.fontNameToIndex[d.Uo],I={};for(const t of y.ranges)I[t]=e.getBucket("labelLine","raster",u.sinks.raster.packObjectAttributes(y,s,t,P),u.sinks.raster.binder);const L=y.textMetrics.lines[0],k=(0,c.vn)(w.style.textFontSize,C)/r.Rq.baseSize,A=L.glyphs,j=function(t,e,o,i){const n=t.interpolate(e-o,t.getSegmentIndex(e-o)),a=t.interpolate(e+o,t.getSegmentIndex(e+o)),r=Math.atan2(a[1]-n[1],a[0]-n[0])-i;return Math.cos(r)<0}(z,b,v,g.rotation);p[0]=-L.width/2,p[1]=0;for(let t=0;t<A.length;t++){const e=A[t],s=(p[0]+e.left+e.width/2)*k*(j?-1:1),c=(0,l.Xx)(s)||1;let d=-1/0,m=1/0;for(let t=x;t>=1&&t<z.vertexCount&&!(m<o.overflowStyleZoom);t+=c,m=d){const r=1===c?t:t-1;d=(0,n.X$)((0,n.to)(s,z.lengths[r]-b),F);const l=z.interpolate(b,t);(0,i.a2)(h,l,_),(0,i.hm)(h)&&void 0!==e.bitmap&&(0,a.Uu)(I[e.range],h,p,e,l[3]+(j?Math.PI:0),Math.max(d,o.overflowStyleZoom),m)}p[0]+=e.advance+r.Rq.baseSize*w.style.textLetterSpacing}},getLabelingInfo(){}})},8009:(t,e,o)=>{o.d(e,{z:()=>r});var i=o(5600),n=o(6563),a=o(2702);const r=(0,i.D)({symbol:"line",sinks:{solid:{stride:12,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.extender=new Int8Array(e,4),t.views.normal=new Int8Array(e,6),t.views.localID=new Uint32Array(e,8)},packObjectAttributes:(t,e,o,i)=>(0,a.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,i,a){const{tileAttrs:l,tileProps:s}=i,c=!Number.isNaN(l[s.beginningIsCut])&&0!==l[s.beginningIsCut],d=!Number.isNaN(l[s.endingIsCut])&&0!==l[s.endingIsCut],m=t.idIndexer.getIndex({id:l[s.id],styleId:e,layer:o,sublayer:l[s.db_sublayer]}),h=t.getBucket(o.type,"solid",r.sinks.solid.packObjectAttributes(e,o.innerId,o.dataKeys,i),r.sinks.solid.binder);(0,n.e)(h,a[0],a[1],a[0].length,!c,!d,m)}})},6195:(t,e,o)=>{o.d(e,{Q:()=>g});var i=o(5600),n=o(378),a=o(1558),r=o(2682),l=o(8308),s=o(2702);const c=n.Ue(),d=n.Ue(),m=n.Ue(),h=n.Ue(),p=(t,e,o,i)=>(0,s.v$)([t,e],o,i),u=t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)}),g=(0,i.D)({symbol:"lineExtrusion",sinks:{fill:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.normal=new Int8Array(e,8),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:p,unpackObjectAttributes:u},topStroke:{stride:16,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.directionDistance=new Int8Array(e,8),t.views.demPosition=new Int16Array(e,12)},packObjectAttributes:p,unpackObjectAttributes:u},sideStroke:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.distance=new Int16Array(e,6),t.views.normals=new Int8Array(e,8),t.views.direction=new Int8Array(e,12),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:p,unpackObjectAttributes:u}},generate(t,e,o,i,s){const p=s[0],u=s[1],_=p.length,f=t.getBucket(o.type,"fill",g.sinks.fill.packObjectAttributes(e,o.innerId,o.dataKeys,i),g.sinks.fill.binder),y=t.getBucket(o.type,"topStroke",g.sinks.topStroke.packObjectAttributes(e,o.innerId,o.dataKeys,i),g.sinks.topStroke.binder),b=t.getBucket(o.type,"sideStroke",g.sinks.sideStroke.packObjectAttributes(e,o.innerId,o.dataKeys,i),g.sinks.sideStroke.binder);for(let t=0;t<_-1;t++){const e=p[t],o=u[t],i=p[t+1],s=u[t+1];n.t8(c,e,i),n.t8(d,o,s),n.t8(m,i,e),n.t8(h,s,o),(0,a.y)(f,2,c,d,void 0,1),(0,r.n)(y,e,o,1,i,s,1),(0,l.C)(b,2,c,d,void 0),(0,l.C)(b,2,m,h,void 0),(0,l.b)(b,2,c,d,void 0,1)}n.t8(c,p[_-1],p[0]),n.t8(d,u[_-1],u[0]),(0,l.b)(b,2,c,d,void 0,1)}})},8965:(t,e,o)=>{o.d(e,{j:()=>u});var i=o(9450),n=o(2702),a=o(5600),r=o(2618),l=o(6273),s=o(9090),c=o(6392);const d=[0,0,0],m=[0,0,0],h=[0,0,0],p=[0,0,0],u=(0,a.D)({symbol:"mesh",sinks:{fill:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.normal=new Int8Array(e,8),t.views.localID=new Uint32Array(e,12),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:(t,e,o,i)=>(0,n.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})},raster:{stride:24,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.normal=new Int8Array(e,8),t.views.localID=new Uint32Array(e,12),t.views.textCoord=new Uint16Array(e,16),t.views.demPosition=new Int16Array(e,20)},packObjectAttributes:(t,e,o,i,a)=>(0,n.v$)([t,e,o],i,a),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],textureIndex:t[2],tileData:t.slice(3)})}},generate(t,e,o,n,a,f,y){var b,x,v;const w=a[0],z=a[1],F=a[3]?a[3]:void 0,S=w.length,C=n.tileAttrs[n.tileProps.hovered],M=n.tileAttrs[n.tileProps.textureId],P=n.tileAttrs[n.tileProps.id],I=C?r.gl:t.idIndexer.getIndex({id:P,styleId:e,layer:o,sublayer:n.tileAttrs[n.tileProps.db_sublayer]});if(!M){const a=t.getBucket("mesh","fill",u.sinks.fill.packObjectAttributes(e,o.innerId,o.dataKeys,n),u.sinks.fill.binder);for(let t=0;t<S-2;t++){const e=!(t%2);_(a);const o=e?t+1:t+2,n=e?t+2:t+1,r=(0,c.aq)(f[2]),u=l.Bq/r;i.t8(d,w[t],z[t],(null!==(b=null==F?void 0:F[t])&&void 0!==b?b:0)*u),i.t8(m,w[o],z[o],(null!==(x=null==F?void 0:F[o])&&void 0!==x?x:0)*u),i.t8(h,w[n],z[n],(null!==(v=null==F?void 0:F[n])&&void 0!==v?v:0)*u),(0,s.Cb)(p,d,m,h),d[2]/=u,m[2]/=u,h[2]/=u,g(a,d,p,I,y),g(a,m,p,I,y),g(a,h,p,I,y)}}}});function g(t,e,o,i,n){var a,r;const d=t.elements.offset,m=t.elements.stride,h=d*(m/t.views.position.BYTES_PER_ELEMENT),p=d*(m/t.views.normal.BYTES_PER_ELEMENT),u=d*(m/t.views.localID.BYTES_PER_ELEMENT);t.views.position[h]=l.jO+e[0],t.views.position[h+1]=l.jO+e[1],t.views.position[h+2]=(0,c.VW)(e[2]),t.views.normal[p]=(0,s.i7)(o[0]),t.views.normal[p+1]=(0,s.i7)(o[1]),t.views.normal[p+2]=(0,s.i7)(o[2]),t.views.demPosition[h]=null!==(a=null==n?void 0:n[0])&&void 0!==a?a:e[0],t.views.demPosition[h+1]=null!==(r=null==n?void 0:n[1])&&void 0!==r?r:e[1],t.views.localID[u]=i,t.elements.offset++}function _(t){const e=t.indices.buffer,o=t.indices.offset,i=t.elements.offset;e[o]=i,e[o+1]=i+1,e[o+2]=i+2,t.indices.offset=o+3}},2251:(t,e,o)=>{o.d(e,{V:()=>s});var i=o(4999),n=o(5600),a=o(6392),r=o(2702);const l=[0,0,0],s=(0,n.D)({symbol:"oneWayLine",sinks:{raster:{stride:12,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.direction=new Int8Array(e,8),t.views.widenDirection=new Int8Array(e,10)},packObjectAttributes:(t,e)=>(0,r.LY)([t.styleId,t.layer.innerId,e],t.tileData),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],animDirection:t[2],tileData:t.slice(3)})}},processElement(t,e,o,n,r,c,d){const{label:m,anchorWorld:h}=o;if((0,a.a2)(l,h,d),!(0,a.hm)(l))return;const p=e.getBucket("oneWayLine","raster",s.sinks.raster.packObjectAttributes(m,n),s.sinks.raster.binder);(0,i.k8)(p,l,h[3])},getLabelingInfo(){}})},5259:(t,e,o)=>{o.d(e,{$_:()=>l,AP:()=>r,Dk:()=>a,L8:()=>d,iq:()=>p,qH:()=>h,r1:()=>s,s2:()=>m});var i=o(9218),n=o(2543);function a(t,e,o,i,n,a){if(!t||n&&!a)return[0,0];if(!a)return[t.w/e,t.h/e];const r=s(o,i,a),l=o.style.iconTextPadding;return[l[3]+l[1]+r[0],l[0]+l[2]+r[1]]}function r(t,e,o){return c((0,n.vn)(t.style.textFontSize,e),t.style.textLineHeight,o)}function l(t,e,o){return c((0,n.vn)(t.style.textFontSize2,e),t.style.textLineHeight,o)}function s(t,e,o){return c((0,n.vn)(t.style.iconTextFontSize,e),t.style.iconTextLineHeight,o)}function c(t,e,o){return[t/i.Rq.baseSize*o.maxWidth,t*e*o.lines.length]}function d(t,e,o){var i,n;const a=null!==(i=o[0])&&void 0!==i?i:0,r=null!==(n=o[1])&&void 0!==n?n:0;return[(.5-t.anchorX)*e[0]+a,(.5-t.anchorY)*e[1]+r]}function m(t,e,o){var i,n,a,r;const l=null!==(i=e[0])&&void 0!==i?i:.5,s=null!==(n=e[1])&&void 0!==n?n:.5,c=null!==(a=o[0])&&void 0!==a?a:0,d=null!==(r=o[1])&&void 0!==r?r:0;return[(.5-l)*t[0]+c,(.5-s)*t[1]+d]}function h(t,e,o,i,n){var a,r,l,s;const c=null!==(a=o[0])&&void 0!==a?a:.5,d=null!==(r=o[1])&&void 0!==r?r:.5,m=null!==(l=n[0])&&void 0!==l?l:0,h=null!==(s=n[1])&&void 0!==s?s:0;return[t[0]/2-c*e[0]-i[3]+m,t[1]/2-d*e[1]-i[0]+h]}function p(t,e,o,i,n){const a=e[0],r=e[1],l=o[0],s=o[1];let c=0,d=0;const m=s/2+r/2,h=s/2-r/2,p=-m,u=-h,g=l/2+a/2,_=l/2-a/2,f=-g,y=-_;switch(t){case"bottomCenter":d=m+n;break;case"rightCenter":c=g+n;break;case"topCenter":d=p-n;break;case"leftCenter":c=f-n;break;case"bottomRight":c=_,d=m+n;break;case"topRight":c=_,d=p-n;break;case"bottomLeft":c=y,d=m+n;break;case"rightBottom":c=g+n,d=u;break;case"rightTop":c=g+n,d=h;break;case"topLeft":c=y,d=p-n;break;case"leftTop":c=f-n,d=h;break;case"leftBottom":c=f-n,d=u}return[c+i[0],d+i[1]]}},9970:(t,e,o)=>{o.d(e,{bR:()=>i,uF:()=>v});var i,n=o(2701),a=o(9833),r=o(4999),l=o(5317),s=o(5259),c=o(9218),d=o(5600),m=o(6392),h=o(2153),p=o(2543),u=o(7464),g=o(7486),_=o(6273),f=o(2702),y=o(1959);!function(t){t[t.Icon=0]="Icon",t[t.First=1]="First",t[t.Second=2]="Second"}(i||(i={}));const b=new a.f,x=[0,0,0],v=(0,d.D)({symbol:"point",sinks:{raster:{stride:24,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.cornerOffset=new Int16Array(e,8),t.views.texCoords=new Uint16Array(e,12),t.views.scales=new Int16Array(e,16),t.views.localID=new Uint32Array(e,20)},packObjectAttributes:(t,e,o)=>(0,f.LY)([t.styleId,t.layer.innerId,e,o],t.tileData),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],animDirection:t[2],atlasIndex:t[3],tileData:t.slice(4)})},text:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.cornerOffset=new Int16Array(e,8),t.views.texCoords=new Uint16Array(e,12),t.views.localID=new Uint32Array(e,16)},packObjectAttributes:(t,e,o,i,n,a)=>(0,f.LY)([t.styleId,t.layer.innerId,e,o,i[0],-i[1],n,a],t.tileData),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],animDirection:t[2],range:t[3],offsetX:t[4],offsetY:t[5],labelIndex:t[6],fontIndex:t[7],tileData:t.slice(8)})}},processElement(t,e,o,n,a,r,l){const{layer:c,label:d}=o;if("point"!==c.type)return;const u=(0,p.bs)(r.styleZoom,r.styleState,!0,d.tileData),g=F(u,t,a,d),f=t.icons[(0,p.Q9)(c.style.iconImage,u)],b=(0,y.x)(f),v=(0,s.Dk)(g,a,c,u,b,d.iconTextMetrics);let S,C=[0,0];if(g&&(d.iconTextMetrics?(S=(0,s.r1)(c,u,d.iconTextMetrics),C=(0,s.qH)(v,S,c.style.iconTextAnchor,c.style.iconTextPadding,c.style.iconTextOffset)):C=(0,s.L8)(g,v,c.style.iconOffset)),(0,m.a2)(x,o.anchorWorld,l),(0,m.hm)(x))switch(o.type){case h.Dl.Icon:if(!g||b&&!d.iconTextMetrics)return;const l=b?f.stretchX:void 0,m=b?f.stretchY:void 0;if(z(e,d,x,n,g,v[0]*a,v[1]*a,C[0]*a,C[1]*a,null==l?void 0:l.map((([t,e])=>[t*a,e*a])),null==m?void 0:m.map((([t,e])=>[t*a,e*a]))),!S)return;return void function(t,e,o,n,a,r,l,s){var c;const{iconTextMetrics:d}=o;if(!d||!s.style.iconTextFont)return;const m=(0,p.bs)(a.styleZoom,a.styleState,!1,o.tileData),h=(0,p.Q9)(s.style.iconTextFont,m),u=null!==(c=t.fontNameToIndex[h])&&void 0!==c?c:t.fontNameToIndex[_.Uo];w(e,o,i.Icon,d,n,r,l,s,u)}(t,e,o.label,x,r,n,(0,s.s2)(S,c.style.iconTextAnchor,c.style.iconTextOffset),c);case h.Dl.PoiText:return void function(t,e,o,n,a,r,l,c,d){var m;const{label:h}=o,{textMetrics:u}=h,g=(0,p.bs)(r.styleZoom,r.styleState,!1,h.tileData),f=(0,p.Q9)(d.style.textFont,g);if(!f.length)return;const y=(0,s.AP)(d,g,u),b=null!==(m=t.fontNameToIndex[f])&&void 0!==m?m:t.fontNameToIndex[_.Uo],x=o.parent?d.style.textPlacement:"centerCenter",v=(0,p.vn)(d.style.textOffset,g),z=(0,s.iq)(x,a,y,c,v);w(e,h,i.First,h.textMetrics,n,l,z,d,b)}(t,e,o,x,v,r,n,C,c);case h.Dl.PoiText2:return void function(t,e,o,n,a,r,l,c,d){var m,h;const{label:u}=o,{textMetrics:g,textMetrics2:f}=u;if(!f||!d.style.textFont2)return;const y=(0,p.bs)(r.styleZoom,r.styleState,!1,u.tileData),b=(0,s.AP)(d,y,g),x=(0,s.$_)(d,y,f),v=(0,p.vn)(d.style.textOffset,y),z=(0,p.vn)(null!==(m=d.style.textOffset2)&&void 0!==m?m:0,y,0),F=(0,p.Q9)(d.style.textFont2,y),S=null!==(h=t.fontNameToIndex[F])&&void 0!==h?h:t.fontNameToIndex[_.Uo],C=(0,s.iq)(d.style.textPlacement,a,[x[0],b[1]],c,v);C[1]+=(b[1]+x[1])/2+z,w(e,u,i.Second,f,n,l,C,d,S)}(t,e,o,x,v,r,n,C,c)}},getLabelingInfo(t,e,o,i,n,a){const{layer:r}=t;if("point"!==r.type)return;t.labelingElements.length=0;const c=(0,p.bs)(i.styleZoom,i.styleState,!0,t.tileData),d=F(c,o,a,t),m=o.icons[(0,p.Q9)(r.style.iconImage,c)],u=(0,y.x)(m),g=(0,s.Dk)(d,a,r,c,u,t.iconTextMetrics);let _,f=[0,0];if(d&&(!u||t.iconTextMetrics)){t.iconTextMetrics?(_=(0,s.r1)(r,c,t.iconTextMetrics),f=(0,s.qH)(g,_,r.style.iconTextAnchor,r.style.iconTextPadding,r.style.iconTextOffset)):f=(0,s.L8)(d,g,r.style.iconOffset);const a=new l.x(t,h.Dl.Icon,e,i.buildingHeight,n,o);a.boxes.push([-g[0]/2+f[0],-g[1]/2+f[1],g[0]/2+f[0],g[1]/2+f[1]]),t.labelingElements.push(a)}const b=(0,p.Q9)(r.style.textFont,c);t.label.length>0&&b.length&&(function(t,e,o,i,n,a,r,c){const{textMetrics:d}=t;if(!d)return;const m=(0,p.bs)(n.styleZoom,n.styleState,!1,t.tileData),u=(0,p.vn)(c.style.textOffset,m),g=(0,s.AP)(c,m,d),_=new l.x(t,h.Dl.PoiText,e,n.buildingHeight,a,o);t.labelingElements.length>0&&(_.parent=t.labelingElements[0]);const f=_.parent?c.style.textPlacement:"centerCenter",y=(0,s.iq)(f,i,g,r,u);_.boxes.push([y[0]-g[0]/2,y[1]-g[1]/2,y[0]+g[0]/2,y[1]+g[1]/2]),t.labelingElements.push(_)}(t,e,o,g,i,n,f,r),t.label2&&function(t,e,o,i,n,a,r,c){var d;const{textMetrics:m,textMetrics2:u}=t;if(!u)return;const g=(0,p.bs)(n.styleZoom,n.styleState,!1,t.tileData),_=(0,s.AP)(c,g,m),f=(0,s.$_)(c,g,u),y=(0,p.vn)(c.style.textOffset,g),b=(0,p.vn)(null!==(d=c.style.textOffset2)&&void 0!==d?d:0,g,0),x=new l.x(t,h.Dl.PoiText2,e,n.buildingHeight,a,o);t.labelingElements.length>1?(x.parent=t.labelingElements[0],x.firstLabel=t.labelingElements[1]):t.labelingElements.length>0&&(x.parent=t.labelingElements[0],x.firstLabel=t.labelingElements[0]);const v=(0,s.iq)(c.style.textPlacement,i,[f[0],_[1]],r,y);v[1]+=(_[1]+f[1])/2+b,x.boxes.push([v[0]-f[0]/2,v[1]-f[1]/2,v[0]+f[0]/2,v[1]+f[1]/2]),t.labelingElements.push(x)}(t,e,o,g,i,n,f,r))}});function w(t,e,o,i,n,a,l,s,c){const d={};for(const i of e.ranges)d[i]=t.getBucket("point","text",v.sinks.text.packObjectAttributes(e,a,i,l,o,c),v.sinks.text.binder);(0,r.$Y)(d,e,n,i,s,o)}function z(t,e,o,i,a,r,l,s,d,m,h){if(r<=0||l<=0)return;if("point"!==e.layer.type)return;(0,n.N)(b,c.a5,a,r,l,s,d,m,h),t.atlasPacker.addRastersToLoad(e.styleId,a);const p=t.getBucket("point","raster",v.sinks.raster.packObjectAttributes(e,i,a.atlasIndex),v.sinks.raster.binder);(0,n.q)(o[0],o[1],o[2],b,p,-1/0,1/0,e.identifyIndex)}function F(t,e,o,i){const{rasterSets:n}=e,{layer:a}=i;if("point"!==a.type)return;let r;if(i.pointType===h.a_.Commercial||i.pointType===h.a_.CommercialCity||i.pointType===h.a_.Landmark)r=n.byKey[(0,u.zV)(i.idLo,i.idHi)];else{const e=(0,p.Q9)(a.style.iconImage,t);e.length&&(r=n.byKey[(0,u.PR)(e,a.style.iconAnchor[0],a.style.iconAnchor[1])])}if(r){const e=(0,p.vn)(a.style.iconWidth,t),i=(0,g.Bl)(r.rasters,e*o,!0);if(void 0!==i)return r.rasters[i]}}},2097:(t,e,o)=>{o.d(e,{a:()=>f});var i=o(5600),n=o(3672),a=o(143),r=o(2682),l=o(2618),s=o(2702),c=o(6273),d=o(9981),m=o(2543),h=o(7464),p=o(8450);const u=(0,n.Ru)(NaN,NaN);function g(t,e,o,i,n){return(0,s.v$)([t,e,o],i,n)}const _=t=>({styleId:t[0],layerId:t[1],hiddenObjectId:Number.isNaN(t[2])?void 0:(0,n.Ak)(t[2]),tileData:t.slice(3)}),f=(0,i.D)({symbol:"polygon",sinks:{fill:{stride:8,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.localID=new Uint32Array(e,4)},packObjectAttributes:g,unpackObjectAttributes:_},stroke:{stride:8,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.directionDistance=new Int8Array(e,4)},packObjectAttributes:g,unpackObjectAttributes:_}},generate(t,e,o,i,n,s,c,g){const{tileAttrs:_,tileProps:x}=i,v=n[0],w=n[1],z=n[2];(0,p.nc)(o)&&function(t,e,o,i){const{rasterSets:n}=e,a=(0,d.fL)(i);(0,m.EG)(o.style.textureImage).forEach((i=>{if(!i.length)return;const r=n.byKey[(0,h.FD)(i)];if(!r)return void console.error(`Not found raster set with texture ${i}`);if(!r.isSvg)return;const l=o.style.textureSize,[s,c]=Array.isArray(l)?l:[l,l];t.atlasPacker.packSvg(r,[{w:s,h:c}],a),r.rasters.forEach((o=>t.atlasPacker.addRastersToLoad(e.id,o)))}))}(t,e,o,s);const F=_[x.id],S="number"!=typeof F&&c&&c.has(F)?F:u,C=_[x.hovered]?l.gl:t.idIndexer.getIndex({id:F,styleId:e.id,layer:o,sublayer:_[x.db_sublayer],floorId:g});!function(t,e,o,i,n){const a=t.indices.buffer;let r=t.indices.offset,l=t.elements.offset;const s=l;y(t,l++,o[0],i[0],n),y(t,l++,o[1],i[1],n);for(let c=2;c<e;c++)b(a,r,s,c),y(t,l++,o[c],i[c],n),r+=3;t.elements.offset=l,t.indices.offset=r}(t.getBucket("polygon","fill",f.sinks.fill.packObjectAttributes(e.id,o.innerId,S,o.dataKeys,i),f.sinks.fill.binder),v.length,v,w,C);!function(t,e,o,i,n){for(let l=0;l<e;l++){const s=(0,a.X)(l,e);if(1===n[s]){const n=(0,a.X)((l+1)%e,e);(0,r.n)(t,o[s],i[s],0,o[n],i[n],0)}}}(t.getBucket("polygon","stroke",f.sinks.stroke.packObjectAttributes(e.id,o.innerId,S,o.dataKeys,i),f.sinks.stroke.binder),v.length,v,w,z)}});function y(t,e,o,i,n){e*=4,t.views.position[e]=c.jO+o,t.views.position[e+1]=c.jO+i,e>>=1,t.views.localID[e]=n}function b(t,e,o,i){i%2==0?(t[e]=o+i-2,t[e+1]=o+i-1,t[e+2]=o+i):(t[e]=o+i-1,t[e+1]=o+i-2,t[e+2]=o+i)}},5970:(t,e,o)=>{o.d(e,{p:()=>y});var i=o(143),n=o(6392),a=o(3672),r=o(5600),l=o(1558),s=o(8308),c=o(2682),d=o(2618),m=o(2702),h=o(8194),p=o(6273);const u=(0,a.Ru)(NaN,NaN),g=p.Bq/2,_=(t,e,o,i,n)=>(0,m.v$)([t,e,o],i,n),f=t=>({styleId:t[0],layerId:t[1],hiddenObjectId:Number.isNaN(t[2])?void 0:(0,a.Ak)(t[2]),tileData:t.slice(3)}),y=(0,r.D)({symbol:"polygonExtrusion",sinks:{sideFill:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.normal=new Int8Array(e,8),t.views.localID=new Uint32Array(e,12),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:_,unpackObjectAttributes:f},topFill:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.normal=new Int8Array(e,8),t.views.localID=new Uint32Array(e,12),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:_,unpackObjectAttributes:f},sideStroke:{stride:20,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.distance=new Int16Array(e,6),t.views.normals=new Int8Array(e,8),t.views.direction=new Int8Array(e,12),t.views.demPosition=new Int16Array(e,16)},packObjectAttributes:_,unpackObjectAttributes:f},topStroke:{stride:16,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.directionDistance=new Int8Array(e,8),t.views.demPosition=new Int16Array(e,12)},packObjectAttributes:_,unpackObjectAttributes:f}},generate(t,e,o,a,r,m,g,f,z){const F=r[0],S=r[1],C=r[2],M=F.length;f||(f=a.tileProps.db_centroid_x&&a.tileProps.db_centroid_y&&!Number.isNaN(a.tileAttrs[a.tileProps.db_centroid_x])&&!Number.isNaN(a.tileAttrs[a.tileProps.db_centroid_y])?[a.tileAttrs[a.tileProps.db_centroid_x],a.tileAttrs[a.tileProps.db_centroid_y]]:function(t,e,o){let n,a=Math.pow(p.Bq,2);const r=t.length,l=h.Ue();for(let s=0;s<r;s++){n||h.aM(l,[t[s],e[s]]);const c=(0,i.X)(s,r);if(0===o[c]){const o=[t[c],e[c]],l=(0,i.X)((s+1)%r,r),d=[t[l],e[l]];if(w(o)){const t=v(o);t<a&&(n=o,a=t);const e=v(d);e<a&&(n=d,a=e)}else n=[(t[c]+t[l])/2,(e[c]+e[l])/2]}}n||(n=[],h.be(n,l));return n}(F,S,C));const P=a.tileAttrs[a.tileProps.hovered],I=Math.round((0,n.VW)(a.tileAttrs[a.tileProps.db_height])),L=a.tileAttrs[a.tileProps.id],k=P?d.gl:t.idIndexer.getIndex({id:L,styleId:e,layer:o,sublayer:a.tileAttrs[a.tileProps.db_sublayer],floorId:z}),A="number"!=typeof L&&g&&g.has(L)?L:u,j=_(e,o.innerId,A,o.dataKeys,a);if(I>0){const e=t.getBucket("polygonExtrusion","sideFill",j,y.sinks.sideFill.binder);(0,l.y)(e,M,F,S,C,I,k,f);const o=t.getBucket("polygonExtrusion","sideStroke",j,y.sinks.sideStroke.binder);m&&((0,s.C)(o,M,F,S,C,f),(0,s.b)(o,M,F,S,C,I,f))}!function(t,e,o,i,n,a,r){let l=t.elements.offset;const s=l;b(t,l++,o[0],i[0],n,a,r),b(t,l++,o[1],i[1],n,a,r);for(let c=2;c<e;c++)x(t,s,c),b(t,l++,o[c],i[c],n,a,r);t.elements.offset=l}(t.getBucket("polygonExtrusion","topFill",j,y.sinks.topFill.binder),M,F,S,I,k,f);!function(t,e,o,n,a,r,l){for(let s=0;s<e;s++){const d=(0,i.X)(s,e);if(a&&1===a[d]){const a=(0,i.X)((s+1)%e,e);(0,c.n)(t,o[d],n[d],r,o[a],n[a],r,l)}}}(t.getBucket("polygonExtrusion","topStroke",j,y.sinks.topStroke.binder),M,F,S,C,I,f)}});function b(t,e,o,i,n,a,r){const l=t.elements.stride,s=e*(l/t.views.position.BYTES_PER_ELEMENT),c=e*(l/t.views.normal.BYTES_PER_ELEMENT);t.views.position[s]=p.jO+o,t.views.position[s+1]=p.jO+i,t.views.position[s+2]=n,t.views.normal[c]=0,t.views.normal[c+1]=127,t.views.normal[c+2]=127,t.views.demPosition[s]=(p.jO+r[0])/8,t.views.demPosition[s+1]=(p.jO+r[1])/8;const d=e*(l/t.views.localID.BYTES_PER_ELEMENT);t.views.localID[d]=a}function x(t,e,o){const i=t.indices.buffer;let n=t.indices.offset;o%2==0?(i[n++]=e+o-2,i[n++]=e+o-1,i[n++]=e+o):(i[n++]=e+o-1,i[n++]=e+o-2,i[n++]=e+o),t.indices.offset=n}function v(t){return Math.pow(g-Math.abs(t[0]-g),2)+Math.pow(g-Math.abs(t[1]-g),2)}function w(t){return 0===t[0]||t[0]===p.Bq||0===t[1]||t[1]===p.Bq}},6201:(t,e,o)=>{o.d(e,{It:()=>r,R2:()=>i,hs:()=>a});var i,n=o(2543);function a(t,e){return Number.isNaN(t)?e:t}function r(t,e){if(!t)return"";const o=(0,n.FR)(t,e);return Number.isNaN(o)||!o&&0!==o?"":String(o)}!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.OneWayLine=2]="OneWayLine"}(i||(i={}))},6822:(t,e,o)=>{o.d(e,{p:()=>a});var i=o(2702),n=o(6201);const a=(t,e,o,a,r,l,s)=>{const c={type:n.R2.Line,styleId:e,layerId:o.innerId,sourceId:r,tileCoords:a,id:l.tileAttrs[l.tileProps.id],componentDistanceStart:(0,n.hs)(l.tileAttrs[l.tileProps.componentDistanceStart],0),componentDistanceEnd:(0,n.hs)(l.tileAttrs[l.tileProps.componentDistanceEnd],0),objectLength:(0,n.hs)(l.tileAttrs[l.tileProps.objectLength],0),labelPriority:(0,n.hs)(l.tileAttrs[l.tileProps.db_label_priority],0),vertices:[s[0],s[1]],tileData:(0,i.v$)([],o.dataKeys,l)};t.addLabel(c)}},4144:(t,e,o)=>{o.d(e,{Q:()=>a});var i=o(2702),n=o(6201);const a=(t,e,o,a,r,l,s)=>{const c={type:n.R2.OneWayLine,styleId:e,layerId:o.innerId,sourceId:r,tileCoords:a,id:l.tileAttrs[l.tileProps.id],componentDistanceStart:(0,n.hs)(l.tileAttrs[l.tileProps.componentDistanceStart],0),componentDistanceEnd:(0,n.hs)(l.tileAttrs[l.tileProps.componentDistanceEnd],0),objectLength:(0,n.hs)(l.tileAttrs[l.tileProps.objectLength],0),labelPriority:(0,n.hs)(l.tileAttrs[l.tileProps.db_label_priority],0),vertices:[s[0],s[1]],tileData:(0,i.v$)([],o.dataKeys,l)};t.addLabel(c)}},4333:(t,e,o)=>{o.d(e,{p:()=>_});var i=o(7609),n=o(9218),a=o(7486),r=o(7464),l=o(9981),s=o(2543),c=o(2618),d=o(2702),m=o(2153),h=o(6201),p=o(1959),u=o(6392),g=o(9073);const _=(t,e,o,_,f,y,b,x,v,w,z)=>{const{tileProps:F,tileAttrs:S}=_;if(function(t,e,o,c,d,m,h){const{rasterSets:u,icons:g}=e,_=(0,l.fL)(m),f=(0,s.EG)(o.style.iconWidth),y=(0,i.Ty)(d[c.db_sublayer]),b=(0,i.Cz)(d[c.db_sublayer]),{iconAnchor:x}=o.style;if(y||b){if(h)return;const o=y?n.KL.rasterSizes:n.jv,i=(0,a.rA)(d[c.id],o,d[c.db_region],x,c.url_src?d[c.url_src]:void 0);t.atlasPacker.addNewRasterSet(e.id,i),t.atlasPacker.pack(i,f,_)}else(0,s.EG)(o.style.iconImage).forEach((o=>{if(!o.length)return;const i=u.byKey[(0,r.PR)(o,x[0],x[1])];if(!i)return void console.error(`Not found raster set with image ${o}, anchorX: ${x[0]}, anchorY: ${x[1]}`);if(!i.isSvg)return;const n=g[o],a=n&&(0,p.x)(n)?[{w:n.width,h:n.height}]:f.map((t=>({w:t,h:t})));t.atlasPacker.packSvg(i,a,_),h&&i.rasters.forEach((o=>t.atlasPacker.addRastersToLoad(e.id,o)))}))}(t,e,o,F,S,v,w),w)return;let C=m.a_.Common;(0,i.wu)(S[F.db_sublayer])?C=m.a_.CommercialCity:(0,i.Ty)(S[F.db_sublayer])?C=m.a_.Commercial:(0,i.Cz)(S[F.db_sublayer])&&(C=m.a_.Landmark);const M=1===x[0].length?m._r.Point:m._r.Line;let P,I=[];if(M===m._r.Point){if(_&&o.style.allowElevation){const t=(0,s.vn)(o.style.elevation,_);if(0!==t){const e=[0,0,0];(0,u.Z$)(e,[x[0][0],x[1][0],0],(0,u.Bs)(y));const o=(0,g.PA)(e),i=(0,g.a4)(o,t),n=Math.round((0,u.VW)(i));x=[x[0],x[1],[n]]}}I=[[x[0][0]],[x[1][0]],3===x.length?[x[2][0]]:[0]],P=[0,0,0],(0,u.Z$)(P,[I[0][0],I[1][0],I[2][0]],(0,u.Bs)(y))}else I=[x[0],x[1]];const L=S[F.id];let k=c.gl,A=c.gl;Number.isNaN(L)||(k=t.idIndexer.getIndex({id:L,styleId:e.id,layer:o,sublayer:S[F.db_sublayer],objectClass:S[F.db_object_class],instanceId:0,metatile:f,center:P,floorId:z}),A=t.idIndexer.getIndex({id:L,styleId:e.id,layer:o,sublayer:S[F.db_sublayer],objectClass:S[F.db_object_class],instanceId:1,metatile:f,center:P,floorId:z}));const j={type:h.R2.Point,pointType:C,geometryType:M,styleId:e.id,layerId:o.innerId,sourceId:b,tileCoords:y,id:S[F.id],identifyIndex:k,identifyPoiLabelIndex:A,labelPriority:(0,h.hs)(S[F.db_label_priority],0),label2Priority:(0,h.hs)(S[F.db_label2_priority],0),iconPriority:(0,h.hs)(S[F.db_icon_priority],0),hovered:(0,h.hs)(S[F.hovered],0),componentDistanceStart:(0,h.hs)(S[F.componentDistanceStart],0),componentDistanceEnd:(0,h.hs)(S[F.componentDistanceEnd],0),objectLength:(0,h.hs)(S[F.objectLength],0),vertices:I,demElevation:NaN,tileData:(0,d.v$)([],o.dataKeys,_)};t.addLabel(j)}},6263:(t,e,o)=>{o.d(e,{h:()=>r});var i=o(5600),n=o(3698),a=o(6273);const r=(0,i.D)({symbol:"raster",sinks:{fill:{stride:8,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.txtrCoords=new Uint16Array(e,4)},packObjectAttributes:(t,e,o)=>[t,e,o],unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],textureIndex:t[2],tileData:t.slice(3)})}},generate(t,e,o,i,n){const a=e[0],s=e[1],c=t.getBucket(i.type,"fill",r.sinks.fill.packObjectAttributes(o,i.innerId,n),r.sinks.fill.binder);let d=c.elements.offset;!function(t,e,o,i,n,a,r,l){const s=t.buffer,c=t.offset;s[c]=e+o,s[c+1]=e+i,s[c+2]=e+n,s[c+3]=e+a,s[c+4]=e+r,s[c+5]=e+l,t.offset=c+6}(c.indices,d,0,1,2,2,1,3),l(c,d++,a[0],s[0],0,1),l(c,d++,a[1],s[1],1,1),l(c,d++,a[2],s[2],0,0),l(c,d++,a[3],s[3],1,0),c.elements.offset=d}});function l(t,e,o,i,r,l){e*=4,t.views.position[e]=a.jO+o,t.views.position[e+1]=a.jO+i,t.views.txtrCoords[e]=(0,n.Bb)(r),t.views.txtrCoords[e+1]=(0,n.Bb)(l)}},6829:(t,e,o)=>{o.d(e,{t:()=>x});var i=o(378),n=o(5600),a=o(6273),r=o(2097),l=o(6490),s=o(6392),c=o(9090),d=o(9073),m=o(2543);const h=i.Ue(),p=i.Ue(),u=i.Ue(),g=i.Ue(),_=i.Ue(),f=[0,0,0];let y=0,b=0;const x=(0,n.D)({symbol:"roadPolygon",sinks:{},generate(t,e,o,n,l,p,u){const _=p[0],f=p[1];if(_.length<2)return;const b=(0,s.Bs)(l),x=(0,m.vn)(o.style.laneWidth,n,3.75),w=(((Number.isNaN(n.tileAttrs[n.tileProps.tech_db_road_left_lanes])?0:n.tileAttrs[n.tileProps.tech_db_road_left_lanes])+(Number.isNaN(n.tileAttrs[n.tileProps.tech_db_road_right_lanes])?0:n.tileAttrs[n.tileProps.tech_db_road_right_lanes]))/2||1)*x*(a.Bq/(0,s.aq)(l[2])*d.C),z=function(t,e){const o=[];(0,c.uI)(h,t[0],e[0],t[1],e[1]),y=0;for(let i=1;i<t.length;i++)v(o,t,e,i);return o}(_,f),F=function(t,e,o,n,a){const r=[[],[],[]];if(t.length<2)return r;for(let l=0;l<t.length;l++){i.t8(g,t[l],e[l]);const c=(0,s.iq)(a,g);r[0].push(t[l]+o[l][0][0]*n*c),r[1].push(e[l]+o[l][0][1]*n*c),r[2].push(1),r[0].push(t[l]+o[l][1][0]*n*c),r[1].push(e[l]+o[l][1][1]*n*c),r[2].push(1)}return r}(_,f,z,w/2,b);F[2][0]=0,F[2][F[2].length-1]=0,r.a.generate(t,e,o,n,F,u)}});function v(t,e,o,n){const a=n===e.length-1;if(i.t8(u,e[n-1],o[n-1]),i.t8(g,e[n],o[n]),(0,c.fN)(f,h),a)b=0;else{i.t8(_,e[n+1],o[n+1]),(0,c.uI)(p,g[0],g[1],_[0],_[1]);const t=(0,l.uZ)(i.AK(h,p),-1,1),a=Math.sqrt((1-t)/(1+t)),r=(0,l.Xx)(i.AK(f,p));b=a*r}let r=f[0]+h[0]*y,s=f[1]+h[1]*y;t.push([[r,s],[-r,-s]]),a&&(r=f[0]+h[0]*b,s=f[1]+h[1]*b,t.push([[r,s],[-r,-s]])),a||(i.JG(h,p),y=b)}},5794:(t,e,o)=>{o.d(e,{O:()=>r});var i=o(5600),n=o(6563),a=o(2702);const r=(0,i.D)({symbol:"shiftedLine",sinks:{solid:{stride:16,binder:(t,e)=>{t.views.position=new Uint16Array(e),t.views.extender=new Int8Array(e,4),t.views.normal=new Int8Array(e,6),t.views.shift=new Float32Array(e,8)},packObjectAttributes:(t,e,o,i)=>(0,a.v$)([t,e],o,i),unpackObjectAttributes:t=>({styleId:t[0],layerId:t[1],tileData:t.slice(2)})}},generate(t,e,o,i,a){const{tileAttrs:l,tileProps:s}=i,c=!Number.isNaN(l[s.beginningIsCut])&&0!==l[s.beginningIsCut],d=!Number.isNaN(l[s.endingIsCut])&&0!==l[s.endingIsCut],m=t.getBucket(o.type,"solid",r.sinks.solid.packObjectAttributes(e,o.innerId,o.dataKeys,i),r.sinks.solid.binder);(0,n.e)(m,a[0],a[1],a[0].length,!c,!d,0,a[2],a[3])}})},1315:(t,e,o)=>{o.d(e,{oH:()=>r});var i=o(8946),n=o(127),a=o(3672);function r(t,e,o,i){let n=0,r=0;const s=[],h=[],p=[];for(const i of t.children){if(!c(i)){s.push(i);continue}r++;const t=d(i);if(Number.isNaN(t))continue;const h=o.getModel(t);if(void 0===h)continue;const u=h.objects;if(0===u.length)continue;m(i).forEach((t=>{p.push((0,a.IL)(t))})),n++;for(const t of u)l(s,i,t,e)}for(const i of t.identifyChildren){if(!c(i)){h.push(i);continue}r++;const t=d(i);if(Number.isNaN(t))continue;const s=o.getModel(t);if(void 0===s)continue;const u=s.objects;if(0===u.length)continue;m(i).forEach((t=>{p.push((0,a.IL)(t))})),n++;for(const t of u)l(h,i,t,e)}return n>0&&n===r&&(t.children=s,t.identifyChildren=h),p.length>0&&i.setCommercialModelIds(p),n===r}function l(t,e,o,i){const a=n.d9(e.tile.modelMatrix),r=n.d9(o.modelMatrix);r[12]=a[12],r[13]=a[13],n.U_(a,a),n.dC(a,a,r);const l=e.layerSettings.identify?o.identifyChildren:o.children;for(const o of l){s(t,e,o,i.getShaderProgram(e.layerSettings.programName),a)}}function s(t,e,o,n,a){if("fill"!==o.sink)return;if(!c(e))return void t.push(e);const r=(e.rangeEnd-e.rangeStart)/e.stride;t.push(Object.assign(Object.assign({},e),{attributesHash:e.attributesHash+o.attributesHash,vao:new i.j(n,Object.assign(Object.assign({},e.vao._attributes),o.vao._attributes),o.vao.indicesBuffer),rangeStart:o.rangeStart,rangeEnd:o.rangeEnd,stride:o.stride,instanceCount:r,instanceMatrix:a,drawMode:o.drawMode,instanceAttributes:o.attributes}))}function c(t){return"instances"===t.sink}function d(t){return"instances"===t.sink?t.attributes.modelId:NaN}function m(t){return"instances"===t.sink?t.attributes.linkedIds:[]}},6757:(t,e,o)=>{o.d(e,{B:()=>r});var i=o(878),n=o(4713),a=o(2730);function r(t,e,o){const i=[],n=[],a=[];for(let r=0;r<e.length;r++){const c=e[r];"instances"===c.sink?l(t,o,c,i,n,a):s(t,o,c,i,n,a)}return{buffers:i,objects:n,identifyObjects:a}}function l(t,e,o,r,l,s){const{symbol:c,sink:d,generatedObjects:m,buffer:h}=o,p=t.symbolSettingsList[c];if(void 0===p)return;const u=p[d];if(void 0===u)return;const{buffers:g,objectVaos:_}=function(t,e,o,i){const a=[],r=[];for(const l of i){const i=new DataView(o,l.rangeStart,l.rangeEnd-l.rangeStart),s=new n.l(i);s.drawType=n.l.StaticDraw,s.prepare(t.getRenderingContext());const c=[];e.forEach((e=>{const o=t.getShaderProgram(e.programName);c.push(e.vaoCreator(s,o))})),a.push(s),r.push(c)}return{buffers:a,objectVaos:r}}(t,u,h,m);for(const t of g)r.push(t);for(let t=0;t<m.length;t++){const{rangeStart:o,rangeEnd:n,attributes:r,drawMode:h}=m[t],p=a.kF[c].sinks[d].unpackObjectAttributes(r);for(let m=0;m<u.length;m++){const g=u[m],f=g.uniformSet||"fill",y={type:i.H.Tile,layerSettings:g,stride:(0,a.vP)(c,d),rangeStart:0,rangeEnd:n-o,attributes:p,attributesHash:JSON.stringify(r)+"_"+f+"_"+e.detailLevel,vao:_[t][m],drawMode:h,tile:e,symbol:c,sink:d};g.identify?s.push(y):l.push(y)}}}function s(t,e,o,r,l,s){const{symbol:c,sink:d,generatedObjects:m,buffer:h}=o,p=t.symbolSettingsList[c];if(void 0===p)return;const u=p[d];if(void 0===u)return;const{buffer:g,vaos:_}=function(t,e,o){const i=new n.l(o);i.drawType=n.l.StaticDraw,i.prepare(t.getRenderingContext());const a=[];return e.forEach((e=>{const o=t.getShaderProgram(e.programName);a.push(e.vaoCreator(i,o))})),{buffer:i,vaos:a}}(t,u,h);r.push(g);for(let t=0;t<m.length;t++){const{rangeStart:o,rangeEnd:n,attributes:r,drawMode:h}=m[t],p=a.kF[c].sinks[d].unpackObjectAttributes(r);for(let t=0;t<u.length;t++){const m=u[t],g=m.uniformSet||"fill",f={type:i.H.Tile,layerSettings:m,stride:(0,a.vP)(c,d),rangeStart:o,rangeEnd:n,attributes:p,attributesHash:JSON.stringify(r)+"_"+g+"_"+e.detailLevel,vao:_[t],drawMode:h,tile:e,symbol:c,sink:d};m.identify?s.push(f):l.push(f)}}}},4847:(t,e,o)=>{o.d(e,{g:()=>r});var i=o(7188),n=o(6273),a=o(6490);class r{constructor(){this.dictionaries={},this.reverseDictionaries={},this.version="",this.defaultProps={},this.tileProps=i.Dz,this.tilePropsByIndex=(0,a.l4)(i.Dz),this.hash=n.DL}}},7122:(t,e,o)=>{o.d(e,{U:()=>a});var i=o(5549),n=o(4847);class a extends n.g{constructor(t){super(),this.obClassEnumIndex=0,this.sublayerEnumIndex=0,this.workerParserSyncMetatile=t.get(i.P.Main,"syncMetatile")}addData(t){this.dictionaries.db_sublayer||(this.dictionaries.db_sublayer={},this.reverseDictionaries.db_sublayer={}),t.sublayers.forEach((t=>{if(void 0===this.dictionaries.db_sublayer[t]){const e=this.sublayerEnumIndex++;this.dictionaries.db_sublayer[t]=e,this.reverseDictionaries.db_sublayer[e]=t}})),this.dictionaries.db_object_class||(this.dictionaries.db_object_class={},this.reverseDictionaries.db_object_class={}),t.objectClasses.forEach((t=>{if(void 0===this.dictionaries.db_object_class[t]){const e=this.obClassEnumIndex++;this.dictionaries.db_object_class[t]=e,this.reverseDictionaries.db_object_class[e]=t}})),this.workerParserSyncMetatile({dictionaries:this.dictionaries,reverseDictionaries:this.reverseDictionaries})}}},5590:(t,e,o)=>{o.d(e,{x:()=>r});var i=o(2153),n=o(1813),a=o(1683);function r(t,e,o){for(const r of t.viewportTiles){const l=t.tiles[r],s=(0,n.hW)(l);if(!s)continue;const c=(0,a.Hd)(s);if(0===c.length)continue;const d=e.getLabelsDemKey(c);s.demKey!==d&&(s.demKey=d,o.addTileLabels(s.labelsKey,i.AL.Tile,c))}}},4138:(t,e,o)=>{o.d(e,{r:()=>l});var i=o(462),n=o(4635),a=o(3371),r=o(1813);function l(t,e,o){s(t,e,o),c(t),d(t);for(const e in t.displayedMods)t.tileModsCache.get(e);m(t),h(t)}function s(t,e,o){for(const i in t.tiles)(0,r.qC)(t.tiles[i],t.tileModsCache,e,o)}function c(t){switch(t.tilesAppearance){case i.W.ByOne:(0,n.TQ)(t);break;case i.W.WaitingLayer:(0,n.ej)(t.tiles,t.viewportTiles)&&(t.tilesAppearance=i.W.ByOne,(0,n.TQ)(t));case i.W.GlobalWaiting:}}function d(t){const{tiles:e,viewportTiles:o,zoomDirection:n,zoomStartZoom:r,maxZoomLevel:l,zoomLevel:s,displayedMods:c}=t;switch(n){case i.Y.Stationary:t.displayedMods=(0,a._z)(e,o);break;case i.Y.ZoomingIn:t.displayedMods=(0,a.YN)(e,o,c,r,l);break;case i.Y.ZoomingOut:t.displayedMods=(0,a.UX)(e,o,c,s,r,l)}}function m({tiles:t,displayedMods:e,viewportTiles:o}){for(const i in t){if(o.includes(i))continue;const n=t[i],a=n.currentMod;a&&!e[a.key]&&(0,r.U9)(n)}}function h(t){switch(t.zoomDirection){case i.Y.ZoomingIn:(t.zoomLevel<=t.zoomStartZoom||p(t))&&(t.zoomDirection=i.Y.Stationary,t.zoomStartZoom=t.zoomLevel);break;case i.Y.ZoomingOut:(t.zoomLevel>=t.zoomStartZoom||p(t))&&(t.zoomDirection=i.Y.Stationary,t.zoomStartZoom=t.zoomLevel)}}function p(t){const{tiles:e,viewportTiles:o,displayedMods:i}=t;for(let t=0;t<o.length;t++){const n=e[o[t]],a=(0,r.hW)(n);if(!a)return!1;if(void 0===i[a.key])return!1}return!0}},1285:(t,e,o)=>{o.d(e,{I2:()=>c,TZ:()=>s,YY:()=>r,bj:()=>l,cA:()=>d});var i=o(462),n=o(4635),a=o(1813);function r(t,e,o,r){var l;o.selectedIds=r,o.tilesAppearance=i.W.WaitingLayer,(0,n.eh)(o);for(const i in o.tiles){const n=o.tiles[i];(0,a.IF)(t,e,n,o.sourceId,null===(l=n.hover)||void 0===l?void 0:l.id,!0)}}function l(t,e,o,i){if(!e.disableHoverStyles){for(const n in o.tiles){const r=o.tiles[n];(0,a.IF)(t,e,r,o.sourceId,i)}t.labeler.disableThrottleUpdateOnce()}}function s(t,e){t.styleState=e,(0,n.eh)(t)}function c(t,e,o,a){t.tilesAppearance=a?i.W.ByOne:i.W.GlobalWaiting,t.styleId=e,t.styleRevision=o,(0,n.eh)(t)}function d(t){t.tilesAppearance=i.W.ByOne,(0,n.TQ)(t)}},5817:(t,e,o)=>{o.d(e,{p:()=>r});var i=o(462),n=o(4635),a=o(1813);function r(t,e){t.tilesAppearance=i.W.WaitingLayer,Object.keys(t.tiles).forEach((o=>{(0,a.k$)(t.tiles[o],e)})),(0,n.eh)(t)}},3785:(t,e,o)=>{o.d(e,{L:()=>r});var i=o(462),n=o(4635),a=o(1813);function r(t){t.tilesAppearance=i.W.WaitingLayer,t.stopLabelAnimation=!0,Object.keys(t.tiles).forEach((e=>{(0,a.NQ)(t.tiles[e])})),(0,n.eh)(t)}},1943:(t,e,o)=>{o.d(e,{r:()=>r});var i=o(462),n=o(4635),a=o(1813);function r(t){t.tilesAppearance=i.W.WaitingLayer,Object.keys(t.tiles).forEach((e=>{(0,a.nR)(t.tiles[e])})),(0,n.eh)(t)}},9311:(t,e,o)=>{o.d(e,{o:()=>s});var i=o(462),n=o(6490),a=o(6392),r=o(9218),l=o(4635);function s(t,e){c(t,e.styleZoom,e.zoom),d(t,e),m(t),(0,l.eh)(t)}function c(t,e,o){const n=(0,l.uk)(t.type,o,e),a=n-t.zoomLevel;t.zoomDirection===i.Y.Stationary&&(a>0?(t.zoomDirection=i.Y.ZoomingIn,t.zoomStartZoom=t.zoomLevel):a<0&&(t.zoomDirection=i.Y.ZoomingOut,t.zoomStartZoom=t.zoomLevel)),t.zoomLevel=n}function d(t,e){if(t.zoomLevel<t.minZoomLevel)return void(t.viewportTiles=[]);const o=(0,n.uZ)(t.zoomLevel,t.minZoomLevel,t.maxZoomLevel),i=(0,n.uZ)(t.zoomLevel,t.minDetailLevel,t.maxDetailLevel);t.viewportTiles=(0,a.b5)(e,o,t.minZoomLevel,i).map(a.gx)}function m(t){const e=Math.round((Object.keys(t.displayedMods).length+t.viewportTiles.length)*r.Sv.cacheRatio);t.tileModsCacheMaxCount<e&&(t.tileModsCacheMaxCount=e),e>t.tileModsCacheMaxCount/2&&t.tileModsCache.setSize(e)}},3371:(t,e,o)=>{o.d(e,{UX:()=>r,YN:()=>a,_z:()=>n});var i=o(6392);function n(t,e){const o={};for(const i of e){const e=t[i];l(e)&&c(o,e)}return o}function a(t,e,o,n,a){const r={},d=[];for(const m of e){const e=t[m];if(l(e))c(r,e);else{for(let m=e.detailLevel-1;m>=n;m--){const n=(0,i.xG)(t,e,m,a);if(void 0!==n&&!d.includes(n)&&l(n)&&s(n,o)){c(r,n),d.push(n);break}}}}return m(r,d,t),r}function r(t,e,o,n,a,r){const d={},h=[],p=new Set(e);for(const e in t){const m=t[e];p.has(m.key)?l(m)&&(c(d,m),h.push(m)):m.detailLevel>a||m.detailLevel<n||p.has((0,i.pV)(m,n,r))&&l(m)&&s(m,o)&&(c(d,m),m.detailLevel<a&&h.push(m))}return m(d,h,t),d}function l(t){const e=t.currentMod;return void 0!==e&&e.ready}function s(t,e){const o=t.currentMod;return void 0!==o&&void 0!==e[o.key]}function c(t,e){const o=e.currentMod;void 0!==o&&(t[o.key]=o)}function d(t,e){const o=e.currentMod;void 0!==o&&delete t[o.key]}function m(t,e,o){for(const n of e){const e=(0,i.aM)(o,n);for(const o of e)d(t,o)}}},4635:(t,e,o)=>{o.d(e,{HM:()=>_,TQ:()=>v,aq:()=>x,d1:()=>b,e:()=>g,eh:()=>m,ej:()=>h,lH:()=>u,uk:()=>y,w1:()=>p,y7:()=>f});var i=o(6490),n=o(1813),a=o(6392),r=o(3429),l=o(462),s=o(1683),c=o(9218),d=o(647);function m(t){const e=t.viewportTiles;for(const e in t.tiles)(0,n.bt)(t.tiles[e]);for(let o=0;o<e.length;o++){const i=e[o];let r=t.tiles[i];r||(r=t.tiles[i]=(0,n.Tp)(t.type,(0,a.cL)(i),t.sourceId,t.tileLayerId));const l=new d.l(t.selectedIds,t.styleState,r.revision,t.styleId,t.styleRevision);(0,n.a7)(r,l,t.tileModsCache)}}function h(t,e){for(let o=0;o<e.length;o++){const i=t[e[o]],a=(0,n.hW)(i);if(!a||!a.ready)return!1}return!0}function p(t){const e=[];for(const o in t.tiles){const i=t.tiles[o];i.needFetch&&(i.needFetch=!1,e.push(i))}return e}function u(t){const e=[];for(const o in t.tiles){const i=t.tiles[o];i.needAbortFetch&&(i.needAbortFetch=!1,e.push(i))}return e}function g(t){const e=[];for(const o in t.tiles){const i=t.tiles[o];i.needGenerate&&(i.needGenerate=!1,e.push(i))}return e}function _(t){const e=new Set(t.viewportTiles),o=new Set(t.tileModsCache.getData().map((t=>t.tile))),i=[];for(const a in t.tiles){const r=t.tiles[a];!(0,n.LC)(r)||e.has(a)||t.zoomDirection!==l.Y.Stationary||o.has(r)||i.push(r)}return i}function f(t,e,o,i,n,a,c,d,m){const h=d.styleManager.getStyle(m.handyStyleId);return{type:t,sourceId:e,tileLayerId:o,styleId:m.handyStyleId,styleRevision:(null==h?void 0:h.id)||0,styleState:m.styleState,minZoomLevel:i,maxZoomLevel:n,minDetailLevel:a,maxDetailLevel:c,tiles:{},viewportTiles:[],zoomLevel:y(t,m.zoom,m.styleZoom),zoomDirection:l.Y.Stationary,zoomStartZoom:0,tileModsCache:new r.L(0,((t,e)=>{d.labeler.removeLabels(e.labelsKey),(0,s.Bp)(e,m)})),tileModsCacheMaxCount:0,selectedIds:[],displayedMods:{},tilesAppearance:l.W.ByOne,mapState:m,stopLabelAnimation:!1}}function y(t,e,o){return"raster"===t?Math.round(e):Math.floor(o)}function b(t){for(const e in t.tiles)(0,n.QT)(t.tiles[e],t.mapState);t.tiles={},t.viewportTiles=[],t.zoomDirection=l.Y.Stationary,t.tileModsCache.reset(),t.displayedMods={},t.tilesAppearance=l.W.ByOne}function x(t,e,o,n){const r=o.displayedMods,l=(0,i.$X)(r,n);l.forEach((o=>{if(void 0!==o.objects){let i=!0;for(const t in n)if((0,a.HL)(o.tile,n[t].tile)){i=!1;break}o.objects.forEach((o=>{t.addObject(o),i&&o.startTicker(e,c.Jy.type,c.Jy.time,0,1)}))}}));const s=(0,i.$X)(n,r);s.forEach((e=>{var o;void 0!==e.objects&&(e.objects.forEach((e=>t.removeObject(e))),null===(o=e.tile.hover)||void 0===o||o.tileObjects.forEach((e=>t.removeObject(e))))}));const d=l.length>0||s.length>0;return d&&(e.needLabeling=!0,e.needRerender=!0),d}function v(t){t.viewportTiles.forEach((e=>(0,n.bg)(t.tiles[e])))}},1813:(t,e,o)=>{o.d(e,{IF:()=>p,LC:()=>_,NQ:()=>C,QT:()=>f,Tp:()=>h,U9:()=>y,_v:()=>g,a7:()=>v,b9:()=>S,bg:()=>F,bt:()=>x,hW:()=>b,k$:()=>P,nR:()=>M,qC:()=>z,z3:()=>i});var i,n=o(7204),a=o(1683),r=o(6392),l=o(3672),s=o(4265),c=o(9218),d=o(647),m=o(2153);function h(t,e,o,n){return{type:t,sourceId:o,key:(0,r.gx)(e),labelsKey:`${t}_${o}_${n}`,coords:e,zoomLevel:e[2],detailLevel:e[3],needFetch:!1,revision:0,needAbortFetch:!1,needGenerate:!1,status:i.Initial,oldHoverTileObjects:[]}}function p(t,e,o,i,n,a){const r=[];o.oldHoverTileObjects.forEach((o=>{o.tickerFinished(e)?(t.tileManager.removeObject(o),o.clean(e)):r.push(o)})),o.oldHoverTileObjects=r,void 0!==n?e.performanceCaveatEmitted||(a||!o.hover||(0,l.v7)(o.hover.id,n))&&function(t,e,o,i,n){if(!o.idSet||!o.idSet.has(i)||!function(t,e){const o=Math.min(Math.floor(t.styleZoom),c.Sv.maxDetailLevel),i=e.coords[3];return o===i}(e,o))return void u(t,o,e);(function(t,e,o,i){const n=e.newMod||e.currentMod,a=(null==n?void 0:n.params.getSelectedIds())||[],r=t.map.state;return t.defaultSource.generateHoverTile(r,e.coords,r.handyStyleId,a,self.devicePixelRatio,{},o,i)})(t,o,i,n).then((n=>{u(t,o,e);const a={id:i,tileObjects:[],generatedData:[]},r=[];n.results.forEach((i=>{const n=new s.W("hover",i.collectorOutput.data,t.renderer,o.coords),{packedRasters:l,rastersToLoad:d}=i.collectorOutput;void 0!==l&&t.assetManager.prepareRasters(i.styleId,l),t.assetManager.loadRasters(d),a.tileObjects.push(n),t.tileManager.addObject(n),n.startTicker(e,c.Tr.inAnimationType,c.Tr.inAnimationTime,0,1),i.collectorOutput.labels.length&&r.push({metatileHash:i.metatileHash,labels:i.collectorOutput.labels,styleId:i.styleId})})),a.generatedData=n.results,t.labeler.addLabels("label_hover",m.AL.Tile,r),t.identifier.debouncedFillCache(),o.hover=a}))}(t,e,o,n,i):u(t,o,e)}function u(t,e,o){e.hover&&(e.hover.tileObjects.forEach((t=>{e.oldHoverTileObjects.push(t),t.startTicker(o,c.Tr.outAnimationType,c.Tr.outAnimationTime,1,0)})),e.hover=void 0,t.labeler.removeLabels("label_hover"),t.identifier.debouncedFillCache())}function g(t){if(t.newMod&&t.newMod.needGenerate)return t.newMod.needGenerate=!1,t.newMod}function _(t){return(!t.currentMod||(0,a.jW)(t.currentMod))&&(!t.newMod||(0,a.jW)(t.newMod))}function f(t,e){t.currentMod&&(0,a.Bp)(t.currentMod,e),t.newMod&&(0,a.Bp)(t.newMod,e)}function y(t){t.currentMod=void 0}function b(t){return t.currentMod&&t.currentMod.useful?t.currentMod:t.newMod&&t.newMod.useful?t.newMod:void 0}function x(t){t.currentMod&&(t.currentMod.useful=!1),t.newMod&&(t.newMod.useful=!1)}function v(t,e,o){if(t.idSet&&e.setTileIds(t.idSet),t.currentMod||t.newMod){if(t.currentMod){if(d.l.equal(t.currentMod.params,e))return t.currentMod.useful=!0,void(t.newMod=void 0)}if(t.newMod){d.l.equal(t.newMod.params,e)?t.newMod.useful=!0:w(t,e,o)}else w(t,e,o)}else w(t,e,o)}function w(t,e,o){const i=(0,r.vl)(t.coords,e),n=o.get(i);n?(t.newMod=n,t.newMod.useful=!0):(t.newMod=(0,a.es)(t,i,e),t.idSet&&t.newMod.params.setTileIds(t.idSet))}function z(t,e,o,n){switch(t.status){case i.Initial:t.newMod&&t.newMod.useful&&(t.status=i.Loading,t.needFetch=!0);break;case i.Loading:t.newMod&&t.newMod.useful?t.serverMetadata&&(t.status=i.Loaded):(t.status=i.Initial,t.needAbortFetch=!0);case i.Loaded:}t.currentMod&&(0,a.zL)(t.currentMod,e,o,n),t.newMod&&((0,a.zL)(t.newMod,e,o,n),t.newMod.needGenerate&&(t.needGenerate=!0))}function F(t){t.newMod&&t.newMod.ready&&(t.currentMod=t.newMod,t.newMod=void 0)}function S(t){const e=new n.c;return t.forEach((t=>{e.addFromFlatArray(t.collectorOutput.geoIds)})),e}function C(t){t.status===i.Loading&&(t.needAbortFetch=!0),t.status=i.Initial,t.serverMetadata=void 0,t.revision++}function M(t){t.revision++}function P(t,e){var o;(null===(o=t.idSet)||void 0===o?void 0:o.hasSome(e))&&t.revision++}!function(t){t[t.Initial=0]="Initial",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded"}(i||(i={}))},174:(t,e,o)=>{o.d(e,{I:()=>f});var i=o(6392),n=o(9311),a=o(1813),r=o(1683),l=o(4245),s=o(2153),c=o(4635),d=o(4138),m=o(1285),h=o(3785),p=o(6874),u=o(1943),g=o(5590),_=o(5817);class f{constructor(t,e,o,i,n,a,r){this.disabledRegions=null,this.modules=n,this.mapState=a,this.prevStyleState=a.styleState,this.sourceCore=r,this.id=(0,p.f)(),this.gridState=(0,c.y7)(r.type,r.id,this.id,t,e,o,i,n,this.mapState)}destroy(){(0,c.d1)(this.gridState)}redraw(){(0,c.d1)(this.gridState),(0,n.o)(this.gridState,this.mapState)}getDisplayedIdentifyData(){var t,e;const o=[];for(const i in this.gridState.displayedMods){const n=this.gridState.displayedMods[i];null===(t=n.generatedData)||void 0===t||t.concat((null===(e=n.tile.hover)||void 0===e?void 0:e.generatedData)||[]).forEach((t=>o.push({ids:t.collectorOutput.identifyIds,metatileHash:t.metatileHash,sourceId:n.tile.sourceId,tileKey:n.tile.key})))}return o}getLabelingData(){const t={sourceId:this.gridState.sourceId,animate:!this.gridState.stopLabelAnimation,labelsKeys:[]};for(const e in this.gridState.displayedMods){const o=this.gridState.displayedMods[e];t.labelsKeys.push(o.labelsKey)}return this.gridState.stopLabelAnimation&&this.viewportTilesReady()&&(this.gridState.stopLabelAnimation=!1),t}getViewportTiles(){const t=[],e=this.gridState.viewportTiles;for(let o=0;o<e.length;o++){const i=this.gridState.tiles[e[o]];i&&t.push(i)}return t}viewportTilesReady(){return(0,c.ej)(this.gridState.tiles,this.gridState.viewportTiles)}displayedTilesAnimationFinished(){for(const t in this.gridState.displayedMods){const e=this.gridState.displayedMods[t];if(e.objects)for(const t of e.objects)if(!t.tickerFinished(this.mapState))return!1}return!0}activateStyleUpdating(){(0,m.I2)(this.gridState,this.mapState.handyStyleId,this.modules.styleManager.getStyleRevision(this.mapState.handyStyleId),this.modules.map.core.getIsFirstStyleUpdate())}finishStyleUpdating(){(0,m.cA)(this.gridState)}setSelectedIds(){(0,m.YY)(this.modules,this.mapState,this.gridState,this.mapState.selectedIds)}setHoverId(t){(0,m.bj)(this.modules,this.mapState,this.gridState,t)}resetHoverId(){(0,m.bj)(this.modules,this.mapState,this.gridState)}onSourceDataChange(){(0,h.L)(this.gridState)}onFeatureStateMapChange(){(0,u.r)(this.gridState)}onCommercialModelsChange(t){(0,_.p)(this.gridState,t)}getTileCount(){let t=0;for(const e in this.gridState.displayedMods){const o=this.gridState.displayedMods[e].objects;void 0!==o&&(t+=o.length)}return t}isBlank(){for(const t of this.gridState.viewportTiles){const e=this.gridState.tiles[t],{serverMetadata:o}=e;if(void 0===o||0===o.length)continue;const i=(0,a.hW)(e);if(i&&i.ready)return!1}return!0}updateViewport(){(0,n.o)(this.gridState,this.mapState)}update(){const t=Object.assign({},this.gridState.displayedMods);this.mapState.styleState!==this.prevStyleState&&(0,m.TZ)(this.gridState,this.mapState.styleState),(0,d.r)(this.gridState,this.mapState,this.modules);const{demManager:e,labeler:o}=this.modules;(0,g.x)(this.gridState,e,o),this.fetch((0,c.w1)(this.gridState)),this.abortFetch((0,c.lH)(this.gridState)),this.generate((0,c.e)(this.gridState)),this.clearTiles((0,c.HM)(this.gridState)),(0,c.aq)(this.modules.tileManager,this.mapState,this.gridState,t)}fetch(t){t.sort(((t,e)=>(0,i.qu)(this.mapState.center,t,e))).forEach((t=>{this.sourceCore.fetchTile(t.coords,this.mapState).then((e=>{t.status===a.z3.Loading&&(t.serverMetadata=e)}))}))}abortFetch(t){t.forEach((t=>this.sourceCore.abortTileFetch(t.coords)))}generate(t){const e=[];t.sort(((t,e)=>(0,i.qu)(this.mapState.center,t,e))).forEach((t=>{const o=(0,a._v)(t);if(!o)return;const i={tileCoords:t.coords,selectedIds:o.params.getSelectedIds(),styleId:o.params.styleId};e.push(i);const n={areTileBoundsVisible:this.mapState.showDefaultTileBounds};this.sourceCore.generateTile(this.mapState,i.tileCoords,i.styleId,i.selectedIds,devicePixelRatio,n).then((e=>{let{results:i}=e;this.disabledRegions&&(i=i.filter((t=>!this.disabledRegions.includes(t.regionId)))),i.forEach((t=>{const{styleId:e,metatileHash:o,regionId:i,collectorOutput:n}=t,{packedRasters:a,rastersToLoad:r,floorHidingMap:s,modelsToLoad:c}=n;void 0!==a&&this.modules.assetManager.prepareRasters(e,a),c.forEach((t=>this.modules.assetManager.addModel(t))),this.modules.assetManager.loadRasters(r),this.modules.floorManager.prepareFloors(i,o,new l.g(s),this.sourceCore.type)})),t.idSet=(0,a.b9)(i),(0,r.aK)(o,i,t.idSet),this.modules.labeler.addTileLabels(o.labelsKey,s.AL.Tile,(0,r.Hd)(o))}))})),"terrain"===this.sourceCore.type&&(e.forEach((t=>{this.sourceCore.generateTile(this.mapState,t.tileCoords,t.styleId,t.selectedIds,devicePixelRatio,{generateOnlySelectedPoi:!0}).then((t=>{let{results:e}=t;this.disabledRegions&&(e=e.filter((t=>!this.disabledRegions.includes(t.regionId)))),e.forEach((t=>{const{collectorOutput:e,styleId:o}=t,{packedRasters:i,rastersToLoad:n}=e;void 0!==i&&this.modules.assetManager.prepareRasters(o,i),this.modules.assetManager.loadRasters(n)}))}))})),e.forEach((t=>{this.sourceCore.generateTile(this.mapState,t.tileCoords,t.styleId,t.selectedIds,devicePixelRatio,{generateOnlyHoveredPoi:!0}).then((t=>{let{results:e}=t;this.disabledRegions&&(e=e.filter((t=>!this.disabledRegions.includes(t.regionId)))),e.forEach((t=>{const{collectorOutput:e,styleId:o}=t,{packedRasters:i,rastersToLoad:n}=e;void 0!==i&&this.modules.assetManager.prepareRasters(o,i),this.modules.assetManager.loadRasters(n)}))}))})))}clearTiles(t){for(const e of t)this.sourceCore.deleteTile(e.coords),delete this.gridState.tiles[e.key]}}},1683:(t,e,o)=>{o.d(e,{Bp:()=>c,Hd:()=>s,aK:()=>l,es:()=>r,jW:()=>d,zL:()=>m});var i,n=o(4265),a=o(9218);function r(t,e,o){return{key:e,labelsKey:`${t.labelsKey}_${e}`,useful:!0,ready:!1,needGenerate:!1,tile:t,status:i.Initial,params:o.clone()}}function l(t,e,o){t.status===i.Generating&&(t.generatedData=e),o&&t.params.setTileIds(o)}function s(t){const e=t.generatedData,o=[];if(!e)return o;for(let t=0;t<e.length;t++){const i=e[t];i.collectorOutput.labels&&o.push({metatileHash:i.metatileHash,labels:i.collectorOutput.labels,styleId:i.styleId})}return o}function c(t,e){t.status=i.Initial,t.generatedData=void 0,void 0!==t.objects&&t.objects.forEach((t=>t.clean(e))),t.objects=void 0,t.ready=!1,t.tile.currentMod===t&&(t.tile.currentMod=void 0)}function d(t){return t.status===i.Initial}function m(t,e,o,r){const{renderer:l}=r;switch(t.status){case i.Initial:t.useful&&(t.status=i.Loading);break;case i.Loading:t.useful?t.tile.serverMetadata&&(t.status=i.Loaded):t.status=i.Initial;break;case i.Loaded:(function(t,e,o){switch(t.tile.type){case"terrain":return Boolean(t.useful&&t.tile.serverMetadata&&function(t,e,o){const{assetManager:i,modelLayer:n}=o;for(let o=0;o<t.length;o++){const{regionId:r,metatileHash:l}=t[o];if(!i.getMetatile(l)||e.styleZoom>a.Uh&&!n.isModelsInfoLoaded(r))return!1}return!0}(t.tile.serverMetadata,e,o));case"traffic":return Boolean(t.useful&&t.tile.serverMetadata);case"raster":case"geojson":case"dem":return Boolean(t.useful);default:return!1}})(t,o,r)&&(t.status=i.Generating,t.needGenerate=!0);break;case i.Generating:t.generatedData&&(t.status=i.Generated,t.ready=!0,t.objects=t.generatedData.map((e=>{const{collectorOutput:{data:o,modelsToLoad:i}}=e;return new n.W(t.tile.type,o,l,t.tile.coords,void 0,i.length>0)})),e.add(t.key,t))}}!function(t){t[t.Initial=0]="Initial",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Generating=3]="Generating",t[t.Generated=4]="Generated"}(i||(i={}))},647:(t,e,o)=>{o.d(e,{l:()=>r});var i=o(3672),n=o(6490),a=o(6392);class r{constructor(t,e,o,i,n){this.selectedIds=t.slice(),this.styleState=Object.assign({},e),this.tileRevision=o,this.styleRevision=n,this.styleId=i}static equal(t,e){return t.tileRevision===e.tileRevision&&t.styleId===e.styleId&&t.styleRevision===e.styleRevision&&(0,i.y5)(t.getSelectedIds(),e.getSelectedIds())&&(0,n.vZ)(t.styleState,e.styleState)}clone(){return new r(this.selectedIds,this.styleState,this.tileRevision,this.styleId,this.styleRevision)}stringify(){const t=this.selectedIds.map((t=>`${t.lo},${t.hi}`)).join("|");return`sId=${this.styleId}_sRev=${this.styleRevision}_tRev=${this.tileRevision}_sel=${t}_sSt=${JSON.stringify(this.styleState)}`}getSelectedIds(){return this.tileIds?(0,a.vX)(this.selectedIds,this.tileIds):this.selectedIds.slice()}setTileIds(t){this.tileIds=t}}},4265:(t,e,o)=>{o.d(e,{W:()=>h,Y:()=>m});var i=o(127),n=o(9450),a=o(6392),r=o(6757),l=o(6273),s=o(1684),c=o(1315);let d=0;class m{constructor(t,e){this.coords=e,this.bounds={min:[],max:[]},this.needsInstancingExpand=!1,this.tickerName=`tile-fade-${t}-${d++}`,this.readiness=1,this.modelMatrix=i.Ue(),this.mvpMatrix=new Float32Array(16),this.demMatrix=new Float32Array(16),this.purpose=t,this.buffers=[],this.children=[],this.identifyChildren=[]}updateMvpMatrix(t,e){i.dC(this.mvpMatrix,t,this.modelMatrix),void 0!==e&&i.dC(this.demMatrix,e,this.modelMatrix)}clean(t){var e;for(const t of this.buffers)t.remove();this.buffers=[],this.children=[],this.identifyChildren=[],s.sT(this.tickerName,t),null===(e=this.onClean)||void 0===e||e.call(this)}updateTicker(t){s.Vx(this.tickerName,{step:(t,e)=>{this.readiness=e}},t)}startTicker(t,e,o,i,n){s.BL(this.tickerName,{easing:e},t,i,n,o)}tickerFinished(t){return!s.rS(this.tickerName,t)}}class h extends m{constructor(t,e,o,i=[0,0,0,0],n,a){super(t,i),this.dynamicObject=n,this.needsInstancingExpand=null!=a&&a;const{buffers:l,objects:s,identifyObjects:c}=(0,r.B)(o,e,this);this.buffers=l,this.children=s,this.identifyChildren=c,this.setTileCoords(i)}setTileCoords(t){const e=t[2],o=t[3],r=(0,a.aq)(e);this.coords=t,this.size=r,this.zoomLevel=e,this.detailLevel=o;const s=(0,a.Oy)(t);this.bounds.min=[s[0],s[1]],this.bounds.max=[s[0]+r,s[1]+r];const c=l.jO/l.Bq*r;i.wA(this.modelMatrix,[s[0]-c,s[1]-c,0],n.al(r/l.gt,r/l.gt,l._9/l.gt))}tryToExpandInstancedObjects(t,e){if(this.needsInstancingExpand){if((0,c.oH)(this,e.renderer,e.assetManager,e.defaultSource)){this.needsInstancingExpand=!1;const t=[];this.children.forEach((o=>{"modelId"in o.attributes&&"linkedIds"in o.attributes&&(e.gltfAnimator.registerModel(o.attributes.modelId,o.attributes.linkedIds),t.push(o.attributes.modelId))})),this.onClean=()=>{for(const o of t)e.gltfAnimator.removeModel(o)}}}}}},5600:(t,e,o)=>{function i(t){return t}o.d(e,{D:()=>i})},2153:(t,e,o)=>{var i,n,a,r,l;o.d(e,{AL:()=>a,Dl:()=>l,_r:()=>n,a_:()=>i,m3:()=>r}),function(t){t[t.Common=0]="Common",t[t.Commercial=1]="Commercial",t[t.CommercialCity=2]="CommercialCity",t[t.Landmark=3]="Landmark"}(i||(i={})),function(t){t[t.Point=0]="Point",t[t.Line=1]="Line"}(n||(n={})),function(t){t[t.Tile=0]="Tile",t[t.Floor=1]="Floor",t[t.DynamicObject=2]="DynamicObject",t[t.PersonalPoi=3]="PersonalPoi"}(a||(a={})),function(t){t[t.Dead=0]="Dead",t[t.Alive=1]="Alive",t[t.Unused=2]="Unused",t[t.CommercialAlive=3]="CommercialAlive",t[t.CommercialDead=4]="CommercialDead"}(r||(r={})),function(t){t[t.Text=0]="Text",t[t.Icon=1]="Icon",t[t.PoiText=2]="PoiText",t[t.PoiText2=3]="PoiText2",t[t.OneWayLine=4]="OneWayLine",t[t.LineText=5]="LineText",t[t.Box=6]="Box"}(l||(l={}))},6479:(t,e,o)=>{var i;o.d(e,{f:()=>i}),function(t){t[t.Static=0]="Static",t[t.Unique=1]="Unique",t[t.Loaded=2]="Loaded"}(i||(i={}))},878:(t,e,o)=>{var i;o.d(e,{H:()=>i}),function(t){t[t.Tile=0]="Tile",t[t.Custom=1]="Custom"}(i||(i={}))},462:(t,e,o)=>{var i,n;o.d(e,{W:()=>n,Y:()=>i}),function(t){t[t.Stationary=0]="Stationary",t[t.ZoomingIn=1]="ZoomingIn",t[t.ZoomingOut=2]="ZoomingOut"}(i||(i={})),function(t){t[t.ByOne=0]="ByOne",t[t.WaitingLayer=1]="WaitingLayer",t[t.GlobalWaiting=2]="GlobalWaiting"}(n||(n={}))},5095:(t,e,o)=>{function i(t,e){const o=new XMLHttpRequest;if(o.open("GET",t.url,!0),o.responseType="arraybuffer",t.headers)for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);return o.onerror=function(){e({status:0,message:"Network error"},new ArrayBuffer(0))},o.onload=function(){o.status>=200&&o.status<300&&o.response?e(void 0,o.response):e({status:o.status,message:o.statusText},new ArrayBuffer(0))},o.send(),o}function n(t,e){const o=new XMLHttpRequest;if(o.open("GET",t.url,!0),t.headers)for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);return o.onerror=function(){e({status:0,message:"Network error"},{})},o.onload=function(){if(0===o.response.byteLength&&200===o.status)return e({status:0,message:"No content"},{});if(o.status>=200&&o.status<300&&o.response&&o.response.length){let i;try{i=JSON.parse(o.response),e(void 0,i)}catch(o){e({status:0,message:`Json parse data error from url ${t.url}`},{})}}else e({status:o.status,message:o.statusText},{})},o.send(),o}o.d(e,{L:()=>n,n:()=>i})},7966:(t,e,o)=>{o.d(e,{As:()=>s,bX:()=>r,fb:()=>n,gA:()=>l,m_:()=>a,pv:()=>m,sD:()=>d});var i=o(2435);function n(t,e,o){return(0,i.IG)(o.fontUrlTemplate,{name:t,range:String(e)})}function a(t,e,o){return(0,i.IG)(m(e.legacyIconBaseUrl,e.iconNameTemplate),{name:t,subdomain:o})}function r(t,e,o){const n=d(t)?t:m(e.iconBaseUrl,t);return(0,i.IG)(n,{subdomain:o,appHost:window.location.host})}function l(t,e){return m(e.modelsBaseUrl,t)}function s(t,e){const o=d(e.fontsPath)?e.fontsPath:m(e.rootUrl,e.fontsPath);t.fontUrlTemplate=m(o,"{name}_{range}.pbf"),t.iconBaseUrl=d(e.iconsPathForMap)?e.iconsPathForMap:m(e.rootUrl,e.iconsPathForMap),t.legacyIconBaseUrl=d(e.iconsPath)?e.iconsPath:m(e.rootUrl,e.iconsPath),t.iconNameTemplate=e.iconNameTemplate,t.modelsBaseUrl=d(e.modelsPath)?e.modelsPath:m(e.rootUrl,e.modelsPath)}const c=new RegExp("^(?:[a-z]+:)?//","i");function d(t){return c.test(t)}function m(...t){const e=t.filter((t=>t.length>0));let o=e[0];for(let t=1;t<e.length;t++){"/"!==o[o.length-1]&&(o+="/");const i=e[t];"/"===i[0]?o+=i.slice(1):o+=i}return o}},6490:(t,e,o)=>{o.d(e,{$X:()=>u,AB:()=>m,Id:()=>s,Kv:()=>d,TH:()=>f,Te:()=>l,VJ:()=>b,Xx:()=>r,ZY:()=>c,kn:()=>h,l4:()=>p,sB:()=>g,t7:()=>x,uZ:()=>a,vO:()=>_,vZ:()=>y});var i=o(9450),n=o(4874);function a(t,e,o){return t=Math.max(t,e),t=Math.min(t,o)}function r(t){return 0===t||Number.isNaN(t)?t:t>0?1:-1}function l(t,e){return[e[0]/t[0]*2-1,-e[1]/t[1]*2+1]}function s(t){return t*Math.PI/180}function c(t){return t/Math.PI*180}function d(t,e,o){void 0!==o.zoom&&(o.zoom=a(o.zoom,t.minZoom,t.maxZoom));const r=new n.V(t),l=r.unproject(e);r.setState(Object.assign(Object.assign({},t),o));const s=r.unproject(e),c=i.Ue();return i.lu(c,l,s),c}function m(t){return t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1}function h(t,e){const o=Object.assign({},e);for(const e in t)void 0!==t[e]&&(o[e]=t[e]);return o}function p(t){const e={};for(const o in t){e[t[o]]=o}return e}function u(t,e){const o=[];for(const i in t)e[i]||o.push(t[i]);return o}function g(t,e,o){return a((o-t)/(e-t),0,1)}function _(t){return t%1}function f(t,e){if(t.size!==e.size)return!1;for(const o of Array.from(t))if(!e.has(o))return!1;return!0}function y(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){const o=Array.isArray(t),i=Array.isArray(e);let n,a,r;if(o&&i){if(a=t.length,a!==e.length)return!1;for(n=a;0!=n--;)if(!y(t[n],e[n]))return!1;return!0}if(o!==i)return!1;const l=t instanceof Date,s=e instanceof Date;if(l!==s)return!1;if(l&&s)return t.getTime()===e.getTime();const c=t instanceof RegExp,d=e instanceof RegExp;if(c!==d)return!1;if(c&&d)return t.toString()===e.toString();const m=Object.keys(t);if(a=m.length,a!==Object.keys(e).length)return!1;for(n=a;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,m[n]))return!1;for(n=a;0!=n--;)if(r=m[n],!y(t[r],e[r]))return!1;return!0}return t!=t&&e!=e}function b(t,e){const o=t.indexOf(e);return-1!==o&&(t.splice(o,1),!0)}function x(t,e,o){return t+(e-t)*o}},1375:(t,e,o)=>{o.d(e,{cX:()=>c});o(4713),o(9218);var i=o(3249),n=o(7188),a=o(2730),r=o(8009),l=o(6273),s=o(2543);function c(t,e,o){const c=l.Bq,d=[new Uint16Array([0,c,c,0,0]),new Uint16Array([0,0,c,c,0])],m=(0,i.FJ)({}),h=(0,s.Yi)(o,n.i4,n.Dz,m,n.wz);(0,a.XI)({collector:t,generator:r.z.generate,args:[i.jf,e,h,d]})}},1204:(t,e,o)=>{o.d(e,{J:()=>r});var i=o(7999);class n{constructor(){this.name="",this.range="",this.glyphs={}}}class a{constructor(){this.id=0,this.range=0,this.bitmap=null,this.top=0,this.left=0,this.advance=0,this.x=0,this.y=0,this.width=0,this.height=0,this.texTop=0,this.texLeft=0,this.texRight=0,this.texBottom=0}}class r{constructor(t,e){this.stacks=t.readFields(l,[],e)}}function l(t,e,o){if(1===t){const t=o.readMessage(s,new n);e.push(t)}}function s(t,e,o){switch(t){case 1:e.name=o.readString();break;case 2:e.range=o.readString();break;case 3:{const t=o.readMessage(c,new a);e.glyphs[t.id]=t;break}}}function c(t,e,o){switch(t){case 1:e.id=o.readVarint(),e.range=(0,i.rx)(e.id);break;case 2:e.bitmap=o.readBytes();break;case 3:e.width=o.readVarint()+6;break;case 4:e.height=o.readVarint()+6;break;case 5:e.left=o.readSVarint()-3;break;case 6:e.top=o.readSVarint()+17+3;break;case 7:e.advance=o.readVarint()}}},3144:(t,e,o)=>{o.d(e,{JA:()=>u,Xq:()=>f,dm:()=>g,rq:()=>_});var i=o(6208),n=o.n(i),a=o(9899),r=o(1204),l=o(3698),s=o(6490),c=o(9218),d=o(309),m=o(2543),h=o(6273);class p{constructor(t,e,o){const i=[];let n=0;for(let o=0;o<t.length;o++){const a=t.charCodeAt(o),r=e&&e[a];r?(i.push(r),n+=r.advance):a!==c.Rq.bomCharCode&&(0,d.Q7)(t[o],a)}this.glyphs=i,this.width=n+c.Rq.baseSize*o*(t.length-1)}}function u(t,e,o){const i={lines:[],maxWidth:0},n=t.split("\n");for(let t=0;t<n.length;t++){const a=new p(n[t],o,e);i.lines.push(a),a.width>i.maxWidth&&(i.maxWidth=a.width)}return i}function g(t,e,o){for(const i of e)if(!o.has(t,i))return!1;return!0}function _(t,e,o){if(void 0===t)return;const i=(0,m.Q9)(t,e);return""!==i?void 0===o.fontNameToIndex[i]?h.Uo:i:void 0}function f(t){const e=new r.J(new(n())(new Uint8Array(t))).stacks[0].glyphs,{width:o,height:i}=function(t){const e=[],o=new a.Z(512,512,{autoResize:!0}),i=Object.keys(t);for(let o=0;o<i.length;o++){const n=t[Number(i[o])];n.bitmap&&e.push({glyph:n,width:n.width,height:n.height})}o.pack(e,{inPlace:!0}),o.shrink();for(let t=0;t<e.length;t++){const o=e[t].glyph;o.x=e[t].x,o.y=e[t].y}return{width:(0,s.AB)(o.w),height:(0,s.AB)(o.h)}}(e);!function(t,e,o){const i=Object.keys(t);for(let n=0;n<i.length;n++){const a=t[Number(i[n])];a.bitmap&&(a.texTop=(0,l.Bb)(a.y/o),a.texLeft=(0,l.Bb)(a.x/e),a.texBottom=(0,l.Bb)((a.y+a.height)/o),a.texRight=(0,l.Bb)((a.x+a.width)/e))}}(e,o,i);const c=function(t,e,o){const i=new Uint8Array(e*o),n=Object.keys(t);for(let o=0;o<n.length;o++){const a=t[Number(n[o])];if(a.bitmap)for(let t=0;t<a.height;t++){const o=e*(a.y+t)+a.x,n=a.width*t;for(let t=0;t<a.width;t++)i[o+t]=a.bitmap[n+t]}}return i.buffer}(e,o,i);return{glyphData:e,bitmap:c,width:o,height:i}}},2676:(t,e,o)=>{function i(t){let e,o=!1;return function(...i){return o||(o=!0,e=t.apply(this,i)),e}}o.d(e,{I:()=>i})},9073:(t,e,o)=>{o.d(e,{A5:()=>d,C:()=>m,EO:()=>b,LX:()=>p,PA:()=>g,Qn:()=>z,TD:()=>h,Vv:()=>M,X$:()=>v,Xg:()=>S,Z3:()=>w,a4:()=>F,gr:()=>j,h0:()=>P,ik:()=>I,nn:()=>y,pc:()=>_,r9:()=>f,to:()=>L,v3:()=>T,vn:()=>C,yq:()=>u});var i=o(378),n=o(9450),a=o(127),r=o(9218),l=o(6273),s=o(6490),c=o(8194);o(4874);const d=2*Math.PI*6378137,m=l.sX/d,h=a.wA([],[-1,-1,0],[2,2,1]),p=a.wA([],[.5,.5,0],[.5,.5,1]);function u(t){const e=l.sX/2,o=Math.sin((0,s.Id)(t[1])),i=t[0]*l.sX/360,a=Math.log((1+o)/(1-o))*l.sX/(4*Math.PI);return n.al((0,s.uZ)(i,-e,e),(0,s.uZ)(a,-e,e),0)}function g(t){const e=[0,0];e[0]=360*t[0]/l.sX;const o=-2*Math.PI/l.sX;return e[1]=90-2*(0,s.ZY)(Math.atan(Math.exp(t[1]*o))),e}function _(t){return Math.max(t,r.nS.minCalculationScreenHeight)}function f(t,e){return _(e[1])*l.sX/(2*l.y4*Math.tan((0,s.Id)(r.nS.fov)/2)*Math.pow(2,t))}function y(t,e){return Math.log(_(e[1])*l.sX/(2*l.y4*Math.tan((0,s.Id)(r.nS.fov)/2)*t))/Math.LN2}function b(t){return l.ax*Math.pow(2,-t)}function x(t){const e=g(t)[1],o=1/(2*Math.cos((0,s.Id)(e)));return Math.log(o)/Math.log(2)}function v(t,e){const o=x(e)*(0,s.sB)(9,10,t);return t+(0,s.uZ)(o,-1,0)}function w(t,e){const o=x(e),i=o*(0,s.sB)(9,10+o,t);return t-(0,s.uZ)(i,-1,0)}function z(t,e){return l.LF*(t/l.$U)/e}function F(t,e){return e*m*S(t[1])}function S(t){return 1/Math.cos((0,s.Id)(t))}function C(t,e){const o=Math.PI/180,i=t[1]*o,n=e[1]*o,a=Math.sin((e[1]-t[1])*o/2),r=Math.sin((e[0]-t[0])*o/2),l=a*a+Math.cos(i)*Math.cos(n)*r*r,s=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return Math.round(6371e3*s)}const M=c.Ue([-l.sX/2,-l.sX/2],[l.sX/2,l.sX/2]);function P(t,e){return t*Math.pow(2,-e)*l.sX/l.y4}function I(t,e){return t*Math.pow(2,e)*l.y4/l.sX}function L(t,e){return 0===t?-1/0:-Math.log(e*l.y4/(t*l.sX))/Math.LN2}const k=i.Ue(),A=i.Ue();function j(t,e,o){i.$X(k,o,t),i.$X(A,e,t);const n=i.AK(k,A)/i.kE(k);return Math.atan2(n,t[2])}function T(t){const e=2*Math.PI;return(t%=e)<0&&(t+=e),t}},1959:(t,e,o)=>{function i(t){return!!t&&"stretchX"in t&&Array.isArray(t.stretchX)&&"stretchY"in t&&Array.isArray(t.stretchY)&&"width"in t&&"number"==typeof t.width&&"height"in t&&"number"==typeof t.height}o.d(e,{x:()=>i})},309:(t,e,o)=>{o.d(e,{Q7:()=>n,cM:()=>r});var i=o(7999);function n(t,e){r(`No glyph for character ${t} (code = ${e}, range = ${(0,i.rx)(e)})`)}const a=new Set;function r(t){a.has(t)||(console.log(t),a.add(t))}},7636:(t,e,o)=>{o(9450),o(8194),o(6490),o(9073),o(9090)},8194:(t,e,o)=>{o.d(e,{JG:()=>c,Rk:()=>h,Ue:()=>r,X3:()=>l,aM:()=>s,bA:()=>_,be:()=>m,jV:()=>g,kK:()=>u,mc:()=>d,r3:()=>p});var i=o(378),n=o(6490),a=o(9073);function r(t,e){return{min:t||i.al(1/0,1/0),max:e||i.al(-1/0,-1/0)}}function l(t){return r((0,a.yq)(t.southWest),(0,a.yq)(t.northEast))}function s(t,e){i.VV(t.min,t.min,e),i.Fp(t.max,t.max,e)}function c(t,e){t.min[0]=e.min[0],t.max[0]=e.max[0],t.min[1]=e.min[1],t.max[1]=e.max[1]}function d(t){t.min[0]=1/0,t.max[0]=-1/0,t.min[1]=1/0,t.max[1]=-1/0}function m(t,e){return t[0]=e.min[0]+(e.max[0]-e.min[0])/2,t[1]=e.min[1]+(e.max[1]-e.min[1])/2,t}function h(t,e,o){t[0]=(0,n.uZ)(o[0],e.min[0],e.max[0]),t[1]=(0,n.uZ)(o[1],e.min[1],e.max[1])}function p(t,e){return e[0]<=t.max[0]&&e[0]>=t.min[0]&&e[1]<=t.max[1]&&e[1]>=t.min[1]}function u(t,e){const o=t.min[0]<=e.max[0]&&e.min[0]<=t.max[0],i=t.min[1]<=e.max[1]&&e.min[1]<=t.max[1];return o&&i}function g(t,e){return{min:[Math.max(t.min[0],e.min[0]),Math.max(t.min[1],e.min[1])],max:[Math.min(t.max[0],e.max[0]),Math.min(t.max[1],e.max[1])]}}function _(t,e){const o=m([],t),i=(t.max[0]-t.min[0])/2*e,n=(t.max[1]-t.min[1])/2*e;t.min[0]=o[0]-i,t.min[1]=o[1]-n,t.max[0]=o[0]+i,t.max[1]=o[1]+n}},291:(t,e,o)=>{o.r(e),o.d(e,{ease:()=>l,easeInBack:()=>A,easeInCirc:()=>C,easeInCubic:()=>m,easeInElastic:()=>I,easeInExpo:()=>z,easeInOutBack:()=>T,easeInOutCirc:()=>P,easeInOutCubic:()=>p,easeInOutElastic:()=>k,easeInOutExpo:()=>S,easeInOutQuad:()=>d,easeInOutQuart:()=>_,easeInOutQuint:()=>b,easeInOutSine:()=>w,easeInQuad:()=>s,easeInQuart:()=>u,easeInQuint:()=>f,easeInSine:()=>x,easeOutBack:()=>j,easeOutBounce:()=>E,easeOutCirc:()=>M,easeOutCubic:()=>h,easeOutElastic:()=>L,easeOutExpo:()=>F,easeOutQuad:()=>c,easeOutQuart:()=>g,easeOutQuint:()=>y,easeOutSine:()=>v,inertia:()=>O,linear:()=>a});var i=o(9218),n=o(6636);function a(t,e,o,i){return e+o/i*t}const r=n(.25,.1,.25,1);function l(t,e,o,i){return e+o*r(t/i)}function s(t,e,o,i){return o*(t/=i)*t+e}function c(t,e,o,i){return-o*(t/=i)*(t-2)+e}function d(t,e,o,i){return(t/=i/2)<1?o/2*t*t+e:-o/2*(--t*(t-2)-1)+e}function m(t,e,o,i){return o*(t/=i)*t*t+e}function h(t,e,o,i){return o*((t=t/i-1)*t*t+1)+e}function p(t,e,o,i){return(t/=i/2)<1?o/2*t*t*t+e:o/2*((t-=2)*t*t+2)+e}function u(t,e,o,i){return o*(t/=i)*t*t*t+e}function g(t,e,o,i){return-o*((t=t/i-1)*t*t*t-1)+e}function _(t,e,o,i){return(t/=i/2)<1?o/2*t*t*t*t+e:-o/2*((t-=2)*t*t*t-2)+e}function f(t,e,o,i){return o*(t/=i)*t*t*t*t+e}function y(t,e,o,i){return o*((t=t/i-1)*t*t*t*t+1)+e}function b(t,e,o,i){return(t/=i/2)<1?o/2*t*t*t*t*t+e:o/2*((t-=2)*t*t*t*t+2)+e}function x(t,e,o,i){return-o*Math.cos(t/i*(Math.PI/2))+o+e}function v(t,e,o,i){return o*Math.sin(t/i*(Math.PI/2))+e}function w(t,e,o,i){return-o/2*(Math.cos(Math.PI*t/i)-1)+e}function z(t,e,o,i){return 0==t?e:o*Math.pow(2,10*(t/i-1))+e}function F(t,e,o,i){return t==i?e+o:o*(1-Math.pow(2,-10*t/i))+e}function S(t,e,o,i){return 0==t?e:t==i?e+o:(t/=i/2)<1?o/2*Math.pow(2,10*(t-1))+e:o/2*(2-Math.pow(2,-10*--t))+e}function C(t,e,o,i){return-o*(Math.sqrt(1-(t/=i)*t)-1)+e}function M(t,e,o,i){return o*Math.sqrt(1-(t=t/i-1)*t)+e}function P(t,e,o,i){return(t/=i/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+e:o/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function I(t,e,o,i){var n=1.70158,a=0,r=o;if(0==t)return e;if(1==(t/=i))return e+o;if(a||(a=.3*i),r<Math.abs(o)){r=o;n=a/4}else n=a/(2*Math.PI)*Math.asin(o/r);return-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-n)*(2*Math.PI)/a)+e}function L(t,e,o,i){var n=1.70158,a=0,r=o;if(0==t)return e;if(1==(t/=i))return e+o;if(a||(a=.3*i),r<Math.abs(o)){r=o;n=a/4}else n=a/(2*Math.PI)*Math.asin(o/r);return r*Math.pow(2,-10*t)*Math.sin((t*i-n)*(2*Math.PI)/a)+o+e}function k(t,e,o,i){var n=1.70158,a=0,r=o;if(0==t)return e;if(2==(t/=i/2))return e+o;if(a||(a=i*(.3*1.5)),r<Math.abs(o)){r=o;n=a/4}else n=a/(2*Math.PI)*Math.asin(o/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-n)*(2*Math.PI)/a)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-n)*(2*Math.PI)/a)*.5+o+e}function A(t,e,o,i,n){return null==n&&(n=1.70158),o*(t/=i)*t*((n+1)*t-n)+e}function j(t,e,o,i,n){return null==n&&(n=1.70158),o*((t=t/i-1)*t*((n+1)*t+n)+1)+e}function T(t,e,o,i,n){return null==n&&(n=1.70158),(t/=i/2)<1?o/2*(t*t*((1+(n*=1.525))*t-n))+e:o/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e}function E(t,e,o,i){return(t/=i)<1/2.75?o*(7.5625*t*t)+e:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+e:o*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function O(t,e,o,n){return o*(1-Math.pow(1-t/n,i.II.nonLinearity+1))+e}},2539:(t,e,o)=>{o.d(e,{Jh:()=>u,Oy:()=>l,Z4:()=>g,hS:()=>r,iE:()=>s,z_:()=>p});var i=o(9450),n=o(378),a=o(8194);function r(t,e){return{a:t[1]-e[1],b:e[0]-t[0],c:t[0]*e[1]-e[0]*t[1]}}function l(t,e){return Math.abs(s(t,e))}function s(t,e){return(e.a*t[0]+e.b*t[1]+e.c)/Math.sqrt(e.a*e.a+e.b*e.b)}function c(t,e,o){const{a:n,b:a,c:l}=r(t,e);return i.al(o,-(n*o+l)/a,0)}function d(t,e,o){const{a:n,b:a,c:l}=r(t,e);return i.al(-(a*o+l)/n,o,0)}const m=a.Ue(),h=a.Ue();function p(t,e,o){const i=e[e.length-1]*o;let a=t[0],r=0;const l=[a];let s,c=1;for(;c<t.length&&!s;){const o=t[c],d=e[c];let m=o;if(d>i){if(!s){const t=(i-r)/(d-r);s=[],n.t7(s,a,o,t)}m=s}l.push(m),a=m,r=e[c],c++}return l}function u(t,e){let o=t[0];a.mc(m),a.aM(m,o);let i=[o];const n=[i];let r=1;for(;r<t.length;){const l=t[r];let s=!1,p=l;if(a.JG(h,m),a.aM(h,p),h.max[0]-h.min[0]>e){p=c(o,p,h.max[0]===p[0]?h.min[0]+e:h.max[0]-e),s=!0}if(s&&(a.JG(h,m),a.aM(h,p)),h.max[1]-h.min[1]>e){p=d(o,p,h.max[1]===p[1]?h.min[1]+e:h.max[1]-e),s=!0}s?(i.push(p),a.mc(m),a.aM(m,p),i=[p],n.push(i),o=p):(i.push(l),a.aM(m,l),o=l,r++)}return n}function g(t,e,o){const i=t[0]-e[0],n=t[1]-e[1],a=o[0]-e[0],r=o[1]-e[1],l=a*a+r*r,s=0!==l?(i*a+n*r)/l:0;return s<0?e:s>1?o:[e[0]+s*a,e[1]+s*r]}},4091:(t,e,o)=>{o.d(e,{bu:()=>i,qt:()=>n});const i=t=>(t=>{if(t.length>2){let e=0;for(let o=t.length-1,i=o,n=0;n<=o;n++){const o=t[i],a=t[n];e+=(o[0]+a[0])*(o[1]-a[1]),i=n}return e/2}return 0})(t)>0;function n(t){const e=(t=t.slice().sort(r)).length,o=new Array(2*e);let i=0;for(let n=0;n<e;n++){const e=t[n];for(;i>=2&&a(o[i-2],o[i-1],e)<=0;)i--;o[i++]=e}const n=i+1;for(let r=e-2;r>=0;r--){const e=t[r];for(;i>=n&&a(o[i-2],o[i-1],e)<=0;)i--;o[i++]=e}return o.slice(0,i-1)}function a(t,e,o){return(e[1]-t[1])*(o[0]-t[0])-(e[0]-t[0])*(o[1]-t[1])}function r(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}},267:(t,e,o)=>{o.d(e,{BS:()=>r,By:()=>l,M4:()=>s,mW:()=>c});var i=o(9450),n=o(8194),a=o(2539);function r(t){const e=t[0][0],o=t[0][1],i=t[1][0],n=t[1][1],a=t[2][0],r=t[2][1],l=t[3][0],s=t[3][1];return{min:[Math.min(e,i,a,l),Math.min(o,n,r,s)],max:[Math.max(e,i,a,l),Math.max(o,n,r,s)]}}function l(t){return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[t[2][0],t[2][1],t[2][2]],[t[3][0],t[3][1],t[3][2]]]}function s(t,e){const o=r(t);if(!(0,n.kK)(e,o))return!1;const i=[(0,a.hS)(t[3],t[2]),(0,a.hS)(t[1],t[0]),(0,a.hS)(t[0],t[3]),(0,a.hS)(t[2],t[1])],l=[e.min,e.max,[e.min[0],e.max[1]],[e.max[0],e.min[1]]];for(const t of i){let e=!0;for(let o=0;o<l.length;o++){const i=l[o];if(t.a*i[0]+t.b*i[1]+t.c<0){e=!1;break}}if(e)return!1}return!0}function c(t,e,o){t.forEach((t=>{const n=1+e/i.TE(o,t);i.t7(t,o,t,n)}))}},9090:(t,e,o)=>{o.d(e,{AE:()=>s,Cb:()=>c,Hl:()=>y,L$:()=>b,af:()=>p,ax:()=>m,fN:()=>g,hk:()=>x,i7:()=>h,m2:()=>u,se:()=>f,tG:()=>v,uI:()=>d});var i=o(378),n=o(9450),a=o(6490);const r=[0,0,0],l=[0,0,0];function s(t,e,o,i,n){if(e!==i||o!==n){const a=n-o,r=e-i,l=1/Math.sqrt(a*a+r*r);t[0]=a*l,t[1]=r*l}else t[0]=0,t[1]=0}function c(t,e,o,i){return n.lu(r,o,e),n.lu(l,o,i),n.kC(t,l,r),n.Fv(t,t),t}function d(t,e,o,i,n){if(e!==i||o!==n){const a=i-e,r=n-o,l=1/Math.sqrt(a*a+r*r);t[0]=a*l,t[1]=r*l}else t[0]=0,t[1]=0}function m(t,e,o,i,n){const a=e+i,r=o+n,l=e*a+o*r;if(0!==l){const e=1/l;t[0]=a*e,t[1]=r*e}else t[0]=0,t[1]=0}function h(t){return(0,a.uZ)(127*t,-127,127)}function p(t,e=t){return t[0]=h(e[0]),t[1]=h(e[1]),t}function u(t,e,o,i,n){t[0]=e*i+o*n,t[1]=o*i-e*n}function g(t,e){const o=e[0];t[0]=-e[1],t[1]=o}function _(t,e){const o=e[0];t[0]=e[1],t[1]=-o}function f(t){return 0===t[0]&&0===t[1]}function y(t,e){return Math.atan2(e[1]-t[1],e[0]-t[0])}function b(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function x(t,e){const o=Math.sin(e),n=Math.cos(e),a=n*t[0]-o*t[1],r=o*t[0]+n*t[1];i.t8(t,a,r)}function v(t,e,o,n,a=!0){i.I6(e,o)||i.I6(o,n)?i.t8(t,0,0):(i.lu(r,o,e),i.lu(l,n,o),a?(g(r,r),g(l,l)):(_(r,r),_(l,l)),i.Fv(r,r),i.Fv(l,l),i.IH(t,r,l),i.Fv(t,t))}},7188:(t,e,o)=>{o.d(e,{Dz:()=>m,GG:()=>r,KP:()=>s,Qy:()=>c,SD:()=>a,ev:()=>l,i4:()=>u,nF:()=>h,so:()=>g,wz:()=>p});var i=o(6490),n=o(4716);function a(t){let e=0;for(let o=0;o<t.length;o++)e+=t[o]*Math.pow(256,t.length-1-o);return e}function r(t){const e=new Uint8Array(6);for(let o=0;o<6;o++)e[o]=255&Math.floor(t/Math.pow(256,5-o));return encodeURIComponent(n.c(e))}function l(t){const e=function(t,e){var o,i,n,a,r;const l={};t.forEach(((t,e)=>{l[t]=e}));let s=t.length;l.selected=null!==(o=l.selected)&&void 0!==o?o:s++,l.hovered=null!==(i=l.hovered)&&void 0!==i?i:s++,l.dpi=null!==(n=l.dpi)&&void 0!==n?n:s++,l.isRealtime=null!==(a=l.isRealtime)&&void 0!==a?a:s++,l.pixelDensityPreset=null!==(r=l.pixelDensityPreset)&&void 0!==r?r:s++;for(const t in e)void 0===l[t]&&(l[t]=s++);return l}(t.tileProps,t.defaultProps),o={};for(const i in t.defaultProps)o[i]={index:e[i],value:t.defaultProps[i]};return{version:t.version,dictionaries:t.enumerationValues,reverseDictionaries:Object.keys(t.enumerationValues).reduce(((e,o)=>(e[o]=(0,i.l4)(t.enumerationValues[o]),e)),{}),tileProps:e,tilePropsByIndex:(0,i.l4)(e),defaultProps:o}}function s(t,e){const o={};if(e)for(let t=0;t<e.length;t++)o[e[t]]=t;return l({enumerationValues:{db_sublayer:o},version:"",zenithVersion:"",date:"",defaultProps:{},tileProps:t})}function c(t,e){const{tileProps:o}=t;let i=Object.keys(o).length;for(const t of e)void 0===o[t]&&(o[t]=i,i+=1)}let d=0;const m={beginningIsCut:d++,class:d++,componentDistanceEnd:d++,componentDistanceStart:d++,db_icon_priority:d++,db_label_priority:d++,db_label2_priority:d++,dpi:d++,endingIsCut:d++,height:d++,db_hidden_by_plan_building_id:d++,id:d++,isRealtime:d++,db_label:d++,db_label2:d++,nextPointX:d++,nextPointY:d++,db_object_class:d++,objectLength:d++,pixelDensityPreset:d++,previousPointX:d++,previousPointY:d++,db_region:d++,selected:d++,hovered:d++,db_sublayer:d++,traffic_color:d++,traffic_road_class:d++,traffic_road_z_level:d++},h={version:"0.0.0",tileProps:m,tilePropsByIndex:(0,i.l4)(m),defaultProps:{},dictionaries:{},reverseDictionaries:{}},p=[],u={},g={sourceName:"zenith"}},2702:(t,e,o)=>{function i(t,e,o){for(let i=0,n=e.length;i<n;i++){const n=e[i];let a=0;switch(n.type){case"get":a=o.tileAttrs[o.tileProps[n.key]];break;case"sourceAttr":o.sourceAttrs&&(a=o.sourceAttrs[n.key]);break;case"featureState":a=o.featureAttrs[o.tileProps[n.key]]}t.push(a)}return t}function n(t,e){for(let o=0,i=e.length;o<i;o++)t.push(e[o]);return t}function a(t,e){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++){const i=t[o],n=e[o];if(Array.isArray(i))return!!Array.isArray(n)&&a(i,n);if(!(i===n||"number"==typeof i&&"number"==typeof n&&Number.isNaN(i)&&Number.isNaN(n)))return!1}return!0}o.d(e,{LY:()=>n,v$:()=>i,wy:()=>a})},3698:(t,e,o)=>{function i(t){const e=256*Math.log(t);return e+(e<0?-.5:.5)<<16>>16}function n(t){return 32768*t+.5<<16>>>16}function a(t){return 256*Math.log(t)+.5<<16>>16}o.d(e,{Bb:()=>n,KF:()=>a,wj:()=>i})},173:(t,e,o)=>{function i(t){return()=>((t=16807*t%2147483647)-1)/2147483646}function n(t,e,o){return("function"==typeof t?t():.5)*(o-e)+e}o.d(e,{O:()=>i,f:()=>n})},7486:(t,e,o)=>{o.d(e,{Bl:()=>d,W8:()=>c,rA:()=>s});var i=o(6479),n=o(7464);let a=10001;const r={w:0,h:0,x:0,y:0,atlasIndex:0,isPacked:!1},l={};function s(t,e,o,s,c){const d=(0,n.zV)(t.lo,t.hi);if(!l[d]){const n=a++;l[d]={type:i.f.Unique,isSvg:!1,index:n,key:d,name:"",fileName:"",id:t,regionId:o,url:c,rasters:e.map(((t,e)=>Object.assign(Object.assign({},r),{rasterSetIndex:n,rasterIndex:e,w:t,h:t,anchorX:s[0],anchorY:s[1]})))}}return l[d]}function c(t){const e=a++;return{type:i.f.Loaded,isSvg:!1,index:e,key:`loaded-${e}`,name:"",fileName:"",rasters:t.map(((t,o)=>Object.assign(Object.assign({},t),{rasterIndex:o,rasterSetIndex:e})))}}function d(t,e,o){let i,n=1/0;for(let a=0;a<t.length;a++){const r=t[a];if(o&&!r.isPacked)continue;const l=Math.abs(r.w-e);l<n&&(i=a,n=l)}return i}},8906:(t,e,o)=>{o.d(e,{dp:()=>a,iY:()=>n,ng:()=>l,rJ:()=>r});var i=o(2676);let n=t=>t,a=null,r=!1;new Promise((t=>{a=()=>{r=!0,t()}})),new Set(["ar"]);const l=(0,i.I)((function(t){new Function(t)(),n=self.mapglRtlPlugin.processRtl,a&&a()}))},7999:(t,e,o)=>{o.d(e,{Go:()=>l,lD:()=>a,rx:()=>r,zT:()=>n});var i=o(9218);function n(t){let e="",o=0;for(;o<t.length;){let i=t[o++];if(i>127){if(i>191&&i<224){if(o>=t.length)return console.error("Incomplete 2-byte sequence"),e;i=(31&i)<<6|63&t[o]}else if(i>223&&i<240){if(o+1>=t.length)return console.error("Incomplete 3-byte sequence"),e;i=(15&i)<<12|(63&t[o])<<6|63&t[++o]}else{if(!(i>239&&i<248))return console.error(`Unknown multibyte start 0x${i.toString(16)} at index ${o-1}`),e;if(o+2>=t.length)return console.error("Incomplete 4-byte sequence"),e;i=(7&i)<<18|(63&t[o])<<12|(63&t[++o])<<6|63&t[++o]}++o}if(i<=65535)e+=String.fromCharCode(i);else{if(!(i<=1114111))return console.error(`Code point 0x${i.toString(16)} exceeds UTF-16 reach`),e;i-=65536,e+=String.fromCharCode(i>>10|55296),e+=String.fromCharCode(1023&i|56320)}}return e}function a(t,e){if(t.length<=e||-1!==t.indexOf("\n"))return t;const o=[];return t.split(" ").forEach((t=>{const i=o.length-1;0===o.length||o[i].length+t.length>=e?o.push(t):o[i]+=" "+t})),o.join("\n")}function r(t){return Math.floor(t/256)}function l(t){const e=new Set;return t.forEach((t=>{if(void 0!==t)for(let o=0;o<t.length;o++){const n=t.charCodeAt(o);n!==i.Rq.bomCharCode&&e.add(r(n))}})),Array.from(e)}},2398:(t,e,o)=>{o.d(e,{U:()=>a});var i=o(6392),n=o(5095);class a{constructor(t,e=!1){this.dataType=t,this.pendingRequests=new Map,this.ignoredStatusCodes=e?[204,404]:[204]}fetch(t,e){return new Promise((o=>{const a=e(t),r=(0,i.gx)(t),l=("json"===this.dataType?n.L:n.n)({url:a},((t,e)=>{if(this.pendingRequests.delete(r),void 0!==t)return this.ignoredStatusCodes.includes(t.status)||console.error(t),void o({});o({data:e})}));this.pendingRequests.set(r,{xhr:l,resolve:o})}))}destroy(){this.pendingRequests.forEach(((t,e)=>{this.abortRequest(e)}))}abortRequest(t){const e=this.pendingRequests.get(t);void 0!==e&&(e.xhr.abort(),e.resolve({rejected:!0}),this.pendingRequests.delete(t))}}},3675:(t,e,o)=>{o.d(e,{c:()=>i});class i{constructor(){this.events={}}on(t,e){let o=this.events[t];return o||(o=this.events[t]=[]),o.push(e),this}once(t,e){const o=i=>{this.off(t,o),e.call(this,i)};return this.on(t,o),this}off(t,e){const o=this.events[t];if(!o)return this;const i=o.indexOf(e);return-1!==i&&o.splice(i,1),this}emit(t,e){const o=this.events[t];if(!o)return this;const i=o.slice();for(let t=0;t<i.length;t++)i[t].call(this,e);return this}}},1777:(t,e,o)=>{o.d(e,{r:()=>n});var i=o(3487);class n extends i.c{constructor(t){super(t),this.featureAttrs=(null==t?void 0:t.featureAttrs)||new Set,this.clearAttrs=!0}set(t,e,o){super.set(t,e,o),Object.keys(o).forEach((t=>this.featureAttrs.add(t)))}}},4245:(t,e,o)=>{o.d(e,{g:()=>n});var i=o(3672);class n{constructor(t={}){this.map=t}set(t,e){let o=this.map[t.lo];void 0===o&&(o=this.map[t.lo]={}),o[t.hi]=e}get(t){if(void 0!==this.map[t.lo])return this.map[t.lo][t.hi]}serialize(){return this.map}forEach(t){for(const e in this.map)for(const o in this.map[e])t(this.map[e][o],(0,i.Ru)(Number(e),Number(o)))}clear(){this.map={}}}},7204:(t,e,o)=>{o.d(e,{c:()=>i});class i{constructor(t=[]){this.map={};for(const e of t)this.add(e)}has(t){const e=this.map[t.hi];return void 0!==(null==e?void 0:e[t.lo])}hasSome(t){return t.some((t=>this.has(t)))}add(t){let e=this.map[t.hi];e||(e=this.map[t.hi]={}),e[t.lo]=!0}addFromFlatArray(t){const e=this.map;for(let o=0;o<t.length/2;o++){const i=t[2*o+1];let n=e[i];n||(n=e[i]={}),n[t[2*o]]=!0}}toFlatArray(){const t=this.map,e=[];for(const o in t){const i=t[o];for(const t in i)e.push(Number(t),Number(o))}return e}}},6544:(t,e,o)=>{function i(t){const e={};let o=0;for(const i in t)e[i]=o,o+=1;return e}o.d(e,{m:()=>i})},3672:(t,e,o)=>{o.d(e,{Ak:()=>s,IL:()=>c,Ru:()=>n,nI:()=>a,v7:()=>r,y5:()=>l});const i=1e5;function n(t,e){return{type:64,lo:t,hi:e}}function a(t){return null!==t&&"object"==typeof t&&64===t.type}function r(t,e){return t.lo===e.lo&&t.hi===e.hi}function l(t,e){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!r(t[o],e[o]))return!1;return!0}function s(t){return y(t.lo,t.hi)}function c(t){const e=b(t);return n(e[0],e[1])}function d(t){return[t%i,Math.floor(t/i)%i,0,0]}function m(t){let e=0;for(let o=0;o<4;o++){const n=4294967296*t[o]+e;e=Math.floor(n/i),t[o]=n%i}}function h(t,e){const o=4294967296;let n=4,a=0;for(;--n>=0;){const r=a*i+e[n],l=Math.floor(r/o);a=r-l*o,t[n]=l}}function p(t,e){let o=0;for(let n=0;n<4;n++){const a=t[n]+e[n]+o;o=Math.floor(a/i),t[n]=a%i}}function u(t,e){let o=0;for(let n=0;n<4;n++){let a=t[n]-e[n]-o;a<0?(a+=i,o=1):o=0,t[n]=a}}function g(t){let e=!0,o=4,i="";for(;--o>=0;){const n=String(t[o]);e?0!==t[o]&&(i+=n,e=!1):i+="00000".slice(n.length)+n}return i.length||(i="0"),i}function _(t){let e=4,o=0;for(;--e>=0;)o=o*i+t[e];return o}function f(t){t="00000000000000000000".slice(t.length)+t;const e=[0,0,0,0];for(let o=0;o<4;o++){const i=parseInt(t.slice(5*o,5*(o+1)),10);e[3-o]=i}return e}function y(t,e){const o=d(t),i=d(e);return m(i),p(i,o),g(i)}function b(t){const e=f(t),o=d(0);h(o,e);const i=_(o);return m(o),u(e,o),[_(e),i]}},3429:(t,e,o)=>{o.d(e,{L:()=>n});const i=()=>{};class n{constructor(t,e=i){this.queue=[],this.data={},this.size=t,this.onRemove=e}add(t,e){this.data[t]||(this.queue.push(t),this.data[t]=e,this.shrink(this.size))}remove(t){this.data[t]&&(this.queue.splice(this.queue.indexOf(t),1),delete this.data[t])}get(t){const e=this.data[t];return e&&(this.queue.splice(this.queue.indexOf(t),1),this.queue.push(t)),e}reset(){this.shrink(0)}setSize(t){this.size=t,this.shrink(t)}getSize(){return this.size}keys(){return this.queue}getData(){return Object.keys(this.data).map((t=>this.data[t]))}shrink(t){for(;this.queue.length>t;){const t=this.queue.shift(),e=this.data[t];delete this.data[t],this.onRemove(t,e)}}}},3487:(t,e,o)=>{o.d(e,{c:()=>i});class i{constructor(t){this.map=(null==t?void 0:t.map)||{}}set(t,e,o){void 0===this.map[t]&&(this.map[t]={}),this.map[t][e]=o}get(t,e){const o=this.map[t];if(void 0!==o)return o[e]}has(t,e){const o=this.map[t];return void 0!==o&&void 0!==o[e]}}},9981:(t,e,o)=>{o.d(e,{fL:()=>a,o1:()=>n});var i=o(6273);function n(t){return i.$U*t}function a(t){return t/i.$U}},7609:(t,e,o)=>{o.d(e,{Cz:()=>m,Ty:()=>s,h3:()=>d,wu:()=>c});var i=o(9218);const n=new Set(i.Nv),a=new Set(i.SP),r=new Set(i.gN),l=new Set(i.qt);function s(t){return n.has(t)}function c(t){return a.has(t)}function d(t){return r.has(t)}function m(t){return l.has(t)}},4411:(t,e,o)=>{o.d(e,{Z:()=>i});class i{constructor(t){this.fnRegistry=t,this.onClassCreate=({id:t,name:e,args:o})=>{const i=this.classes.get(e);if(!i)return void console.error(`ClassRegistry#onClassCreate: class ${e} not found`);const n=i.scope?new i.ClassConstructor(i.scope,...o):new i.ClassConstructor(...o);i.hosts.set(t,n)},this.onMethodUse=({id:t,name:e,method:o,args:i})=>{const n=this.classes.get(e);if(!n)return void console.error(`ClassRegistry#onMethodUse: class ${e} not found`);const a=n.hosts.get(t);if(a){if(a[o])return"destroy"===o&&n.hosts.delete(t),a[o](...i);console.error(`ClassRegistry#onMethodUse: method ${o} in instance ${t} in class ${e} not found`)}else console.error(`ClassRegistry#onMethodUse: instance ${t} in class ${e} not found`)},this.classes=new Map,this.idCounter=0,this.fnRegistry.set("createClass",this.onClassCreate),this.fnRegistry.set("classMethodUse",this.onMethodUse)}set(t,e,o){const i=this,n={ClassConstructor:e,hosts:new Map,proxies:new Map,scope:o};return this.classes.set(t,n),{get:o=>{class n{constructor(...e){this.id=i.idCounter++,i.fnRegistry.get(o,"createClass")({id:this.id,args:e,name:t})}}return Object.getOwnPropertyNames(e.prototype).forEach((e=>{"constructor"!==e&&(n.prototype[e]=function(...n){return i.fnRegistry.get(o,"classMethodUse")({id:this.id,name:t,method:e,args:n})})})),n}}}}},7256:(t,e,o)=>{o.d(e,{D:()=>r,H:()=>a});var i=o(5549),n=o(3675);class a extends n.c{constructor(){super(),this.workers=new Map}addWorker(t,e){this.workers.set(t,e),e.addEventListener("message",(e=>{const{to:o,msg:i,transferable:n}=e.data,a={from:t,to:o,msg:i,transferable:n};this.routeMessage(a)}))}send(t,e,o){const n=this.workers.get(t);if(n){const a={to:t,from:i.P.Main,msg:e,transferable:o};void 0!==o?n.postMessage(a,o):n.postMessage(a)}}broadcast(t){this.workers.forEach(((e,o)=>{const n={to:o,from:i.P.Main,msg:t};e.postMessage(n)}))}routeMessage(t){const{from:e,to:o,transferable:n,msg:{type:a}}=t;if(o===i.P.Main)this.emit("message",t);else if(o===i.P.All)e!==i.P.Main&&this.emit(a,t),this.workers.forEach(((o,i)=>{i!==e&&(void 0!==n?o.postMessage(t,n):o.postMessage(t))}));else{const e=this.workers.get(o);e&&(void 0!==n?e.postMessage(t,n):e.postMessage(t))}}}class r extends n.c{constructor(t){super(),this.worker=t,t.addEventListener("message",(t=>{const e=t.data;this.emit("message",e)}))}send(t,e,o){const i={to:t,msg:e,transferable:o};this.worker.postMessage(i,o)}broadcast(t){const e={to:i.P.All,msg:t};this.worker.postMessage(e)}}},4500:(t,e,o)=>{o.d(e,{J:()=>n});var i=o(5549);class n{constructor(t){this.onMessage=t=>{const{from:e,msg:o}=t;switch(o.type){case i.C.FunctionUse:this.onFunctionUse(o,e);break;case i.C.FunctionResult:this.onFunctionResult(o)}},this.connector=t,this.functions=new Map,this.functionIdCounter=0,this.pendingFunctions=new Map,t.on("message",this.onMessage)}set(t,e){this.functions.set(t,e)}get(t,e){return(...o)=>{const n=this.functionIdCounter++,a=new Promise((t=>{this.pendingFunctions.set(n,t)})),r={type:i.C.FunctionUse,data:{id:n,name:e,args:o}};return this.connector.send(t,r),a}}onFunctionUse(t,e){const{data:{name:o,args:i,id:n}}=t,a=this.functions.get(o);if(a){const t=a(...i);t&&t.then?Promise.resolve(t).then((t=>this.sendFunctionResult(e,n,t))):this.sendFunctionResult(e,n,t)}else console.error(`FnRegistry#onFunctionUse: function ${o} not found`)}sendFunctionResult(t,e,o){const n={type:i.C.FunctionResult,data:{id:e,result:o}};o&&o.transferable?this.connector.send(t,n,o.transferable):this.connector.send(t,n)}onFunctionResult(t){const{data:{id:e,result:o}}=t,i=this.pendingFunctions.get(e);i?(i(o),this.pendingFunctions.delete(e)):console.error(`FnRegistry#onFunctionResult: pending function ${e} not found`)}}},5549:(t,e,o)=>{var i,n;o.d(e,{C:()=>n,P:()=>i}),function(t){t[t.Main=0]="Main",t[t.Parser=1]="Parser",t[t.Labeling=2]="Labeling",t[t.All=3]="All"}(i||(i={})),function(t){t[t.FunctionUse=0]="FunctionUse",t[t.FunctionResult=1]="FunctionResult"}(n||(n={}))},1684:(t,e,o)=>{o.d(e,{BL:()=>r,U2:()=>a,Vx:()=>c,rS:()=>s,sT:()=>l});var i=o(291);const n={easing:"easeInOutQuad",forceFinalValue:!0,renderAfterUpdate:!0};function a(t,e){return e.tickers[t]}function r(t,e,o,i,a,r,l){let s;e.animationGroup&&(s=Object.keys(o.tickers).filter((t=>o.tickers[t].animationGroup===e.animationGroup))),o.tickers[t]=Object.assign(Object.assign(Object.assign({},n),e),{from:i,to:a,duration:r,attributes:l,startTime:o.time,alreadyStartedGroupTickers:s})}function l(t,e){delete e.tickers[t]}function s(t,e){return!!e.tickers[t]}function c(t,e,o){const i=o.tickers[t];if(!i)return;if(i.alreadyStartedGroupTickers&&i.alreadyStartedGroupTickers.some((t=>!!o.tickers[t])))return void(i.startTime=o.time);const n=o.time-i.startTime;let a;if(i.from.length){a=[];for(let t=0;t<i.from.length;t++){const e=d(i.easing,i.from[t],i.to[t],i.duration,n);a.push(e)}}else a=d(i.easing,i.from,i.to,i.duration,n);let r=!1;n>=i.duration&&(i.forceFinalValue&&(a=i.to),r=!0),e.step&&e.step(o,a,i.attributes),r&&(l(t,o),e.complete&&e.complete(o)),i.renderAfterUpdate&&(o.needRerender=!0)}function d(t,e,o,n,a){return i[t](a,e,o-e,n)}},6392:(t,e,o)=>{o.d(e,{Bs:()=>_,C5:()=>D,CJ:()=>x,HL:()=>I,IR:()=>G,L7:()=>W,Ny:()=>F,Oy:()=>Z,Sl:()=>z,VV:()=>w,VW:()=>U,Z$:()=>O,_W:()=>$,a2:()=>R,aM:()=>j,aq:()=>B,b5:()=>S,cL:()=>b,gx:()=>f,hm:()=>N,iq:()=>Y,pV:()=>k,qu:()=>T,rL:()=>P,vX:()=>E,vl:()=>y,x7:()=>X,xG:()=>A,xH:()=>v,z6:()=>q});var i=o(378),n=o(9450),a=o(4716),r=o(6208),l=o.n(r),s=o(7188),c=o(2435),d=o(267),m=o(9748),h=o(6273),p=o(8194),u=o(9073);const g=[0,0,0];function _(t){return{coords:t,size:B(t[2]),offset:Z(t)}}function f(t){return`${t[0]}_${t[1]}_${t[2]}_${t[3]}`}function y(t,e){return`${f(t)}_${e.stringify()}`}function b(t){const e=t.split("_");return[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}function x(t){const e=new(l())(t),o=m.F.read(e),{x:i,y:n,zoom:a,tiles:r}=o.tileGroups[0];return r.map((({regionId:t,hash:e,data:o})=>(o||(console.warn(`Tile ${a}_${i}_${n} from region ${t} is corrupt (has no data)`),o=new Uint8Array(0)),{data:o,regionId:t,metatileHash:(0,s.SD)(e)})))}function v(t){return t.map((t=>({regionId:t.regionId,metatileHash:t.metatileHash})))}function w(t){const e=4*Math.ceil(t.byteLength/4),o=new ArrayBuffer(e);return new Uint8Array(o).set(t),o}function z(t){const[e,o,i]=t;return{min:Z([e,o,i,i]),max:Z([e+1,o+1,i,i])}}function F(t,e){const o=z(t);return(0,d.M4)(e,o)}function S(t,e,o,i){const n=(0,d.BS)(t.tilesBounds),a=B(e),r=Math.pow(2,e)-1,l=Math.max(Math.floor((n.min[0]+h.ed)/a),0),s=Math.min(Math.floor((n.max[0]+h.ed)/a),r),c=Math.max(Math.floor((n.min[1]+h.ed)/a),0),m=Math.min(Math.floor((n.max[1]+h.ed)/a),r),p=[];for(let o=l;o<=s;o++)for(let n=c;n<=m;n++){const a=[o,n,e,i];F(a,t.tilesBounds)&&p.push(a)}return t.demMode&&function(t,e,o,i,n){const a=t.reduce(((t,e)=>(t.add(f(e)),t)),new Set),r=new Set,l=(0,d.By)(e.tilesBounds);let s=t.slice();for(let c=o;c>=i;c--){let i=0;const m=[];s.forEach((o=>{const n=C(o),l=f(n);r.has(l)||(m.push(n),r.add(l),M(n,(o=>{const n=f(o);a.has(n)||r.has(n)||!F(o,e.demTilesBounds)||(t.push(o),a.add(n),i++)})))}));const p=B(c-1);(0,d.mW)(l,p,e.center);const u=(0,d.BS)(l),g=Math.pow(2,o)-1,_=Math.max(Math.floor((u.min[0]+h.ed)/p),0),y=Math.min(Math.floor((u.max[0]+h.ed)/p),g),b=Math.max(Math.floor((u.min[1]+h.ed)/p),0),x=Math.min(Math.floor((u.max[1]+h.ed)/p),g);for(let t=_;t<=y;t++)for(let e=b;e<=x;e++){const o=[t,e,c-1,n],a=f(o);!r.has(a)&&F(o,l)&&(m.push(o),i++)}if(!i)break;s=m}}(p,t,e,o,i),p}function C(t,e=1){const[o,i,n,a]=t,r=Math.pow(2,e);return[Math.trunc(o/r),Math.trunc(i/r),n-e,a]}function M(t,e){let[o,i,n]=t;const a=t[3];o*=2,i*=2,n++,e([o,i,n,a]),e([o+1,i,n,a]),e([o,i+1,n,a]),e([o+1,i+1,n,a])}function P(t,e,o,i,n,r,s,d,h,p){const u=new(l()),g={tiles:[{x:n[0],y:n[1],zoom:n[2]}]};return m.w.write(g,u),(0,c.Gr)("tiles",{host:t,tileSet:e,tileKey:r,sessionId:p,protocol:o,appId:s,lang:d,defaultLang:h,subdomain:i[Math.abs(n[0]+n[1])%i.length],request:encodeURIComponent(a.c(u.finish()))})}function I(t,e){const o=t.coords,i=e.coords,n=o[2],a=i[2];return n===a?o[0]===i[0]&&o[1]===i[1]:n<a?L(t,e):L(e,t)}function L(t,e){if(e.zoomLevel<t.zoomLevel)return!1;if(e.zoomLevel===t.zoomLevel)return e.coords[0]===t.coords[0]&&e.coords[1]===t.coords[1]&&e.detailLevel>t.detailLevel;const o=Math.pow(2,e.coords[2]-t.coords[2]),i=t.coords[0]*o,n=i+o,a=t.coords[1]*o,r=a+o,l=e.coords[0],s=e.coords[1];return l>=i&&l<n&&s>=a&&s<r}function k(t,e,o){const{coords:i}=t,n=Math.min(e,o),a=Math.pow(2,t.zoomLevel-n);return f([Math.floor(i[0]/a),Math.floor(i[1]/a),n,e])}function A(t,e,o,i){return t[k(e,o,i)]}function j(t,e){const o=[];for(const i in t){const n=t[i];L(e,n)&&o.push(n)}return o}function T(t,e,o){return i.TE(t,V(e.coords))-i.TE(t,V(o.coords))}function E(t,e){return t.filter((t=>e.has(t)))}function O(t,e,o){t[0]=e[0]*o.size/h.Bq+o.offset[0],t[1]=e[1]*o.size/h.Bq+o.offset[1],t[2]=e[2]*h._9/h.Bq}const H=n.Ue();function W(t,e,o,i){var n;H[0]=e[0][o],H[1]=e[1][o],H[2]=(null!==(n=e[2])&&void 0!==n?n:[])[o],O(t,H,i)}function R(t,e,o){t[0]=(e[0]-o.offset[0])*h.Bq/o.size,t[1]=(e[1]-o.offset[1])*h.Bq/o.size,t[2]=e[2]*h.Bq/h._9}function B(t){return Math.pow(2,32-t)}function N(t){return t[0]>=0&&t[0]<=h.Bq&&t[1]>=0&&t[1]<=h.Bq}function D(t,e){return t*h.sX/(h.Bq*Math.pow(2,e))}function U(t){return t/h._9*h.Bq}function Z(t){const e=B(t[2]),o=2147483648;return n.al(t[0]*e-o,t[1]*e-o,0)}function G(t){const e=2147483648;return[t[0]+e,t[1]+e,32,32]}function V(t){const e=B(t[2]),o=2147483648;return n.al((t[0]+.5)*e-o,(t[1]+.5)*e-o,0)}function q(t,e){const o=2147483648,i=B(e);return[(t[0]-i/2+o)/i,(t[1]-i/2+o)/i,e,e]}function X(t,e=1){const o=Math.max(t.max[0]-t.min[0],t.max[1]-t.min[1],1)*e,n=32-Math.log(o)/Math.LN2,a=i.Ue();return(0,p.be)(a,t),q(a,n)}const $=t=>{const[e,o,i,n]=t;return[e,Math.pow(2,i)-1-o,i,n]},Y=(t,e)=>{O(g,e,t);const o=(0,u.PA)(g);return(0,u.Xg)(o[1])}},9476:(t,e,o)=>{function i(t,e,o){let i,n,a,r;const l=function(){const s=Date.now()-a;s<e&&s>=0?i=setTimeout(l,e-s):(i=null,o||(r=t(...n),i||(n=null)))};return function(...s){n=s,a=Date.now();const c=o&&!i;return i||(i=setTimeout(l,e)),c&&(r=t(...n),n=null),r}}o.d(e,{D:()=>i})},6874:(t,e,o)=>{o.d(e,{f:()=>n});let i=1;function n(){return i++}},2435:(t,e,o)=>{o.d(e,{Gr:()=>l,IG:()=>s,Sy:()=>c,XK:()=>a});var i=o(9218);const n=/\{(\w+)\}/g;function a(t,e){return t.replace(n,((t,o)=>e[o]))}function r(t){const[e,o]=t.split("?");if(!o)return e;const i=o.split("&").map((t=>t.split("="))).filter((([,t])=>"undefined"!==t)).map((t=>t.join("="))).join("&");return i.length?`${e}?${i}`:e}function l(t,e){const o=a(e.host,{subdomain:e.subdomain});return r(a(i.jk[t],Object.assign(Object.assign({},e),{host:o})))}function s(t,e){return r(a(t,e))}function c(t,e){let o=0;for(let t=0;t<e.length;t++)o+=e.charCodeAt(t);return t[o%t.length]}},2696:(t,e,o)=>{o.d(e,{S:()=>r});var i=o(9899),n=o(9218),a=o(7486);class r{constructor(){this.packer=new i.Z(n.a5[0],n.a5[1]),this.currentAtlasIndex=0,this.packedRasters=[],this.rastersToLoad=[],this.newRasterSets=new Map}addNewRasterSet(t,e){let o=this.newRasterSets.get(t);o||(o=[],this.newRasterSets.set(t,o)),o.push(e)}pack(t,e,o){t.isSvg?this.packSvg(t,e.map((t=>({w:t,h:t}))),o):this.packPng(t,e,o)}packSvg(t,e,o){const{rasters:a}=t,r=new Set;for(const{w:t,h:e}of a)r.add(`${t}_${e}`);for(const l of e){const e=l.w*o,s=l.h*o;if(r.has(`${e}_${s}`))continue;let c=this.packer.packOne(e+2,s+2);null===c&&(this.packer=new i.Z(n.a5[0],n.a5[1]),this.currentAtlasIndex++,c=this.packer.packOne(e+2,s+2));const d=a.length,m={rasterSetIndex:t.index,rasterIndex:d,w:e,h:s,x:c.x+1,y:c.y+1,anchorX:t.anchorX,anchorY:t.anchorY,atlasIndex:this.currentAtlasIndex,isPacked:!0};a.push(m),this.packedRasters.push(t.index,d,m.x,m.y,m.w,m.h,this.currentAtlasIndex)}}addRastersToLoad(t,e){this.rastersToLoad.push(t,e.rasterSetIndex,e.rasterIndex)}getNewRasterSets(){const t=this.newRasterSets;return this.newRasterSets=new Map,t}getPackedRasters(){if(0===this.packedRasters.length)return;const t=new Uint16Array(this.packedRasters);return this.packedRasters=[],t}getRastersToLoad(){const t=new Float64Array(this.rastersToLoad);return this.rastersToLoad=[],t}packPng(t,e,o){const{rasters:r}=t;for(const l of e){const e=l*o,s=(0,a.Bl)(r,e,!1);if(void 0===s)continue;const c=t.rasters[s];if(c.isPacked)continue;let d=this.packer.packOne(c.w+2,c.h+2);null===d&&(this.packer=new i.Z(n.a5[0],n.a5[1]),this.currentAtlasIndex++,d=this.packer.packOne(c.w+2,c.h+2)),c.x=d.x+1,c.y=d.y+1,c.atlasIndex=this.currentAtlasIndex,c.isPacked=!0,this.packedRasters.push(t.index,s,c.x,c.y,c.w,c.h,this.currentAtlasIndex)}}}},4576:(t,e,o)=>{o.d(e,{rC:()=>l});var i=o(2730);const n=.8;class a{constructor(t,e){this.offset=0,this.stride=e,this.buffer=new ArrayBuffer(t),this.view=new Int32Array(this.buffer),this.comittedOffsets=0,this.watermark=t/e*n}extend(){const t=2*this.buffer.byteLength;this.watermark=t/this.stride*n;const e=new ArrayBuffer(t),o=new Int32Array(e);return o.set(this.view),this.buffer=e,this.view=o,e}}class r{constructor(t){this.offset=0,this.buffer=new Int32Array(t),this.comittedOffsets=0,this.watermark=t*n}extend(){const t=2*this.buffer.length;this.watermark=t*n;const e=new Int32Array(t);e.set(this.buffer),this.buffer=e}}class l{constructor(t,e,o,n,l){this.drawMode=l;const s="buildingModel"!==t?67200:336e3,c=(0,i.vP)(t,e);this.elements=new a(s,c),this.indices=new r(2*s/c),this.views={},this.binder=n,n(this,this.elements.buffer),this.attributes=o}resetOffsets(){this.elements.offset=0,this.elements.comittedOffsets=0,this.indices.offset=0,this.indices.comittedOffsets=0}commit(){this.elements.comittedOffsets=this.elements.offset,this.indices.comittedOffsets=this.indices.offset}rollback(){this.elements.offset=this.elements.comittedOffsets,this.indices.offset=this.indices.comittedOffsets}checkWatermarks(){let t=0;const e=this.elements;e.offset>e.watermark&&(e.offset>=e.buffer.byteLength/e.stride&&(t=1),this.binder(this,e.extend()));const o=this.indices;return o.offset>o.watermark&&(o.offset>=o.buffer.length&&(t=1),o.extend()),t}}},2618:(t,e,o)=>{o.d(e,{TD:()=>c,gl:()=>n});var i=o(6273);const n=4294967295,a=n-1,r={},l=["main","parser","labeling"];let s=0;l.forEach((t=>{const e=s+Math.floor(a/l.length);r[t]={min:s,max:e-1e6},s=e}));class c{constructor(t){this.ids=[],this.phases=[],this.sublayers=[],this.styleIds=[],this.layerIds=[],this.instanceIds=[],this.objectClasses=[],this.floorIds=[],this.center=[],this.strings={},this.minIdentifyIndex=r[t].min,this.maxIdentifyIndex=r[t].max,this.index=this.minIdentifyIndex}getIndex(t){var e,o,a,r,l,s,c,d,m,h;if("number"==typeof t.id)return n;const p=this.index+this.ids.length/2;this.ids.push(t.id.lo,t.id.hi),this.floorIds.push(null!==(o=null===(e=t.floorId)||void 0===e?void 0:e.lo)&&void 0!==o?o:n,null!==(r=null===(a=t.floorId)||void 0===a?void 0:a.hi)&&void 0!==r?r:n),this.phases.push(t.layer.renderIndex),this.sublayers.push(null!==(c=null===(s=null===(l=t.metatile)||void 0===l?void 0:l.dictionaries.db_sublayer)||void 0===s?void 0:s[t.sublayer])&&void 0!==c?c:NaN),this.styleIds.push(t.styleId),this.layerIds.push(t.layer.innerId),this.instanceIds.push(null!==(d=t.instanceId)&&void 0!==d?d:0);const{center:u,objectClass:g}=t;if(u?this.center.push(Math.round(u[0]),Math.round(u[1])):this.center.push(i.Cd,i.Cd),"string"==typeof g){const e=null===(h=null===(m=t.metatile)||void 0===m?void 0:m.dictionaries.db_object_class)||void 0===h?void 0:h[g];e?this.objectClasses.push(e):(this.objectClasses.push(0),this.strings[p]={objectClass:g})}else this.objectClasses.push(n);return p}getPacked(){const t=new Uint32Array(this.ids).buffer,e=new Uint32Array(this.floorIds).buffer,o=new Float32Array(this.phases).buffer,i=new Uint32Array(this.sublayers).buffer,n=new Uint16Array(this.styleIds).buffer,a=new Uint32Array(this.layerIds).buffer,r=new Uint8Array(this.instanceIds).buffer,l=new Uint32Array(this.objectClasses).buffer,s=new Int32Array(this.center).buffer,c=this.index,d=this.index+this.ids.length-1;this.index=this.index+this.ids.length,this.index>this.maxIdentifyIndex&&(this.index=this.minIdentifyIndex);const m=this.strings;return this.ids=[],this.floorIds=[],this.phases=[],this.sublayers=[],this.styleIds=[],this.layerIds=[],this.instanceIds=[],this.objectClasses=[],this.strings={},this.center=[],{idBuffer:t,floorIdBuffer:e,startIndex:c,endIndex:d,phaseBuffer:o,sublayerBuffer:i,styleIdBuffer:n,layerIdBuffer:a,instanceIdBuffer:r,objectClassBuffer:l,centerBuffer:s,strings:m}}}},9726:(t,e,o)=>{o.d(e,{P:()=>d});var i=o(2730),n=o(4576),a=o(2618),r=o(2696),l=o(2702),s=o(4245),c=o(6273);class d{constructor(t){this.atlasPacker=new r.S,this.geoIds=new Uint32Array(0),this.floorHidingMap=new s.g,this.modelsToLoad=new Set,this.dataModels=new Map,this.dataModelsIndex=0,this.addedBuckets=[],this.labels=[],this.idIndexer=new a.TD(t),this.buckets={},this.reset()}reset(){this.buckets={},this.addedBuckets=[],this.geoIds=new Uint32Array(0),this.floorHidingMap.clear(),this.labels=[],this.modelsToLoad.clear()}addLabel(t){this.labels.push(t)}addModelToLoad(t){this.modelsToLoad.add(t)}addModelToLoadByUrl(t){const e=this.dataModels.get(t);if(e)return e;this.dataModelsIndex++;const o=-this.dataModelsIndex;return this.dataModels.set(t,o),o}getDataModelUrl(t){let e;return this.dataModels.forEach(((o,i)=>{o===t&&(e=i)})),e}getBucket(t,e,o,i,a=c.Fg){let r=this.buckets[t];void 0===r&&(r={},this.buckets[t]=r);let s=r[e];void 0===s&&(s=r[e]=[]);for(let t=s.length-1;t>=0;t--){const e=s[t];if((0,l.wy)(o,e.attributes))return this.addedBuckets.push(e),e}const d=new n.rC(t,e,o,i,a);return s.push(d),this.addedBuckets.push(d),d}isOverloaded(){const t=this.addedBuckets;let e=0,o=0;for(;o<t.length;)e+=t[o++].checkWatermarks();const i=e>0;if(i)for(;o--;)t[o].rollback();else for(;o--;)t[o].commit();return t.length=0,i}setGeoIds(t){this.geoIds=t}addFloorHidingMap(t,e){let o=this.floorHidingMap.get(e);void 0===o&&(o=[]),o.push(t.lo,t.hi),this.floorHidingMap.set(e,o)}getAccumulatedData(){const t=this.buckets,e=[],o=[];for(const n in t){const a=n,r=t[a];if(r)for(const t in r){const n=t,l=r[n];if(!l)continue;const s=(0,i.vP)(a,n)/4;let c=0;for(let t=0;t<l.length;t++)c+=l[t].indices.offset;if(0===c)continue;const d=[],m=new Int32Array(c*s);let h=0;for(let t=0;t<l.length;t++){const e=l[t],{elements:o,indices:i,attributes:n}=e,{view:a}=o,{buffer:r}=i;if(0===o.offset)continue;const c=h;for(let t=0;t<i.offset;t++){const e=r[t]*s;for(let t=0;t<s;t++)m[h++]=a[e+t]}d.push({attributes:n,drawMode:e.drawMode,rangeStart:4*c,rangeEnd:4*h}),e.resetOffsets()}e.push({symbol:a,sink:n,buffer:m.buffer,generatedObjects:d}),o.push(m.buffer)}}const n=this.idIndexer.getPacked();o.push(n.idBuffer,n.phaseBuffer,n.floorIdBuffer);const a=this.atlasPacker.getPackedRasters();void 0!==a&&o.push(a.buffer);const r=this.atlasPacker.getRastersToLoad();o.push(r.buffer);const l=new Int32Array(this.modelsToLoad);o.push(l.buffer),this.modelsToLoad=new Set;const s=new Uint32Array(this.geoIds);o.push(s.buffer);const c=this.floorHidingMap.serialize();this.floorHidingMap.clear();const d=this.labels;return this.labels=[],{data:e,labels:d,geoIds:s,floorHidingMap:c,packedRasters:a,rastersToLoad:r,modelsToLoad:l,identifyIds:n,transferable:o}}}},2601:(t,e,o)=>{o.d(e,{J:()=>x});var i=o(8120),n=o(5317),a=o(1188),r=o(9073),l=o(6490),s=o(9218),c=o(2730),d=o(3144),m=o(2153),h=o(2543),p=o(3249),u=o(3754),g=o(8906),_=o(6273);const f=(0,l.Id)(s.n5.axisAngleToleranceDeg),y=s.n5.axisCheckDistancePx,b=(0,l.Id)(s.n5.lineLabelsHidePitchDeg);function x(t,e,o,n,r,l,s,c,d,h,u){const g=[],_=[],f=[],y=[],b={},x=function(t,e){const o={personalPoi:new Set,commercialPoi:new Set};for(const i of t){const t=e.get(i);if(void 0!==t)for(const e of t)e.source===m.AL.PersonalPoi?o.personalPoi.add(e.id):e.pointType!==m.a_.Commercial&&e.pointType!==m.a_.CommercialCity||o.commercialPoi.add(e.id)}return o}(t,r),S=new i.W;for(let i=0;i<t.length;i++){const a=t[i],l=r.get(a);if(void 0!==l)for(let t=0;t<l.length;t++){const i=l[t],a=n.getStyle(i.styleId);if(a){if(!(i.source===m.AL.Tile&&h.has(i.id)||i.source!==m.AL.PersonalPoi&&x.personalPoi.has(i.id)&&i.pointType!==m.a_.Commercial&&i.pointType!==m.a_.CommercialCity||i.source===m.AL.PersonalPoi&&x.commercialPoi.has(i.id)))switch(i.layer.type){case"point":if(v(i,s,c,e.styleState,e.styleZoom,a,u,e.elevation)&&I(i,e.styleZoom))if(i.geometryType===m._r.Line)S.add(i);else{const t=[i.mapPointVertices[0],i.mapPointVertices[1],i.mapPointVertices[2],0];w(y,f,b,i,t,o,e,a,d)}break;case"labelLine":v(i,s,c,e.styleState,e.styleZoom,a,u,e.elevation)&&I(i,e.styleZoom)&&S.add(i);break;case"oneWayLine":I(i,e.styleZoom)&&S.add(i)}}else console.error(`Not found style ${i.styleId} in labeling#collectLabelingElements`)}}const C=S.merge();for(let t=0;t<C.length;t++){const i=C[t],a=n.getStyle(i.styleId);a?"point"===i.layer.type?z(y,f,b,i,a,o,e,d):F(_,y,i,a,o,e):console.error(`Not found style ${i.styleId} in labeling#collectLabelingElements`)}return l.forEach((({id:t,width:i,height:r,position:l,offset:s,labelingGroup:c,parentPoiId:d})=>{let m;if(d&&(m=b[d],!m))return;const h=n.getStyle(p.jf);if(!h)return void console.error(`Not found style ${p.jf} in labeling#collectLabelingElements`);const u=new a.P(t,i,r,l,s,e.buildingHeight,o,h,c,m,null==m?void 0:m.itemPriority,null==m?void 0:m.groupPriority);g.push(u)})),{boxElements:g,oneWayTileElements:_,noLabelingElements:f,otherTileElements:y}}function v(t,e,o,i,n,a,l,s){var c;const{layer:m}=t;if("point"!==m.type&&"labelLine"!==m.type)return!1;Number.isNaN(t.demElevation)?t.elevation=0:t.elevation=(t.demElevation-(null!=s?s:0))*r.C;const p=(0,h.bs)(n,i,!1,t.tileData);if(g.rJ&&!t.rtlProcessed&&(t.label=null!==(c=(0,g.iY)(t.label))&&void 0!==c?c:"",t.label2=(0,g.iY)(t.label2),t.iconLabel=(0,g.iY)(t.iconLabel),t.updateRanges(),l(_.Uo,t.ranges),(0,h.EG)(m.style.textFont).forEach((e=>{e.length&&l(e,t.ranges)})),"point"===m.type&&m.style.textFont2&&(0,h.EG)(m.style.textFont2).forEach((e=>{e.length&&l(e,t.ranges)})),"point"===m.type&&m.style.iconTextFont&&(0,h.EG)(m.style.iconTextFont).forEach((e=>{e.length&&l(e,t.ranges)})),t.rtlProcessed=!0),!t.rtlProcessed)return!1;const{ranges:u}=t,f=(0,d.rq)(m.style.textFont,p,a);let y;if(f&&t.label&&(0,d.dm)(f,u,o)&&(y=(0,d.JA)(t.label,m.style.textLetterSpacing,e[f]),t.textMetrics=y),"labelLine"===m.type)return!f||!!y;const b=(0,d.rq)(m.style.iconTextFont,p,a);b&&t.iconLabel&&(0,d.dm)(b,u,o)&&(t.iconTextMetrics=(0,d.JA)(t.iconLabel,m.style.iconTextLetterSpacing,e[b]));const x=(0,d.rq)(m.style.textFont2,p,a);return f&&t.label&&x&&t.label2&&(0,d.dm)(x,u,o)&&(t.textMetrics2=(0,d.JA)(t.label2,m.style.textLetterSpacing,e[x])),f&&t.label?!(!y||b&&t.iconLabel&&!t.iconTextMetrics||x&&t.label2&&!t.textMetrics2):!b||!t.iconLabel||!!t.iconTextMetrics}function w(t,e,o,i,n,a,r,l,s){var d;(0,c.Pn)(i,n,l,i.layer,r,a,s);for(let n=0;n<i.labelingElements.length;n++){const a=i.labelingElements[n];a.labelingGroup!==u.R_&&(null===(d=a.parent)||void 0===d?void 0:d.labelingGroup)!==u.R_?(t.push(a),a.type===m.Dl.Icon&&(o[a.label.id]=a)):e.push(a)}}function z(t,e,o,i,n,a,l,s){const{layer:c}=i;if("point"!==c.type)return;const{zoom:d,styleZoom:m}=l,p=Math.floor(m),u=d+(p-m),{startLength:g,midLength:_,finishLength:f}=i.axis,y=(0,h.bs)(p,l.styleState,!1,i.tileData),b=Math.max((0,r.h0)((0,h.vn)(c.style.duplicationSpacing,y),u),1),x=(0,r.h0)(c.style.endingOffsets,d),v=g+x,z=f-x;for(let r=g+(_-g)%b;r<z;r+=b)if(r>v){const c=i.axis,d=r,m=c.getSegmentIndex(d);w(t,e,o,i,c.interpolate(d,m),a,l,n,s)}}function F(t,e,o,i,n,a){const{layer:l}=o;if("labelLine"!==l.type&&"oneWayLine"!==l.type)return;const{zoom:c,styleZoom:d}=a,m=Math.floor(d),p=c+(m-d),{startLength:u,midLength:g,finishLength:_}=o.axis,f=(0,h.bs)(d,a.styleState,!1,o.tileData),y=(0,h.bs)(m,a.styleState,!1,o.tileData);let b,x,v,w;if("labelLine"===l.type){const t=(0,h.vn)(l.style.textFontSize,f)/s.Rq.baseSize,e=(0,h.vn)(l.style.textFontSize,y)/s.Rq.baseSize;b=o.textMetrics.maxWidth*t,x=o.textMetrics.maxWidth*e,v=(0,r.h0)((0,h.vn)(l.style.textDuplicationSpacing,y),p),w=(0,r.h0)(l.style.lineEndingOffsets,c)}else b=(0,h.vn)(l.style.lineLength,f),x=(0,h.vn)(l.style.lineLength,y),v=(0,r.h0)((0,h.vn)(l.style.duplicationSpacing,y),p),w=(0,r.h0)(l.style.endingOffsets,c);const z=(0,r.h0)(x,p),F=(0,r.h0)(b,c)/2,C=v+z,M=u+(g-u)%C,P=u+F+w,I=_-F-w,L="labelLine"!==l.type?t:e;for(let t=M;t<I;t+=C)t>P&&S(L,o,t,F,b,n,a,i)}function S(t,e,o,i,a,l,c,d){const p=e.axis,{zoom:u,styleZoom:g}=c,{startLength:_,finishLength:x}=p,v=p.getSegmentIndex(o),w=p.interpolate(o,v);if((0,r.gr)(l.position,w,c.center)>b||!function(t,e,o,i,n,a){if("oneWayLine"===t.layer.type)return!0;const l=t.axis,c=(0,h.bs)(n,a,!1,t.tileData),d=(0,h.vn)(t.layer.style.textFontSize,c)/s.Rq.baseSize,m=l.getSegmentIndex(e-o),p=l.getSegmentIndex(e+o),u=(0,r.h0)(y*d,i);for(let t=m;t<p;t++){if(t>1&&C(l.angles[t-1],l.angles[t])>f)return!1;const e=l.getSegmentIndex(l.lengths[t]-u);if(0!==e){if(C(l.angles[e],l.angles[l.getSegmentIndex(l.lengths[t]+u)])>f)return!1}}return!0}(e,o,i,u,g,c.styleState))return;const z="oneWayLine"===e.layer.type,F=z?m.Dl.OneWayLine:m.Dl.LineText,S=new n.x(e,F,w,c.buildingHeight,l,d);S.anchorPosition=o,S.anchorSegmentIndex=v,S.halfLabelWidth=i,z||(S.overflowStyleZoom=(0,r.X$)((0,r.to)(a,x-_),w),function(t,e,o,i,n,a){const{axis:l,layer:s}=e;if("labelLine"!==s.type)return;const{zoom:c,styleZoom:d}=n,m=(0,h.bs)(d,n.styleState,!1,e.tileData),p=(0,h.vn)(s.style.textFontSize,m),u=p/2,g=(0,r.h0)(p,c),_=(0,r.h0)(s.style.textLabelingSideMargin,c),f=o-i+g/2-_,y=o+i-g/2+_;let b=l.getSegmentIndex(f);for(let e=f;e<y;e+=g){for(;l.lengths[b]<e;)b++;P(t,l,e,b,a,u)}for(;l.lengths[b]<y;)b++;P(t,l,y,b,a,u)}(S,e,o,i,c,l)),t.push(S)}function C(t,e){const o=Math.abs(t-e);return o>Math.PI?2*Math.PI-o:o}const M=[0,0];function P(t,e,o,i,n,a){n.putProject(M,e.interpolate(o,i)),M[0]=M[0]-t.anchorScreen[0],M[1]=M[1]-t.anchorScreen[1],t.boxes.push([M[0]-a,M[1]-a,M[0]+a,M[1]+a])}function I(t,e){const{source:o,detailLevel:i,layer:{minzoom:n,maxzoom:a}}=t,r=o===m.AL.PersonalPoi,l=r||n>i,c=r||a<i+1||i===s.Sv.maxDetailLevel;return(!l||e>=n)&&(!c||e<a)}},1188:(t,e,o)=>{o.d(e,{P:()=>l});var i=o(378),n=o(9450),a=o(2153),r=o(6273);class l{constructor(t,e,o,l,s,c,d,m,h,p,u,g){this.type=a.Dl.Box,this.marginTopBottom=0,this.marginLeftRight=0,this.id=String(t),this.label={layer:{innerId:0},styleId:-100,idLo:t,idHi:0,symbol:"nevermind",phase:NaN},this.groupPriority=null!=g?g:r.Rw,this.itemPriority=null!=u?u:1,this.parent=p,this.placementIndex=0,this.labelingGroup=h,this.labelingGroupTable=m.labelingGroups.table,this.anchorWorld=n.Ue(),n.JG(this.anchorWorld,l),0!==c&&(this.anchorWorld[2]*=c),this.anchorScreen=d.project(this.anchorWorld),i.IH(this.anchorScreen,this.anchorScreen,s),this.boxes=[[0,0,e,o]]}}},5317:(t,e,o)=>{o.d(e,{x:()=>s});var i=o(2153),n=o(3754),a=o(1245),r=o(6336);const l=new Map;class s{constructor(t,e,o,s,c,d){switch(this.anchorWorld=[0,0,0,0],this.groupPriority=0,this.labelingGroup=n.T_,this.marginTopBottom=0,this.marginLeftRight=0,this.elevation=0,this.type=e,this.label=t,this.layer=t.layer,this.elevation=t.elevation,this.id=t.id+"_"+e+"_"+Math.floor(o[0]/1e3)+"_"+Math.floor(o[1]/1e3)+this.getIconLabelPriorityToId(t),a.JG(this.anchorWorld,o),0!==s&&(this.anchorWorld[2]*=s),this.anchorScreen=c.project([this.anchorWorld[0],this.anchorWorld[1],this.anchorWorld[2]+this.elevation,0]),this.anchorPosition=0,this.anchorSegmentIndex=0,this.halfLabelWidth=0,this.commPriorityRandomFactor=NaN,this.itemPriority=e===i.Dl.Icon?t.iconPriority:t.labelPriority,this.layer.type){case"labelLine":this.labelingGroup=this.layer.style.labelingGroup,this.groupPriority=this.layer.style.textPriority;break;case"oneWayLine":this.labelingGroup=this.layer.style.labelingGroup,this.groupPriority=this.layer.style.priority;break;case"point":if(t.pointType===i.a_.Commercial||t.pointType===i.a_.CommercialCity)if(l.has(this.label.id))this.commPriorityRandomFactor=l.get(this.label.id);else{const t=(0,r.M)();this.commPriorityRandomFactor=t,l.set(this.label.id,t)}e===i.Dl.PoiText?(this.labelingGroup=this.layer.style.allowOverlap?n.R_:this.layer.style.textLabelingGroup,this.groupPriority=this.layer.style.iconImage?Math.min(this.layer.style.textPriority,this.layer.style.iconPriority):this.layer.style.textPriority,this.marginTopBottom=this.layer.style.textLabelingMargin.topBottom,this.marginLeftRight=this.layer.style.textLabelingMargin.leftRight):e===i.Dl.PoiText2?(this.labelingGroup=this.layer.style.allowOverlap?n.R_:this.layer.style.textLabelingGroup2,this.groupPriority=Math.min(this.layer.style.textPriority,this.layer.style.iconPriority),this.marginTopBottom=this.layer.style.textLabelingMargin.topBottom,this.marginLeftRight=this.layer.style.textLabelingMargin.leftRight):(this.labelingGroup=this.layer.style.allowOverlap?n.R_:this.layer.style.iconLabelingGroup,this.groupPriority=this.layer.style.iconPriority,this.marginTopBottom=this.layer.style.iconLabelingMargin.topBottom,this.marginLeftRight=this.layer.style.iconLabelingMargin.leftRight)}this.labelingGroupTable=d.labelingGroups.table,this.overflowStyleZoom=-1/0,this.boxes=[],this.placementIndex=0}getIconLabelPriorityToId(t){const{layer:e}=t;if("point"===e.type){return"_"+e.style.iconPriority.toFixed(0)+"_"+e.style.textPriority.toFixed(0)}return""}}},7516:(t,e,o)=>{o.d(e,{D$:()=>x,Ty:()=>_,dy:()=>f});var i=o(9218),n=o(2153),a=o(61),r=o(7123),l=o(9808);function s(t,e,o){const{minX:i,maxX:n,minY:a,maxY:r}=o;t.push(i,a,n-i,r-a,e)}function c(t,e,o,i){const n=t.anchorScreen,a=t.boxes[e];return{element:t,minX:n[0]+a[0]-o|0,maxX:n[0]+a[2]+o|0,minY:n[1]+a[1]-i|0,maxY:n[1]+a[3]+i|0}}function d(t,e){if(t.parent===e||t.firstLabel===e||e.parent===t||e.firstLabel===t)return!1;const o=t.labelingGroup,i=e.labelingGroup,n=t.labelingGroupTable,r=e.labelingGroupTable;return(0,a.y)(n,r,o,i)}function m(t,e,o,i,n,a){const r=c(e,o,i,n);if(r.minX>a.maxX||r.maxX<a.minX||r.minY>a.maxY||r.maxY<a.minY)return!0;const l=t.search(r);for(let t=0;t<l.length;t++)if(d(e,l[t].element))return!0;return!1}function h(t,e,o,i,a){if(m(e,t,0,i.leftRight,i.topBottom,o))t.placementIndex=-1,a&&s(a,n.m3.CommercialDead,c(t,0,i.leftRight,i.topBottom));else{t.placementIndex=0;const o=c(t,0,i.leftRight,i.topBottom);e.insert(o),a&&s(a,n.m3.CommercialAlive,o)}}function p(t,e,o,i){let a=!0;for(let r=0;r<t.boxes.length;r++)if(m(e,t,r,t.marginLeftRight,t.marginTopBottom,o)){if(a=!1,i)for(let e=0;e<t.boxes.length;e++){const o=c(t,e,t.marginLeftRight,t.marginTopBottom);let a;a=e===r?n.m3.Dead:e<r?n.m3.Alive:n.m3.Unused,s(i,a,o)}break}if(a)for(let o=0;o<t.boxes.length;o++){const a=c(t,o,t.marginLeftRight,t.marginTopBottom);e.insert(a),i&&s(i,n.m3.Alive,a)}t.placementIndex=a?0:-1}function u(t,e,o,i){t.placementIndex=-1;for(let a=0;a<t.boxes.length;a++)if(!t.firstLabel||t.firstLabel.placementIndex===a){if(!m(e,t,a,t.marginLeftRight,t.marginTopBottom,o)){const o=c(t,a,t.marginLeftRight,t.marginTopBottom);if(e.insert(o),t.placementIndex=a,i){s(i,n.m3.Alive,o);for(let e=a+1;e<t.boxes.length;e++)s(i,n.m3.Unused,c(t,e,t.marginLeftRight,t.marginTopBottom))}break}i&&s(i,n.m3.Dead,c(t,a,t.marginLeftRight,t.marginTopBottom))}}function g(t,e){return t.sort(((t,o)=>o.groupPriority-t.groupPriority||(e.has(o.id)?1:0)-(e.has(t.id)?1:0)||o.commPriorityRandomFactor-t.commPriorityRandomFactor))}function _(t){return t.type!==n.Dl.Box&&!Number.isNaN(t.commPriorityRandomFactor)}function f(t){return t.type!==n.Dl.Box&&!Number.isNaN(t.commPriorityRandomFactor)&&t.label.pointType===n.a_.CommercialCity}function y(t){return t.type!==n.Dl.Box&&!Number.isNaN(t.commPriorityRandomFactor)&&(t.label.pointType!==n.a_.CommercialCity||-1!==t.placementIndex&&t.label.pointType===n.a_.CommercialCity)}function b(t,e,o,i,n,a,r){let l=g(e.filter(f),n);if(void 0!==o){const t=l.indexOf(o);if(t===l.length-1)return;l=l.slice(t+1)}l.forEach((e=>{h(e,t,i,a.city,r)})),t.clear(),g(e.filter(y),n).forEach((e=>{h(e,t,i,a.default,r)})),t.clear()}function x(t,e,o,a){const s=e.debugLabels?[]:void 0,{size:c,viewport:d}=e,m=c[0],h=c[1],g=(i.n5.tileMultiplier-1)/2,y=Math.round(m*g),x=Math.round(h*g),v={minX:d.left-y,maxX:d.left+m+y,minY:d.top-x,maxY:d.top+h+x},w=r(),z=r();b(z,t,void 0,v,o,a,s);const F=t.sort(((t,e)=>{const i=t.label instanceof l._?t.label.hovered:0,n=e.label instanceof l._?e.label.hovered:0;return e.groupPriority-t.groupPriority||(_(e)?e.commPriorityRandomFactor:0)-(_(t)?t.commPriorityRandomFactor:0)||(o.has(e.id)?1:0)-(o.has(t.id)?1:0)||n-i||e.itemPriority-t.itemPriority||e.label.idHi-t.label.idHi||e.label.idLo-t.label.idLo||e.label.layer.innerId-t.label.layer.innerId||e.anchorWorld[0]-t.anchorWorld[0]||e.anchorWorld[1]-t.anchorWorld[1]}));for(let e=0;e<F.length;e++){const i=F[e];if(-1!==i.placementIndex)switch(i.type){case n.Dl.LineText:case n.Dl.Icon:p(i,w,v,s);f(i)&&-1===i.placementIndex&&b(z,t,i,v,o,a,s);break;case n.Dl.Box:if(!i.parent||i.parent&&-1!==i.parent.placementIndex){p(i,w,v,s);break}i.placementIndex=-1;break;case n.Dl.PoiText:case n.Dl.PoiText2:i.parent&&-1===i.parent.placementIndex||i.firstLabel&&-1===i.firstLabel.placementIndex?i.placementIndex=-1:u(i,w,v,s)}}return s}},2656:(t,e,o)=>{var i=o(9218),n=o(2730),a=o(9476),r=o(9808),l=o(7516),s=o(9726),c=o(2601),d=o(2153),m=o(7256),h=o(4500),p=o(3487),u=o(5549),g=o(4653),_=o(267),f=o(8194),y=o(8906),b=o(4874),x=o(6336);const v=new Map;!function(t){const e=new m.D(t),o=new h.J(e),w=new s.P("labeling"),z=new g.h,F=o.get(u.P.Main,"loadFont"),S=new Map,C=new Map;let M=[],P=new Map;const I=new p.c,L=new p.c,k={},A=(0,a.D)((()=>w.reset()),i.Cl);function j(t,e){for(const o of e)I.has(t,o)||(F(t,o),I.set(t,o,!0))}function T(t,e,o){if(t.has(o.label.sourceId))return 0;const i=e.get(o.id);return void 0===i||void 0===i.placementIndex||i.type===d.Dl.Icon&&i.layer.innerId!==o.layer.innerId?1:i.placementIndex===o.placementIndex?0:1}o.set("setComPoiRandomSeed",(t=>{(0,x.P)(t)})),o.set("appendLabels",((t,e,o,i,n)=>{const a=(0,r.v)(o,e,z,i,n);S.set(t,a)})),o.set("appendLabelBox",((t,e)=>{C.set(t,e)})),o.set("removeEmptyBoxLabel",(t=>{C.delete(t)})),o.set("removeLabels",(t=>{S.delete(t),C.delete(t)})),o.set("processLabels",((t,e,o,i,a,r,s,m)=>{const h=new Set(r),p=new b.V(o),u=new Set,g=e;t.forEach((({sourceId:t,animate:e,labelsKeys:o})=>{e||u.add(t),g.push(...o)}));const{boxElements:y,oneWayTileElements:x,otherTileElements:F,noLabelingElements:I}=(0,c.J)(g,o,p,z,S,C,k,L,a,h,j),E=(0,l.D$)([...F,...y],o,m?v:P,s),O=[...I,...x,...F],H=new Map;for(let t=0;t<O.length;t++){const e=O[t];-1!==e.placementIndex&&H.set(e.id,e)}for(let t=0;t<O.length;t++){const e=O[t],{label:{styleId:r,layer:l}}=e;if(-1===e.placementIndex)continue;const s=T(u,P,e),c=z.getStyle(r);c?(0,n.SV)(c,l,w,e,s,a,o,i):console.error(`Not found style ${r} in labeling#processLabels`)}for(let t=0;t<M.length;t++){const e=M[t],{id:r,label:l,layer:s}=e,{styleId:c}=l,m=z.getStyle(c);if(!m){console.error(`Not found style ${c} in labeling#processLabels`);continue}if(u.has(e.label.sourceId))continue;const h=e.placementIndex,p=H.get(r);-1!==h&&(e.placementIndex!==(null==p?void 0:p.placementIndex)||e.type===d.Dl.Icon&&e.layer.innerId!==(null==p?void 0:p.layer.innerId))&&(o.styleZoom<e.overflowStyleZoom||o.styleZoom<s.minzoom||o.styleZoom>=s.maxzoom||(0,n.SV)(m,s,w,e,-1,a,o,i))}M=O,P=H;const W=w.getAccumulatedData(),R=[];for(const t of y)-1!==t.placementIndex&&R.push(t.label.idLo);const B=new Map,N=(0,_.BS)(o.tilesBounds);for(const t of F)if(-1!==t.placementIndex&&(0,l.Ty)(t)&&f.r3(N,t.anchorWorld)){const e={};(0,l.dy)(t)&&(e.adsPriority="city"),B.set(t.label.id,e)}const D={survivedLabelBoxIds:R,survivedCommPois:Array.from(B).map((t=>{const e={id:t[0]};return void 0!==t[1].adsPriority&&(e.adsPriority=t[1].adsPriority),e})),collectorOutput:W,transferable:W.transferable};if(E){const t=new Int32Array(E.length);t.set(E),D.labels=t.buffer}return A(),D})),o.set("appendFont",((t,e)=>{k[t]||(k[t]={});const o=k[t];for(const t in e)o[t]=e[t]})),o.set("markFontAsLoaded",((t,e)=>{L.set(t,e,!0)})),o.set("addNewRasterSets",((t,e)=>{const o=z.getStyle(t);if(!o)return void console.error(`Not found style ${t} in labeling#addNewRasterSets`);const{rasterSets:i}=o;e.forEach((t=>{i.byIndex[t.index]=t,i.byKey[t.key]=t}))})),o.set("updatePackingInfo",((t,e)=>{const o=z.getStyle(t);if(!o)return void console.error(`Not found style ${t} in labeling#updatePackingInfo`);const{rasterSets:i}=o,n=e.length/7;for(let t=0;t<n;t++){const o=e[7*t],n=e[7*t+1],a=e[7*t+6],r=e[7*t+2],l=e[7*t+3],s=e[7*t+4],c=e[7*t+5],d=i.byIndex[o];if(void 0!==d)if(d.isSvg)d.rasters[n]={rasterIndex:n,rasterSetIndex:o,x:r,y:l,w:s,h:c,anchorX:d.anchorX,anchorY:d.anchorY,atlasIndex:a,isPacked:!0};else{const t=d.rasters[n];if(void 0===t){console.error(`Not found raster with index ${n} and raster set index ${o}`);continue}t.x=r,t.y=l,t.atlasIndex=a,t.isPacked=!0}else console.error(`Not found raster set with index ${o}`)}})),o.set("clearPreviousLabels",(()=>{M=[],P.clear()})),o.set("syncStyle",((...t)=>z.proxySyncStyle(...t))),o.set("loadRtlPlugin",y.ng),o.set("markRtlPluginLoaded",(()=>{y.dp&&(0,y.dp)()}))}(self)},9808:(t,e,o)=>{o.d(e,{_:()=>m,v:()=>d});var i=o(7999),n=o(3672),a=o(2153),r=o(6392),l=o(6201),s=o(2618);function c(t){return"labelLine"===t.type||"point"===t.type||"oneWayLine"===t.type}function d(t,e,o,i,n){const a=[];for(const r of t)for(const t of r.labels){const s=o.getStyle(t.styleId);if(!s){console.error(`Not found style ${t.styleId} in unpackPreLabelingResult`);continue}const d=s.layersById[t.layerId];if(!d||!c(d)){console.error(`Not found layer: ${t.layerId} in style ${t.styleId} in unpackPreLabelingResult`);continue}const h=new m(t,d,e,r.metatileHash);switch(t.type){case l.R2.Point:h.setSpecificPointAttributes(t,i,n);break;case l.R2.Line:h.setSpecificLineAttributes(t,i,n);break;case l.R2.OneWayLine:h.setSpecificOneWayAttributes(t)}a.push(h)}return a}class m{constructor(t,e,o,i){this.rtlProcessed=!1,this.labelingElements=[],this.id="",this.idLo=0,this.idHi=0,this.detailLevel=0,this.labelPriority=0,this.label="",this.ranges=[],this.pointType=a.a_.Common,this.iconPriority=0,this.identifyIndex=s.gl,this.identifyPoiLabelIndex=s.gl,this.hovered=0,this.label2Priority=0,this.mapPointVertices=[0,0,0],this.demElevation=0,this.elevation=0,this.componentDistanceStartWorld=0,this.componentDistanceEnd=0,this.componentDistanceStart=0,this.objectLengthWorld=0,this.layer=e,this.styleId=t.styleId,this.source=o,this.sourceId=t.sourceId,this.metatileHash=i,this.geometryType=t.type===l.R2.Point?t.geometryType:a._r.Line,this.tileData=t.tileData,this.labelPriority=t.labelPriority,this.detailLevel=t.tileCoords[2],this.idLo=t.id.lo,this.idHi=t.id.hi,this.id=(0,n.Ak)(t.id)}setSpecificPointAttributes(t,e,o){if("point"!==this.layer.type)throw new Error("Label: layer type is not a point");const n=this.layer.style;this.pointType=t.pointType,this.label2Priority=t.label2Priority,this.iconPriority=t.iconPriority,this.identifyIndex=t.identifyIndex,this.identifyPoiLabelIndex=t.identifyPoiLabelIndex,this.hovered=t.hovered,this.demElevation=t.demElevation;const s={type:"labeling",interpolateExpressionAsStep:!0,tileData:t.tileData,styleState:e,styleZoom:o};this.label=(0,i.lD)((0,l.It)(n.textField,s),n.textMaxLengthPerLine),n.textField2&&(this.label2=(0,i.lD)((0,l.It)(n.textField2,s),n.textMaxLengthPerLine)),"point"===this.layer.type&&n.iconTextField&&(this.iconLabel=(0,i.lD)((0,l.It)(n.iconTextField,s),n.textMaxLengthPerLine));const c=(0,r.Bs)(t.tileCoords);this.mapPointVertices=[];const d=[0,0,0],m=[0,0,0];if(t.geometryType===a._r.Point)(0,r.L7)(this.mapPointVertices,t.vertices,0,c),this.layer.style.allowElevation||(this.mapPointVertices[2]=0);else{for(let e=0;e<t.vertices[0].length;e++)d[0]=t.vertices[0][e],d[1]=t.vertices[1][e],(0,r.Z$)(m,d,c),this.mapPointVertices.push(m[0],m[1],m[2]);this.componentDistanceStart=t.componentDistanceStart,this.componentDistanceEnd=t.componentDistanceEnd,this.componentDistanceStartWorld=(0,r.C5)(this.componentDistanceStart,t.tileCoords[2]),this.objectLengthWorld=(0,r.C5)(t.objectLength,t.tileCoords[2])}}setSpecificLineAttributes(t,e,o){if("labelLine"!==this.layer.type)throw new Error("Label: layer type is not a labelLine");const i={type:"labeling",interpolateExpressionAsStep:!0,tileData:t.tileData,styleState:e,styleZoom:o};this.label=(0,l.It)(this.layer.style.textField,i);const n=(0,r.Bs)(t.tileCoords);this.mapPointVertices=[];const a=[0,0,0],s=[0,0,0];for(let e=0;e<t.vertices[0].length;e++)a[0]=t.vertices[0][e],a[1]=t.vertices[1][e],(0,r.Z$)(s,a,n),this.mapPointVertices.push(s[0],s[1],s[2]);this.componentDistanceStart=t.componentDistanceStart,this.componentDistanceEnd=t.componentDistanceEnd,this.componentDistanceStartWorld=(0,r.C5)(this.componentDistanceStart,t.tileCoords[2]),this.objectLengthWorld=(0,r.C5)(t.objectLength,t.tileCoords[2])}setSpecificOneWayAttributes(t){const e=(0,r.Bs)(t.tileCoords);this.mapPointVertices=[];const o=[0,0,0],i=[0,0,0];for(let n=0;n<t.vertices[0].length;n++)o[0]=t.vertices[0][n],o[1]=t.vertices[1][n],(0,r.Z$)(i,o,e),this.mapPointVertices.push(i[0],i[1],i[2]);this.componentDistanceStart=t.componentDistanceStart,this.componentDistanceEnd=t.componentDistanceEnd,this.componentDistanceStartWorld=(0,r.C5)(this.componentDistanceStart,t.tileCoords[2]),this.objectLengthWorld=(0,r.C5)(t.objectLength,t.tileCoords[2])}updateRanges(){this.ranges=(0,i.Go)([this.label,this.label2,this.iconLabel])}}},6434:(t,e,o)=>{o.d(e,{x:()=>i});class i{constructor(t,e,o){this.line=t,this.lengths=[],this.angles=[];let i=e,n=t[0],a=t[1];const r=t.length/3;for(let e=0;e<r;e++){const o=t[3*e]-n,r=t[3*e+1]-a;i+=Math.sqrt(o*o+r*r),this.lengths.push(i),n+=o,a+=r}this.finishLength=this.lengths[this.lengths.length-1],this.startLength=this.lengths[0],this.midLength=o/2,this.vertexCount=r,this.angles.push(0);for(let t=1;t<r;t++){const e=this.line[3*(t-1)],o=this.line[3*t],i=this.line[3*(t-1)+1],n=this.line[3*t+1];this.angles.push(Math.atan2(n-i,o-e))}}interpolate(t,e){const o=e,i=o-1,n=this.lengths[i],a=(t-n)/(this.lengths[o]-n);return[(1-a)*this.line[3*i]+a*this.line[3*o],(1-a)*this.line[3*i+1]+a*this.line[3*o+1],0,this.angles[e]]}getSegmentIndex(t){for(let e=0;e<this.lengths.length;e++)if(t<this.lengths[e])return e;return this.lengths.length}}},8120:(t,e,o)=>{o.d(e,{W:()=>n});var i=o(6434);class n{constructor(){this.labels={}}add(t){const e=t.id,o=t.componentDistanceStart;void 0===this.labels[e]&&(this.labels[e]={});const i=this.labels[e];void 0===i[o]&&(i[o]=[]),i[o].push(t)}merge(){const t=[];for(const e in this.labels){const o=this.labels[e],n=Object.keys(o).sort(((t,e)=>Number(t)-Number(e)));let a=0;for(;a<n.length;){const e=n[a];if(0===o[e].length){a++;continue}const r=[];let l=o[e].pop();for(;void 0!==l;)r.push(l),l=0===l.componentDistanceStart&&0===l.componentDistanceEnd||void 0===o[l.componentDistanceEnd]?void 0:o[l.componentDistanceEnd].pop();if(1===r.length){const e=r[0];e.axis=new i.x(e.mapPointVertices,e.componentDistanceStartWorld,e.objectLengthWorld),t.push(e)}else r.length>1&&t.push(this.stitch(r))}}return t}stitch(t){let e=0;for(let o=0;o<t.length;o++)e+=t[o].mapPointVertices.length;e-=3*(t.length-1);const o=new Int32Array(e);let n=0;for(let e=0;e<t.length;e++){const i=t[e].mapPointVertices;for(let t=e>0?3:0;t<i.length;t++)o[n++]=i[t]}const a=t[0];return a.axis=new i.x(o,a.componentDistanceStartWorld,a.objectLengthWorld),t[0]}}},61:(t,e,o)=>{function i(t,e,o,i){const a=n(t,o,i),r=n(e,o,i);return void 0===a&&void 0===r||(void 0===a?void 0===r||r:void 0===r?void 0===a||a:a||r)}function n(t,e,o){const i=t[e];if(void 0!==i)return i[o]}o.d(e,{y:()=>i})},6336:(t,e,o)=>{o.d(e,{M:()=>n,P:()=>a});var i=o(173);let n=Math.random;const a=t=>{n=(0,i.O)(t)}},8741:(t,e,o)=>{o.d(e,{F:()=>r});var i=o(9450),n=o(1245),a=o(127);function r(t,e){var o,i,n;return{path:e,extensions:t.extensions,extensionsRequired:null!==(o=t.extensionsRequired)&&void 0!==o?o:[],extensionsUsed:null!==(i=t.extensionsUsed)&&void 0!==i?i:[],extras:t.extras,accessors:s(t.accessors),buffers:d(t.buffers),bufferViews:m(t.bufferViews),cameras:h(t.cameras),scene:null!==(n=t.scene)&&void 0!==n?n:0,scenes:g(t.scenes),nodes:_(t.nodes),materials:u(t.materials),meshes:p(t.meshes),asset:l(t.asset),animations:c(t.animations),images:f(t.images),textures:y(t.textures),samplers:b(t.samplers),skins:x(t.skins)}}function l(t){return{copyright:t.copyright,generator:t.generator,version:t.version,minVersion:t.minVersion}}function s(t=[]){return t.map((t=>{var e;return{bufferView:t.bufferView,byteOffset:null!==(e=t.byteOffset)&&void 0!==e?e:0,componentType:t.componentType,normalized:t.normalized,count:t.count,type:t.type,max:t.max,min:t.min,sparse:t.sparse,name:t.name,extensions:t.extensions,extras:t.extras}}))}function c(t=[]){return t.map((t=>({channels:t.channels,samplers:t.samplers,name:t.name,extensions:t.extensions,extras:t.extras})))}function d(t=[]){return t.map((t=>({uri:t.uri,byteLength:t.byteLength,name:t.name,extensions:t.extensions,extras:t.extras,buffer:void 0})))}function m(t=[]){return t.map((t=>({buffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength,byteStride:t.byteStride,target:t.target,name:t.name,extensions:t.extensions,extras:t.extras})))}function h(t=[]){return t.map((t=>({type:t.type,orthographic:t.orthographic,perspective:t.perspective,name:t.name,extensions:t.extensions,extras:t.extras})))}function p(t=[]){return t.map((t=>({primitives:t.primitives,name:t.name,weights:t.weights,extensions:t.extensions,extras:t.extras})))}function u(t=[]){return t.map((t=>({alphaCutoff:t.alphaCutoff,alphaMode:t.alphaMode,doubleSided:t.doubleSided,emissiveFactor:t.emissiveFactor,emissiveTexture:t.emissiveTexture,normalTexture:t.normalTexture,occlusionTexture:t.occlusionTexture,pbrMetallicRoughness:t.pbrMetallicRoughness,name:t.name,extras:t.extras,extensions:t.extensions})))}function g(t=[]){return t.map((t=>({nodes:t.nodes,extensions:t.extensions,extras:t.extras,name:t.name})))}function _(t=[]){return t.map((t=>{var e,o,r;const l=null!==(e=t.rotation)&&void 0!==e?e:[0,0,0,1],s=null!==(o=t.scale)&&void 0!==o?o:[1,1,1],c=null!==(r=t.translation)&&void 0!==r?r:[0,0,0];return{camera:t.camera,children:t.children,matrix:t.matrix?a.al(...t.matrix):void 0,rotation:n.al(...l),scale:i.al(...s),translation:i.al(...c),name:t.name,mesh:t.mesh,skin:t.skin,extras:t.extras,extensions:t.extensions}}))}function f(t=[]){return t.map((t=>({bufferView:t.bufferView,mimeType:t.mimeType,name:t.name,uri:t.uri,extensions:t.extensions,extras:t.extras,image:void 0})))}function y(t=[]){return t.map((t=>({extensions:t.extensions,extras:t.extras,name:t.name,sampler:t.sampler,source:t.source})))}function b(t=[]){return t.map((t=>({extensions:t.extensions,extras:t.extras,name:t.name,magFilter:t.magFilter,minFilter:t.minFilter,wrapS:t.wrapS,wrapT:t.wrapT})))}function x(t=[]){return t.map((t=>({joints:t.joints,extensions:t.extensions,extras:t.extras,inverseBindMatrices:t.inverseBindMatrices,name:t.name,skeleton:t.skeleton})))}},3245:(t,e,o)=>{o.d(e,{d:()=>i});const i={JPEG:"image/jpeg",PNG:"image/png",HDR:"image/vnd.radiance",KTX2:"image/ktx2",GLTEXTURE:"image/texture"}},8844:(t,e,o)=>{o.d(e,{h:()=>p});var i=o(7731),n=o(6849);let a;function r(){a=function(){return(0,i.mG)(this,void 0,void 0,(function*(){const t=yield function(){return(0,i.mG)(this,void 0,void 0,(function*(){let t=yield fetch(n.Sl).then((t=>t.text()));const e="if (typeof exports === 'object' && typeof module === 'object')",o=t.indexOf(e);return 0!==o&&(t=t.slice(0,o),t+="return DracoDecoderModule;"),t}))}();return new Function(t)()()}))}().then((t=>t)).catch((t=>{const e="Draco decoder module failed to initialize"+((null==t?void 0:t.message)?` with the following error: ${t.message}`:".");throw new Error(e)}))}function l(t){switch(t){case 5120:return"Int8Array";case 5121:return"Uint8Array";case 5122:return"Int16Array";case 5123:return"Uint16Array";case 5124:return"Int32Array";case 5125:return"Uint32Array";default:return"Float32Array"}}function s(t,e,o,i,n,a){const r=n.num_components(),l=o.num_points()*r;let s,c,d;switch(a){case"Float32Array":d=4*l,s=t._malloc(d),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_FLOAT32,d,s),c=new Float32Array(t.HEAPF32.buffer,s,l).slice(),t._free(s);break;case"Int8Array":s=t._malloc(l),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_INT8,l,s),c=new Int8Array(t.HEAP8.buffer,s,l).slice(),t._free(s);break;case"Int16Array":d=2*l,s=t._malloc(d),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_INT16,d,s),c=new Int16Array(t.HEAP16.buffer,s,l).slice(),t._free(s);break;case"Int32Array":d=4*l,s=t._malloc(d),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_INT32,d,s),c=new Int32Array(t.HEAP32.buffer,s,l).slice(),t._free(s);break;case"Uint8Array":s=t._malloc(l),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_UINT8,l,s),c=new Uint8Array(t.HEAPU8.buffer,s,l).slice(),t._free(s);break;case"Uint16Array":d=2*l,s=t._malloc(d),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_UINT16,d,s),c=new Uint16Array(t.HEAPU16.buffer,s,l).slice(),t._free(s);break;case"Uint32Array":d=4*l,s=t._malloc(d),e.GetAttributeDataArrayForAllPoints(o,n,t.DT_UINT32,d,s),c=new Uint32Array(t.HEAPU32.buffer,s,l).slice(),t._free(s);break;default:throw new Error("DRACOLoader: Unexpected attribute type.")}return{name:i,array:c,itemSize:r,componentType:a}}function c(t,e,o,i){const n=t.bufferView,a=e.bufferViews[n],r=e.buffers[a.buffer],c=new Int8Array(r.buffer).slice(a.byteOffset,a.byteOffset+a.byteLength),d=new o.Decoder,m=new o.DecoderBuffer;m.Init(c,a.byteLength);const h=function(t,e,o,i,n,a){let r,c;const d=e.GetEncodedGeometryType(o);if(d!==t.TRIANGULAR_MESH)throw new Error("DRACOLoader: Unexpected geometry type.");if(r=new t.Mesh,c=e.DecodeBufferToMesh(o,r),!c.ok()||0===r.ptr)throw new Error("DRACOLoader: Decoding failed: "+c.error_msg());const m={index:null,attributes:{}},h=r.num_points();for(const o in i){let c,d=5120;for(const[t,e]of Object.entries(a))if(t===o){d=n.accessors[e].componentType,c=n.accessors[e].count;break}if(h!==c)throw new Error(`DRACOLoader: Accessor vertex count ${c} does not match draco decoder vertex count  ${h}`);d=l(d);const p=e.GetAttributeByUniqueId(r,i[o]),u=s(t,e,r,o,p,d);m.attributes[u.name]=u}if(d===t.TRIANGULAR_MESH){const o=3*r.num_faces(),i=4*o,n=t._malloc(i);e.GetTrianglesUInt32Array(r,i,n);const a=new Uint32Array(t.HEAPU32.buffer,n,o).slice();t._free(n),m.index={array:a,itemSize:1}}return t.destroy(r),m}(o,d,m,t.attributes,e,i);return o.destroy(m),h}function d(t,e,o,i,n){const a={buffer:t,byteLength:t.byteLength,extensions:void 0,extras:void 0,name:void 0,uri:void 0};e.buffers.push(a);const r={buffer:e.buffers.length-1,byteLength:t.byteLength,byteOffset:0,byteStride:0,extensions:void 0,extras:void 0,name:n,target:i};e.bufferViews.push(r),e.accessors[o].byteOffset=0,e.accessors[o].bufferView=e.bufferViews.length-1}function m(t,e){let o;switch(e){case"Int8Array":o=new ArrayBuffer(t.length);new Int8Array(o).set(t);break;case"Uint8Array":o=new ArrayBuffer(t.length);new Uint8Array(o).set(t);break;case"Int16Array":o=new ArrayBuffer(2*t.length);new Int16Array(o).set(t);break;case"Uint16Array":o=new ArrayBuffer(2*t.length);new Uint16Array(o).set(t);break;case"Int32Array":o=new ArrayBuffer(4*t.length);new Int32Array(o).set(t);break;case"Uint32Array":o=new ArrayBuffer(4*t.length);new Uint32Array(o).set(t);break;default:o=new ArrayBuffer(4*t.length);new Float32Array(o).set(t)}return o}function h(t,e,o,i){const n=e.index.array;if(void 0!==i&&(d(n,t,i,34963,"index buffer view"),t.accessors[i].componentType=5125),void 0!==e.attributes.POSITION){d(m(e.attributes.POSITION.array,e.attributes.POSITION.componentType),t,o.POSITION,34962,"position buffer view")}if(void 0!==e.attributes.NORMAL){d(m(e.attributes.NORMAL.array,e.attributes.NORMAL.componentType),t,o.NORMAL,34962,"normal buffer view")}if(void 0!==e.attributes.TEXCOORD_0){d(m(e.attributes.TEXCOORD_0.array,e.attributes.TEXCOORD_0.componentType),t,o.TEXCOORD_0,34962,"TEXCOORD_0 buffer view")}if(void 0!==e.attributes.TEXCOORD_1){d(m(e.attributes.TEXCOORD_1.array,e.attributes.TEXCOORD_1.componentType),t,o.TEXCOORD_1,34962,"TEXCOORD_1 buffer view")}if(void 0!==e.attributes.TANGENT){d(m(e.attributes.TANGENT.array,e.attributes.TANGENT.componentType),t,o.TANGENT,34962,"Tangent buffer view")}if(void 0!==e.attributes.COLOR_0){d(m(e.attributes.COLOR_0.array,e.attributes.COLOR_0.componentType),t,o.COLOR_0,34962,"color buffer view")}if(void 0!==e.attributes.JOINTS_0){d(m(e.attributes.JOINTS_0.array,e.attributes.JOINTS_0.componentType),t,o.JOINTS_0,34963,"JOINTS_0 buffer view")}if(void 0!==e.attributes.WEIGHTS_0){d(m(e.attributes.WEIGHTS_0.array,e.attributes.WEIGHTS_0.componentType),t,o.WEIGHTS_0,34963,"WEIGHTS_0 buffer view")}if(void 0!==e.attributes.JOINTS_1){d(m(e.attributes.JOINTS_1.array,e.attributes.JOINTS_1.componentType),t,o.JOINTS_1,34963,"JOINTS_1 buffer view")}if(void 0!==e.attributes.WEIGHTS_1){d(m(e.attributes.WEIGHTS_1.array,e.attributes.WEIGHTS_1.componentType),t,o.WEIGHTS_1,34963,"WEIGHTS_1 buffer view")}}function p(t){var e;return(0,i.mG)(this,void 0,void 0,(function*(){if(!Array.isArray(t.meshes))return Promise.resolve();for(const o of t.meshes)if(Array.isArray(o.primitives))for(const i of o.primitives){if(void 0===(null===(e=i.extensions)||void 0===e?void 0:e.KHR_draco_mesh_compression))continue;a||r();const o=yield a;if(!o)continue;const n=c(i.extensions.KHR_draco_mesh_compression,t,o,i.attributes);h(t,n,i.attributes,i.indices)}}))}},3555:(t,e,o)=>{o.d(e,{Z:()=>n});var i=o(6778);class n{constructor(t){this.data=t}extractGlbData(){if(void 0===this.getCheckedGlbInfo())return{json:i.K,buffers:[]};let t;const e=[],o=this.getAllChunkInfos();for(const i of o)i.type!==n.jsonChunkType||t?i.type===n.binaryChunkType&&e.push(this.getBufferFromChunk(i)):t=this.getJsonFromChunk(i);return{json:t||i.K,buffers:e}}getCheckedGlbInfo(){const t=new Uint32Array(this.data,0,n.glbHeaderInts),e=t[0],o=t[1],i=t[2];if(this.checkEquality(e,n.glbMagic,"glb magic")&&this.checkEquality(o,n.glbVersion,"glb header version")&&this.checkEquality(i,this.data.byteLength,"glb byte length"))return{magic:e,version:o,length:i}}getAllChunkInfos(){const t=[];let e=4*n.glbHeaderInts;for(;e<this.data.byteLength;){const o=this.getChunkInfo(e);t.push(o),e+=o.length+4*n.glbChunkHeaderInts}return t}getChunkInfo(t){const e=new Uint32Array(this.data,t,n.glbChunkHeaderInts);return{start:t+4*n.glbChunkHeaderInts,length:e[0],type:e[1]}}getJsonFromChunk(t){const e=t.length,o=4*(n.glbHeaderInts+n.glbChunkHeaderInts),i=new Uint8Array(this.data,o,e),a=new TextDecoder("utf-8").decode(i);return JSON.parse(a)}getBufferFromChunk(t){return this.data.slice(t.start,t.start+t.length)}checkEquality(t,e,o){return t===e||(console.error(`[GLB MODEL PARSING ERROR] Found invalid/unsupported ${o}, expected: ${e}, but was: ${t}`),!1)}}n.glbHeaderInts=3,n.glbChunkHeaderInts=2,n.glbMagic=1179937895,n.glbVersion=2,n.jsonChunkType=1313821514,n.binaryChunkType=5130562},9502:(t,e,o)=>{o.d(e,{z:()=>i.z});var i=o(6778)},6778:(t,e,o)=>{o.d(e,{K:()=>c,z:()=>m});var i=o(7731),n=o(8741),a=o(3245),r=o(9371),l=o(3555),s=o(8844);const c={asset:{version:""}};function d(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){yield Promise.all(t.images.map((o=>(0,i.mG)(this,void 0,void 0,(function*(){if(o.image)return void(o.mimeType!==a.d.GLTEXTURE&&console.error("Image has already been loaded"));const n=yield function(t,e,o){var n;return(0,i.mG)(this,void 0,void 0,(function*(){if(!e.bufferView)return!1;const i=t.bufferViews[e.bufferView];if(void 0===i)return!1;yield o;const a=t.buffers[i.buffer].buffer;if(!a)return!1;const r=new Uint8Array(a,i.byteOffset,i.byteLength);if("undefined"==typeof createImageBitmap||!function(t){const e=137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7],o=255===t[0]&&216===t[1]&&255===t[2];return e||o}(r))return console.error(`Unsupported image type ${null!==(n=e.mimeType)&&void 0!==n?n:""}`),!1;{const t=new Blob([r],{type:e.mimeType});e.image=yield createImageBitmap(t)}return!0}))}(t,o,e);if(n)return;const l=yield function(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){if(void 0===e.uri)return!1;const o=e.mimeType||(0,r.V9)(e.uri);if(e.mimeType=o,"undefined"==typeof createImageBitmap||o!==a.d.JPEG&&o!==a.d.PNG)return console.error(`Unsupported image type ${o}`),!1;if(e.uri.startsWith("data:image")){const t=(0,r.uU)(e.uri);e.image=yield createImageBitmap(new Blob([t],{type:o}))}else{const i=yield fetch(`${(0,r.Lw)(t.path)}${e.uri}`);if(!i.ok)return console.error(yield i.text()),!1;const n=yield i.arrayBuffer();e.image=yield createImageBitmap(new Blob([n],{type:o}))}return!0}))}(t,o);l||console.error(`Was not able to resolve image with uri ${o.uri}`)})))))}))}function m(t){return(0,i.mG)(this,void 0,void 0,(function*(){const e=t.endsWith(".glb"),o=(0,r.Ag)(t),a=yield self.fetch(o);let m,h=c;if(e){const t=yield a.arrayBuffer(),e=new l.Z(t).extractGlbData();h=e.json,m=e.buffers}else h=yield a.json();const p=(0,n.F)(h,o),u=function(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){e?t.buffers[0].buffer=e[0]||[]:yield Promise.all(t.buffers.map((e=>(0,i.mG)(this,void 0,void 0,(function*(){if(e.buffer)console.error("Buffer is already loaded");else if(e.uri)if(e.uri.startsWith("data:"))e.buffer=(0,r.uU)(e.uri);else{const o=yield self.fetch((0,r.Lw)(t.path)+e.uri).then((t=>t.arrayBuffer()));e.buffer=o}else console.error("Buffer can not be loaded. No uri")})))))}))}(p,m),g=d(p,u),_=(0,s.h)(p);return yield Promise.all([u,g,_]),p}))}},9371:(t,e,o)=>{o.d(e,{Ag:()=>n,Lw:()=>a,V9:()=>r,uU:()=>l});var i=o(3245);function n(t){return t.startsWith("/")?`${self.origin}${t}`:t}function a(t){return t.substring(0,t.lastIndexOf("/")+1)}function r(t){if(t.startsWith("data:image"))return t.split(";")[0].split(":")[1];return".png"===t.substring(t.lastIndexOf("."))?i.d.PNG:i.d.JPEG}function l(t){const e=atob(t.split(",")[1]),o=new ArrayBuffer(e.length),i=new Uint8Array(o);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return o}},1278:(t,e,o)=>{var i=o(6208),n=o.n(i),a=o(9476),r=o(9218),l=o(6273),s=o(9178),c=o(9726),d=o(7204),m=o(5095),h=o(7721),p=o(6479),u=o(7256),g=o(4500),_=o(5549),f=o(6392),y=o(5876),b=o(431),x=o(1920),v=o(4653),w=o(7122),z=o(7188),F=o(4411),S=o(7125),C=o(6381),M=o(9502),P=o(7966);!function(t){const e=new u.D(t),o=new g.J(e),i=new F.Z(o),I=new x.B,L=new v.h,k={main:{addNewRasterSets:o.get(_.P.Main,"addNewRasterSets")},labeling:{addNewRasterSets:o.get(_.P.Labeling,"addNewRasterSets")}},A={},j=new d.c,T={},E=new c.P("parser"),O=(0,a.D)((()=>E.reset()),r.Cl),H=()=>{const t=E.atlasPacker.getNewRasterSets();t.size&&t.forEach(((t,e)=>{k.main.addNewRasterSets(e,t),k.labeling.addNewRasterSets(e,t)}))},W={sources:{},collector:E,styleManager:L,syncNewRasterSets:H,debouncedResetCollector:O};i.set("GeoJsonSource",S.T,W);const R={hiddenObjectIds:j,collector:E,metatiles:A,styleManager:L,syncRasterSets:H,resetCollector:O,createImageBitmap:t.createImageBitmap};i.set("ZenithWorker",C.Z,R);const B=(t,e)=>{A[t]=e};o.set("setMetatile",B);const N=new w.U(o);B(l.DL,N),o.set("appendHiddenObjectIds",(t=>{t.forEach((t=>j.add(t)))})),o.set("syncStyle",((...t)=>L.proxySyncStyle(...t))),o.set("prepareAtlas",(e=>new Promise((o=>{(0,m.n)({url:e},((e,i)=>{if(e||0===i.byteLength)o(void 0);else if(t.createImageBitmap){const t=new Blob([i],{type:"image/png"});createImageBitmap(t).then((t=>{o({isBitmap:!0,data:[t],transferable:[t]})}))}else o({isBitmap:!1,data:[i],transferable:[i]})}))})))),o.set("packRasters",(t=>{for(let e=0;e<t.length;e+=3){const o=t[e+2],i={type:p.f.Loaded,isSvg:!1,index:o,key:`loaded-${o}`,name:"",fileName:"",rasters:[{rasterSetIndex:o,rasterIndex:0,w:t[e],h:t[e+1],atlasIndex:0,x:0,y:0,isPacked:!1,anchorX:0,anchorY:0}]};E.atlasPacker.pack(i,[t[e]],1)}const e=E.atlasPacker.getPackedRasters(),o=[];return void 0!==e&&o.push(e.buffer),{packedRasters:e,transferable:o}})),o.set("fetchTrafficTile",(t=>I.fetch(t.coords,t.tileServer,t.tileProtocol,t.regionIds,t.timestamp))),o.set("deleteTrafficTile",(t=>{I.delete(t)})),o.set("abortTrafficTileRequest",(t=>{I.abortRequest(t)}));const D=(0,z.KP)(["db_sublayer","traffic_road_class","traffic_color","traffic_road_z_level"],["Traffic_jams"]);o.set("generateTrafficTile",(({coords:t,pixelRatio:e,styleState:o,styleId:i,sourceId:n})=>{const a=(0,f.gx)(t),r=[],l=[],s=L.getStyle(i);if(!s)return{results:r,transferable:l};const c=I.get(a);if(c){const i=(0,y.E)(E,D,s,o,e,c,t,n);r.push({regionId:1,metatileHash:0,styleId:s.id,collectorOutput:i})}return{results:r,transferable:l}})),o.set("loadFloor",((t,e)=>new Promise((o=>{(0,m.n)({url:`${e}/complexes/${t}?fields=floorGeometries&format=pbf`},((e,i)=>{if(e||0===i.byteLength)return void o({type:"error",errorStatus:e?e.status:0});const a=new(n())(i),r=h.Z.read(a),l=r.tileCoords;T[t]=Object.assign(Object.assign({},r),{tileCoords:[l[0],l[1],l[2],l[2]]}),N.addData((0,s.z)(T[t]));const c={};r.entities.forEach((t=>{t.firmId&&(c[t.firmId]=t.floorIndex)})),o({type:"success",center:r.center,bound:r.bound,defaultFloor:r.defaultFloor,floors:r.floorGeometries.map((({ids:t,name:e})=>({ids:t,name:e}))),buildings:r.buildings.concat(r.hybrids),firmsToFloorIndexMap:c})}))})))),o.set("generateFloor",((t,e,o,i,n,a,r,l,c)=>{const d={tileCoords:T[t].tileCoords,collectorOutput:E.getAccumulatedData(),styleId:0},m=L.getStyle(a);if(!m)return d;let h;return h=c?E.getAccumulatedData():(0,s.y)(m,r,E,T[t],N,e,o,i,n,l),O(),H(),{tileCoords:T[t].tileCoords,collectorOutput:h,transferable:h.transferable,styleId:m.id}})),o.set("generatePersonalPoi",((t,e,o,i,n,a,r,l)=>{const s=L.getStyle(a);if(!s)return;const c=(0,b.p)(E,s,r,A[o],e,i,n,t,l);return O(),H(),{collectorOutput:c,transferable:c.transferable,styleId:s.id}})),o.set("loadModel",((t,e)=>{let o;if(e>=0){const i=L.getStyle(t);if(void 0===i)return Promise.resolve(void 0);const n=i.models[e];o=(0,P.gA)(n.url,i)}else o=E.getDataModelUrl(e);return o?(0,M.z)(o):Promise.resolve(void 0)}))}(self)},8925:(t,e,o)=>{o.d(e,{L:()=>n});var i=o(1777);function n(t){const e=new i.r,{attributes:o,size:n}=t,a={stride:o.id.stride,view:new Uint32Array(o.id.buffer,o.id.offset)},r=[];for(const e in t.attributes)if("id"!==e){const{stride:o,buffer:i,offset:n}=t.attributes[e];r.push({name:e,stride:o,view:new Float32Array(i,n)})}for(let t=0;t<n;t++){const o=a.view[t*a.stride/4],i=a.view[t*a.stride/4+1],n={};for(const e of r){const o=e.view[t*e.stride/4];n[e.name]=Number.isNaN(o)?null:o}e.set(i,o,n)}return e}},9178:(t,e,o)=>{o.d(e,{y:()=>w,z:()=>z});var i=o(7084),n=o(5970),a=o(4922),r=o(7609),l=o(3672),s=o(7204),c=o(143),d=o(9218),m=o(2543),h=o(2097),p=o(4333),u=o(9981),g=o(7188),_=o(8194),f=o(8183),y=o(6273);const b=[[0],[0],[0]],x=[[0],[0],[0]],v=[[0],[0],[0]];function w(t,e,o,i,n,a,c,d,h,_){var f;const{floorGeometries:b,defaultFloor:x,tileCoords:w,entities:z}=i,{tileProps:M}=n,P=(0,u.o1)(c),I=new s.c,L=new s.c(h),k=[],A=Object.keys(M).length;Number.isNaN(d)&&(d=x);const j=b[d],T=(0,m.Yi)(e,g.i4,M,k,g.wz);for(let e=0;e<j.rooms.length;e++){const i=j.rooms[e];for(let t=0;t<A;t++)k[t]=NaN;const n=i.firmIds.length?i.firmIds[0]:i.buildingId,r=(0,l.IL)(n);I.add(r);const s=L.has(r);k[M.id]=r,i.isIsland?F(i,t,T,o,a,s):(S(i,T,t,o,a,s,P),C(i,T,t,o,a,s))}for(let e=0;e<z.length;e++){const i=z[e],s=i.sublayer;if(i.floorIndex!==d)continue;if((0,r.Ty)(s))continue;for(let t=0;t<A;t++)k[t]=NaN;v[0]=[i.coordinates[0]*y.gt],v[1]=[i.coordinates[1]*y.gt];for(let t=0;t<A;t++)k[t]=NaN;k[M.db_sublayer]=s;let c=!1;const h=i.firmId||i.id;if(h){const t=(0,l.IL)(h);c=L.has(t),I.add(t),k[M.id]=t}k[M.selected]=c?1:0,k[M.db_region]=a,(0,r.Ty)(s)||(k[M.db_object_class]=null!==(f=i.humanReadableIconId)&&void 0!==f?f:n.reverseDictionaries.db_object_class[i.iconId]),k[M.db_label]=i.text,k[M.db_label2]=i.text2,k[M.db_icon_priority]=i.priority,k[M.db_label_priority]=i.textPriority;const u=(0,l.IL)(i.floorId);t.layers.forEach((e=>{if("point"!==e.type)return;(0,m.FR)(e.filter,T)&&(0,p.p)(o,t,e,T,n,w,_,v,P,void 0,u)}))}return o.setGeoIds(new Uint32Array(I.toFlatArray())),o.getAccumulatedData()}const z=t=>{const e=new Set,o=new Set,{floorGeometries:i,entities:n}=t;for(let t=0;t<i.length;t++){const{rooms:o}=i[t];for(let t=0;t<o.length;t++){const{sublayer:i,areaSublayer:n,wallSublayer:a}=o[t];e.add(i),a&&e.add(a),e.add(n)}}for(let t=0;t<n.length;t++){const{humanReadableIconId:i,sublayer:a}=n[t];e.add(a),i&&o.add(i)}return{sublayers:e,objectClasses:o}};function F(t,e,o,a,r,s){const{tileProps:c,tileAttrs:h}=o,p=(0,l.IL)(t.floorId);h[c.db_height]=d.o.islandHeight,h[c.db_sublayer]=t.areaSublayer,h[c.selected]=s?1:0,h[c.db_region]=r,e.layers.forEach((r=>{if("polygonExtrusion"!==r.type)return;if((0,m.FR)(r.filter,o))for(let l=0;l<t.area.length;l++){const s=new Uint16Array(t.area[l].slice().buffer);P(s);const c=M(s),d=i(s);b[0].length=0,b[1].length=0,b[2].length=0;for(let t=0;t<d.length;t+=3){for(let e=0;e<3;e++)b[0][e]=c[d[t+e]][0],b[1][e]=c[d[t+e]][1],b[2][e]=1;do{n.p.generate(a,e.id,r,o,b,!1,void 0,void 0,p)}while(a.isOverloaded())}}}))}function S(t,e,o,n,r,s,c){const{tileProps:d,tileAttrs:p}=e,u=(0,l.IL)(t.floorId),g="Floor"===t.sublayer;p[d.db_sublayer]=t.areaSublayer,p[d.selected]=s?1:0,p[d.db_region]=r,o.layers.forEach((r=>{if("polygon"!==r.type)return;if((0,m.FR)(r.filter,e))for(let l=0;l<t.area.length;l++){const s=new Uint16Array(t.area[l].slice().buffer);P(s);const d=M(s),m=[0,0],p=g?(0,f.y)(d):[];if(g){const t=_.Ue();for(let e=0;e<d.length;e++)_.aM(t,d[e]);_.be(m,t)}const y=i(s);b[0].length=0,b[1].length=0,b[2].length=0;for(let t=0;t<y.length;t+=3){for(let e=0;e<3;e++){const o=y[t+e];b[0][e]=d[o][0],b[1][e]=d[o][1],b[2][e]=0,g&&(x[e]=p[o])}do{h.a.generate(n,o,r,e,b,c,void 0,u)}while(n.isOverloaded());if(g)do{a._.generateFloorsBottomFill(n,o.id,b,x,m)}while(n.isOverloaded())}}}))}function C(t,e,o,i,a,r){if(!t.wallSublayer)return;const{tileProps:s,tileAttrs:h}=e,p=(0,l.IL)(t.floorId);h[s.db_height]=d.o.wallHeight,h[s.db_sublayer]=t.wallSublayer,h[s.selected]=r?1:0,h[s.db_region]=a,o.layers.forEach((a=>{if("polygonExtrusion"!==a.type)return;if((0,m.FR)(a.filter,e))for(let r=0;r<t.wallTop.length;r++){const l=new Uint16Array(t.wallTop[r].slice().buffer);P(l);const s=M(l),d=_.Ue();for(let t=0;t<s.length;t++)_.aM(d,s[t]);const m=[0,0];_.be(m,d);const h=s.length;b[0].length=0,b[1].length=0,b[2].length=0;for(let t=0;t<h;t++){const e=(0,c.X)(t,h);b[0][e]=s[t][0],b[1][e]=s[t][1],b[2][e]=1}do{n.p.generate(i,o.id,a,e,b,!1,void 0,m,p)}while(i.isOverloaded())}}))}function M(t){const e=[];for(let o=0;o<t.length/2;o++)e.push([t[2*o],t[2*o+1]]);return e}function P(t){t.forEach(((e,o)=>{t[o]*=y.gt}))}},4193:(t,e,o)=>{o.d(e,{$:()=>g});var i=o(9450),n=o(127),a=o(1678),r=o(3119),l=o(2543),s=o(7188),c=o(4922),d=o(4091),m=o(8183),h=o(6273);const p=[[0],[0],[0]],u=[];function g(t,e,o,g,y,b,x,v){const{matrix:w,offset:z,id:F,selected:S}=y,C=new r.sU(g),M=[];if(!t)return{objects:o.getAccumulatedData(),textures:M};if(1296191066!==C.readU32()||1!==C.readU16())return{objects:o.getAccumulatedData(),textures:[]};C.readU16();const P=C.readU32();for(let t=0;t<P;t++)M.push(C.readU8Vector());const{tileProps:I}=b,L=[],k=Object.keys(I).length;for(let t=0;t<k;t++)L[t]=NaN;if(L[I.db_sublayer]="Building_model",L[I.id]=F,L[I.selected]=S?1:0,L[I.db_region]=x,v.featureAttrs.size>0){const t=Array.from(v.featureAttrs);(0,s.Qy)(b,t)}const A=[],j="number"!=typeof F&&v.get(F.hi,F.lo);if(j)for(const t of v.featureAttrs)v.clearAttrs=!1,A[I[t]]=j[t];else if(!1===v.clearAttrs){v.clearAttrs=!0;for(const t in I)void 0!==A[I[t]]&&(A[I[t]]=void 0)}o.setGeoIds(new Uint32Array([F.lo,F.hi]));const T=C.offset,E=(0,l.Yi)(e,s.i4,I,L,A);return t.layers.forEach((e=>{if("buildingModel"!==e.type)return;(0,l.FR)(e.filter,E)&&(C.offset=T,function(t,e,o,r,l,s,g){const y=l.readU32();for(let b=0;b<y;b++){const y=l.readU32(),b=i.al(l.readF32(),l.readF32(),l.readF32()),x=i.al(l.readF32(),l.readF32(),l.readF32()),v=i.lu(i.Ue(),x,b),w=[];n.Iu(w,s,b),n.bA(w,w,v),w[12]+=g[0],w[13]+=g[1];const z=l.readU16Vector(5),F=l.readU32();for(let i=0;i<F;i++){const i=1===l.readU32()?h.uC:h.Fg,n=l.readU16Vector();do{a.X.processSubmesh(t.id,e,o,r,z,n,i,y,w)}while(r.isOverloaded())}const S=l.readU16Vector();do{a.X.processOuterEdge(t.id,e,o,r,z,S,w)}while(r.isOverloaded());const C=(0,d.qt)(_(z)),M=(0,m.y)(C);for(let e=0;e<C.length-2;e++){for(let t=0;t<3;t++){const o=f(e+t,C.length);p[0][t]=C[o][0],p[1][t]=C[o][1],p[2][t]=0,u[t]=M[o]}do{c._.generateFloorsBottomFill(r,t.id,p,u,a.d,w)}while(r.isOverloaded())}}}(t,e,E,o,C,w,z))})),{objects:o.getAccumulatedData(),textures:M}}function _(t){const e=[];for(let o=0;o<t.length;o+=5)e.push([t[o],t[o+1]]);return e}function f(t,e){return 0===t?0:t%2?(t+1)/2:e-t/2}},431:(t,e,o)=>{o.d(e,{p:()=>u});var i=o(7204),n=o(9450),a=o(8194),r=o(2730),l=o(3672),s=o(6392),c=o(9981),d=o(9073),m=o(2543),h=o(7188);let p=[];function u(t,e,o,u,g,_,f,y,b){var x,v,w;const{tileProps:z,dictionaries:F}=u,S=Object.keys(z).length,C=new i.c(f),M=[],P=(0,m.Yi)(o,h.i4,z,M,h.wz);if(void 0===(null===(x=F.db_sublayer)||void 0===x?void 0:x.s_personal_poi))return t.getAccumulatedData();for(let t=0;t<S;t++)M[t]=NaN;const I=(0,c.o1)(_),L=a.Ue(),k=[];for(const t of y){const e=(0,d.yq)(t.point);a.aM(L,e),k.push(e)}const A=(0,s.x7)(L),j=(0,s.Bs)(A);for(let o=0;o<y.length;o++){const a=y[o],c=n.Ue();(0,s.a2)(c,k[o],j);const d=(0,l.IL)(a.id),h=[[c[0]],[c[1]]];for(let t=0;t<S;t++)M[t]=NaN;M[z.id]=(0,l.IL)(a.id),M[z.db_sublayer]="s_personal_poi",M[z.db_object_class]=null!==(v=a.humanReadableClassId)&&void 0!==v?v:null===(w=u.reverseDictionaries.db_object_class)||void 0===w?void 0:w[a.classId],M[z.db_label]=a.name,M[z.db_icon_priority]=1,M[z.db_label_priority]=0,M[z.selected]=C.has(d)?1:0,M[z.db_region]=g,p=e.layers.filter((t=>(0,m.FR)(t.filter,P)));const _=void 0,f=new i.c;(0,r.PA)(t,e,p,P,u,_,b,A,I,h,f)}return t.getAccumulatedData()}},4575:(t,e,o)=>{o.d(e,{V:()=>C});var i=o(3119),n=o(7204),a=o(9218),r=o(2730),l=o(3672),s=o(9981),c=o(6392),d=o(2543),m=o(7609),h=o(7999),p=o(7188),u=o(6273),g=o(173);const _=[],f=new Int32Array(256);let y;const b=[],x=[],v=[0,0,0,0,0];let w=0,z=0,F=0;const S=[];function C(t,e,o,a,r,l,m,h,u){const{styleState:b,sourceId:v,sourceAttrs:F,tileInfo:S,pixelRatio:C,selectedIds:A,floorsEnabled:j,hoverId:T,generateOnlySelectedPoi:E,generateOnlyHoveredPoi:O,modelsPath:H}=r,{data:W}=l,R=new n.c(A),B=(0,c.VV)(W);if(B.byteLength<8)return a.getAccumulatedData();_.length=0;const N=new i.sU(B);if(1279676242!==N.readU32())return a.getAccumulatedData();const D=N.readU16();if(2!==D&&3!==D)return console.error(`Unsupported tile format version: "${D}"`),a.getAccumulatedData();N.readU16();const{coords:U}=S,Z=(0,s.o1)(C);!function(t){const e=t.u8;let o=t.offset,i=t.u32[o>>2];o+=4,w=i,z=o;for(;i--;)o=2*e[o++]+o,o=e[o++]+o;t.offset=o+(3&-o)}(N),function(t){const e=t.u32[t.offset>>2];t.offset+=4,y=(0,i.DA)(t,Uint8Array,e);const o=(0,i.DA)(t,Uint32Array,e);for(let n=0;n<e;n++){const e=y[n];_[n]=(0,i.bI)(t,o[n],e),f[n]=0}}(N);return function(t,e,o,n,a,r,l,s,c,m,h,u,g,f,y,b,v,z,F,S,C){const A=Array.from(a.featureAttrs);(0,p.Qy)(h,A);const j=w,T=(0,i.DA)(l,Int32Array,j),E=(0,i.Z9)(T),O=(0,i.DA)(l,Uint8Array,E,!0),H=(0,i.DA)(l,Uint8Array,(0,i.Z9)(O),!0),W=(0,i.DA)(l,Uint8Array,E,!0),R=(0,i.DA)(l,Uint8Array,(0,i.Z9)(W),!0),B=(0,i.DA)(l,Uint16Array,E,!0);let N=0,D=0,U=0;for(let i=0;i<j;i++){const p=T[i];if(L(l,h,u),0===i){const t=_[x[1]];r.setGeoIds(t)}for(let i=0;i<p;i++){const i=O[N];i>0&&(M(u,i,H,D,h,t),D+=i);const l=W[N];l>0&&(P(u,l,R,U),U+=l);const p=(0,d.Yi)(n,b,h.tileProps,u,[],C),_=B[N];_>0&&I(t,e,o,p,a,r,_,s,c,m,h,g,f,y,v,z,F,S),N++}}k()}(D,t,e,b,o,a,N,U,Z,R,m,h,u,j,v,F,T,E,O,H,(0,g.O)(U[0]+U[1]+U[2]+1)),a.getAccumulatedData()}function M(t,e,o,i,n,a){for(var r;e--;){const e=o[i++],s=x[e],c=b[e],d=y[s];if(8===d||9===d||19===d||20===d)t[c]=(0,l.Ru)(_[s][f[s]],_[s][f[s]+1]),f[s]+=2;else{const e=_[s][f[s]];switch(c){case n.tileProps.objectLength:case n.tileProps.db_centroid_x:case n.tileProps.db_centroid_y:case n.tileProps.componentDistanceEnd:case n.tileProps.componentDistanceStart:case n.tileProps.previousPointX:case n.tileProps.previousPointY:case n.tileProps.nextPointX:case n.tileProps.nextPointY:t[c]=2===a?e*u.gt:e;break;case n.tileProps.db_label:case n.tileProps.db_label2:t[c]=(0,h.zT)(e);break;default:{const o=n.tilePropsByIndex[c];o&&n.reverseDictionaries[o]?t[c]=null!==(r=n.reverseDictionaries[o][e])&&void 0!==r?r:e:t[c]=e}}f[s]++}}}function P(t,e,o,i){for(;e--;){const e=o[i++];t[b[e]]=NaN}}function I(t,e,o,n,s,c,h,p,u,g,y,b,x,w,z,C,M,P){const{tileProps:I,defaultProps:L}=y,{tileAttrs:k,featureAttrs:j}=n,T=p[3];for(let e=0;e<F;e++){const o=v[e];S[e]=A((0,i.Rz)(_[o],f[o],h),e,t),f[o]=f[o]+h}if(void 0!==I.db_sublayer&&!Number.isNaN(k[I.db_sublayer])&&(0,m.Ty)(k[I.db_sublayer]))return;const E=k[I.id];let O="number"!=typeof E&&g.has(E);C&&(O=!0);let H=!!M;if(!H&&void 0!==z){if("number"==typeof E||!(0,l.v7)(z,E))return;H=!0}k[I.selected]=O?1:0,k[I.hovered]=H?1:0;for(const t in L){const e=L[t];Number.isNaN(k[e.index])&&(k[e.index]=e.value)}if("number"!=typeof E&&x&&k[I.db_hidden_by_plan_building_id]&&T>=Math.floor(a.o.displayStyleZoom)&&(b.add(E),c.addFloorHidingMap(E,k[I.db_hidden_by_plan_building_id])),s.featureAttrs.size>0){const t="number"!=typeof E&&s.get(E.hi,E.lo);if(t)for(const e of s.featureAttrs)s.clearAttrs=!1,j[I[e]]=t[e];else if(!1===s.clearAttrs){s.clearAttrs=!0;for(const t in I)void 0!==j[I[t]]&&(j[I[t]]=void 0)}}const W=o.getLayers(e.id,I,k).filter((t=>(0,d.FR)(t.filter,n)));(0,r.PA)(c,e,W,n,y,T,w,p,u,S,b,C||M,P)}function L(t,e,o){const i=Object.keys(e.tileProps).length,n=t.u8;let a,r,l=z;for(r=1;r<i;r++)o[r]=NaN;for(a=n[l++],r=0;r<a;r++)b[r]=n[l++],x[r]=n[l++];for(a=n[l++],r=0;r<a;r++)v[r]=n[l++];F=a,z=l,k()}function k(){S.length=0}function A(t,e,o){if(2===o&&e<3&&t instanceof Uint16Array)for(let e=0;e<t.length;e++)t[e]*=u.gt;return t}},5876:(t,e,o)=>{o.d(e,{E:()=>c});var i=o(2543),n=o(2730),a=o(7204),r=o(9981),l=o(7188),s=o(6273);function c(t,e,o,c,d,m,h,p){if(!o)return t.getAccumulatedData();const u=h[3],{tileProps:g}=e,_=Object.keys(g).length,f=[],y=(0,r.o1)(d),b=(0,i.Yi)(c,l.i4,g,f,l.wz);for(const r of m.tile){const{color:l=0,geo:c,road:d,normals:m,zLevel:x=0}=r;for(let t=0;t<_;t++)f[t]=NaN;f[g.db_sublayer]="Traffic_jams",f[g.traffic_color]=l,f[g.traffic_road_class]=d,f[g.traffic_road_z_level]=x,f[g.beginningIsCut]=0,f[g.endingIsCut]=0;for(let r=0;r<c.length;r++){const l=c[r],d=m[r],g=[[],[],[],[]];for(let t=0;t<l.length;t++)g[0][t]=l[t][0]*s.gt,g[1][t]=l[t][1]*s.gt,g[2][t]=d[t][0],g[3][t]=d[t][1];const _=o.layers.filter((t=>(0,i.FR)(t.filter,b)));(0,n.PA)(t,o,_,b,e,u,p,h,y,g,new a.c)}}return t.getAccumulatedData()}},8367:(t,e,o)=>{o.d(e,{_:()=>i});const i={1:function(t){let e=0;for(let o=0;o<t.length;o++)e=e+t[o]&255,t[o]=e},2:function(t){let e=0;for(let o=0;o<t.length;o++)e=e+t[o]&65535,t[o]=e},4:function(t){let e=0;for(let o=0;o<t.length;o++)e=e+t[o]>>>0,t[o]=e},8:function(t){let e=0,o=0,i=0;for(let n=0;n<t.length;n+=2)i=o+t[n],o=i>>>0,t[n]=o,e=e+t[n+1]+(i>4294967295?1:0)>>>0,t[n+1]=e}}},3119:(t,e,o)=>{o.d(e,{DA:()=>a,Rz:()=>m,Z9:()=>d,bI:()=>c,sU:()=>n});var i=o(8367);class n{constructor(t){this.offset=0,this.buffer=t,this.u8=new Uint8Array(t),this.u16=new Uint16Array(t),this.u32=new Uint32Array(t),this.s8=new Int8Array(t),this.s16=new Int16Array(t),this.s32=new Int32Array(t),this.f32=new Float32Array(t)}readS8(){return this.s8[this.offset++]}readU16(){const t=this.u16[this.offset>>1];return this.offset+=2,t}readU32(){const t=this.u32[this.offset>>2];return this.offset+=4,t}readF32(){const t=this.f32[this.offset>>2];return this.offset+=4,t}readU8Vector(t=1){const e=this.readU32()*t,o=3&-e,i=this.u8.subarray(this.offset,this.offset+e);return this.offset+=e+o,i}readU16Vector(t=1){const e=this.readU32()*t*2,o=3&-e,i=this.u16.subarray(this.offset>>1,this.offset+e>>1);return this.offset+=e+o,i}}function a(t,e,o,n){const a=e.BYTES_PER_ELEMENT;t.offset+=-t.offset&a-1;const r=new e(t.buffer,t.offset,o);return t.offset+=a*o,n&&i._[a](r),r}function r(t,e,o){t.offset+=7&-t.offset;const n=new Uint32Array(t.buffer,t.offset,2*e);return t.offset+=8*e,o&&i._[8](n),n}function l(t,e,o){t.offset+=3&-t.offset;const i=new Uint32Array(t.buffer,t.offset,e),n=new Float32Array(t.buffer,t.offset,e);let a;if(t.offset+=4*e,o){let t=0;for(a=0;a<e;a++)t=t+i[a]>>>0,n[a]=t/1e3}else for(a=0;a<e;a++)n[a]=i[a]/1e3;return n}function s(t,e,o){t.offset+=3&-t.offset;const i=new Int32Array(t.buffer,t.offset,e),n=new Float32Array(t.buffer,t.offset,e);let a;if(t.offset+=4*e,o){let t=0;for(a=0;a<e;a++)t=t+i[a]>>>0,n[a]=(0|t)/1e3}else for(a=0;a<e;a++)n[a]=i[a]/1e3;return n}function c(t,e,o){switch(o){case 2:case 10:return a(t,Uint8Array,e);case 3:return a(t,Uint8Array,e,!0);case 4:return a(t,Uint16Array,e);case 5:return a(t,Uint16Array,e,!0);case 6:case 25:return a(t,Uint32Array,e);case 7:return a(t,Uint32Array,e,!0);case 8:case 19:return r(t,e);case 9:case 20:return r(t,e,!0);case 11:return function(t,e){let o=t.offset;const i=t.u8,n=t.buffer,a=[];for(;e--;)a.push(0|i[o++]);const r=[];for(;++e<a.length;){let t=a[e];255===t&&(t=i[o++]|i[o++]<<8|i[o++]<<16|0),r.push(new Uint8Array(n,o,t)),o+=t}return t.offset=o,r}(t,e);case 12:return function(t,e){t.offset+=3&-t.offset;let o=t.offset;const i=t.u32,n=t.buffer,a=[];for(let t=0;t<e;t++)a.push(i[o>>2]),o+=4;const r=[];for(let t=0;t<e;t++){const e=a[t];o+=7&-o,r.push(new Uint8Array(n,o,e)),o+=e}return t.offset=o,r}(t,e);case 13:return a(t,Int8Array,e);case 14:return a(t,Int8Array,e,!0);case 15:return a(t,Int16Array,e);case 16:return a(t,Int16Array,e,!0);case 17:return a(t,Int32Array,e);case 18:return a(t,Int32Array,e,!0);case 21:return l(t,e);case 22:return l(t,e,!0);case 23:return s(t,e);case 24:return s(t,e,!0);default:throw new Error("Unknown stream type "+o)}}function d(t){let e=0;for(let o=0;o<t.length;o++)e+=t[o];return e}function m(t,e,o){return new t.constructor(t.buffer,t.byteOffset+e*t.BYTES_PER_ELEMENT,o)}},7688:(t,e,o)=>{o.d(e,{Z:()=>a});var i=o(6392),n=o(5095);class a{constructor(){this.cache=new Map,this.pendingRequests=new Map}fetch({coords:t,tileServer:e,tileSet:o,tileProtocol:a,subdomains:r,tileKey:l,appId:s,lang:c,defaultLang:d,sessionId:m}){return new Promise((h=>{const p=(0,i.rL)(e,o,a,r,t,l,s,c,d,m),u=(0,i.gx)(t),g=(0,n.n)({url:p},((t,e)=>{let o=!1;if(this.pendingRequests.delete(u),void 0!==t||0===e.byteLength)return void 0!==t&&(console.error(t),403===t.status&&(o=!0)),this.cache.set(u,[]),void h({metadata:[],invalidTileKey:o});const n=(0,i.CJ)(e),a=(0,i.xH)(n);this.cache.set(u,n),h({metadata:a,invalidTileKey:o})}));this.pendingRequests.set(u,{xhr:g,resolve:h})}))}get(t){return this.cache.get(t)||[]}delete(t){this.cache.delete(t)}abortRequest(t){const e=this.pendingRequests.get(t);void 0!==e&&(e.xhr.abort(),e.resolve(),this.pendingRequests.delete(t))}destroy(){this.cache.clear(),this.pendingRequests.clear()}}},1920:(t,e,o)=>{o.d(e,{B:()=>l});var i=o(6392),n=o(5095),a=o(2435),r=o(9218);class l{constructor(){this.cache=new Map,this.pendingRequests=new Map}fetch(t,e,o,l,s){return new Promise((c=>{const d=function(t,e,o,i,n){const l=Math.pow(2,t[2])-1,s=t[0],c=(l-t[1]&16777215)*(1<<24)+(16777215&s);return(0,a.XK)(r.nM.url,{protocol:n,host:i,z:String(t[2]),tiles:String(c),regions:e.join(","),time:String(o)})}(t,l,s,e,o),m=(0,i.gx)(t),h=(0,n.L)({url:d},((t,e)=>{if(this.pendingRequests.delete(m),void 0!==t)return 204!==t.status&&console.error(t),this.cache.set(m,void 0),void c();const o=e[0];o?this.cache.set(m,o):this.cache.set(m,void 0),c()}));this.pendingRequests.set(m,{xhr:h,resolve:c})}))}get(t){return this.cache.get(t)}delete(t){this.cache.delete(t)}abortRequest(t){const e=this.pendingRequests.get(t);void 0!==e&&(e.xhr.abort(),e.resolve(),this.pendingRequests.delete(t))}}},2205:()=>{setTimeout((()=>{if("__mapglPlugins"in window)for(const t in window.__mapglPlugins)window.mapgl[t]=window.__mapglPlugins[t]}),0)},7721:(t,e)=>{var o=e.Z={};o.read=function(t,e){return t.readFields(o._readField,{id:"",name:"",address:"",type:0,regionId:0,branchId:"",branchCount:0,buildings:[],hull:[],tileCoords:[],center:[],centroid:[],scaleFactor:0,viewAngle:0,bound:null,floorCount:0,defaultFloor:0,floorNames:[],entities:[],floorGeometries:[],outdoors:[],metaRubrics:[],version:0,hybrids:[]},e)},o._readField=function(t,e,i){1===t?e.id=i.readString():2===t?e.name=i.readString():3===t?e.address=i.readString():4===t?e.type=i.readVarint():5===t?e.regionId=i.readVarint():6===t?e.branchId=i.readString():7===t?e.branchCount=i.readVarint():8===t?e.buildings.push(i.readString()):9===t?i.readPackedSVarint(e.hull):10===t?i.readPackedDouble(e.tileCoords):11===t?i.readPackedSVarint(e.center):12===t?i.readPackedDouble(e.centroid):13===t?e.scaleFactor=i.readDouble():14===t?e.viewAngle=i.readDouble():15===t?e.bound=o.Bound.read(i,i.readVarint()+i.pos):16===t?e.floorCount=i.readVarint():17===t?e.defaultFloor=i.readVarint():18===t?e.floorNames.push(i.readString()):19===t?e.entities.push(o.Entity.read(i,i.readVarint()+i.pos)):20===t?e.floorGeometries.push(o.Floor.read(i,i.readVarint()+i.pos)):21===t?e.outdoors.push(o.OutdoorObject.read(i,i.readVarint()+i.pos)):22===t?e.metaRubrics.push(o.Metarubric.read(i,i.readVarint()+i.pos)):23===t?e.version=i.readVarint():24===t&&e.hybrids.push(i.readString())},o.write=function(t,e){if(t.id&&e.writeStringField(1,t.id),t.name&&e.writeStringField(2,t.name),t.address&&e.writeStringField(3,t.address),t.type&&e.writeVarintField(4,t.type),t.regionId&&e.writeVarintField(5,t.regionId),t.branchId&&e.writeStringField(6,t.branchId),t.branchCount&&e.writeVarintField(7,t.branchCount),t.buildings)for(var i=0;i<t.buildings.length;i++)e.writeStringField(8,t.buildings[i]);if(t.hull&&e.writePackedSVarint(9,t.hull),t.tileCoords&&e.writePackedDouble(10,t.tileCoords),t.center&&e.writePackedSVarint(11,t.center),t.centroid&&e.writePackedDouble(12,t.centroid),t.scaleFactor&&e.writeDoubleField(13,t.scaleFactor),t.viewAngle&&e.writeDoubleField(14,t.viewAngle),t.bound&&e.writeMessage(15,o.Bound.write,t.bound),t.floorCount&&e.writeVarintField(16,t.floorCount),t.defaultFloor&&e.writeVarintField(17,t.defaultFloor),t.floorNames)for(i=0;i<t.floorNames.length;i++)e.writeStringField(18,t.floorNames[i]);if(t.entities)for(i=0;i<t.entities.length;i++)e.writeMessage(19,o.Entity.write,t.entities[i]);if(t.floorGeometries)for(i=0;i<t.floorGeometries.length;i++)e.writeMessage(20,o.Floor.write,t.floorGeometries[i]);if(t.outdoors)for(i=0;i<t.outdoors.length;i++)e.writeMessage(21,o.OutdoorObject.write,t.outdoors[i]);if(t.metaRubrics)for(i=0;i<t.metaRubrics.length;i++)e.writeMessage(22,o.Metarubric.write,t.metaRubrics[i]);if(t.version&&e.writeVarintField(23,t.version),t.hybrids)for(i=0;i<t.hybrids.length;i++)e.writeStringField(24,t.hybrids[i])},o.ComplexType={mall:{value:0,options:{}},other:{value:1,options:{}},office:{value:2,options:{}}},o.Metarubric={},o.Metarubric.read=function(t,e){return t.readFields(o.Metarubric._readField,{id:"",orgCount:0},e)},o.Metarubric._readField=function(t,e,o){1===t?e.id=o.readString():2===t&&(e.orgCount=o.readVarint())},o.Metarubric.write=function(t,e){t.id&&e.writeStringField(1,t.id),t.orgCount&&e.writeVarintField(2,t.orgCount)},o.Bound={},o.Bound.read=function(t,e){return t.readFields(o.Bound._readField,{min:[],max:[]},e)},o.Bound._readField=function(t,e,o){1===t?o.readPackedSVarint(e.min):2===t&&o.readPackedSVarint(e.max)},o.Bound.write=function(t,e){t.min&&e.writePackedSVarint(1,t.min),t.max&&e.writePackedSVarint(2,t.max)},o.Entity={},o.Entity.read=function(t,e){return t.readFields(o.Entity._readField,{id:"",sublayer:"",coordinates:[],iconId:0,areaId:0,firmId:"",floorIndex:0,floorName:"",text:"",layer:"",priority:0,textPriority:0,type:0,text2:"",humanReadableIconId:"",floorId:"",buildingId:""},e)},o.Entity._readField=function(t,e,o){1===t?e.id=o.readString():2===t?e.sublayer=o.readString():3===t?o.readPackedVarint(e.coordinates):4===t?e.iconId=o.readVarint():5===t?e.areaId=o.readVarint():6===t?e.firmId=o.readString():7===t?e.floorIndex=o.readVarint():8===t?e.floorName=o.readString():9===t?e.text=o.readString():10===t?e.layer=o.readString():11===t?e.priority=o.readVarint(!0):12===t?e.textPriority=o.readVarint(!0):13===t?e.type=o.readVarint():14===t?e.text2=o.readString():15===t?e.humanReadableIconId=o.readString():16===t?e.floorId=o.readString():17===t&&(e.buildingId=o.readString())},o.Entity.write=function(t,e){t.id&&e.writeStringField(1,t.id),t.sublayer&&e.writeStringField(2,t.sublayer),t.coordinates&&e.writePackedVarint(3,t.coordinates),t.iconId&&e.writeVarintField(4,t.iconId),t.areaId&&e.writeVarintField(5,t.areaId),t.firmId&&e.writeStringField(6,t.firmId),t.floorIndex&&e.writeVarintField(7,t.floorIndex),t.floorName&&e.writeStringField(8,t.floorName),t.text&&e.writeStringField(9,t.text),t.layer&&e.writeStringField(10,t.layer),t.priority&&e.writeVarintField(11,t.priority),t.textPriority&&e.writeVarintField(12,t.textPriority),t.type&&e.writeVarintField(13,t.type),t.text2&&e.writeStringField(14,t.text2),t.humanReadableIconId&&e.writeStringField(15,t.humanReadableIconId),t.floorId&&e.writeStringField(16,t.floorId),t.buildingId&&e.writeStringField(17,t.buildingId)},o.Floor={},o.Floor.read=function(t,e){return t.readFields(o.Floor._readField,{name:"",rooms:[],ids:[]},e)},o.Floor._readField=function(t,e,i){1===t?e.name=i.readString():2===t?e.rooms.push(o.Room.read(i,i.readVarint()+i.pos)):3===t&&e.ids.push(i.readString())},o.Floor.write=function(t,e){if(t.name&&e.writeStringField(1,t.name),t.rooms)for(var i=0;i<t.rooms.length;i++)e.writeMessage(2,o.Room.write,t.rooms[i]);if(t.ids)for(i=0;i<t.ids.length;i++)e.writeStringField(3,t.ids[i])},o.Room={},o.Room.read=function(t,e){return t.readFields(o.Room._readField,{id:0,type:0,sublayer:"",isIsland:!1,firmIds:[],area:[],wallSide:[],wallTop:[],areaSublayer:"",wallSublayer:"",floorId:"",buildingId:""},e)},o.Room._readField=function(t,e,o){1===t?e.id=o.readVarint():2===t?e.type=o.readVarint():3===t?e.sublayer=o.readString():4===t?e.isIsland=o.readBoolean():5===t?e.firmIds.push(o.readString()):6===t?e.area.push(o.readBytes()):7===t?e.wallSide.push(o.readBytes()):8===t?e.wallTop.push(o.readBytes()):9===t?e.areaSublayer=o.readString():10===t?e.wallSublayer=o.readString():11===t?e.floorId=o.readString():12===t&&(e.buildingId=o.readString())},o.Room.write=function(t,e){if(t.id&&e.writeVarintField(1,t.id),t.type&&e.writeVarintField(2,t.type),t.sublayer&&e.writeStringField(3,t.sublayer),t.isIsland&&e.writeBooleanField(4,t.isIsland),t.firmIds)for(var o=0;o<t.firmIds.length;o++)e.writeStringField(5,t.firmIds[o]);if(t.area)for(o=0;o<t.area.length;o++)e.writeBytesField(6,t.area[o]);if(t.wallSide)for(o=0;o<t.wallSide.length;o++)e.writeBytesField(7,t.wallSide[o]);if(t.wallTop)for(o=0;o<t.wallTop.length;o++)e.writeBytesField(8,t.wallTop[o]);t.areaSublayer&&e.writeStringField(9,t.areaSublayer),t.wallSublayer&&e.writeStringField(10,t.wallSublayer),t.floorId&&e.writeStringField(11,t.floorId),t.buildingId&&e.writeStringField(12,t.buildingId)},o.OutdoorObject={},o.OutdoorObject.read=function(t,e){return t.readFields(o.OutdoorObject._readField,{type:"",vertices:[],width:0},e)},o.OutdoorObject._readField=function(t,e,o){1===t?e.type=o.readString():2===t?e.vertices.push(o.readBytes()):3===t&&(e.width=o.readDouble())},o.OutdoorObject.write=function(t,e){if(t.type&&e.writeStringField(1,t.type),t.vertices)for(var o=0;o<t.vertices.length;o++)e.writeBytesField(2,t.vertices[o]);t.width&&e.writeDoubleField(3,t.width)}},9748:(t,e)=>{var o=e.w={};o.read=function(t,e){return t.readFields(o._readField,{tiles:[]},e)},o._readField=function(t,e,i){1===t&&e.tiles.push(o.Tile.read(i,i.readVarint()+i.pos))},o.write=function(t,e){if(t.tiles)for(var i=0;i<t.tiles.length;i++)e.writeMessage(1,o.Tile.write,t.tiles[i])},o.Tile={},o.Tile.read=function(t,e){return t.readFields(o.Tile._readField,{x:0,y:0,zoom:0},e)},o.Tile._readField=function(t,e,o){1===t?e.x=o.readVarint():2===t?e.y=o.readVarint():3===t&&(e.zoom=o.readVarint())},o.Tile.write=function(t,e){t.x&&e.writeVarintField(1,t.x),t.y&&e.writeVarintField(2,t.y),t.zoom&&e.writeVarintField(3,t.zoom)};var i=e.F={};i.read=function(t,e){return t.readFields(i._readField,{tileGroups:[]},e)},i._readField=function(t,e,o){1===t&&e.tileGroups.push(i.TileGroup.read(o,o.readVarint()+o.pos))},i.write=function(t,e){if(t.tileGroups)for(var o=0;o<t.tileGroups.length;o++)e.writeMessage(1,i.TileGroup.write,t.tileGroups[o])},i.TileGroup={},i.TileGroup.read=function(t,e){return t.readFields(i.TileGroup._readField,{x:0,y:0,zoom:0,tiles:[]},e)},i.TileGroup._readField=function(t,e,o){1===t?e.x=o.readVarint():2===t?e.y=o.readVarint():3===t?e.zoom=o.readVarint():4===t&&e.tiles.push(i.TileGroup.Tile.read(o,o.readVarint()+o.pos))},i.TileGroup.write=function(t,e){if(t.x&&e.writeVarintField(1,t.x),t.y&&e.writeVarintField(2,t.y),t.zoom&&e.writeVarintField(3,t.zoom),t.tiles)for(var o=0;o<t.tiles.length;o++)e.writeMessage(4,i.TileGroup.Tile.write,t.tiles[o])},i.TileGroup.Tile={},i.TileGroup.Tile.read=function(t,e){return t.readFields(i.TileGroup.Tile._readField,{regionId:0,hash:null,data:null},e)},i.TileGroup.Tile._readField=function(t,e,o){1===t?e.regionId=o.readVarint():2===t?e.hash=o.readBytes():3===t&&(e.data=o.readBytes())},i.TileGroup.Tile.write=function(t,e){t.regionId&&e.writeVarintField(1,t.regionId),t.hash&&e.writeBytesField(2,t.hash),t.data&&e.writeBytesField(3,t.data)}},9899:(t,e,o)=>{o.d(e,{Z:()=>i});const i=n;function n(t,e,o){o=o||{},this.w=t||64,this.h=e||64,this.autoResize=!!o.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function a(t,e,o){this.x=0,this.y=t,this.w=this.free=e,this.h=o}function r(t,e,o,i,n,a,r){this.id=t,this.x=e,this.y=o,this.w=i,this.h=n,this.maxw=a||i,this.maxh=r||n,this.refcount=0}n.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var o,i,n,a,r=[],l=0;l<t.length;l++)if(o=t[l].w||t[l].width,i=t[l].h||t[l].height,n=t[l].id,o&&i){if(!(a=this.packOne(o,i,n)))continue;e.inPlace&&(t[l].x=a.x,t[l].y=a.y,t[l].id=a.id),r.push(a)}return this.shrink(),r},n.prototype.packOne=function(t,e,o){var i,n,r,l,s,c,d,m,h={freebin:-1,shelf:-1,waste:1/0},p=0;if("string"==typeof o||"number"==typeof o){if(i=this.getBin(o))return this.ref(i),i;"number"==typeof o&&(this.maxId=Math.max(o,this.maxId))}else o=++this.maxId;for(l=0;l<this.freebins.length;l++){if(e===(i=this.freebins[l]).maxh&&t===i.maxw)return this.allocFreebin(l,t,e,o);e>i.maxh||t>i.maxw||e<=i.maxh&&t<=i.maxw&&(r=i.maxw*i.maxh-t*e)<h.waste&&(h.waste=r,h.freebin=l)}for(l=0;l<this.shelves.length;l++)if(p+=(n=this.shelves[l]).h,!(t>n.free)){if(e===n.h)return this.allocShelf(l,t,e,o);e>n.h||e<n.h&&(r=(n.h-e)*t)<h.waste&&(h.freebin=-1,h.waste=r,h.shelf=l)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,e,o):-1!==h.shelf?this.allocShelf(h.shelf,t,e,o):e<=this.h-p&&t<=this.w?(n=new a(p,this.w,e),this.allocShelf(this.shelves.push(n)-1,t,e,o)):this.autoResize?(s=c=this.h,((d=m=this.w)<=s||t>d)&&(m=2*Math.max(t,d)),(s<d||e>s)&&(c=2*Math.max(e,s)),this.resize(m,c),this.packOne(t,e,o)):null},n.prototype.allocFreebin=function(t,e,o,i){var n=this.freebins.splice(t,1)[0];return n.id=i,n.w=e,n.h=o,n.refcount=0,this.bins[i]=n,this.ref(n),n},n.prototype.allocShelf=function(t,e,o,i){var n=this.shelves[t].alloc(e,o,i);return this.bins[i]=n,this.ref(n),n},n.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,o=0;o<this.shelves.length;o++){var i=this.shelves[o];e+=i.h,t=Math.max(i.w-i.free,t)}this.resize(t,e)}},n.prototype.getBin=function(t){return this.bins[t]},n.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},n.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},n.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},n.prototype.resize=function(t,e){this.w=t,this.h=e;for(var o=0;o<this.shelves.length;o++)this.shelves[o].resize(t);return!0},a.prototype.alloc=function(t,e,o){if(t>this.free||e>this.h)return null;var i=this.x;return this.x+=t,this.free-=t,new r(o,i,this.y,t,e,t,this.h)},a.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0}}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={id:i,exports:{}};return t[i].call(a.exports,a,a.exports,o),a.exports}o.m=t,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nc=void 0;o(8581)})();