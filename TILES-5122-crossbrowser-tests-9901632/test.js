(()=>{"use strict";var e={9958:e=>{var t,o,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}}();var s,l=[],u=!1,c=-1;function m(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=a(m);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];l.push(new h(e,t)),1!==l.length||u||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},1973:(e,t,o)=>{var n=o(9958);!function(){function t(e){e=e||{},"undefined"!=typeof performance&&performance.now?this.time=performance.now.bind(performance):this.time=void 0!==n?this._serverTime:Date.now.bind(Date),this.reset(),this.update()}function o(e){this.name=e,this.sample=[],this.sampleLimit=1/0,this._sampleIndex=0,this._sampleLength=0,this.max=null,this.min=null}t.ROUND_FACTOR=1e3,t.round=function(e){return Math.round(e*t.ROUND_FACTOR)/t.ROUND_FACTOR},t.prototype.add=function(e,t){this._getCounter(e).add(t)},t.prototype.get=function(e){return void 0===e?this._getAll():this._getCounter(e)},t.prototype.reset=function(){this._counters={},this._frameStartTime=this._previousFrameTime=this._createTime=this.time(),this._frames=0},t.prototype.frameStart=function(){this._frameStartTime=this.time()},t.prototype.frameEnd=function(){var e=this.time();if(this.add("ms",e-this._frameStartTime),this._frames++,e>this._previousFrameTime+1e3){var t=Math.round(1e3*this._frames/(e-this._previousFrameTime));this.add("fps",t),this._frames=0,this._previousFrameTime=e,this.update()}},t.prototype.update=function(){this._dom&&(this._element.innerHTML=this.getHtmlText())},t.prototype.getHtmlElement=function(){return this._dom||(this._dom=!0,this._element=document.createElement("div")),this._element},t.prototype.getHtmlText=function(){return this.getText().replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;")},t.prototype.getText=function(){var e=this._getAll(),t="Elapsed time: "+Math.round(e.elapsedTime/1e3)+"s";if(e.counters)for(var o in t+="\nCounters:",e.counters)t+="\n\t"+o+": \n\t\tlength: "+e.counters[o].length+"\n\t\tlast: "+e.counters[o].last+"\n\t\tmean: "+e.counters[o].mean+"\n\t\tmin: "+e.counters[o].min+"\n\t\tmax: "+e.counters[o].max+"\n\t\tdeviation: "+e.counters[o].deviation;return t},t.prototype.getElapsedTime=function(){return this.time()-this._createTime},t.prototype._getAll=function(){var e={elapsedTime:this.getElapsedTime(),counter:{}};if(Object.keys(this._counters).length)for(var t in e.counters={},this._counters)e.counters[t]=this._counters[t].get();return e},t.prototype._getCounter=function(e){return this._counters[e]||this._createCounter(e),this._counters[e]},t.prototype._createCounter=function(e){this._counters[e]=new o(e)},t.prototype._serverTime=function(){var e=n.hrtime();return 1e3*(e[0]+e[1]/1e9)},o.prototype.add=function(e){this.sample[this._sampleIndex]=e,this._sampleLength++,this._sampleIndex=this._sampleLength%this.sampleLimit,(null===this.min||this.min>e)&&(this.min=e),(null===this.max||this.max<e)&&(this.max=e)},o.prototype.get=function(){var e=this.getMean();return{last:this.getLast(),mean:e,min:this.getMin(),max:this.getMax(),deviation:this.getDeviation(e),length:this.getLength()}},o.prototype.getLength=function(){return this._sampleLength},o.prototype.getMean=function(){for(var e=this.sample,o=e[0],n=1;n<e.length;n++)o+=e[n];return o/=e.length,t.round(o)},o.prototype.getMin=function(){return t.round(this.min)},o.prototype.getMax=function(){return t.round(this.max)},o.prototype.getLast=function(e){return e=e||0,e=(this._sampleLength-1-e)%this.sampleLimit,t.round(this.sample[e])},o.prototype.getDeviation=function(e){e=void 0!==e?e:this.getMean();for(var o=this.sample,n=0,r=0;r<o.length;r++)n+=Math.pow(o[r]-e,2);return n/=o.length,t.round(Math.sqrt(n))},o.prototype.reset=function(){this.sample=[],this._sampleIndex=0,this._sampleLength=0,this.min=null,this.max=null},e.exports&&(e.exports=t),"undefined"!=typeof window&&(window.Stats=t)}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=o(1973),t=o.n(e);let n="undefined"!=typeof Float64Array?Float64Array:Array;Math.random;Math.PI;function r(){let e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e}!function(){let e=r()}();function i(e,t,o){return e[0]=o[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=o[2],e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}Math.pow(2,34);function a(){let e=new n(2);return e[0]=0,e[1]=0,e}function s(e,t){let o=new n(2);return o[0]=e,o[1]=t,o}!function(){let e=a()}();const l=Math.pow(2,32);Math.pow(2,20),Math.pow(2,15),Math.pow(2,16);function u(e,t){return{min:e||s(1/0,1/0),max:t||s(-1/0,-1/0)}}Math.PI,i([],[-1,-1,0],[2,2,1]),i([],[.5,.5,0],[.5,.5,1]);u([-l/2,-l/2],[l/2,l/2]);a(),a();r(),r();function c(){const e={};return location.search.slice(1).split("&").map((e=>e.split("="))).forEach((t=>{e[t[0]]=t[1]})),e}const m=document.getElementById("map"),d=c(),h=function(e){const t=c();if(void 0!==t.lng&&void 0!==t.lat&&(e.center=[parseFloat(t.lng),parseFloat(t.lat)]),void 0!==t.zoom&&(e.zoom=parseFloat(t.zoom)),void 0!==t.styleZoom&&(e.styleZoom=parseFloat(t.styleZoom)),void 0!==t.rotation&&(e.rotation=parseFloat(t.rotation)),void 0!==t.touchRotationThreshold&&(e.touchRotationThreshold=parseFloat(t.touchRotationThreshold)),void 0!==t.key&&(e.key=t.key),void 0!==t.pitch&&(e.pitch=parseFloat(t.pitch)),void 0!==t.styleId&&(e.style=t.styleId),void 0!==t.styleServer&&(e.styleServer=decodeURIComponent(t.styleServer)),void 0!==t.tileServer&&(e.tileServer=decodeURIComponent(t.tileServer)),void 0!==t.tileProtocol&&(e.tileProtocol=t.tileProtocol),void 0!==t.tileSet&&(e.tileSet=t.tileSet),"comPoiSeed"in t&&!Number.isNaN(parseFloat(t.comPoiSeed))&&(e.commercialPoiRandomSeed=Number(t.comPoiSeed)),"reliefScale"in t&&(e.reliefScale=Number(t.reliefScale)),e.dem="dem"in t,e.satellite="satellite"in t,e.rampPreset=t.rampPreset,e.shading=Number(t.shading),void 0!==t.commercialTileSet&&(e.commercialTileSet=t.commercialTileSet),void 0!==t.defaultBackgroundColor&&(e.defaultBackgroundColor="#"+t.defaultBackgroundColor),void 0!==t.trafficProtocol&&(e.trafficProtocol=t.trafficProtocol),void 0!==t.trafficServer&&(e.trafficServer=t.trafficServer),void 0!==t.lang&&(e.lang=t.lang),void 0!==t.defaultLang&&(e.tileServerDefaultLang=t.defaultLang),void 0!==t.floorsUrl&&(e.floorsUrl=decodeURIComponent(t.floorsUrl)),"disableRotation"in t&&(e.disableRotationByUserInteraction=!0),"disablePitch"in t&&(e.disablePitchByUserInteraction=!0),"keepCenterWhileUserZoomRotate"in t&&(e.keepCenterWhileUserZoomRotate=!0),"styleServer"in t&&(e.styleServer=decodeURIComponent(t.styleServer)),"preserveDrawingBuffer"in t&&(e.preserveDrawingBuffer=!0),"maxPitch"in t&&(e.maxPitch=Number(t.maxPitch)),"webglVersion"in t){const o=Number(t.webglVersion);1!==o&&2!==o||(e.webglVersion=o)}if(e.mobileSdkMode="mobileSdkMode"in t,e.dem="dem"in t,e.satellite="satellite"in t,e.rampPreset=t.rampPreset,e.shading=Number(t.shading),"enableTrackResize"in t&&(e.enableTrackResize=t.enableTrackResize),void 0!==t.m){const o=decodeURIComponent(t.m).split("/"),n=o[0].split(",");e.center=[parseFloat(n[0]),parseFloat(n[1])],e.zoom=parseFloat(o[1]);for(let t=2;t<=4;t+=2){const n=o[t];if(void 0!==n){const r=parseFloat(o[t+1]);"p"===n?e.pitch=r:"r"===n&&(e.rotation=r)}}}return e}({center:[82.920412,55.030111],zoom:11,minZoom:2,key:"4970330e-7f1c-4921-808c-0eb7c4e63001"}),p=window.map=new mapgl._J.Map(m,h);window.addEventListener("resize",(()=>p.invalidateSize()));const f=new(t()),g=f.getHtmlElement();g.style.position="absolute",g.style.left="0",g.style.top="0",document.body.appendChild(g);const v=()=>f.frameStart(),y=()=>f.frameEnd(),T={common:[x(11,{animate:!1}),x(16,4e3),x(15,200),x(14,0),M(5e3)],memory:[M(3e3),w(),x(17),S([82.90849685668945,54.98963080619362],{duration:2500},3e3),x(14,2e3),S([82.93664932250978,55.01257157027201],1e3),x(17,{duration:1e3},2e3),S([82.91759490966797,55.03353169388017],{duration:2e3},3e3),x(11,{duration:1e3},2e3),S([82.99346923828126,54.990123235010564],1e3),x(14,2e3),S([83.05990219116212,54.961601652754766],{duration:1e3},1500),S([83.0900287628174,54.87082857361671],{duration:3e3},4e3),x(17,2e3),x(11,2e3),S([82.96875000000001,55.02310220421264],1e3),x(17,2e3),S([82.90557861328126,55.032547895706465],{duration:5e3},6e3),x(14,2e3),S([82.86300659179689,54.98362268811953],{duration:3e3},3500),x(17),S([82.89753198623659,54.979657822639815],{duration:3e3},3500),b()],beauty:[M(3e3),x(18,{duration:3e3},4e3),S([82.94197082519533,55.01454012325133],{duration:4e4},41e3),S([82.91227340698244,55.041401209743334],{duration:3e4},31e3),()=>{setTimeout((()=>{_(d.test)}),0)}],lemesos:[S([33.00456047058106,34.671123309195046],{animate:!1},0),x(17,5e3),w(),S([33.06970596313477,34.70083628588871],{duration:25e3},27e3),S([33.00456047058106,34.671123309195046],{duration:25e3},27e3),b()],perf:[M(3e3),x(18,4e3),w(),S([82.94197082519533,55.01454012325133],{duration:4e4},41e3),S([82.91227340698244,55.041401209743334],{duration:3e4},31e3),b()],moscow:[S([37.6816,55.75346],{animate:!1},0),x(11,5e3),w(),S([37.6016,55.77346],{duration:2500},3e3),x(13,2e3),S([37.6816,55.75346],1e3),x(17,{duration:1e3},2e3),S([37.6816,55.75346],{duration:2e3},3e3),x(15,{duration:1e3},2e3),S([37.6816,55.75346],1e3),x(14,2e3),S([37.6216,55.55346],{duration:1e3},1500),S([37.7216,55.85346],{duration:2e3},3e3),x(17,2e3),x(9,2e3),S([37.5216,55.55346],{duration:1e3},1500),S([38.5216,55.85346],{duration:3e3},4e3),x(11,2e3),S([37.5816,55.85346],{duration:4e3},5e3),S([37.9016,55.55346],{duration:4e3},5e3),x(14,2e3),S([37.4816,55.75346],{duration:2500},3500),x(16,2e3),S([37.61388,55.75158],{duration:3e3},3500),S([37.60235,55.75438],{duration:3e3},3500),x(17,2e3),S([37.601692,55.744965],{duration:2e3},3500),S([37.58532,55.746361],{duration:2e3},3500),b()]};function _(e){const t=T[e];if(!t)return void console.log('Test "'+e+'" not found');console.group('Start test case: "'+e+'"');let o=Promise.resolve();return t.forEach((e=>{o=o.then((t=>e(t)))})),o.then((()=>{console.log("End of test case!"),console.groupEnd()})),o}function w(){return()=>{console.log("Record"),p.on("framestart",v),p.on("frameend",y),f.reset()}}function b(){return()=>{console.log("Stop record"),p.off("framestart",v),p.off("frameend",y)}}function S(e,t,o){"object"!=typeof t&&(o=t);const n=null!=o?o:3e3;return()=>(console.log("Set center to "+e.join(", ")),p.setCenter(e,t),M(n)())}function x(e,t,o){"object"!=typeof t&&(o=t);const n=null!=o?o:3e3;return()=>(console.log("Set zoom to "+e),p.setZoom(e,t),M(n)())}function M(e){return t=>new Promise((o=>{console.log("Wait "+e+"ms"),setTimeout((()=>o(t)),e)}))}_(d.test)})()})();