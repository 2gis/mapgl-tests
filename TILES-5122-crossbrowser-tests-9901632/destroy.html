<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Destroy</title>
        <style>
            html,
            body,
            #map1 {
                margin: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <div style="position: absolute; top: 50px; left: 50px;">
            <button id="init1">INIT 1</button>
            <button id="destroy1">DESTROY 1</button>
        </div>
        <div id="map1"></div>

        <div style="position: absolute; top: 50px; left: 350px;">
            <button id="init2">INIT 2</button>
            <button id="destroy2">DESTROY 2</button>
            <div id="map2" style="width: 300px; height: 300px;"></div>
        </div>

        <script src="jakarta.js"></script>
        <script>
            let map1 = new J.Map('map1', {
                center: [30.32763, 59.92393],
                zoom: 14.5,
            });
            let map2;

            document.getElementById('init1').addEventListener('click', () => {
                if (!map1) {
                    map1 = new J.Map('map1', {
                        center: [30.32763, 59.92393],
                        zoom: 14.5,
                    });
                }
            });

            document.getElementById('destroy1').addEventListener('click', () => {
                if (map1) {
                    map1.destroy();
                }
                map1 = undefined;
            });

            document.getElementById('init2').addEventListener('click', () => {
                if (!map2) {
                    map2 = new J.Map('map2', {
                        center: [30.32763, 59.92393],
                        zoom: 11,
                    });
                }
            });

            document.getElementById('destroy2').addEventListener('click', () => {
                if (map2) {
                    map2.destroy();
                }
                map2 = undefined;
            });
        </script>
    </body>
</html>
